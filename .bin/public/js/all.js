(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function about(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/documentation/about.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_debug.unshift(new jade.DebugItem( 0, "views/documentation/about.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/documentation/about.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 15, "views/documentation/about.jade" ));
buf.push("<h1 id=\"why-taunus-\">Why Taunus?</h1>\n<p>Taunus focuses on delivering a progressively enhanced experience to the end-user, while providing <em>a reasonable development experience</em> as well. <strong>Taunus prioritizes content</strong>. It uses server-side rendering to get content to your humans as fast as possible, and it uses client-side rendering to improve their experience.</p>\n<p>While it focuses on progressive enhancement, <strong><a href=\"http://ponyfoo.com/articles/adjusting-ux-for-humans\">usability</a> and performance are both core concerns</strong> for Taunus. Incidentally, focusing on progressive enhancement also improves both of these. Usability is improved because the experience is gradually improved, meaning that if somewhere along the line a feature is missing, the component is <strong>still expected to work</strong>.</p>\n<p>For example, a progressively enhanced site uses plain-old links to navigate from one view to another, and then adds a <code>click</code> event handler that blocks navigation and issues an AJAX request instead. If JavaScript fails to load, perhaps the experience might stay a little bit worse, but that&#39;s okay, because we acknowledge that <strong>our sites don&#39;t need to look and behave the same on every browser</strong>. Similarly, <a href=\"http://ponyfoo.com/articles/critical-path-performance-optimization\">performance is greatly enhanced</a> by delivering content to the human as fast as possible, and then adding functionality on top of that.</p>\n<p>With progressive enhancement, if the functionality never gets there because a JavaScript resource failed to load because the network failed <em>(not uncommon in the mobile era)</em> or because the user blocked JavaScript, your application will still work!</p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 16, "views/documentation/about.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 28, "views/documentation/about.jade" ));
buf.push("<h1 id=\"why-not-other-frameworks-\">Why Not Other Frameworks?</h1>\n<p>Many other frameworks weren&#39;t designed with progressive enhancement, or even shared-rendering in mind. Content isn&#39;t prioritized, and humans are expected to <a href=\"http://ponyfoo.com/articles/stop-breaking-the-web\">download most of a web page before they can see any digestible content</a>. While Google is going to resolve the SEO issues with dedicated client-side rendering soon, that won&#39;t solve all your problems. Google isn&#39;t the only web crawler operator out there, and it might be a while before social media link crawlers catch up with them. Even if crawlers are not an issue, being able to provide the fastest possible experience is a big problem to resolve.</p>\n<p>Lately, many mature open-source frameworks started dropping support for older browsers. This is necessary because of the way they&#39;re architected, where the developer is put first. <strong>Taunus is <a href=\"https://twitter.com/hashtag/humanfirst\">#humanfirst</a></strong>, meaning that it concedes that humans are more important than the developers building their applications.</p>\n<p>Progressively enhanced applications are always going to have great browser support because of the way they&#39;re architected. As the name implies, a baseline is established where we deliver the core experience to the user <em>(typically in the form of readable HTML content)</em>, and then enhance it <strong>if possible</strong> using CSS and JavaScript. Building applications in this way means that <strong>you&#39;ll be able to reach the most people with your core experience</strong>, and you&#39;ll also be able to provide humans in more modern browsers with all of the latest features and technologies.</p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 29, "views/documentation/about.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 49, "views/documentation/about.jade" ));
buf.push("<h1 id=\"features\">Features</h1>\n<p>Out of the box, Taunus ensures that your site works on any HTML-enabled document viewer, or even on the terminal, providing support for plain text responses <a href=\"/getting-started\">without any configuration needed</a>. Even while Taunus provides shared-rendering capabilities, it offers code reuse of views and routes, meaning you&#39;ll only have to declare these once but they&#39;ll be used in both the server-side and the client-side.</p>\n<p>Taunus features a reasonably enhanced experience, where if features aren&#39;t available on a browser, they&#39;re just not provided. For example, the client-side router makes use of the <code>history</code> API but if that&#39;s not available then it&#39;ll fall back to simply not meddling with links instead of using a client-side-only hash router.</p>\n<p>Taunus can deal with view caching on your behalf, if you so desire, using <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\">asynchronous embedded database stores</a> on the client-side. Turns out, there&#39;s <a href=\"http://caniuse.com/#search=indexeddb\">pretty good browser support for IndexedDB</a>. Of course, IndexedDB will only be used if it&#39;s available, and if it&#39;s not then view models won&#39;t be cached in the client-side besides an in-memory store. <strong>The site won&#39;t simply roll over and die, though.</strong></p>\n<p>If you&#39;ve turned client-side caching on, then you can also turn on the <strong>view pre-fetching feature</strong>, which will start downloading views as soon as humans hover on links, as to deliver a <em>faster perceived human experience</em>.</p>\n<p>Taunus provides the bare bones for your application so that you can separate concerns into routes, controllers, models, and views. Then it gets out of the way, by design. There are <a href=\"/complements\">a few complementary modules</a> you can use to enhance your development experience, as well.</p>\n<p>With Taunus you&#39;ll be in charge. <a href=\"/getting-started\">Are you ready to get started?</a></p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 50, "views/documentation/about.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 64, "views/documentation/about.jade" ));
buf.push("<h1 id=\"familiarity\">Familiarity</h1>\n<p>You can use Taunus to develop applications using your favorite Node.js HTTP server, <strong>both <a href=\"http://expressjs.com\">Express</a> and <a href=\"http://hapijs.com\">Hapi</a> are fully supported</strong>. In both cases, you&#39;ll <a href=\"/getting-started\">build controllers the way you&#39;re already used to</a>, except you won&#39;t have to <code>require</code> the view controllers or define any view routes since Taunus will deal with that on your behalf. In the controllers you&#39;ll be able to do everything you&#39;re already able to do, and then you&#39;ll have to return a JSON model which will be used to render a view.</p>\n<p>You can use any view-rendering engine that you want, provided that it can be compiled into JavaScript functions. That&#39;s because Taunus treats views as mere JavaScript functions, rather than being tied into a specific view-rendering engine.</p>\n<p>Client-side controllers are just functions, too. You can bring your own selector engine, your own AJAX libraries, and your own data-binding solutions. It might mean there&#39;s a bit more work involved for you, but you&#39;ll also be free to pick whatever libraries you&#39;re most comfortable with! That being said, Taunus <a href=\"/complements\">does recommend a few libraries</a> that work well with it.</p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.shift();;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "section.ly-section.md-markdown\n  :ultramarked\n    # Why Taunus?\n\n    Taunus focuses on delivering a progressively enhanced experience to the end-user, while providing _a reasonable development experience_ as well. **Taunus prioritizes content**. It uses server-side rendering to get content to your humans as fast as possible, and it uses client-side rendering to improve their experience.\n\n    While it focuses on progressive enhancement, **[usability][2] and performance are both core concerns** for Taunus. Incidentally, focusing on progressive enhancement also improves both of these. Usability is improved because the experience is gradually improved, meaning that if somewhere along the line a feature is missing, the component is **still expected to work**.\n\n    For example, a progressively enhanced site uses plain-old links to navigate from one view to another, and then adds a `click` event handler that blocks navigation and issues an AJAX request instead. If JavaScript fails to load, perhaps the experience might stay a little bit worse, but that's okay, because we acknowledge that **our sites don't need to look and behave the same on every browser**. Similarly, [performance is greatly enhanced][1] by delivering content to the human as fast as possible, and then adding functionality on top of that.\n\n    With progressive enhancement, if the functionality never gets there because a JavaScript resource failed to load because the network failed _(not uncommon in the mobile era)_ or because the user blocked JavaScript, your application will still work!\n\n    [1]: http://ponyfoo.com/articles/critical-path-performance-optimization\n    [2]: http://ponyfoo.com/articles/adjusting-ux-for-humans\n\nsection.ly-section.md-markdown\n  :ultramarked\n    # Why Not Other Frameworks?\n\n    Many other frameworks weren't designed with progressive enhancement, or even shared-rendering in mind. Content isn't prioritized, and humans are expected to [download most of a web page before they can see any digestible content][2]. While Google is going to resolve the SEO issues with dedicated client-side rendering soon, that won't solve all your problems. Google isn't the only web crawler operator out there, and it might be a while before social media link crawlers catch up with them. Even if crawlers are not an issue, being able to provide the fastest possible experience is a big problem to resolve.\n\n    Lately, many mature open-source frameworks started dropping support for older browsers. This is necessary because of the way they're architected, where the developer is put first. **Taunus is [#humanfirst][1]**, meaning that it concedes that humans are more important than the developers building their applications.\n\n    Progressively enhanced applications are always going to have great browser support because of the way they're architected. As the name implies, a baseline is established where we deliver the core experience to the user _(typically in the form of readable HTML content)_, and then enhance it **if possible** using CSS and JavaScript. Building applications in this way means that **you'll be able to reach the most people with your core experience**, and you'll also be able to provide humans in more modern browsers with all of the latest features and technologies.\n\n    [1]: https://twitter.com/hashtag/humanfirst\n    [2]: http://ponyfoo.com/articles/stop-breaking-the-web\n\nsection.ly-section.md-markdown\n  :ultramarked\n    # Features\n\n    Out of the box, Taunus ensures that your site works on any HTML-enabled document viewer, or even on the terminal, providing support for plain text responses [without any configuration needed][2]. Even while Taunus provides shared-rendering capabilities, it offers code reuse of views and routes, meaning you'll only have to declare these once but they'll be used in both the server-side and the client-side.\n\n    Taunus features a reasonably enhanced experience, where if features aren't available on a browser, they're just not provided. For example, the client-side router makes use of the `history` API but if that's not available then it'll fall back to simply not meddling with links instead of using a client-side-only hash router.\n\n    Taunus can deal with view caching on your behalf, if you so desire, using [asynchronous embedded database stores][3] on the client-side. Turns out, there's [pretty good browser support for IndexedDB][4]. Of course, IndexedDB will only be used if it's available, and if it's not then view models won't be cached in the client-side besides an in-memory store. **The site won't simply roll over and die, though.**\n\n    If you've turned client-side caching on, then you can also turn on the **view pre-fetching feature**, which will start downloading views as soon as humans hover on links, as to deliver a _faster perceived human experience_.\n\n    Taunus provides the bare bones for your application so that you can separate concerns into routes, controllers, models, and views. Then it gets out of the way, by design. There are [a few complementary modules][1] you can use to enhance your development experience, as well.\n\n    With Taunus you'll be in charge. [Are you ready to get started?][2]\n\n    [1]: /complements\n    [2]: /getting-started\n    [3]: https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\n    [4]: http://caniuse.com/#search=indexeddb\n\nsection.ly-section.md-markdown\n  :ultramarked\n    # Familiarity\n\n    You can use Taunus to develop applications using your favorite Node.js HTTP server, **both [Express][3] and [Hapi][4] are fully supported**. In both cases, you'll [build controllers the way you're already used to][1], except you won't have to `require` the view controllers or define any view routes since Taunus will deal with that on your behalf. In the controllers you'll be able to do everything you're already able to do, and then you'll have to return a JSON model which will be used to render a view.\n\n    You can use any view-rendering engine that you want, provided that it can be compiled into JavaScript functions. That's because Taunus treats views as mere JavaScript functions, rather than being tied into a specific view-rendering engine.\n\n    Client-side controllers are just functions, too. You can bring your own selector engine, your own AJAX libraries, and your own data-binding solutions. It might mean there's a bit more work involved for you, but you'll also be free to pick whatever libraries you're most comfortable with! That being said, Taunus [does recommend a few libraries][2] that work well with it.\n\n    [1]: /getting-started\n    [2]: /complements\n    [3]: http://expressjs.com\n    [4]: http://hapijs.com\n");
}
}
},{"jadum/runtime":32}],2:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function api(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/documentation/api.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_debug.unshift(new jade.DebugItem( 0, "views/documentation/api.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/documentation/api.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 916, "views/documentation/api.jade" ));
buf.push("<h1 id=\"api-documentation\">API Documentation</h1>\n<p>Here&#39;s the API documentation for Taunus. If you&#39;ve never used it before, we recommend going over the <a href=\"/getting-started\">Getting Started</a> guide before jumping into the API documentation. That way, you&#39;ll get a better idea of what to look for and how to put together simple applications using Taunus, before going through documentation on every public interface to Taunus.</p>\n<p>Taunus exposes <em>three different public APIs</em>, and there&#39;s also <strong>plugins to integrate Taunus and an HTTP server</strong>. This document covers all three APIs extensively. If you&#39;re concerned about the inner workings of Taunus, please refer to the <a href=\"/getting-started\">Getting Started</a> guide. This document aims to only cover how the public interface affects application state, but <strong>doesn&#39;t delve into implementation details</strong>.</p>\n<h1 id=\"table-of-contents\">Table of Contents</h1>\n<ul>\n<li>A <a href=\"#server-side-api\">server-side API</a> that deals with server-side rendering<ul>\n<li>The <a href=\"#-taunus-mount-addroute-options-\"><code>taunus.mount</code></a> method<ul>\n<li>Its <a href=\"#the-options-object\"><code>options</code></a> argument<ul>\n<li><a href=\"#-options-layout-\"><code>layout</code></a></li>\n<li><a href=\"#-options-routes-\"><code>routes</code></a></li>\n<li><a href=\"#-options-getdefaultviewmodel-\"><code>getDefaultViewModel</code></a></li>\n<li><a href=\"#-options-plaintext-\"><code>plaintext</code></a></li>\n<li><a href=\"#-options-resolvers-\"><code>resolvers</code></a></li>\n<li><a href=\"#-options-version-\"><code>version</code></a></li>\n<li><a href=\"#-options-deferminified-\"><code>deferMinified</code></a></li>\n</ul>\n</li>\n<li>Its <a href=\"#-addroute-definition-\"><code>addRoute</code></a> argument</li>\n</ul>\n</li>\n<li>The <a href=\"#-taunus-render-action-viewmodel-req-res-next-\"><code>taunus.render</code></a> method</li>\n<li>The <a href=\"#-taunus-resolve-action-data-\"><code>taunus.resolve</code></a> method</li>\n<li>The <a href=\"#-taunus-redirect-req-res-url-options-\"><code>taunus.redirect</code></a> method</li>\n<li>The <a href=\"#-taunus-rebuilddefaultviewmodel-done-\"><code>taunus.rebuildDefaultViewModel</code></a> method</li>\n</ul>\n</li>\n<li><a href=\"#server-side-controllers\">Server-side controllers</a></li>\n<li>A <a href=\"#http-framework-plugins\">suite of plugins</a> can integrate Taunus and an HTTP server<ul>\n<li>Using <a href=\"#using-taunus-express-\"><code>taunus-express</code></a> for <a href=\"http://expressjs.com\">Express</a></li>\n<li>Using <a href=\"#using-taunus-hapi-\"><code>taunus-hapi</code></a> for <a href=\"http://hapijs.com\">Hapi</a></li>\n</ul>\n</li>\n<li>A <a href=\"#command-line-interface\">CLI that produces a wiring module</a> for the client-side<ul>\n<li>The <a href=\"#-output-\"><code>--output</code></a> flag</li>\n<li>The <a href=\"#-watch-\"><code>--watch</code></a> flag</li>\n<li>The <a href=\"#-transform-module-\"><code>--transform &lt;module&gt;</code></a> flag</li>\n<li>The <a href=\"#-defer-actions-\"><code>--defer</code></a> flag</li>\n<li>The <a href=\"#-resolvers-module-\"><code>--resolvers &lt;module&gt;</code></a> flag</li>\n<li>The <a href=\"#-bundle-\"><code>--bundle</code></a> flag</li>\n</ul>\n</li>\n<li>A <a href=\"#client-side-api\">client-side API</a> that deals with client-side rendering<ul>\n<li>The <a href=\"#-taunus-mount-container-wiring-options-\"><code>taunus.mount</code></a> method<ul>\n<li>Using the <a href=\"#using-the-auto-strategy\"><code>auto</code></a> strategy</li>\n<li>Using the <a href=\"#using-the-inline-strategy\"><code>inline</code></a> strategy</li>\n<li>Using the <a href=\"#using-the-manual-strategy\"><code>manual</code></a> strategy</li>\n<li><a href=\"#caching\">Caching</a></li>\n<li><a href=\"#prefetching\">Prefetching</a></li>\n<li><a href=\"#versioning\">Versioning</a></li>\n</ul>\n</li>\n<li>The <a href=\"#-taunus-on-type-fn-\"><code>taunus.on</code></a> method</li>\n<li>The <a href=\"#-taunus-once-type-fn-\"><code>taunus.once</code></a> method</li>\n<li>The <a href=\"#-taunus-off-type-fn-\"><code>taunus.off</code></a> method</li>\n<li>The <a href=\"#-taunus-intercept-action-fn-\"><code>taunus.intercept</code></a> method</li>\n<li>The <a href=\"#-taunus-partial-container-action-model-\"><code>taunus.partial</code></a> method</li>\n<li>The <a href=\"#-taunus-navigate-url-options-\"><code>taunus.navigate</code></a> method</li>\n<li>The <a href=\"#-taunus-route-url-\"><code>taunus.route</code></a> method<ul>\n<li>The <a href=\"#-taunus-route-equals-route-route-\"><code>taunus.route.equals</code></a> method</li>\n</ul>\n</li>\n<li>The <a href=\"#-taunus-redirect-options-\"><code>taunus.redirect</code></a> method</li>\n<li>The <a href=\"#-taunus-resolve-on-the-client\"><code>taunus.resolve</code></a> method</li>\n<li>The <a href=\"#-taunus-state-\"><code>taunus.state</code></a> property</li>\n<li>The <a href=\"#-taunus-xhr-url-options-done-\"><code>taunus.xhr</code></a> method</li>\n<li>The <a href=\"#using-taunus-prefetch-url-element-\"><code>taunus.prefetch</code></a> method</li>\n<li><a href=\"#debugging-taunus\">Debugging Taunus</a></li>\n</ul>\n</li>\n<li><a href=\"#client-side-controllers\">Client-side controllers</a></li>\n<li>The <a href=\"#the-taunusrc-manifest\"><code>.taunusrc</code></a> manifest</li>\n</ul>\n<h1 id=\"server-side-api\">Server-side API</h1>\n<p>The server-side API is used to set up the view router. It then gets out of the way, allowing the client-side to eventually take over and add any extra sugar on top, <em>including client-side rendering</em>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-mount-addroute-options-\"><code>taunus.mount(addRoute, options?)</code></h2>\n<p>Mounts Taunus on top of a server-side router, by registering each route in <code>options.routes</code> with the <code>addRoute</code> method.</p>\n<blockquote>\n<p>Note that most of the time, <strong>this method shouldn&#39;t be invoked directly</strong>, but rather through one of the <a href=\"#http-framework-plugins\">HTTP framework plugins</a> presented below.</p>\n</blockquote>\n<p>Here&#39;s an incomplete example of how this method may be used. It is incomplete because route definitions have more options beyond the <code>route</code> and <code>action</code> properties.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\ntaunus.mount(addRoute, {\n  routes: [{ route: &#39;/&#39;, action: &#39;home/index&#39; }]\n});\n\nfunction addRoute (definition) {\n  app.get(definition.route, definition.action);\n}\n</code></pre>\n<p>Let&#39;s go over the options you can pass to <code>taunus.mount</code> first.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"the-options-object\">The <code>options?</code> object</h4>\n<p>There&#39;s a few options that can be passed to the server-side mountpoint. You&#39;re probably going to be passing these to your <a href=\"#http-framework-plugins\">HTTP framework plugin</a>, rather than using <code>taunus.mount</code> directly.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-layout-\"><code>options.layout?</code></h6>\n<p>The <code>layout</code> property is expected to have the <code>function(data)</code> signature. It&#39;ll be invoked whenever a full HTML document needs to be rendered, and a <code>data</code> object will be passed to it. That object will contain everything you&#39;ve set as the view model, plus a <code>partial</code> property containing the raw HTML of the rendered partial view. Your <code>layout</code> method will typically wrap the raw HTML for the partial with the bare bones of an HTML document. Check out <a href=\"https://github.com/ponyfoo/ponyfoo/blob/33271751312db6e92059d98293d0a7ac6e9e8e5b/views/server/layout/layout.jade\">the <code>layout.jade</code> used in Pony Foo</a> as an example.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-routes-\"><code>options.routes</code></h6>\n<p>The other big option is <code>routes</code>, which expects a collection of route definitions. Route definitions use a number of properties to determine how the route is going to behave.</p>\n<p>Here&#39;s an example route that uses the <a href=\"http://expressjs.com\">Express</a> routing scheme.</p>\n<pre><code class=\"lang-js\">{\n  route: &#39;/articles/:slug&#39;,\n  action: &#39;articles/article&#39;,\n  ignore: false,\n  cache: &lt;inherit&gt;\n}\n</code></pre>\n<ul>\n<li><code>route</code> is a route in the format your HTTP framework of choice understands</li>\n<li><code>action</code> is the name of your controller action. It&#39;ll be used to find the server-side controller, the default view that should be used with this route, and the client-side controller</li>\n<li><code>cache</code> can be used to determine the client-side caching behavior in this application path, and it&#39;ll default to inheriting from the options passed to <code>taunus.mount</code> <em>on the client-side</em></li>\n<li><code>ignore</code> is used in those cases where you want a URL to be ignored by the client-side router even if there&#39;s a catch-all route that would match that URL</li>\n</ul>\n<p>As an example of the <code>ignore</code> use case, consider the routing table shown below. The client-side router doesn&#39;t know <em>(and can&#39;t know unless you point it out)</em> what routes are server-side only, and it&#39;s up to you to point those out.</p>\n<pre><code class=\"lang-js\">[\n  { route: &#39;/&#39;, action: &#39;/home/index&#39; },\n  { route: &#39;/feed&#39;, ignore: true },\n  { route: &#39;/*&#39;, action: &#39;error/not-found&#39; }\n]\n</code></pre>\n<p>This step is necessary whenever you have an anchor link pointed at something like an RSS feed. The <code>ignore</code> property is effectively telling the client-side <em>&quot;don&#39;t hijack links containing this URL&quot;</em>.</p>\n<p>Please note that external links are never hijacked. Only same-origin links containing a URL that matches one of the routes will be hijacked by Taunus. External links don&#39;t need to be <code>ignore</code>d.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-getdefaultviewmodel-\"><code>options.getDefaultViewModel?</code></h6>\n<p>The <code>getDefaultViewModel(done)</code> property can be a method that puts together the base view model, which will then be extended on an action-by-action basis. When you&#39;re done creating a view model, you can invoke <code>done(null, model)</code>. If an error occurs while building the view model, you should call <code>done(err)</code> instead.</p>\n<p>Taunus will throw an error if <code>done</code> is invoked with an error, so you might want to put safeguards in place as to avoid that from happenning. The reason this method is asynchronous is because you may need database access or somesuch when putting together the defaults. The reason this is a method and not just an object is that the defaults may change due to human interaction with the application, and in those cases <a href=\"#taunus-rebuilddefaultviewmodel\">the defaults can be rebuilt</a>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-plaintext-\"><code>options.plaintext?</code></h6>\n<p>The <code>plaintext</code> options object is passed directly to <a href=\"https://github.com/bevacqua/hget\">hget</a>, and it&#39;s used to <a href=\"https://github.com/ponyfoo/ponyfoo/blob/f6d6b5068ff03a387f503900160d9fdc1e749750/controllers/routing.js#L70-L72\">tweak the plaintext version</a> of your site.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-resolvers-\"><code>options.resolvers?</code></h6>\n<p>Resolvers are used to determine the location of some of the different pieces of your application. Typically you won&#39;t have to touch these in the slightest.</p>\n<table>\n<thead>\n<tr>\n<th>Signature</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>getServerController(action)</code></td>\n<td>Return path to server-side controller action handler module</td>\n</tr>\n<tr>\n<td><code>getView(action)</code></td>\n<td>Return path to view template module</td>\n</tr>\n</tbody>\n</table>\n<p>The <code>addRoute</code> method passed to <code>taunus.mount</code> on the server-side is mostly going to be used internally by the HTTP framework plugins, so feel free to skip over the following section.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-version-\"><code>options.version?</code></h6>\n<p>Refer to the <a href=\"#versioning\">Versioning</a> section.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-getpartial-\"><code>options.getPartial?</code></h6>\n<p>By default, Taunus will render partials on the server-side by looking up the module for an action method, and calling that action passing in a model.</p>\n<p>You can override the default behavior by setting <code>options.getPartial</code> to a function. This method takes three parameters.</p>\n<ul>\n<li><code>action</code> is the action that needs to be rendered</li>\n<li><code>model</code> is the model you can use to render the view for that action</li>\n<li><code>done(err, html)</code> is called when you&#39;re done, passing in the resulting <code>html</code> for the partial</li>\n</ul>\n<p>Note that if you don&#39;t set <code>getPartial</code>, Taunus will just require your controller action method and invoke that instead.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h6 id=\"-options-deferminified-\"><code>options.deferMinified?</code></h6>\n<p>When views and controllers are lazily loaded, they are compiled and bundled using Browserify. Taunus will even produce a source map. To avoid the source map, and minify the bundle instead, set <code>deferMinified</code> to <code>true</code>.</p>\n<p>You&#39;ll probably want to set <code>deferMinified</code> to whether the application is running on the production environment.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"-addroute-definition-\"><code>addRoute(definition)</code></h4>\n<p>The <code>addRoute(definition)</code> method will be passed a route definition, containing the following properties. This method is expected to register a route in your HTTP framework&#39;s router.</p>\n<ul>\n<li><code>route</code> is the route that you set as <code>definition.route</code></li>\n<li><code>action</code> is the action as passed to the route definition</li>\n<li><code>actionFn</code> will be the controller for this action method</li>\n<li><code>middleware</code> will be an array of methods to be executed before <code>actionFn</code></li>\n</ul>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-render-action-viewmodel-req-res-next-\"><code>taunus.render(action, viewModel, req, res, next)</code></h2>\n<p>This method is almost an implementation detail as you should be using Taunus through one of the plugins anyways, so we won&#39;t go very deep into it.</p>\n<p>The render method is what Taunus uses to render views by constructing HTML, JSON, or plaintext responses. The <code>action</code> property determines the default view that will be rendered. The <code>viewModel</code> will be extended by <a href=\"#-options-getdefaultviewmodel-\">the default view model</a>, and it may also override the default <code>action</code> by setting <code>viewModel.model.action</code>.</p>\n<p>The <code>req</code>, <code>res</code>, and <code>next</code> arguments are expected to be the Express routing arguments, but they can also be mocked <em>(which is in fact what the Hapi plugin does)</em>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-rebuilddefaultviewmodel-done-\"><code>taunus.rebuildDefaultViewModel(done?)</code></h2>\n<p>Once Taunus has been mounted, calling this method will rebuild the view model defaults using the <code>getDefaultViewModel</code> that was passed to <code>taunus.mount</code> in the options. An optional <code>done</code> callback will be invoked when the model is rebuilt.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-resolve-action-data-\"><code>taunus.resolve(action, data?)</code></h2>\n<p>Returns the first route that matches an <code>action</code>, replacing named parameters with data from the <code>data</code> object. If a matching route is not found, <code>null</code> is returned.</p>\n<blockquote>\n<p>If a route is matched but a required named parameter isn&#39;t in <code>data</code>, <strong>an exception will be thrown</strong>.</p>\n</blockquote>\n<p>This method is most useful when composing the URL for a redirect or an action link within a template, as a means to keep the route declaration isolated from the route itself. If the route changes, the method will reflect the newer route as long as the parameters stay the same, resulting in increased maintainability. <em>The method is available in both layout templates and partial view templates.</em></p>\n<h6 id=\"example\">Example</h6>\n<pre><code class=\"lang-js\">taunus.resolve(&#39;projects/project&#39;, {\n  name: &#39;puppies&#39;, organization: &#39;caniuse&#39;\n});\n// &lt;- /p/caniuse/puppies\n</code></pre>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-redirect-req-res-url-options-\"><code>taunus.redirect(req, res, url, options?)</code></h2>\n<p>Redirects the response to a different URL. If the request accepts HTML, this method is equivalent to <code>res.redirect(url)</code>. If the request accepts JSON, a specially crafted JSON response will trigger a client-side redirect using <a href=\"#-taunus-navigate-url-options-\">taunus.navigate</a>.</p>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>hard</code></td>\n<td>Uses a full page redirect when <code>true</code></td>\n</tr>\n<tr>\n<td><code>force</code></td>\n<td>Client-side redirects will be carried out even if the target URL is the same as the current <code>location</code></td>\n</tr>\n</tbody>\n</table>\n<h6 id=\"example\">Example</h6>\n<pre><code class=\"lang-js\">taunus.redirect(req, res, &#39;/login&#39;);\n</code></pre>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"server-side-controllers\">Server-Side Controllers</h1>\n<p>On the server-side, controllers are modules that export a single function. The parameters passed to these controllers depend on the server-side HTTP framework that&#39;s being used.</p>\n<p>For example, Express gives us three parameters: <code>req</code>, <code>res</code> and <code>next</code>. Hapi gives us two instead: <code>request</code> and <code>reply</code>.</p>\n<p>Here&#39;s a sample controller using <code>taunus-express</code>, as <a href=\"#using-taunus-express-\">detailed below</a>. This is a very simple controller where we are setting the special <code>viewModel</code> property on the response, and calling <code>next</code>. Suppose this controller is the <code>product/home</code> action handler.</p>\n<pre><code class=\"lang-js\">module.exports = function (req, res, next) {\n  res.viewModel = {\n    model: {\n      title: &#39;view title&#39;\n    }\n  };\n  next();\n};\n</code></pre>\n<p>As you can see, Taunus won&#39;t alter the API provided by Express. Instead, it builds upon the notion of using middleware. Once the <code>product/home</code> view is rendered and JavaScript loads, the <code>product/home</code> view controller is executed on the client-side.</p>\n<p>You could change the view to be rendered by setting the <code>action</code> property on the <code>model</code>. In the example shown below this would mean that the <code>error/offline</code> view would be rendered. The client-side controller will be that of <code>error/offline</code>, as well. View controllers are tied to the view that gets rendered.</p>\n<pre><code class=\"lang-js\">module.exports = function (req, res, next) {\n  res.viewModel = {\n    model: {\n      title: &#39;view title&#39;\n    }\n  };\n  if (offline) {\n    res.viewModel.model.action = &#39;error/offline&#39;;\n  }\n  next();\n};\n</code></pre>\n<p>Having a default action and the ability to redirect to another gives us a lot of flexibility when determining how to respond to a request.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"http-framework-plugins\">HTTP Framework Plugins</h1>\n<p>There&#39;s currently two different HTTP frameworks <em>(<a href=\"http://expressjs.com\">Express</a> and <a href=\"http://hapijs.com\">Hapi</a>)</em> that you can readily use with Taunus without having to deal with any of the route plumbing yourself.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"using-taunus-express-\">Using <code>taunus-express</code></h2>\n<p>The <code>taunus-express</code> plugin is probably the easiest to use, as Taunus was originally developed with just <a href=\"http://expressjs.com\">Express</a> in mind. In addition to the options already outlined for <a href=\"#-taunus-mount-addroute-options-\">taunus.mount</a>, you can add middleware for any route individually.</p>\n<ul>\n<li><code>middleware</code> are any methods you want Taunus to execute as middleware in Express applications</li>\n</ul>\n<p>To get <code>taunus-express</code> going you can use the following piece of code, provided that you come up with an <code>options</code> object.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar app = express();\nvar options = {\n  // ...\n};\n\ntaunusExpress(taunus, app, options);\n</code></pre>\n<p>The <code>taunusExpress</code> method will merely set up Taunus and add the relevant routes to your Express application by calling <code>app.get</code> a bunch of times. You can <a href=\"https://github.com/taunus/taunus-express\">find taunus-express on GitHub</a>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"using-taunus-hapi-\">Using <code>taunus-hapi</code></h2>\n<p>The <code>taunus-hapi</code> plugin is a bit more involved, and you&#39;ll have to create a Pack in order to use it. In addition to <a href=\"#-taunus-mount-addroute-options-\">the options we&#39;ve already covered</a>, you can add <code>config</code> on any route.</p>\n<ul>\n<li><code>config</code> is passed directly into the route registered with Hapi, giving you the most flexibility</li>\n</ul>\n<p>To get <code>taunus-hapi</code> going you can use the following piece of code, and you can bring your own <code>options</code> object.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar Hapi = require(&#39;hapi&#39;);\nvar taunus = require(&#39;taunus&#39;);\nvar taunusHapi = require(&#39;taunus-hapi&#39;)(taunus);\nvar pack = new Hapi.Pack();\n\npack.register({\n  plugin: taunusHapi,\n  options: {\n    // ...\n  }\n});\n</code></pre>\n<p>The <code>taunusHapi</code> plugin will mount Taunus and register all of the necessary routes. You can <a href=\"https://github.com/taunus/taunus-hapi\">find taunus-hapi on GitHub</a>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"command-line-interface\">Command-Line Interface</h1>\n<p>Once you&#39;ve set up the server-side to render your views using Taunus, it&#39;s only logical that you&#39;ll want to render the views in the client-side as well, effectively converting your application into a single-page application after the first view has been rendered on the server-side.</p>\n<p>The Taunus CLI is an useful intermediary in the process of getting the configuration you wrote so far for the server-side to also work well in the client-side.</p>\n<p>Install it globally for development, but remember to use local copies for production-grade uses.</p>\n<pre><code class=\"lang-shell\">npm install -g taunus\n</code></pre>\n<p>When invoked without any arguments, the CLI will simply follow the default conventions to find your route definitions, views, and client-side controllers.</p>\n<pre><code class=\"lang-shell\">taunus\n</code></pre>\n<p>By default, the output will be printed to the standard output, making for a fast debugging experience. Here&#39;s the output if you just had a single <code>home/index</code> route, and the matching view and client-side controller existed.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar templates = {\n  &#39;home/index&#39;: require(&#39;./views/home/index.js&#39;)\n};\n\nvar controllers = {\n  &#39;home/index&#39;: require(&#39;../client/js/controllers/home/index.js&#39;)\n};\n\nvar routes = [\n  {\n    route: &#39;/&#39;,\n    action: &#39;home/index&#39;\n  }\n];\n\nmodule.exports = {\n  templates: templates,\n  controllers: controllers,\n  routes: routes\n};\n</code></pre>\n<p>You can use a few options to alter the outcome of invoking <code>taunus</code>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-output-\"><code>--output</code></h2>\n<p><sub>the <code>-o</code> alias is available</sub></p>\n<p>Output is written to a file instead of to standard output. The file path used will be the <code>client_wiring</code> option in <a href=\"#the-taunusrc-manifest\"><code>.taunusrc</code></a>, which defaults to <code>&#39;.bin/wiring.js&#39;</code>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-watch-\"><code>--watch</code></h2>\n<p><sub>the <code>-w</code> alias is available</sub></p>\n<p>Whenever a server-side route definition changes, the output is printed again to either standard output or a file, depending on whether <code>--output</code> was used.</p>\n<p>The program won&#39;t exit.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-transform-module-\"><code>--transform &lt;module&gt;</code></h2>\n<p><sub>the <code>-t</code> alias is available</sub></p>\n<p>This flag allows you to transform server-side routes into something the client-side understands. Express routes are completely compatible with the client-side router, but Hapi routes need to be transformed using the <a href=\"https://github.com/taunus/hapiify\"><code>hapiify</code></a> module.</p>\n<pre><code class=\"lang-shell\">npm install hapiify\ntaunus -t hapiify\n</code></pre>\n<p>Using this transform relieves you from having to define the same routes twice using slightly different formats that convey the same meaning.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-defer-actions-\"><code>--defer [actions]</code></h2>\n<p><sub>the <code>-d</code> alias is available</sub></p>\n<p>Here is where things get interesting. The <code>--defer</code> flag allows you to defer loading for zero or more actions. Excluding the controller and view templates for any deferred action can significantly reduce the fingerprint of your application.</p>\n<p>The <code>[actions]</code> argument determines what actions get deferred, and which don&#39;t. It expects a comma-separated list of actions, where you can pass in either the controller name, or both the controller name and the action name. Using <code>?</code> acts as a wildcard.</p>\n<p>For example, using <code>admin</code> <em>(equivalent to using <code>admin/?</code>)</em> will defer every action under the <code>admin</code> controller. Using <code>admin/nuke</code> will only defer the <code>admin/nuke</code> action. If you omit the <code>[actions]</code> parameter entirely, the default value of <code>&#39;?&#39;</code> will be used and everything will be deferred.</p>\n<p>When components get deferred, they&#39;ll be loaded as soon as Taunus detects that they&#39;re needed. This can happen in a few places.</p>\n<ul>\n<li>The user navigates to (or <a href=\"#prefetching\"><em>prefetches</em></a>) the <code>/admin</code> route, and <code>admin/index</code> was deferred, and its components aren&#39;t cached on the client-side yet</li>\n<li>A controller uses <code>taunus.partial</code> to render an action that was deferred, and its components aren&#39;t cached on the client-side yet</li>\n<li>The user navigates to the <code>/admin</code> route, and its matching <code>admin/index</code> route wasn&#39;t deferred, but the server-side controller decides to change the action to <code>admin/superadmin</code>. When the response gets to the client, it&#39;ll need to ask the server for the <code>admin/superadmin</code> template if the client doesn&#39;t already have it</li>\n</ul>\n<p>You don&#39;t have to worry about those different scenarios, though, as Taunus handles them all for you transparently. You should <a href=\"/performance#send-views-and-controllers-to-the-client-selectively\">learn more about deferred loading on the Performance Optimization guide</a>.</p>\n<blockquote>\n<p>A possible concern with deferred execution is that partial views may not be rendered immediately, as a request may be necessary to fetch the controller or template for the partial.</p>\n</blockquote>\n<p>Some other considerations, regarding how deferred components get bundled, are listed in the <a href=\"/performance#send-views-and-controllers-to-the-client-selectively\">Performance Optimization</a> guide.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-resolvers-module-\"><code>--resolvers &lt;module&gt;</code></h2>\n<p><sub>the <code>-r</code> alias is available</sub></p>\n<p>Similarly to the <a href=\"#-options-resolvers-\"><code>resolvers</code></a> option that you can pass to <a href=\"#-taunus-mount-addroute-options-\"><code>taunus.mount</code></a>, these resolvers can change the way in which file paths are resolved.</p>\n<table>\n<thead>\n<tr>\n<th>Signature</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>getClientController(action)</code></td>\n<td>Return path to client-side controller action handler module</td>\n</tr>\n<tr>\n<td><code>getView(action)</code></td>\n<td>Return path to view template module</td>\n</tr>\n</tbody>\n</table>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-bundle-\"><code>--bundle</code></h2>\n<p><sub>the <code>-b</code> alias is available</sub></p>\n<p>Under this experimental flag, the CLI will use Browserify to compile a standalone module that includes the wiring normally exported by the CLI plus all of Taunus <a href=\"https://github.com/umdjs/umd\">as a UMD module</a>.</p>\n<p>This allows you to use Taunus on the client-side even if you don&#39;t want to use <a href=\"http://browserify.org\">Browserify</a> directly.</p>\n<p>Feedback and suggestions about this flag, <em>and possible alternatives that would make Taunus easier to use</em>, are welcome.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"client-side-api\">Client-side API</h1>\n<p>Just like the server-side, everything in the client-side begins at the mountpoint. Once the application is mounted, anchor links will be hijacked and the client-side router will take over view rendering. Client-side controllers are executed whenever a view is rendered.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-mount-container-wiring-options-\"><code>taunus.mount(container, wiring, options?)</code></h2>\n<p>The mountpoint takes a root container, the wiring module, and an options parameter. The <code>container</code> is where client-side-rendered views will be placed, by replacing whatever HTML contents already exist. You can pass in the <code>wiring</code> module exactly as built by the CLI, and no further configuration is necessary.</p>\n<p>When the mountpoint executes, Taunus will configure its internal state, <em>set up the client-side router</em>, run the client-side controller for the server-side rendered view, and start hijacking links.</p>\n<p>As an example, consider a browser makes a <code>GET</code> request for <code>/articles/the-fox</code> for the first time. Once <code>taunus.mount(container, wiring)</code> is invoked on the client-side, several things would happen in the order listed below.</p>\n<ul>\n<li>Taunus sets up the client-side view routing engine</li>\n<li>If enabled <em>(via <code>options</code>)</em>, the caching engine is configured</li>\n<li>Taunus obtains the view model <em>(more on this later)</em></li>\n<li>When a view model is obtained, the <code>&#39;start&#39;</code> event is emitted</li>\n<li>Anchor links start being monitored for clicks <em>(at this point your application becomes a <a href=\"http://en.wikipedia.org/wiki/Single-page_application\">SPA</a>)</em></li>\n<li>The <code>articles/article</code> client-side controller is executed</li>\n</ul>\n<p>That&#39;s quite a bit of functionality, but if you think about it, most other frameworks also render the view at this point, <em>rather than on the server-side!</em></p>\n<p>In order to better understand the process, I&#39;ll walk you through the <code>options</code> parameter.</p>\n<p>First off, the <code>bootstrap</code> option determines the strategy used to pull the view model of the server-side rendered view into the client-side. There are three possible strategies available: <code>auto</code> <em>(the default strategy)</em>, <code>inline</code>, or <code>manual</code>. The <code>auto</code> strategy involves the least work, which is why it&#39;s the default.</p>\n<ul>\n<li><code>auto</code> will make an AJAX request for the view model</li>\n<li><code>inline</code> expects you to place the model into a <code>&lt;script type=&#39;text/taunus&#39;&gt;</code> tag</li>\n<li><code>manual</code> expects you to get the view model however you want to, and then let Taunus know when it&#39;s ready</li>\n</ul>\n<p>Let&#39;s go into detail about each of these strategies.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"using-the-auto-strategy\">Using the <code>auto</code> strategy</h4>\n<p>The <code>auto</code> strategy means that Taunus will make use of an AJAX request to obtain the view model. <em>You don&#39;t have to do anything else</em> and this is the default strategy. This is the <strong>most convenient strategy, but also the slowest</strong> one.</p>\n<p>It&#39;s slow because the view model won&#39;t be requested until the bulk of your JavaScript code has been downloaded, parsed, executed, and <code>taunus.mount</code> is invoked.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"using-the-inline-strategy\">Using the <code>inline</code> strategy</h4>\n<p>The <code>inline</code> strategy expects you to add a <code>data-taunus</code> attribute on the <code>container</code> element. This attribute must be equal to the <code>id</code> attribute of a <code>&lt;script&gt;</code> tag containing the serialized view model alongside the version information automatically injected by Taunus into the layout template data.</p>\n<pre><code class=\"lang-jade\">div(data-taunus=&#39;model&#39;)!=partial\nscript#model(type=&#39;text/taunus&#39;)=JSON.stringify({ version: version, model: model })\n</code></pre>\n<p>Pay special attention to the fact that the model is not only made into a JSON string, <em>but also HTML encoded by Jade</em>. When Taunus extracts the model from the <code>&lt;script&gt;</code> tag it&#39;ll unescape it, and then parse it as JSON.</p>\n<p>This strategy is also fairly convenient to set up, but it involves a little more work. It might be worthwhile to use in cases where models are small, but it will slow down server-side view rendering, as the model is inlined alongside the HTML.</p>\n<p>That means that the content you are supposed to be prioritizing is going to take longer to get to your humans, but once they get the HTML, this strategy will execute the client-side controller almost immediately.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"using-the-manual-strategy\">Using the <code>manual</code> strategy</h4>\n<p>The <code>manual</code> strategy is the most involved of the three, but also the most performant. In this strategy you&#39;re supposed to add the following <em>(seemingly pointless)</em> snippet of code in a <code>&lt;script&gt;</code> other than the one that&#39;s pulling down Taunus, so that they are pulled concurrently rather than serially.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nwindow.taunusReady = function (model) {\n  window.taunusReady = model;\n};\n</code></pre>\n<p>Once you somehow get your hands on the view model, you should invoke <code>taunusReady(model)</code>. Considering you&#39;ll be pulling both the view model and Taunus at the same time, a number of different scenarios may play out.</p>\n<ul>\n<li>The view model is loaded first, you call <code>taunusReady(model)</code> and wait for Taunus to take the model object and boot the application as soon as <code>taunus.mount</code> is executed</li>\n<li>Taunus loads first and <code>taunus.mount</code> is called first. In this case, Taunus will replace <code>window.taunusReady</code> with a special <code>boot</code> method. When the view model finishes loading, you call <code>taunusReady(model)</code> and the application finishes booting</li>\n</ul>\n<blockquote>\n<p>If this sounds a little mind-bending it&#39;s because it is. It&#39;s not designed to be pretty, but merely to be performant.</p>\n</blockquote>\n<p>Now that we&#39;ve addressed the awkward bits, let&#39;s cover the <em>&quot;somehow get your hands on the view model&quot;</em> aspect. My preferred method is using JSONP, as it&#39;s able to deliver the smallest snippet possible, and it can take advantage of server-side caching. Considering you&#39;ll probably want this to be an inline script, keeping it small is important.</p>\n<p>The good news is that the server-side supports JSONP out the box. Here&#39;s a snippet of code you could use to pull down the view model and boot Taunus up as soon as both operations are ready.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nfunction inject (url) {\n  var script = document.createElement(&#39;script&#39;);\n  script.src = url;\n  document.body.appendChild(script);\n}\n\nfunction injector () {\n  var search = location.search;\n  var searchQuery = search ? &#39;&amp;&#39; + search.substr(1) : &#39;&#39;;\n  var searchJson = &#39;?json&amp;callback=taunusReady&#39; + searchQuery;\n  inject(location.pathname + searchJson);\n}\n\nwindow.taunusReady = function (model) {\n  window.taunusReady = model;\n};\n\ninjector();\n</code></pre>\n<p>As mentioned earlier, this approach involves getting your hands dirtier but it pays off by being the fastest of the three.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"caching\">Caching</h4>\n<p>The client-side in Taunus supports caching in-memory and using the embedded IndexedDB system by merely turning on the <code>cache</code> flag in the options passed to <code>taunus.mount</code> on the client-side.</p>\n<p>If you set <code>cache</code> to <code>true</code> then cached items will be considered <em>&quot;fresh&quot; (valid copies of the original)</em> for <strong>15 seconds</strong>. You can also set <code>cache</code> to a number, and that number of seconds will be used as the default instead.</p>\n<p>Caching can also be tweaked on individual routes. For instance, you could set <code>{ cache: true }</code> when mounting Taunus and then have <code>{ cache: 3600 }</code> on a route that you want to cache for a longer period of time.</p>\n<p>The caching layer is <em>seamlessly integrated</em> into Taunus, meaning that any views rendered by Taunus will be cached according to these caching rules. Keep in mind, however, that persistence at the client-side caching layer will only be possible in <a href=\"http://caniuse.com/#feat=indexeddb\">browsers that support IndexedDB</a>. In the case of browsers that don&#39;t support IndexedDB, Taunus will use an in-memory cache, which will be wiped out whenever the human decides to close the tab in their browser.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"prefetching\">Prefetching</h4>\n<p>If caching is enabled, the next logical step is prefetching. This is enabled just by adding <code>prefetch: true</code> to the options passed to <code>taunus.mount</code>. The prefetching feature will fire for any anchor link that&#39;s trips over a <code>mouseover</code> or a <code>touchstart</code> event. If a route matches the URL in the <code>href</code>, an AJAX request will prefetch the view and cache its contents, improving perceived performance.</p>\n<p>When links are clicked before prefetching finishes, they&#39;ll wait on the prefetcher to finish before immediately switching to the view, effectively cutting down the response time. If the link was already prefetched or otherwise cached, the view will be loaded immediately. If the human hovers over a link and another one was already being prefetched, then that one is aborted. This prevents prefetching from draining the bandwidth on clients with limited or intermittent connectivity.</p>\n<h4 id=\"versioning\">Versioning</h4>\n<p>When enabled, versioning will look out for discrepancies between what&#39;s currently on the client and what&#39;s on the server, and reload everything necessary to make what&#39;s on the client match what&#39;s on the server.</p>\n<p>In order to turn it on, set the <code>version</code> field in the options when invoking <code>taunus.mount</code> <strong>on both the server-side and the client-side, using the same value</strong>. The Taunus version string will be added to the one you provided, so that Taunus will know to stay alert for changes to Taunus itself, as well.</p>\n<blockquote>\n<p>To make sure you don&#39;t forget to change the version string in one of the mountpoints, please create a JSON file with just the version string and <code>require</code> that file in both sides.</p>\n<pre><code class=\"lang-shell\">echo &#39;&quot;1.0.0&quot;&#39; &gt; version.json\n</code></pre>\n</blockquote>\n<p>The default version string is set to <code>1</code>. The Taunus version will be prepended to yours, resulting in a value such as <code>t3.0.0;v1</code> where Taunus is running version <code>3.0.0</code> and your application is running version <code>1</code>.</p>\n<p>Refer to the Getting Started guide for a more detailed <a href=\"/getting-started#versioning\">analysis of the uses for versioning</a>. There&#39;s some more nuggets of information in the <a href=\"/performance#use-versioning-to-ensure-cache-validity\">Performance Optimization</a> guide as well.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-on-type-fn-\"><code>taunus.on(type, fn)</code></h2>\n<p>Taunus emits a series of events during its lifecycle, and <code>taunus.on</code> is the way you can tune in and listen for these events using a subscription function <code>fn</code>.</p>\n<table>\n<thead>\n<tr>\n<th>Event</th>\n<th>Arguments</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&#39;start&#39;</code></td>\n<td><code>container, model, route</code></td>\n<td>Emitted when <code>taunus.mount</code> finished the route setup and is about to invoke the client-side controller. Subscribe to this event before calling <code>taunus.mount</code>.</td>\n</tr>\n<tr>\n<td><code>&#39;render&#39;</code></td>\n<td><code>container, model, route</code></td>\n<td>A view has just been rendered and its client-side controller is about to be invoked</td>\n</tr>\n<tr>\n<td><code>&#39;change&#39;</code></td>\n<td><code>route, model</code></td>\n<td>Same as <code>&#39;render&#39;</code>, but only if <code>container</code> is the mountpoint and the route has changed.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.start&#39;</code></td>\n<td><code>route, context</code></td>\n<td>Emitted whenever an XHR request starts.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.done&#39;</code></td>\n<td><code>route, context, data</code></td>\n<td>Emitted whenever an XHR request ends successfully.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.abort&#39;</code></td>\n<td><code>route, context</code></td>\n<td>Emitted whenever an XHR request is purposely aborted.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.error&#39;</code></td>\n<td><code>route, context, err</code></td>\n<td>Emitted whenever an XHR request results in an HTTP error.</td>\n</tr>\n</tbody>\n</table>\n<p>Consider for instance that you&#39;d like to keep track of every view that gets rendered, and what DOM element it gets placed into. The piece of code below would quickly do that for us.</p>\n<pre><code class=\"lang-js\">taunus.on(&#39;render&#39;, function (container) {\n  console.log(&#39;Rendered a view on&#39;, container);\n});\n</code></pre>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-once-type-fn-\"><code>taunus.once(type, fn)</code></h2>\n<p>This method is equivalent to <a href=\"#-taunus-on-type-fn-\"><code>taunus.on</code></a>, except the event listeners will be used once and then it&#39;ll be discarded.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-off-type-fn-\"><code>taunus.off(type, fn)</code></h2>\n<p>Using this method you can remove any event listeners that were previously added using <code>.on</code> or <code>.once</code>. You must provide the type of event you want to remove and a reference to the event listener function that was originally used when calling <code>.on</code> or <code>.once</code>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-intercept-action-fn-\"><code>taunus.intercept(action?, fn)</code></h2>\n<p>This method can be used to anticipate model requests, before they ever make it into XHR requests. You can add interceptors for specific actions, which would be triggered only if the request matches the specified <code>action</code>. You can also add global interceptors by omitting the <code>action</code> parameter, or setting it to <code>*</code>.</p>\n<p>An interceptor function will receive an <code>event</code> parameter, containing a few different properties.</p>\n<ul>\n<li><code>url</code> contains the URL that needs a view model</li>\n<li><code>route</code> contains the full route object as you&#39;d get from <a href=\"#-taunus-route-url-\"><code>taunus.route(url)</code></a></li>\n<li><code>parts</code> is just a shortcut for <code>route.parts</code></li>\n<li><code>preventDefault(data)</code> allows you to suppress the need for an AJAX request, commanding Taunus to use the response data you&#39;ve provided instead</li>\n<li><code>defaultPrevented</code> tells you if some other handler has prevented the default behavior</li>\n<li><code>canPreventDefault</code> tells you if invoking <code>event.preventDefault</code> will have any effect</li>\n<li><code>data</code> starts as <code>null</code>, and it can later become the data passed to <code>preventDefault</code></li>\n</ul>\n<p>Interceptors are asynchronous, but if an interceptor spends longer than 50ms it&#39;ll be short-circuited and calling <code>event.preventDefault</code> past that point won&#39;t have any effect.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-partial-container-action-model-\"><code>taunus.partial(container, action, model)</code></h2>\n<p>This method provides you with access to the view-rendering engine of Taunus. You can use it to render the <code>action</code> view into the <code>container</code> DOM element, using the specified <code>model</code>. Once the view is rendered, the <code>render</code> event will be fired <em>(with <code>container, model</code> as arguments)</em> and the client-side controller for that view will be executed.</p>\n<p>Note that the partial may be rendered asynchronously if the <code>action</code> is <a href=\"#-defer-actions-\">deferred</a> and its components (view template, controller) aren&#39;t readily available in the client yet. This method returns an event emitter, which you can use to guarantee that you continue exection after the partial has been rendered.</p>\n<h4 id=\"example\">Example</h4>\n<p>Given a deferred <code>&#39;tags&#39;</code> partial view like this function:</p>\n<pre><code class=\"lang-js\">function (model) {\n  return model.length ? &#39;&lt;ul&gt;&lt;li&gt;&#39; + model.join(&#39;&lt;/li&gt;&lt;li&gt;&#39;) + &#39;&lt;/li&gt;&lt;/ul&gt;&#39; : &#39;&lt;ul&gt;&lt;/ul&gt;&#39;;\n}\n</code></pre>\n<p>You could render the view and continue execution once the view has been rendered onto a <code>div</code> by listening to the <code>&#39;render&#39;</code> event at the view level.</p>\n<pre><code class=\"lang-js\">taunus.partial(div, &#39;tags&#39;, [&#39;a&#39;, &#39;b&#39;]).on(&#39;render&#39;, function (html) {\n  console.log(&#39;Here\\&#39;s the HTML that was rendered on our div\\n&#39; + html);\n});\n</code></pre>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-navigate-url-options-\"><code>taunus.navigate(url, options)</code></h2>\n<p>Whenever you want to navigate to a URL, say when an AJAX call finishes after a button click, you can use <code>taunus.navigate</code> passing it a plain URL or anything that would cause <code>taunus.route(url)</code> to return a valid route.</p>\n<p>By default, if <code>taunus.navigate(url, options)</code> is called with an <code>url</code> that doesn&#39;t match any client-side route, then the user will be redirected via <code>location.href</code>. In cases where the browser doesn&#39;t support the history API, <code>location.href</code> will be used as well.</p>\n<p>There&#39;s a few options you can use to tweak the behavior of <code>taunus.navigate</code>.</p>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>context</code></td>\n<td>A DOM element that caused the navigation event, used when emitting events</td>\n</tr>\n<tr>\n<td><code>strict</code></td>\n<td>If set to <code>true</code> and the URL doesn&#39;t match any route, then the navigation attempt must be ignored</td>\n</tr>\n<tr>\n<td><code>scroll</code></td>\n<td>When this is set to <code>false</code>, elements aren&#39;t scrolled into view after navigation</td>\n</tr>\n<tr>\n<td><code>force</code></td>\n<td>Unless this is set to <code>true</code>, navigation won&#39;t <em>fetch a model</em> if the route matches the current route, and <code>state.model</code> will be reused instead</td>\n</tr>\n<tr>\n<td><code>replaceState</code></td>\n<td>Use <code>replaceState</code> instead of <code>pushState</code> when changing history</td>\n</tr>\n</tbody>\n</table>\n<p>Note that the notion of <em>fetching a model</em> might be deceiving as the model could be pulled from the cache even if <code>force</code> is set to <code>true</code>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-route-url-\"><code>taunus.route(url)</code></h2>\n<p>This convenience method allows you to break down a URL into its individual components. The method accepts any of the following URL patterns, and it returns a Taunus route object.</p>\n<ul>\n<li>A fully qualified URL on the same origin, e.g <code>http://taunus.io/api</code></li>\n<li>An absolute URL without an origin, e.g <code>/api</code></li>\n<li>Just a hash, e.g <code>#foo</code> <em>(<code>location.href</code> is used)</em></li>\n<li>Falsy values, e.g <code>null</code> <em>(<code>location.href</code> is used)</em></li>\n</ul>\n<p>Relative URLs are not supported <em>(anything that doesn&#39;t have a leading slash)</em>, e.g <code>files/data.json</code>. Anything that&#39;s not on the same origin or doesn&#39;t match one of the registered routes is going to yield <code>null</code>.</p>\n<p><em>This method is particularly useful when debugging your routing tables, as it gives you direct access to the router used internally by Taunus.</em></p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"-taunus-route-equals-route-route-\"><code>taunus.route.equals(route, route)</code></h4>\n<p>Compares two routes and returns <code>true</code> if they would fetch the same model. Note that different URLs may still return <code>true</code>. For instance, <code>/foo</code> and <code>/foo#bar</code> would fetch the same model even if they&#39;re different URLs. That&#39;s because the hash portion of an URL is never sent to the server.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-redirect-options-\"><code>taunus.redirect(options)</code></h2>\n<p>Redirects the user to a different URL. If <code>hard</code> is set to <code>true</code>, then this method is effectively the same as doing <code>location.href = options.href</code>. If <code>hard</code> is <code>false</code>, <a href=\"#-taunus-navigate-url-options-\">taunus.navigate</a> will be used.</p>\n<h6 id=\"example\">Example</h6>\n<pre><code class=\"lang-js\">taunus.redirect({ href: &#39;/foo&#39;, hard: true });\n</code></pre>\n<p>When the <code>force</code> option is set to <code>true</code>, redirects will be carried out even if the target URL is the same as the current <code>location</code>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-resolve-on-the-client\"><code>taunus.resolve</code> on the client</h2>\n<p>This method is identical to the server-side flavor of <a href=\"#-taunus-resolve-action-data-\"><code>taunus.resolve(action, data)</code></a>, but available on the client-side.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-state-\"><code>taunus.state</code></h2>\n<p>This is an internal state variable, and it contains a lot of useful debugging information.</p>\n<ul>\n<li><code>container</code> is the DOM element passed to <code>taunus.mount</code></li>\n<li><code>controllers</code> are all the controllers, as defined in the wiring module</li>\n<li><code>templates</code> are all the templates, as defined in the wiring module</li>\n<li><code>routes</code> are all the routes, as defined in the wiring module</li>\n<li><code>route</code> is a reference to the current route</li>\n<li><code>model</code> is a reference to the model used to render the current view</li>\n<li><code>prefetch</code> exposes whether prefetching is turned on</li>\n<li><code>cache</code> exposes whether caching is enabled</li>\n<li><code>version</code> exposes the version string that&#39;s currently in use</li>\n</ul>\n<p>There&#39;s also a <code>clear</code> method accessible through <code>taunus.state.clear</code>, which will empty the cache, as well as remove from the <code>state</code> any controllers and templates that were lazy loaded.</p>\n<p>Of course, you&#39;re not supposed to meddle with it, so be a good citizen and just inspect its values!</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"-taunus-xhr-url-options-done-\"><code>taunus.xhr(url, options?, done)</code></h2>\n<p>This method allows you to issue your own AJAX requests through the <code>xhr</code> module. It sets a few convenient defaults, <em>listed below</em>, where <code>url</code> refers to the URL passed as the first parameter.</p>\n<pre><code class=\"lang-js\">{\n  url: url,\n  json: true,\n  headers: { Accept: &#39;application/json&#39; }\n}\n</code></pre>\n<p>The <code>done(err, body, res)</code> callback will be invoked when the request finishes, and it&#39;ll be passed three parameters, an optional error if something went wrong <em>(request failed, was aborted, etc.)</em> and a <code>body</code> parameter containing the response body. The raw <code>res</code> object that&#39;s typically provided by <a href=\"https://github.com/Raynos/xhr\"><code>xhr</code></a> as the second parameter is provided as the third parameter instead.</p>\n<p>As an example, here is a <code>GET</code> request.</p>\n<pre><code class=\"lang-js\">taunus.xhr(&#39;/api/places&#39;, function (err, body) {\n  console.log(body);\n  // &lt;- { places: [&#39;underwater fortress&#39;, &#39;island mansion&#39;] }\n});\n</code></pre>\n<p>Always remember to handle the case where <code>err</code> is set!</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"using-taunus-prefetch-url-element-\">Using <code>taunus.prefetch(url, element)</code></h1>\n<p>The prefetcher API allows you to start fetching an <code>url</code>, provided that it matches a known Taunus view route and that <a href=\"#caching\">the cache</a> is enabled. The <code>element</code> is used mostly as context during event emission, and it can be useful for debugging as well.</p>\n<p>Use cases for prefetching are further discussed in the <a href=\"/performance#enable-prefetching-for-predictive-cache-loading\">Performance Optimization</a> guide.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h2 id=\"debugging-taunus\">Debugging Taunus</h2>\n<p>On the client-side, you will typically <code>require</code> Taunus using the statement below.</p>\n<pre><code class=\"lang-js\">var taunus = require(&#39;taunus&#39;);\n</code></pre>\n<p>However, you could also turn on the internal debug logger simply by using another entry point!</p>\n<pre><code class=\"lang-js\">var taunus = require(&#39;taunus/browser/debug&#39;);\n</code></pre>\n<p>The screenshot below contains an example of this mechanism, where using <a href=\"#-taunus-partial-container-action-model-\"><code>taunus.partial</code></a> triggers a flurry of debug messages.</p>\n<p><img src=\"http://i.imgur.com/CjbIHy0.png\" alt=\"debug.png\"></p>\n<p>This is particularly helpful during development, but also useful if you don&#39;t understand exactly how Taunus is doing something, as the logger is pretty verbose.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"client-side-controllers\">Client-Side Controllers</h1>\n<p>Client-side controllers are executed right after a view is rendered, even in the case of <a href=\"#-taunus-partial-container-action-model-\">partial views</a>. These controllers are used to progressively add behavior on top of the HTML for that view.</p>\n<p>View controllers take three parameters.</p>\n<table>\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>model</code></td>\n<td>Model that was used to render the view</td>\n</tr>\n<tr>\n<td><code>container</code></td>\n<td>The DOM element where the view was rendered</td>\n</tr>\n<tr>\n<td><code>route?</code></td>\n<td>Route that triggered the rendering engine. May be <code>null</code></td>\n</tr>\n</tbody>\n</table>\n<p>Note that Taunus will <a href=\"#-taunus-on-type-fn-\">emit a <code>render</code> event</a> right before the view controller gets executed, giving you a chance to react to views getting rendered.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"the-taunusrc-manifest\">The <code>.taunusrc</code> manifest</h1>\n<p>If you want to use values other than the conventional defaults shown in the table below, then you should create a <code>.taunusrc</code> file. Note that the defaults need to be overwritten in a case-by-case basis. These options can also be configured in your <code>package.json</code>, under the <code>taunus</code> property.</p>\n<pre><code class=\"lang-json\">{\n  &quot;views&quot;: &quot;.bin/views&quot;,\n  &quot;server_routes&quot;: &quot;controllers/routes.js&quot;,\n  &quot;server_controllers&quot;: &quot;controllers&quot;,\n  &quot;client_controllers&quot;: &quot;client/js/controllers&quot;,\n  &quot;client_wiring&quot;: &quot;.bin/wiring.js&quot;\n}\n</code></pre>\n<ul>\n<li>The <code>views</code> directory is where your views <em>(already compiled into JavaScript)</em> are placed. These views are used directly on both the server-side and the client-side</li>\n<li>The <code>server_routes</code> file is the module where you export a collection of routes. The CLI will pull these routes when creating the client-side routes for the wiring module</li>\n<li>The <code>server_controllers</code> directory is the root directory where your server-side controllers live. It&#39;s used when setting up the server-side router</li>\n<li>The <code>client_controllers</code> directory is where your client-side controller modules live. The CLI will <code>require</code> these controllers in its resulting wiring module</li>\n<li>The <code>client_wiring</code> file is where your wiring module will be placed by the CLI. You&#39;ll then have to <code>require</code> it in your application when booting up Taunus</li>\n</ul>\n<p>Here is where things get <a href=\"http://en.wikipedia.org/wiki/Convention_over_configuration\">a little conventional</a>. Views, and both server-side and client-side controllers are expected to be organized by following the <code>{root}/{controller}/{action}</code> pattern, but you could change that using <code>resolvers</code> when invoking the CLI and using the server-side API.</p>\n<p>Views and controllers are also expected to be CommonJS modules that export a single method.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.shift();;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "section.ly-section.md-markdown\n  :ultramarked\n    # API Documentation\n\n    Here's the API documentation for Taunus. If you've never used it before, we recommend going over the [Getting Started][1] guide before jumping into the API documentation. That way, you'll get a better idea of what to look for and how to put together simple applications using Taunus, before going through documentation on every public interface to Taunus.\n\n    Taunus exposes _three different public APIs_, and there's also **plugins to integrate Taunus and an HTTP server**. This document covers all three APIs extensively. If you're concerned about the inner workings of Taunus, please refer to the [Getting Started][1] guide. This document aims to only cover how the public interface affects application state, but **doesn't delve into implementation details**.\n\n    # Table of Contents\n\n    - A [server-side API](#server-side-api) that deals with server-side rendering\n      - The [`taunus.mount`](#-taunus-mount-addroute-options-) method\n        - Its [`options`](#the-options-object) argument\n          - [`layout`](#-options-layout-)\n          - [`routes`](#-options-routes-)\n          - [`getDefaultViewModel`](#-options-getdefaultviewmodel-)\n          - [`plaintext`](#-options-plaintext-)\n          - [`resolvers`](#-options-resolvers-)\n          - [`version`](#-options-version-)\n          - [`deferMinified`](#-options-deferminified-)\n        - Its [`addRoute`](#-addroute-definition-) argument\n      - The [`taunus.render`](#-taunus-render-action-viewmodel-req-res-next-) method\n      - The [`taunus.resolve`](#-taunus-resolve-action-data-) method\n      - The [`taunus.redirect`](#-taunus-redirect-req-res-url-options-) method\n      - The [`taunus.rebuildDefaultViewModel`](#-taunus-rebuilddefaultviewmodel-done-) method\n    - [Server-side controllers](#server-side-controllers)\n    - A [suite of plugins](#http-framework-plugins) can integrate Taunus and an HTTP server\n      - Using [`taunus-express`](#using-taunus-express-) for [Express][2]\n      - Using [`taunus-hapi`](#using-taunus-hapi-) for [Hapi][3]\n    - A [CLI that produces a wiring module](#command-line-interface) for the client-side\n      - The [`--output`](#-output-) flag\n      - The [`--watch`](#-watch-) flag\n      - The [`--transform <module>`](#-transform-module-) flag\n      - The [`--defer`](#-defer-actions-) flag\n      - The [`--resolvers <module>`](#-resolvers-module-) flag\n      - The [`--bundle`](#-bundle-) flag\n    - A [client-side API](#client-side-api) that deals with client-side rendering\n      - The [`taunus.mount`](#-taunus-mount-container-wiring-options-) method\n        - Using the [`auto`](#using-the-auto-strategy) strategy\n        - Using the [`inline`](#using-the-inline-strategy) strategy\n        - Using the [`manual`](#using-the-manual-strategy) strategy\n        - [Caching](#caching)\n        - [Prefetching](#prefetching)\n        - [Versioning](#versioning)\n      - The [`taunus.on`](#-taunus-on-type-fn-) method\n      - The [`taunus.once`](#-taunus-once-type-fn-) method\n      - The [`taunus.off`](#-taunus-off-type-fn-) method\n      - The [`taunus.intercept`](#-taunus-intercept-action-fn-) method\n      - The [`taunus.partial`](#-taunus-partial-container-action-model-) method\n      - The [`taunus.navigate`](#-taunus-navigate-url-options-) method\n      - The [`taunus.route`](#-taunus-route-url-) method\n        - The [`taunus.route.equals`](#-taunus-route-equals-route-route-) method\n      - The [`taunus.redirect`](#-taunus-redirect-options-) method\n      - The [`taunus.resolve`](#-taunus-resolve-on-the-client) method\n      - The [`taunus.state`](#-taunus-state-) property\n      - The [`taunus.xhr`](#-taunus-xhr-url-options-done-) method\n      - The [`taunus.prefetch`](#using-taunus-prefetch-url-element-) method\n      - [Debugging Taunus](#debugging-taunus)\n    - [Client-side controllers](#client-side-controllers)\n    - The [`.taunusrc`](#the-taunusrc-manifest) manifest\n\n    # Server-side API\n\n    The server-side API is used to set up the view router. It then gets out of the way, allowing the client-side to eventually take over and add any extra sugar on top, _including client-side rendering_.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.mount(addRoute, options?)`\n\n    Mounts Taunus on top of a server-side router, by registering each route in `options.routes` with the `addRoute` method.\n\n    > Note that most of the time, **this method shouldn't be invoked directly**, but rather through one of the [HTTP framework plugins](#http-framework-plugins) presented below.\n\n    Here's an incomplete example of how this method may be used. It is incomplete because route definitions have more options beyond the `route` and `action` properties.\n\n    ```js\n    'use strict';\n\n    taunus.mount(addRoute, {\n      routes: [{ route: '/', action: 'home/index' }]\n    });\n\n    function addRoute (definition) {\n      app.get(definition.route, definition.action);\n    }\n    ```\n\n    Let's go over the options you can pass to `taunus.mount` first.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### The `options?` object\n\n    There's a few options that can be passed to the server-side mountpoint. You're probably going to be passing these to your [HTTP framework plugin](#http-framework-plugins), rather than using `taunus.mount` directly.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.layout?`\n\n    The `layout` property is expected to have the `function(data)` signature. It'll be invoked whenever a full HTML document needs to be rendered, and a `data` object will be passed to it. That object will contain everything you've set as the view model, plus a `partial` property containing the raw HTML of the rendered partial view. Your `layout` method will typically wrap the raw HTML for the partial with the bare bones of an HTML document. Check out [the `layout.jade` used in Pony Foo][4] as an example.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.routes`\n\n    The other big option is `routes`, which expects a collection of route definitions. Route definitions use a number of properties to determine how the route is going to behave.\n\n    Here's an example route that uses the [Express][2] routing scheme.\n\n    ```js\n    {\n      route: '/articles/:slug',\n      action: 'articles/article',\n      ignore: false,\n      cache: <inherit>\n    }\n    ```\n\n    - `route` is a route in the format your HTTP framework of choice understands\n    - `action` is the name of your controller action. It'll be used to find the server-side controller, the default view that should be used with this route, and the client-side controller\n    - `cache` can be used to determine the client-side caching behavior in this application path, and it'll default to inheriting from the options passed to `taunus.mount` _on the client-side_\n    - `ignore` is used in those cases where you want a URL to be ignored by the client-side router even if there's a catch-all route that would match that URL\n\n    As an example of the `ignore` use case, consider the routing table shown below. The client-side router doesn't know _(and can't know unless you point it out)_ what routes are server-side only, and it's up to you to point those out.\n\n    ```js\n    [\n      { route: '/', action: '/home/index' },\n      { route: '/feed', ignore: true },\n      { route: '/*', action: 'error/not-found' }\n    ]\n    ```\n\n    This step is necessary whenever you have an anchor link pointed at something like an RSS feed. The `ignore` property is effectively telling the client-side _\"don't hijack links containing this URL\"_.\n\n    Please note that external links are never hijacked. Only same-origin links containing a URL that matches one of the routes will be hijacked by Taunus. External links don't need to be `ignore`d.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.getDefaultViewModel?`\n\n    The `getDefaultViewModel(done)` property can be a method that puts together the base view model, which will then be extended on an action-by-action basis. When you're done creating a view model, you can invoke `done(null, model)`. If an error occurs while building the view model, you should call `done(err)` instead.\n\n    Taunus will throw an error if `done` is invoked with an error, so you might want to put safeguards in place as to avoid that from happenning. The reason this method is asynchronous is because you may need database access or somesuch when putting together the defaults. The reason this is a method and not just an object is that the defaults may change due to human interaction with the application, and in those cases [the defaults can be rebuilt](#taunus-rebuilddefaultviewmodel).\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.plaintext?`\n\n    The `plaintext` options object is passed directly to [hget][5], and it's used to [tweak the plaintext version][6] of your site.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.resolvers?`\n\n    Resolvers are used to determine the location of some of the different pieces of your application. Typically you won't have to touch these in the slightest.\n\n    Signature                     | Description\n    ------------------------------|------------------------------------------------------\n    `getServerController(action)` | Return path to server-side controller action handler module\n    `getView(action)`             | Return path to view template module\n\n    The `addRoute` method passed to `taunus.mount` on the server-side is mostly going to be used internally by the HTTP framework plugins, so feel free to skip over the following section.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.version?`\n\n    Refer to the [Versioning](#versioning) section.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.getPartial?`\n\n    By default, Taunus will render partials on the server-side by looking up the module for an action method, and calling that action passing in a model.\n\n    You can override the default behavior by setting `options.getPartial` to a function. This method takes three parameters.\n\n    - `action` is the action that needs to be rendered\n    - `model` is the model you can use to render the view for that action\n    - `done(err, html)` is called when you're done, passing in the resulting `html` for the partial\n\n    Note that if you don't set `getPartial`, Taunus will just require your controller action method and invoke that instead.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ###### `options.deferMinified?`\n\n    When views and controllers are lazily loaded, they are compiled and bundled using Browserify. Taunus will even produce a source map. To avoid the source map, and minify the bundle instead, set `deferMinified` to `true`.\n\n    You'll probably want to set `deferMinified` to whether the application is running on the production environment.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### `addRoute(definition)`\n\n    The `addRoute(definition)` method will be passed a route definition, containing the following properties. This method is expected to register a route in your HTTP framework's router.\n\n    - `route` is the route that you set as `definition.route`\n    - `action` is the action as passed to the route definition\n    - `actionFn` will be the controller for this action method\n    - `middleware` will be an array of methods to be executed before `actionFn`\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.render(action, viewModel, req, res, next)`\n\n    This method is almost an implementation detail as you should be using Taunus through one of the plugins anyways, so we won't go very deep into it.\n\n    The render method is what Taunus uses to render views by constructing HTML, JSON, or plaintext responses. The `action` property determines the default view that will be rendered. The `viewModel` will be extended by [the default view model](#-options-getdefaultviewmodel-), and it may also override the default `action` by setting `viewModel.model.action`.\n\n    The `req`, `res`, and `next` arguments are expected to be the Express routing arguments, but they can also be mocked _(which is in fact what the Hapi plugin does)_.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.rebuildDefaultViewModel(done?)`\n\n    Once Taunus has been mounted, calling this method will rebuild the view model defaults using the `getDefaultViewModel` that was passed to `taunus.mount` in the options. An optional `done` callback will be invoked when the model is rebuilt.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.resolve(action, data?)`\n\n    Returns the first route that matches an `action`, replacing named parameters with data from the `data` object. If a matching route is not found, `null` is returned.\n\n    > If a route is matched but a required named parameter isn't in `data`, **an exception will be thrown**.\n\n    This method is most useful when composing the URL for a redirect or an action link within a template, as a means to keep the route declaration isolated from the route itself. If the route changes, the method will reflect the newer route as long as the parameters stay the same, resulting in increased maintainability. _The method is available in both layout templates and partial view templates._\n\n    ###### Example\n\n    ```js\n    taunus.resolve('projects/project', {\n      name: 'puppies', organization: 'caniuse'\n    });\n    // <- /p/caniuse/puppies\n    ```\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.redirect(req, res, url, options?)`\n\n    Redirects the response to a different URL. If the request accepts HTML, this method is equivalent to `res.redirect(url)`. If the request accepts JSON, a specially crafted JSON response will trigger a client-side redirect using [taunus.navigate](#-taunus-navigate-url-options-).\n\n    Option  | Description\n    --------|--------------------------------------------------------------------------------\n    `hard`  | Uses a full page redirect when `true`\n    `force` | Client-side redirects will be carried out even if the target URL is the same as the current `location`\n\n    ###### Example\n\n    ```js\n    taunus.redirect(req, res, '/login');\n    ```\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Server-Side Controllers\n\n    On the server-side, controllers are modules that export a single function. The parameters passed to these controllers depend on the server-side HTTP framework that's being used.\n\n    For example, Express gives us three parameters: `req`, `res` and `next`. Hapi gives us two instead: `request` and `reply`.\n\n    Here's a sample controller using `taunus-express`, as [detailed below](#using-taunus-express-). This is a very simple controller where we are setting the special `viewModel` property on the response, and calling `next`. Suppose this controller is the `product/home` action handler.\n\n    ```js\n    module.exports = function (req, res, next) {\n      res.viewModel = {\n        model: {\n          title: 'view title'\n        }\n      };\n      next();\n    };\n    ```\n\n    As you can see, Taunus won't alter the API provided by Express. Instead, it builds upon the notion of using middleware. Once the `product/home` view is rendered and JavaScript loads, the `product/home` view controller is executed on the client-side.\n\n    You could change the view to be rendered by setting the `action` property on the `model`. In the example shown below this would mean that the `error/offline` view would be rendered. The client-side controller will be that of `error/offline`, as well. View controllers are tied to the view that gets rendered.\n\n    ```js\n    module.exports = function (req, res, next) {\n      res.viewModel = {\n        model: {\n          title: 'view title'\n        }\n      };\n      if (offline) {\n        res.viewModel.model.action = 'error/offline';\n      }\n      next();\n    };\n    ```\n\n    Having a default action and the ability to redirect to another gives us a lot of flexibility when determining how to respond to a request.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # HTTP Framework Plugins\n\n    There's currently two different HTTP frameworks _([Express][2] and [Hapi][3])_ that you can readily use with Taunus without having to deal with any of the route plumbing yourself.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## Using `taunus-express`\n\n    The `taunus-express` plugin is probably the easiest to use, as Taunus was originally developed with just [Express][2] in mind. In addition to the options already outlined for [taunus.mount](#-taunus-mount-addroute-options-), you can add middleware for any route individually.\n\n    - `middleware` are any methods you want Taunus to execute as middleware in Express applications\n\n    To get `taunus-express` going you can use the following piece of code, provided that you come up with an `options` object.\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var app = express();\n    var options = {\n      // ...\n    };\n\n    taunusExpress(taunus, app, options);\n    ```\n\n    The `taunusExpress` method will merely set up Taunus and add the relevant routes to your Express application by calling `app.get` a bunch of times. You can [find taunus-express on GitHub][7].\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## Using `taunus-hapi`\n\n    The `taunus-hapi` plugin is a bit more involved, and you'll have to create a Pack in order to use it. In addition to [the options we've already covered](#-taunus-mount-addroute-options-), you can add `config` on any route.\n\n    - `config` is passed directly into the route registered with Hapi, giving you the most flexibility\n\n    To get `taunus-hapi` going you can use the following piece of code, and you can bring your own `options` object.\n\n    ```js\n    'use strict';\n\n    var Hapi = require('hapi');\n    var taunus = require('taunus');\n    var taunusHapi = require('taunus-hapi')(taunus);\n    var pack = new Hapi.Pack();\n\n    pack.register({\n      plugin: taunusHapi,\n      options: {\n        // ...\n      }\n    });\n    ```\n\n    The `taunusHapi` plugin will mount Taunus and register all of the necessary routes. You can [find taunus-hapi on GitHub][8].\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Command-Line Interface\n\n    Once you've set up the server-side to render your views using Taunus, it's only logical that you'll want to render the views in the client-side as well, effectively converting your application into a single-page application after the first view has been rendered on the server-side.\n\n    The Taunus CLI is an useful intermediary in the process of getting the configuration you wrote so far for the server-side to also work well in the client-side.\n\n    Install it globally for development, but remember to use local copies for production-grade uses.\n\n    ```shell\n    npm install -g taunus\n    ```\n\n    When invoked without any arguments, the CLI will simply follow the default conventions to find your route definitions, views, and client-side controllers.\n\n    ```shell\n    taunus\n    ```\n\n    By default, the output will be printed to the standard output, making for a fast debugging experience. Here's the output if you just had a single `home/index` route, and the matching view and client-side controller existed.\n\n    ```js\n    'use strict';\n\n    var templates = {\n      'home/index': require('./views/home/index.js')\n    };\n\n    var controllers = {\n      'home/index': require('../client/js/controllers/home/index.js')\n    };\n\n    var routes = [\n      {\n        route: '/',\n        action: 'home/index'\n      }\n    ];\n\n    module.exports = {\n      templates: templates,\n      controllers: controllers,\n      routes: routes\n    };\n    ```\n\n    You can use a few options to alter the outcome of invoking `taunus`.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `--output`\n\n    <sub>the `-o` alias is available</sub>\n\n    Output is written to a file instead of to standard output. The file path used will be the `client_wiring` option in [`.taunusrc`](#the-taunusrc-manifest), which defaults to `'.bin/wiring.js'`.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `--watch`\n\n    <sub>the `-w` alias is available</sub>\n\n    Whenever a server-side route definition changes, the output is printed again to either standard output or a file, depending on whether `--output` was used.\n\n    The program won't exit.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `--transform <module>`\n\n    <sub>the `-t` alias is available</sub>\n\n    This flag allows you to transform server-side routes into something the client-side understands. Express routes are completely compatible with the client-side router, but Hapi routes need to be transformed using the [`hapiify`][9] module.\n\n    ```shell\n    npm install hapiify\n    taunus -t hapiify\n    ```\n\n    Using this transform relieves you from having to define the same routes twice using slightly different formats that convey the same meaning.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `--defer [actions]`\n\n    <sub>the `-d` alias is available</sub>\n\n    Here is where things get interesting. The `--defer` flag allows you to defer loading for zero or more actions. Excluding the controller and view templates for any deferred action can significantly reduce the fingerprint of your application.\n\n    The `[actions]` argument determines what actions get deferred, and which don't. It expects a comma-separated list of actions, where you can pass in either the controller name, or both the controller name and the action name. Using `?` acts as a wildcard.\n\n    For example, using `admin` _(equivalent to using `admin/?`)_ will defer every action under the `admin` controller. Using `admin/nuke` will only defer the `admin/nuke` action. If you omit the `[actions]` parameter entirely, the default value of `'?'` will be used and everything will be deferred.\n\n    When components get deferred, they'll be loaded as soon as Taunus detects that they're needed. This can happen in a few places.\n\n    - The user navigates to (or [_prefetches_](#prefetching)) the `/admin` route, and `admin/index` was deferred, and its components aren't cached on the client-side yet\n    - A controller uses `taunus.partial` to render an action that was deferred, and its components aren't cached on the client-side yet\n    - The user navigates to the `/admin` route, and its matching `admin/index` route wasn't deferred, but the server-side controller decides to change the action to `admin/superadmin`. When the response gets to the client, it'll need to ask the server for the `admin/superadmin` template if the client doesn't already have it\n\n    You don't have to worry about those different scenarios, though, as Taunus handles them all for you transparently. You should [learn more about deferred loading on the Performance Optimization guide][20].\n\n    > A possible concern with deferred execution is that partial views may not be rendered immediately, as a request may be necessary to fetch the controller or template for the partial.\n\n    Some other considerations, regarding how deferred components get bundled, are listed in the [Performance Optimization][20] guide.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `--resolvers <module>`\n\n    <sub>the `-r` alias is available</sub>\n\n    Similarly to the [`resolvers`](#-options-resolvers-) option that you can pass to [`taunus.mount`](#-taunus-mount-addroute-options-), these resolvers can change the way in which file paths are resolved.\n\n    Signature                     | Description\n    ------------------------------|------------------------------------------------------\n    `getClientController(action)` | Return path to client-side controller action handler module\n    `getView(action)`             | Return path to view template module\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `--bundle`\n\n    <sub>the `-b` alias is available</sub>\n\n    Under this experimental flag, the CLI will use Browserify to compile a standalone module that includes the wiring normally exported by the CLI plus all of Taunus [as a UMD module][10].\n\n    This allows you to use Taunus on the client-side even if you don't want to use [Browserify][11] directly.\n\n    Feedback and suggestions about this flag, _and possible alternatives that would make Taunus easier to use_, are welcome.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Client-side API\n\n    Just like the server-side, everything in the client-side begins at the mountpoint. Once the application is mounted, anchor links will be hijacked and the client-side router will take over view rendering. Client-side controllers are executed whenever a view is rendered.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.mount(container, wiring, options?)`\n\n    The mountpoint takes a root container, the wiring module, and an options parameter. The `container` is where client-side-rendered views will be placed, by replacing whatever HTML contents already exist. You can pass in the `wiring` module exactly as built by the CLI, and no further configuration is necessary.\n\n    When the mountpoint executes, Taunus will configure its internal state, _set up the client-side router_, run the client-side controller for the server-side rendered view, and start hijacking links.\n\n    As an example, consider a browser makes a `GET` request for `/articles/the-fox` for the first time. Once `taunus.mount(container, wiring)` is invoked on the client-side, several things would happen in the order listed below.\n\n    - Taunus sets up the client-side view routing engine\n    - If enabled _(via `options`)_, the caching engine is configured\n    - Taunus obtains the view model _(more on this later)_\n    - When a view model is obtained, the `'start'` event is emitted\n    - Anchor links start being monitored for clicks _(at this point your application becomes a [SPA][13])_\n    - The `articles/article` client-side controller is executed\n\n    That's quite a bit of functionality, but if you think about it, most other frameworks also render the view at this point, _rather than on the server-side!_\n\n    In order to better understand the process, I'll walk you through the `options` parameter.\n\n    First off, the `bootstrap` option determines the strategy used to pull the view model of the server-side rendered view into the client-side. There are three possible strategies available: `auto` _(the default strategy)_, `inline`, or `manual`. The `auto` strategy involves the least work, which is why it's the default.\n\n    - `auto` will make an AJAX request for the view model\n    - `inline` expects you to place the model into a `<script type='text/taunus'>` tag\n    - `manual` expects you to get the view model however you want to, and then let Taunus know when it's ready\n\n    Let's go into detail about each of these strategies.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Using the `auto` strategy\n\n    The `auto` strategy means that Taunus will make use of an AJAX request to obtain the view model. _You don't have to do anything else_ and this is the default strategy. This is the **most convenient strategy, but also the slowest** one.\n\n    It's slow because the view model won't be requested until the bulk of your JavaScript code has been downloaded, parsed, executed, and `taunus.mount` is invoked.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Using the `inline` strategy\n\n    The `inline` strategy expects you to add a `data-taunus` attribute on the `container` element. This attribute must be equal to the `id` attribute of a `<script>` tag containing the serialized view model alongside the version information automatically injected by Taunus into the layout template data.\n\n    ```jade\n    div(data-taunus='model')!=partial\n    script#model(type='text/taunus')=JSON.stringify({ version: version, model: model })\n    ```\n\n    Pay special attention to the fact that the model is not only made into a JSON string, _but also HTML encoded by Jade_. When Taunus extracts the model from the `<script>` tag it'll unescape it, and then parse it as JSON.\n\n    This strategy is also fairly convenient to set up, but it involves a little more work. It might be worthwhile to use in cases where models are small, but it will slow down server-side view rendering, as the model is inlined alongside the HTML.\n\n    That means that the content you are supposed to be prioritizing is going to take longer to get to your humans, but once they get the HTML, this strategy will execute the client-side controller almost immediately.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Using the `manual` strategy\n\n    The `manual` strategy is the most involved of the three, but also the most performant. In this strategy you're supposed to add the following _(seemingly pointless)_ snippet of code in a `<script>` other than the one that's pulling down Taunus, so that they are pulled concurrently rather than serially.\n\n    ```js\n    'use strict';\n\n    window.taunusReady = function (model) {\n      window.taunusReady = model;\n    };\n    ```\n\n    Once you somehow get your hands on the view model, you should invoke `taunusReady(model)`. Considering you'll be pulling both the view model and Taunus at the same time, a number of different scenarios may play out.\n\n    - The view model is loaded first, you call `taunusReady(model)` and wait for Taunus to take the model object and boot the application as soon as `taunus.mount` is executed\n    - Taunus loads first and `taunus.mount` is called first. In this case, Taunus will replace `window.taunusReady` with a special `boot` method. When the view model finishes loading, you call `taunusReady(model)` and the application finishes booting\n\n    > If this sounds a little mind-bending it's because it is. It's not designed to be pretty, but merely to be performant.\n\n    Now that we've addressed the awkward bits, let's cover the _\"somehow get your hands on the view model\"_ aspect. My preferred method is using JSONP, as it's able to deliver the smallest snippet possible, and it can take advantage of server-side caching. Considering you'll probably want this to be an inline script, keeping it small is important.\n\n    The good news is that the server-side supports JSONP out the box. Here's a snippet of code you could use to pull down the view model and boot Taunus up as soon as both operations are ready.\n\n    ```js\n    'use strict';\n\n    function inject (url) {\n      var script = document.createElement('script');\n      script.src = url;\n      document.body.appendChild(script);\n    }\n\n    function injector () {\n      var search = location.search;\n      var searchQuery = search ? '&' + search.substr(1) : '';\n      var searchJson = '?json&callback=taunusReady' + searchQuery;\n      inject(location.pathname + searchJson);\n    }\n\n    window.taunusReady = function (model) {\n      window.taunusReady = model;\n    };\n\n    injector();\n    ```\n\n    As mentioned earlier, this approach involves getting your hands dirtier but it pays off by being the fastest of the three.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Caching\n\n    The client-side in Taunus supports caching in-memory and using the embedded IndexedDB system by merely turning on the `cache` flag in the options passed to `taunus.mount` on the client-side.\n\n    If you set `cache` to `true` then cached items will be considered _\"fresh\" (valid copies of the original)_ for **15 seconds**. You can also set `cache` to a number, and that number of seconds will be used as the default instead.\n\n    Caching can also be tweaked on individual routes. For instance, you could set `{ cache: true }` when mounting Taunus and then have `{ cache: 3600 }` on a route that you want to cache for a longer period of time.\n\n    The caching layer is _seamlessly integrated_ into Taunus, meaning that any views rendered by Taunus will be cached according to these caching rules. Keep in mind, however, that persistence at the client-side caching layer will only be possible in [browsers that support IndexedDB][14]. In the case of browsers that don't support IndexedDB, Taunus will use an in-memory cache, which will be wiped out whenever the human decides to close the tab in their browser.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Prefetching\n\n    If caching is enabled, the next logical step is prefetching. This is enabled just by adding `prefetch: true` to the options passed to `taunus.mount`. The prefetching feature will fire for any anchor link that's trips over a `mouseover` or a `touchstart` event. If a route matches the URL in the `href`, an AJAX request will prefetch the view and cache its contents, improving perceived performance.\n\n    When links are clicked before prefetching finishes, they'll wait on the prefetcher to finish before immediately switching to the view, effectively cutting down the response time. If the link was already prefetched or otherwise cached, the view will be loaded immediately. If the human hovers over a link and another one was already being prefetched, then that one is aborted. This prevents prefetching from draining the bandwidth on clients with limited or intermittent connectivity.\n\n    #### Versioning\n\n    When enabled, versioning will look out for discrepancies between what's currently on the client and what's on the server, and reload everything necessary to make what's on the client match what's on the server.\n\n    In order to turn it on, set the `version` field in the options when invoking `taunus.mount` **on both the server-side and the client-side, using the same value**. The Taunus version string will be added to the one you provided, so that Taunus will know to stay alert for changes to Taunus itself, as well.\n\n    > To make sure you don't forget to change the version string in one of the mountpoints, please create a JSON file with just the version string and `require` that file in both sides.\n    >\n    > ```shell\n    > echo '\"1.0.0\"' > version.json\n    > ```\n\n    The default version string is set to `1`. The Taunus version will be prepended to yours, resulting in a value such as `t3.0.0;v1` where Taunus is running version `3.0.0` and your application is running version `1`.\n\n    Refer to the Getting Started guide for a more detailed [analysis of the uses for versioning][15]. There's some more nuggets of information in the [Performance Optimization][18] guide as well.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.on(type, fn)`\n\n    Taunus emits a series of events during its lifecycle, and `taunus.on` is the way you can tune in and listen for these events using a subscription function `fn`.\n\n    Event            | Arguments                 | Description\n    -----------------|---------------------------|------------------------------------\n    `'start'`        | `container, model, route` | Emitted when `taunus.mount` finished the route setup and is about to invoke the client-side controller. Subscribe to this event before calling `taunus.mount`.\n    `'render'`       | `container, model, route` | A view has just been rendered and its client-side controller is about to be invoked\n    `'change'`       | `route, model`            | Same as `'render'`, but only if `container` is the mountpoint and the route has changed.\n    `'fetch.start'`  |  `route, context`         | Emitted whenever an XHR request starts.\n    `'fetch.done'`   |  `route, context, data`   | Emitted whenever an XHR request ends successfully.\n    `'fetch.abort'`  |  `route, context`         | Emitted whenever an XHR request is purposely aborted.\n    `'fetch.error'`  |  `route, context, err`    | Emitted whenever an XHR request results in an HTTP error.\n\n    Consider for instance that you'd like to keep track of every view that gets rendered, and what DOM element it gets placed into. The piece of code below would quickly do that for us.\n\n    ```js\n    taunus.on('render', function (container) {\n      console.log('Rendered a view on', container);\n    });\n    ```\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.once(type, fn)`\n\n    This method is equivalent to [`taunus.on`](#-taunus-on-type-fn-), except the event listeners will be used once and then it'll be discarded.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.off(type, fn)`\n\n    Using this method you can remove any event listeners that were previously added using `.on` or `.once`. You must provide the type of event you want to remove and a reference to the event listener function that was originally used when calling `.on` or `.once`.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.intercept(action?, fn)`\n\n    This method can be used to anticipate model requests, before they ever make it into XHR requests. You can add interceptors for specific actions, which would be triggered only if the request matches the specified `action`. You can also add global interceptors by omitting the `action` parameter, or setting it to `*`.\n\n    An interceptor function will receive an `event` parameter, containing a few different properties.\n\n    - `url` contains the URL that needs a view model\n    - `route` contains the full route object as you'd get from [`taunus.route(url)`](#-taunus-route-url-)\n    - `parts` is just a shortcut for `route.parts`\n    - `preventDefault(data)` allows you to suppress the need for an AJAX request, commanding Taunus to use the response data you've provided instead\n    - `defaultPrevented` tells you if some other handler has prevented the default behavior\n    - `canPreventDefault` tells you if invoking `event.preventDefault` will have any effect\n    - `data` starts as `null`, and it can later become the data passed to `preventDefault`\n\n    Interceptors are asynchronous, but if an interceptor spends longer than 50ms it'll be short-circuited and calling `event.preventDefault` past that point won't have any effect.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.partial(container, action, model)`\n\n    This method provides you with access to the view-rendering engine of Taunus. You can use it to render the `action` view into the `container` DOM element, using the specified `model`. Once the view is rendered, the `render` event will be fired _(with `container, model` as arguments)_ and the client-side controller for that view will be executed.\n\n    Note that the partial may be rendered asynchronously if the `action` is [deferred](#-defer-actions-) and its components (view template, controller) aren't readily available in the client yet. This method returns an event emitter, which you can use to guarantee that you continue exection after the partial has been rendered.\n\n    #### Example\n\n    Given a deferred `'tags'` partial view like this function:\n\n    ```js\n    function (model) {\n      return model.length ? '<ul><li>' + model.join('</li><li>') + '</li></ul>' : '<ul></ul>';\n    }\n    ```\n\n    You could render the view and continue execution once the view has been rendered onto a `div` by listening to the `'render'` event at the view level.\n\n    ```js\n    taunus.partial(div, 'tags', ['a', 'b']).on('render', function (html) {\n      console.log('Here\\'s the HTML that was rendered on our div\\n' + html);\n    });\n    ```\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.navigate(url, options)`\n\n    Whenever you want to navigate to a URL, say when an AJAX call finishes after a button click, you can use `taunus.navigate` passing it a plain URL or anything that would cause `taunus.route(url)` to return a valid route.\n\n    By default, if `taunus.navigate(url, options)` is called with an `url` that doesn't match any client-side route, then the user will be redirected via `location.href`. In cases where the browser doesn't support the history API, `location.href` will be used as well.\n\n    There's a few options you can use to tweak the behavior of `taunus.navigate`.\n\n    Option           | Description\n    -----------------|-------------------------------------------------------------------\n    `context`        | A DOM element that caused the navigation event, used when emitting events\n    `strict`         | If set to `true` and the URL doesn't match any route, then the navigation attempt must be ignored\n    `scroll`         | When this is set to `false`, elements aren't scrolled into view after navigation\n    `force`          | Unless this is set to `true`, navigation won't _fetch a model_ if the route matches the current route, and `state.model` will be reused instead\n    `replaceState`   | Use `replaceState` instead of `pushState` when changing history\n\n    Note that the notion of _fetching a model_ might be deceiving as the model could be pulled from the cache even if `force` is set to `true`.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.route(url)`\n\n    This convenience method allows you to break down a URL into its individual components. The method accepts any of the following URL patterns, and it returns a Taunus route object.\n\n    - A fully qualified URL on the same origin, e.g `http://taunus.io/api`\n    - An absolute URL without an origin, e.g `/api`\n    - Just a hash, e.g `#foo` _(`location.href` is used)_\n    - Falsy values, e.g `null` _(`location.href` is used)_\n\n    Relative URLs are not supported _(anything that doesn't have a leading slash)_, e.g `files/data.json`. Anything that's not on the same origin or doesn't match one of the registered routes is going to yield `null`.\n\n    _This method is particularly useful when debugging your routing tables, as it gives you direct access to the router used internally by Taunus._\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### `taunus.route.equals(route, route)`\n\n    Compares two routes and returns `true` if they would fetch the same model. Note that different URLs may still return `true`. For instance, `/foo` and `/foo#bar` would fetch the same model even if they're different URLs. That's because the hash portion of an URL is never sent to the server.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.redirect(options)`\n\n    Redirects the user to a different URL. If `hard` is set to `true`, then this method is effectively the same as doing `location.href = options.href`. If `hard` is `false`, [taunus.navigate](#-taunus-navigate-url-options-) will be used.\n\n    ###### Example\n\n    ```js\n    taunus.redirect({ href: '/foo', hard: true });\n    ```\n\n    When the `force` option is set to `true`, redirects will be carried out even if the target URL is the same as the current `location`.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.resolve` on the client\n\n    This method is identical to the server-side flavor of [`taunus.resolve(action, data)`](#-taunus-resolve-action-data-), but available on the client-side.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.state`\n\n    This is an internal state variable, and it contains a lot of useful debugging information.\n\n    - `container` is the DOM element passed to `taunus.mount`\n    - `controllers` are all the controllers, as defined in the wiring module\n    - `templates` are all the templates, as defined in the wiring module\n    - `routes` are all the routes, as defined in the wiring module\n    - `route` is a reference to the current route\n    - `model` is a reference to the model used to render the current view\n    - `prefetch` exposes whether prefetching is turned on\n    - `cache` exposes whether caching is enabled\n    - `version` exposes the version string that's currently in use\n\n    There's also a `clear` method accessible through `taunus.state.clear`, which will empty the cache, as well as remove from the `state` any controllers and templates that were lazy loaded.\n\n    Of course, you're not supposed to meddle with it, so be a good citizen and just inspect its values!\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## `taunus.xhr(url, options?, done)`\n\n    This method allows you to issue your own AJAX requests through the `xhr` module. It sets a few convenient defaults, _listed below_, where `url` refers to the URL passed as the first parameter.\n\n    ```js\n    {\n      url: url,\n      json: true,\n      headers: { Accept: 'application/json' }\n    }\n    ```\n\n    The `done(err, body, res)` callback will be invoked when the request finishes, and it'll be passed three parameters, an optional error if something went wrong _(request failed, was aborted, etc.)_ and a `body` parameter containing the response body. The raw `res` object that's typically provided by [`xhr`][16] as the second parameter is provided as the third parameter instead.\n\n    As an example, here is a `GET` request.\n\n    ```js\n    taunus.xhr('/api/places', function (err, body) {\n      console.log(body);\n      // <- { places: ['underwater fortress', 'island mansion'] }\n    });\n    ```\n\n    Always remember to handle the case where `err` is set!\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Using `taunus.prefetch(url, element)`\n\n    The prefetcher API allows you to start fetching an `url`, provided that it matches a known Taunus view route and that [the cache](#caching) is enabled. The `element` is used mostly as context during event emission, and it can be useful for debugging as well.\n\n    Use cases for prefetching are further discussed in the [Performance Optimization][19] guide.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    ## Debugging Taunus\n\n    On the client-side, you will typically `require` Taunus using the statement below.\n\n    ```js\n    var taunus = require('taunus');\n    ```\n\n    However, you could also turn on the internal debug logger simply by using another entry point!\n\n    ```js\n    var taunus = require('taunus/browser/debug');\n    ```\n\n    The screenshot below contains an example of this mechanism, where using [`taunus.partial`](#-taunus-partial-container-action-model-) triggers a flurry of debug messages.\n\n    ![debug.png][17]\n\n    This is particularly helpful during development, but also useful if you don't understand exactly how Taunus is doing something, as the logger is pretty verbose.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Client-Side Controllers\n\n    Client-side controllers are executed right after a view is rendered, even in the case of [partial views](#-taunus-partial-container-action-model-). These controllers are used to progressively add behavior on top of the HTML for that view.\n\n    View controllers take three parameters.\n\n    Parameter   | Description\n    ------------|--------------------------\n    `model`     | Model that was used to render the view\n    `container` | The DOM element where the view was rendered\n    `route?`    | Route that triggered the rendering engine. May be `null`\n\n    Note that Taunus will [emit a `render` event](#-taunus-on-type-fn-) right before the view controller gets executed, giving you a chance to react to views getting rendered.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # The `.taunusrc` manifest\n\n    If you want to use values other than the conventional defaults shown in the table below, then you should create a `.taunusrc` file. Note that the defaults need to be overwritten in a case-by-case basis. These options can also be configured in your `package.json`, under the `taunus` property.\n\n    ```json\n    {\n      \"views\": \".bin/views\",\n      \"server_routes\": \"controllers/routes.js\",\n      \"server_controllers\": \"controllers\",\n      \"client_controllers\": \"client/js/controllers\",\n      \"client_wiring\": \".bin/wiring.js\"\n    }\n    ```\n\n    - The `views` directory is where your views _(already compiled into JavaScript)_ are placed. These views are used directly on both the server-side and the client-side\n    - The `server_routes` file is the module where you export a collection of routes. The CLI will pull these routes when creating the client-side routes for the wiring module\n    - The `server_controllers` directory is the root directory where your server-side controllers live. It's used when setting up the server-side router\n    - The `client_controllers` directory is where your client-side controller modules live. The CLI will `require` these controllers in its resulting wiring module\n    - The `client_wiring` file is where your wiring module will be placed by the CLI. You'll then have to `require` it in your application when booting up Taunus\n\n    Here is where things get [a little conventional][12]. Views, and both server-side and client-side controllers are expected to be organized by following the `{root}/{controller}/{action}` pattern, but you could change that using `resolvers` when invoking the CLI and using the server-side API.\n\n    Views and controllers are also expected to be CommonJS modules that export a single method.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    [1]: /getting-started\n    [2]: http://expressjs.com\n    [3]: http://hapijs.com\n    [4]: https://github.com/ponyfoo/ponyfoo/blob/33271751312db6e92059d98293d0a7ac6e9e8e5b/views/server/layout/layout.jade\n    [5]: https://github.com/bevacqua/hget\n    [6]: https://github.com/ponyfoo/ponyfoo/blob/f6d6b5068ff03a387f503900160d9fdc1e749750/controllers/routing.js#L70-L72\n    [7]: https://github.com/taunus/taunus-express\n    [8]: https://github.com/taunus/taunus-hapi\n    [9]: https://github.com/taunus/hapiify\n    [10]: https://github.com/umdjs/umd\n    [11]: http://browserify.org\n    [12]: http://en.wikipedia.org/wiki/Convention_over_configuration\n    [13]: http://en.wikipedia.org/wiki/Single-page_application\n    [14]: http://caniuse.com/#feat=indexeddb\n    [15]: /getting-started#versioning\n    [16]: https://github.com/Raynos/xhr\n    [17]: http://i.imgur.com/CjbIHy0.png\n    [18]: /performance#use-versioning-to-ensure-cache-validity\n    [19]: /performance#enable-prefetching-for-predictive-cache-loading\n    [20]: /performance#send-views-and-controllers-to-the-client-selectively\n");
}
}
},{"jadum/runtime":32}],3:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function complements(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/documentation/complements.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_debug.unshift(new jade.DebugItem( 0, "views/documentation/complements.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/documentation/complements.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 82, "views/documentation/complements.jade" ));
buf.push("<h1 id=\"complementary-modules\">Complementary Modules</h1>\n<p>Taunus is a small library by MVC framework standards, sitting <strong>below 15kB minified and gzipped</strong>. It is designed to be small. It is also designed to do one thing well, and that&#39;s <em>being a shared-rendering MVC engine</em>.</p>\n<p>Taunus can be used for routing, putting together controllers, models and views to handle human interaction. If you <a href=\"/api\">head over to the API documentation</a>, you&#39;ll notice that the server-side API, the command-line interface, and the <code>.taunusrc</code> manifest are only concerned with providing a conventional shared-rendering MVC engine.</p>\n<p>In the server-side you might need to do other things besides routing and rendering views, and other modules can take care of that. However, you&#39;re used to having database access, search, logging, and a variety of services handled by separate libraries, instead of a single behemoth that tries to do everything.</p>\n<blockquote>\n<p>In the client-side, you might be used to your MVC framework of choice resolving everything on your behalf, from DOM manipulation and data-binding to hooking up with a REST API, and everywhere in between.</p>\n</blockquote>\n<p>Taunus attempts to bring the server-side mentality of <em>&quot;not doing everything is okay&quot;</em> into the world of client-side web application development as well. To that end, Taunus recommends that you give a shot to libraries that also do <strong>one thing well</strong>.</p>\n<p>In this brief article we&#39;ll recommend a couple different libraries that play well with Taunus, and you&#39;ll also learn how to search for modules that can give you access to other functionality you may be interested in.</p>\n<h1 id=\"using-dominus-for-dom-querying\">Using <code>dominus</code> for DOM querying</h1>\n<p><a href=\"https://github.com/bevacqua/dominus\">Dominus</a> is an extra-small DOM querying library, currently clocking around <strong>4kB minified and gzipped</strong>, almost <em>ten times smaller</em> than it&#39;s competition. Unlike jQuery and popular friends, Dominus doesn&#39;t provide AJAX features, layout math, <code>&lt;form&gt;</code> manipulation, promises, tens of event binding methods, a selector engine written in plain JavaScript, nor a myriad of utility functions. Instead, Dominus focuses solely on providing a rich DOM querying and manipulation API that gets rid of inconsistencies across browsers.</p>\n<p>While the API isn&#39;t exactly compatible with jQuery, it is definitely familiar to the jQuery adept. Chaining, versatility, expressiveness, and raw power are all core concerns for Dominus. You&#39;ll find that Dominus has more consistently named methods, given that it was built with a concise API in mind.</p>\n<p>There&#39;s a few differences in semantics, and I believe that&#39;s a good thing. For instance, if you do <code>.value</code> on a checkbox or radio button you&#39;ll get back whether the input is checked. Similarly, if you call <code>.text</code> on the input you&#39;ll get the text back, which is most often what you wanted to get.</p>\n<pre><code class=\"lang-js\">var a = require(&#39;dominus&#39;);\nvar b = jQuery;\n\na(&#39;&lt;input&gt;&#39;).attr({ type: &#39;radio&#39;, value: &#39;Foo&#39; }).text();\n// &lt;- &#39;Foo&#39;\n\na(&#39;&lt;input&gt;&#39;).attr({ type: &#39;radio&#39;, checked: true }).value();\n// &lt;- true\n\nb(&#39;&lt;input&gt;&#39;).attr({ type: &#39;radio&#39;, value: &#39;Foo&#39; }).text();\n// &lt;- &#39;&#39;\n\nb(&#39;&lt;input&gt;&#39;).attr({ type: &#39;radio&#39;, checked: true }).val();\n// &lt;- &#39;Foo&#39;\n</code></pre>\n<p>One of the best aspects of Dominus, <em>besides its small size</em>, is the fact that it extends native JavaScript arrays <em>(using <a href=\"https://github.com/bevacqua/poser\"><code>poser</code></a>)</em>. That means you have access to all of the <code>Array</code> functional methods on any <code>Dominus</code> collections, such as <code>.forEach</code>, <code>.map</code>, <code>.filter</code>, <code>.sort</code> and so on.</p>\n<p>Taunus doesn&#39;t make any extensive DOM manipulation <em>(nor querying)</em> and doesn&#39;t need to use Dominus, but it may find a home in your application.</p>\n<p>You can check out the <em>complete API documentation</em> for <code>dominus</code> on <a href=\"https://github.com/bevacqua/dominus\">its GitHub repository</a>.</p>\n<h1 id=\"using-xhr-to-make-ajax-requests\">Using <code>xhr</code> to make AJAX requests</h1>\n<p>A small program called <a href=\"https://github.com/Raynos/xhr\"><code>xhr</code></a> can be used to make AJAX requests and it&#39;s bundled with Taunus, because it needs it internally to communicate with the server. As such, it was trivial for Taunus to expose this engine and give you the ability to make AJAX calls of your own using it as well.</p>\n<p>You can check out <a href=\"/api#-taunus-xhr-url-options-done-\">the API documentation</a> for an explanation of how our interface to <code>xhr</code> works, or you could also <a href=\"https://github.com/Raynos/xhr\">see their API documentation</a> and use that directly instead.</p>\n<h1 id=\"complementing-your-code-with-small-modules\">Complementing your code with small modules</h1>\n<p>There&#39;s an infinite number of modules that do just one thing well and are eager to be part of your applications. Leverage the Internet to find what you need. Small libraries tend to be better documented, concise to use, and simpler.</p>\n<p>Here&#39;s a few examples of modules you could consider.</p>\n<ul>\n<li><a href=\"https://github.com/yyx990803/vue\"><code>vue</code></a> gives you MVVM capabilities</li>\n<li><a href=\"https://github.com/polymer/observe-js\"><code>observe-js</code></a> to get data-binding</li>\n<li><a href=\"https://github.com/Matt-Esch/virtual-dom\"><code>virtual-dom</code></a> to use a virtual DOM diffing algorithm a la <a href=\"https://github.com/facebook/react\">Facebook React</a></li>\n<li><a href=\"https://github.com/bevacqua/hint\"><code>hint</code></a> progressively enhances your HTML giving you more colorful tooltips</li>\n<li><a href=\"https://github.com/bevacqua/rome\"><code>rome</code></a> is a small calendar component</li>\n</ul>\n<p>You can look for relevant modules using <a href=\"http://browserifysearch.org/\">BrowserifySearch.org</a>, the <a href=\"https://www.npmjs.org/\"><code>npm</code> search</a>, asking around on Twitter, or just by Googling!</p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.shift();;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "section.ly-section.md-markdown\n  :ultramarked\n    # Complementary Modules\n\n    Taunus is a small library by MVC framework standards, sitting **below 15kB minified and gzipped**. It is designed to be small. It is also designed to do one thing well, and that's _being a shared-rendering MVC engine_.\n\n    Taunus can be used for routing, putting together controllers, models and views to handle human interaction. If you [head over to the API documentation][1], you'll notice that the server-side API, the command-line interface, and the `.taunusrc` manifest are only concerned with providing a conventional shared-rendering MVC engine.\n\n    In the server-side you might need to do other things besides routing and rendering views, and other modules can take care of that. However, you're used to having database access, search, logging, and a variety of services handled by separate libraries, instead of a single behemoth that tries to do everything.\n\n    > In the client-side, you might be used to your MVC framework of choice resolving everything on your behalf, from DOM manipulation and data-binding to hooking up with a REST API, and everywhere in between.\n\n    Taunus attempts to bring the server-side mentality of _\"not doing everything is okay\"_ into the world of client-side web application development as well. To that end, Taunus recommends that you give a shot to libraries that also do **one thing well**.\n\n    In this brief article we'll recommend a couple different libraries that play well with Taunus, and you'll also learn how to search for modules that can give you access to other functionality you may be interested in.\n\n    # Using `dominus` for DOM querying\n\n    [Dominus][2] is an extra-small DOM querying library, currently clocking around **4kB minified and gzipped**, almost _ten times smaller_ than it's competition. Unlike jQuery and popular friends, Dominus doesn't provide AJAX features, layout math, `<form>` manipulation, promises, tens of event binding methods, a selector engine written in plain JavaScript, nor a myriad of utility functions. Instead, Dominus focuses solely on providing a rich DOM querying and manipulation API that gets rid of inconsistencies across browsers.\n\n    While the API isn't exactly compatible with jQuery, it is definitely familiar to the jQuery adept. Chaining, versatility, expressiveness, and raw power are all core concerns for Dominus. You'll find that Dominus has more consistently named methods, given that it was built with a concise API in mind.\n\n    There's a few differences in semantics, and I believe that's a good thing. For instance, if you do `.value` on a checkbox or radio button you'll get back whether the input is checked. Similarly, if you call `.text` on the input you'll get the text back, which is most often what you wanted to get.\n\n    ```js\n    var a = require('dominus');\n    var b = jQuery;\n\n    a('<input>').attr({ type: 'radio', value: 'Foo' }).text();\n    // <- 'Foo'\n\n    a('<input>').attr({ type: 'radio', checked: true }).value();\n    // <- true\n\n    b('<input>').attr({ type: 'radio', value: 'Foo' }).text();\n    // <- ''\n\n    b('<input>').attr({ type: 'radio', checked: true }).val();\n    // <- 'Foo'\n    ```\n\n    One of the best aspects of Dominus, _besides its small size_, is the fact that it extends native JavaScript arrays _(using [`poser`][5])_. That means you have access to all of the `Array` functional methods on any `Dominus` collections, such as `.forEach`, `.map`, `.filter`, `.sort` and so on.\n\n    Taunus doesn't make any extensive DOM manipulation _(nor querying)_ and doesn't need to use Dominus, but it may find a home in your application.\n\n    You can check out the _complete API documentation_ for `dominus` on [its GitHub repository][2].\n\n    # Using `xhr` to make AJAX requests\n\n    A small program called [`xhr`][4] can be used to make AJAX requests and it's bundled with Taunus, because it needs it internally to communicate with the server. As such, it was trivial for Taunus to expose this engine and give you the ability to make AJAX calls of your own using it as well.\n\n    You can check out [the API documentation][6] for an explanation of how our interface to `xhr` works, or you could also [see their API documentation][4] and use that directly instead.\n\n    # Complementing your code with small modules\n\n    There's an infinite number of modules that do just one thing well and are eager to be part of your applications. Leverage the Internet to find what you need. Small libraries tend to be better documented, concise to use, and simpler.\n\n    Here's a few examples of modules you could consider.\n\n    - [`vue`][15] gives you MVVM capabilities\n    - [`observe-js`][7] to get data-binding\n    - [`virtual-dom`][8] to use a virtual DOM diffing algorithm a la [Facebook React][9]\n    - [`hint`][10] progressively enhances your HTML giving you more colorful tooltips\n    - [`rome`][11] is a small calendar component\n\n    You can look for relevant modules using [BrowserifySearch.org][13], the [`npm` search][14], asking around on Twitter, or just by Googling!\n\n    [1]: /api\n    [2]: https://github.com/bevacqua/dominus\n    [4]: https://github.com/Raynos/xhr\n    [5]: https://github.com/bevacqua/poser\n    [6]: /api#-taunus-xhr-url-options-done-\n    [7]: https://github.com/polymer/observe-js\n    [8]: https://github.com/Matt-Esch/virtual-dom\n    [9]: https://github.com/facebook/react\n    [10]: https://github.com/bevacqua/hint\n    [11]: https://github.com/bevacqua/rome\n    [12]: https://github.com/bevacqua/hint\n    [13]: http://browserifysearch.org/\n    [14]: https://www.npmjs.org/\n    [15]: https://github.com/yyx990803/vue\n");
}
}
},{"jadum/runtime":32}],4:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function gettingStarted(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/documentation/getting-started.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_debug.unshift(new jade.DebugItem( 0, "views/documentation/getting-started.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/documentation/getting-started.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 702, "views/documentation/getting-started.jade" ));
buf.push("<h1 id=\"getting-started\">Getting Started</h1>\n<p>Taunus is a shared-rendering MVC engine for Node.js, and it&#39;s <em>up to you how to use it</em>. In fact, it might be a good idea for you to <strong>set up just the server-side aspect first</strong>, as that&#39;ll teach you how it works even when JavaScript never gets to the client.</p>\n<h1 id=\"table-of-contents\">Table of Contents</h1>\n<ul>\n<li><a href=\"#how-it-works\">How it works</a></li>\n<li><a href=\"#installing-taunus\">Installing Taunus</a></li>\n<li><a href=\"#setting-up-the-server-side\">Setting up the server-side</a><ul>\n<li><a href=\"#your-first-route\">Your first route</a></li>\n<li><a href=\"#creating-a-layout\">Creating a layout</a></li>\n<li><a href=\"#using-jade-as-your-view-engine\">Using Jade as your view engine</a></li>\n<li><a href=\"#throwing-in-a-controller\">Throwing in a controller</a></li>\n</ul>\n</li>\n<li><a href=\"#taunus-in-the-client\">Taunus in the client</a><ul>\n<li><a href=\"#using-the-taunus-cli\">Using the Taunus CLI</a></li>\n<li><a href=\"#booting-up-the-client-side-router\">Booting up the client-side router</a></li>\n<li><a href=\"#adding-functionality-in-a-client-side-controller\">Adding functionality in a client-side controller</a></li>\n<li><a href=\"#compiling-your-client-side-javascript\">Compiling your client-side JavaScript</a></li>\n<li><a href=\"#using-the-client-side-taunus-api\">Using the client-side Taunus API</a></li>\n<li><a href=\"#caching-and-prefetching\">Caching and Prefetching</a></li>\n<li><a href=\"#versioning\">Versioning</a></li>\n</ul>\n</li>\n<li><a href=\"#the-sky-is-the-limit-\">The sky is the limit!</a></li>\n</ul>\n<h1 id=\"how-it-works\">How it works</h1>\n<p>Taunus follows a simple but <strong>proven</strong> set of rules.</p>\n<ul>\n<li>Define a <code>function(model)</code> for each your views</li>\n<li>Put these views in both the server and the client</li>\n<li>Define routes for your application</li>\n<li>Put those routes in both the server and the client</li>\n<li>Ensure route matches work the same way on both ends</li>\n<li>Create server-side controllers that yield the model for your views</li>\n<li>Create client-side controllers if you need to add client-side functionality to a particular view</li>\n<li>For the first request, always render views on the server-side</li>\n<li>When rendering a view on the server-side, include the full layout as well!</li>\n<li>Once the client-side code kicks in, <strong>hijack link clicks</strong> and make AJAX requests instead</li>\n<li>When you get the JSON model back, render views on the client-side</li>\n<li>If the <code>history</code> API is unavailable, fall back to good old request-response. <strong>Don&#39;t confuse your humans with obscure hash routers!</strong></li>\n</ul>\n<p>I&#39;ll step you through these, but rather than looking at implementation details, I&#39;ll walk you through the steps you need to take in order to make this flow happen.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"installing-taunus\">Installing Taunus</h1>\n<p>First off, you&#39;ll need to choose a HTTP server framework for your application. At the moment Taunus supports only a couple of HTTP frameworks, but more may be added if they are popular enough.</p>\n<ul>\n<li><a href=\"http://expressjs.com\">Express</a>, through <a href=\"https://github.com/taunus/taunus-express\">taunus-express</a></li>\n<li><a href=\"http://hapijs.com\">Hapi</a>, through <a href=\"https://github.com/taunus/taunus-hapi\">taunus-hapi</a> and the <a href=\"https://github.com/taunus/hapiify\">hapiify</a> transform</li>\n</ul>\n<blockquote>\n<p>If you&#39;re more of a <em>&quot;rummage through someone else&#39;s code&quot;</em> type of developer, you may feel comfortable <a href=\"https://github.com/taunus/taunus.io\">going through this website&#39;s source code</a>, which uses the <a href=\"http://hapijs.com\">Hapi</a> flavor of Taunus. Alternatively you can look at the source code for <a href=\"https://github.com/ponyfoo/ponyfoo\">ponyfoo.com</a>, which is <strong>a more advanced use-case</strong> under the <a href=\"http://expressjs.com\">Express</a> flavor. Or, you could just keep on reading this page, that&#39;s okay too.</p>\n<p>There&#39;s also <a href=\"https://github.com/taunus/generator-taunus\">a Yeoman generator named <code>generator-taunus</code></a> you could use to get started, instead.</p>\n</blockquote>\n<p>Once you&#39;ve settled for either <a href=\"http://expressjs.com\">Express</a> or <a href=\"http://hapijs.com\">Hapi</a> you&#39;ll be able to proceed. For the purposes of this guide, we&#39;ll use <a href=\"http://expressjs.com\">Express</a>. Switching between one of the different HTTP flavors is strikingly easy, though.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"setting-up-the-server-side\">Setting up the server-side</h4>\n<p>Naturally, you&#39;ll need to install all of the following modules from <code>npm</code> to get started.</p>\n<pre><code class=\"lang-shell\">mkdir getting-started\ncd getting-started\nnpm init\nnpm install --save taunus taunus-express express\n</code></pre>\n<p><img src=\"http://i.imgur.com/4P8vNe9.png\" alt=\"Screenshot with `npm init` output\"></p>\n<p>Let&#39;s build our application step-by-step, and I&#39;ll walk you through them as we go along. First of all, you&#39;ll need the famous <code>app.js</code> file.</p>\n<pre><code class=\"lang-shell\">touch app.js\n</code></pre>\n<p>It&#39;s probably a good idea to put something in your <code>app.js</code> file, let&#39;s do that now.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar app = express();\nvar options = {};\n\ntaunusExpress(taunus, app, options);\napp.listen(3000);\n</code></pre>\n<p>All <code>taunus-express</code> really does is add a bunch of routes to your Express <code>app</code>. You should note that any middleware and API routes should probably come before the <code>taunusExpress</code> invocation. You&#39;ll probably be using a catch-all view route that renders a <em>&quot;Not Found&quot;</em> view, blocking any routing beyond that route.</p>\n<p>If you were to run the application now you would get a friendly reminder from Taunus letting you know that you forgot to declare any view routes. Silly you!</p>\n<pre><code class=\"lang-shell\">node app\n</code></pre>\n<p><img src=\"http://i.imgur.com/n8mH4mN.png\" alt=\"Screenshot with `node app` output\"></p>\n<p>The <code>options</code> object passed to <code>taunusExpress</code> let&#39;s you configure Taunus. Instead of discussing every single configuration option you could set here, let&#39;s discuss what matters: the <em>required configuration</em>. There&#39;s two options that you must set if you want your Taunus application to make any sense.</p>\n<ul>\n<li><code>routes</code> should be an array of view routes</li>\n<li><code>layout</code> should be a function that takes a single <code>model</code> argument and returns an entire HTML document</li>\n</ul>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"your-first-route\">Your first route</h4>\n<p>Routes need to be placed in its own dedicated module, so that you can reuse it later on <strong>when setting up client-side routing</strong>. Let&#39;s create that module and add a route to it.</p>\n<pre><code class=\"lang-shell\">touch routes.js\n</code></pre>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nmodule.exports = [\n  { route: &#39;/&#39;, action: &#39;home/index&#39; }\n];\n</code></pre>\n<p>Each item in the exported array is a route. In this case, we only have the <code>/</code> route with the <code>home/index</code> action. Taunus follows the well known <a href=\"http://en.wikipedia.org/wiki/Convention_over_configuration\">convention over configuration pattern</a>, which made <a href=\"http://en.wikipedia.org/wiki/Ruby_on_Rails\">Ruby on Rails</a> famous. <em>Maybe one day Taunus will be famous too!</em> By convention, Taunus will assume that the <code>home/index</code> action uses the <code>home/index</code> controller and renders the <code>home/index</code> view. Of course, <em>all of that can be changed using configuration</em>.</p>\n<p>Time to go back to <code>app.js</code> and update the <code>options</code> object.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar app = express();\nvar options = {\n  routes: require(&#39;./routes&#39;)\n};\n\ntaunusExpress(taunus, app, options);\napp.listen(3000);\n</code></pre>\n<p>It&#39;s important to know that if you omit the creation of a controller then Taunus will skip that step, and render the view passing it whatever the default model is <em>(more on that <a href=\"/api\">in the API documentation</a>, but it defaults to <code>{}</code>)</em>.</p>\n<p>Here&#39;s what you&#39;d get if you attempted to run the application at this point.</p>\n<pre><code class=\"lang-shell\">node app &amp;\ncurl localhost:3000\n</code></pre>\n<p><img src=\"http://i.imgur.com/08lnCec.png\" alt=\"Screenshot with `node app` results\"></p>\n<p>Turns out you&#39;re missing a lot of things! Taunus is quite lenient and it&#39;ll try its best to let you know what you might be missing, though. Apparently you don&#39;t have a layout, a server-side controller, or even a view! <em>That&#39;s rough.</em></p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"creating-a-layout\">Creating a layout</h4>\n<p>Let&#39;s also create a layout. For the purposes of making our way through this guide, it&#39;ll just be a plain JavaScript function.</p>\n<pre><code class=\"lang-shell\">touch layout.js\n</code></pre>\n<p>Note that the <code>partial</code> property in the <code>model</code> <em>(as seen below)</em> is created on the fly after rendering partial views. The layout function we&#39;ll be using here effectively means <em>&quot;use the following combination of plain text and the <strong>(maybe HTML)</strong> partial view&quot;</em>.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nmodule.exports = function (model) {\n  return &#39;This is the partial: &quot;&#39; + model.partial + &#39;&quot;&#39;;\n};\n</code></pre>\n<p>Of course, if you were developing a real application, then you probably wouldn&#39;t want to write views as JavaScript functions as that&#39;s unproductive, confusing, and hard to maintain. What you could do instead, is use a view-rendering engine that allows you to compile your view templates into JavaScript functions.</p>\n<ul>\n<li><a href=\"https://github.com/janl/mustache.js\">Mustache</a> is a templating engine that can compile your views into plain functions, using a syntax that&#39;s minimally different from HTML</li>\n<li><a href=\"https://github.com/jadejs/jade\">Jade</a> is another option, and it has a terse syntax where spacing matters but there&#39;s no closing tags</li>\n<li>There&#39;s many more alternatives like <a href=\"http://mozilla.github.io/nunjucks/\">Mozilla&#39;s Nunjucks</a>, <a href=\"http://handlebarsjs.com/\">Handlebars</a>, and <a href=\"http://www.embeddedjs.com/\">EJS</a>.</li>\n</ul>\n<p>Remember to add the <code>layout</code> under the <code>options</code> object passed to <code>taunusExpress</code>!</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar app = express();\nvar options = {\n  routes: require(&#39;./routes&#39;),\n  layout: require(&#39;./layout&#39;)\n};\n\ntaunusExpress(taunus, app, options);\napp.listen(3000);\n</code></pre>\n<p>Here&#39;s what you&#39;d get if you ran the application at this point.</p>\n<pre><code class=\"lang-shell\">node app &amp;\ncurl localhost:3000\n</code></pre>\n<p><img src=\"http://i.imgur.com/wUbnCyk.png\" alt=\"Screenshot with `node app` output\"></p>\n<p>At this point we have a layout, but we&#39;re still missing the partial view and the server-side controller. We can do without the controller, but having no views is kind of pointless when you&#39;re trying to get an MVC engine up and running, right?</p>\n<p>You&#39;ll find tools related to view templating in the <a href=\"/complements\">complementary modules section</a>. If you don&#39;t provide a <code>layout</code> property at all, Taunus will render your model in a response by wrapping it in <code>&lt;pre&gt;</code> and <code>&lt;code&gt;</code> tags, which may aid you when getting started.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"using-jade-as-your-view-engine\">Using Jade as your view engine</h4>\n<p>Let&#39;s go ahead and use Jade as the view-rendering engine of choice for our views.</p>\n<pre><code class=\"lang-shell\">mkdir -p views/home\ntouch views/home/index.jade\n</code></pre>\n<p>Since we&#39;re just getting started, the view will just have some basic static content, and that&#39;s it.</p>\n<pre><code class=\"lang-jade\">p Hello Taunus!\n</code></pre>\n<p>Next you&#39;ll want to compile the view into a function. To do that you can use <a href=\"https://github.com/bevacqua/jadum\">jadum</a>, a specialized Jade compiler that plays well with Taunus by being aware of <code>require</code> statements, and thus saving bytes when it comes to client-side rendering. Let&#39;s install it globally, for the sake of this exercise <em>(you should install it locally when you&#39;re developing a real application)</em>.</p>\n<pre><code class=\"lang-shell\">npm install --global jadum\n</code></pre>\n<p>To compile every view in the <code>views</code> directory into functions that work well with Taunus, you can use the command below. The <code>--output</code> flag indicates where you want the views to be placed. We chose to use <code>.bin</code> because that&#39;s where Taunus expects your compiled views to be by default. But since Taunus follows the <a href=\"http://ponyfoo.com/stop-breaking-the-web\">convention over configuration</a> approach, you could change that if you wanted to.</p>\n<pre><code class=\"lang-shell\">jadum views/** --output .bin\n</code></pre>\n<p>Congratulations! Your first view is now operational and built using a full-fledged templating engine! All that&#39;s left is for you to run the application and visit it on port <code>3000</code>.</p>\n<pre><code class=\"lang-shell\">node app &amp;\nopen http://localhost:3000\n</code></pre>\n<p><img src=\"http://i.imgur.com/zjaJYCq.png\" alt=\"Screenshot with `node app` output\"></p>\n<p>Granted, you should <em>probably</em> move the layout into a Jade <em>(any view engine will do)</em> template as well.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"throwing-in-a-controller\">Throwing in a controller</h4>\n<p>Controllers are indeed optional, but an application that renders every view using the same model won&#39;t get you very far. Controllers allow you to handle the request and put together the model to be used when sending a response. Contrary to what most frameworks propose, Taunus expects every action to have its own individual controller. Since Node.js makes it easy to import components, this setup helps you keep your code modular while still being able to reuse logic by sharing modules across different controllers. Let&#39;s create a controller for the <code>home/view</code> action.</p>\n<pre><code class=\"lang-shell\">mkdir -p controllers/home\ntouch controllers/home/index.js\n</code></pre>\n<p>The controller module should merely export a function. <em>Started noticing the pattern?</em> The signature for the controller is the same signature as that of any other middleware passed to <a href=\"http://expressjs.com\">Express</a> <em>(or any route handler passed to <a href=\"http://hapijs.com\">Hapi</a> in the case of <code>taunus-hapi</code>)</em>.</p>\n<p>As you may have noticed in the examples so far, you haven&#39;t even set a document title for your HTML pages! Turns out, there&#39;s a few model properties <em>(very few)</em> that Taunus is aware of. One of those is the <code>title</code> property, and it&#39;ll be used to change the <code>document.title</code> in your pages when navigating through the client-side. Keep in mind that anything that&#39;s not in the <code>model</code> property won&#39;t be trasmitted to the client, and will just be accessible to the layout.</p>\n<p>Here is our newfangled <code>home/index</code> controller. As you&#39;ll notice, it doesn&#39;t disrupt any of the typical Express experience, but merely builds upon it. When <code>next</code> is called, the Taunus view-rendering handler will kick in, and render the view using the information that was assigned to <code>res.viewModel</code>.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nmodule.exports = function (req, res, next) {\n  res.viewModel = {\n    model: {\n      title: &#39;Welcome Home, Taunus!&#39;\n    }\n  };\n  next();\n};\n</code></pre>\n<p>Of course, relying on the client-side changes to your page in order to set the view title <em>wouldn&#39;t be progressive</em>, and thus <a href=\"http://ponyfoo.com/stop-breaking-the-web\">it would be really, <em>really</em> bad</a>. We should update the layout to use whatever <code>title</code> has been passed to the model. In fact, let&#39;s go back to the drawing board and make the layout into a Jade template!</p>\n<pre><code class=\"lang-shell\">rm layout.js\ntouch views/layout.jade\njadum views/** --output .bin\n</code></pre>\n<p>You should also remember to update the <code>app.js</code> module once again!</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar app = express();\nvar options = {\n  routes: require(&#39;./routes&#39;),\n  layout: require(&#39;./.bin/views/layout&#39;)\n};\n\ntaunusExpress(taunus, app, options);\napp.listen(3000);\n</code></pre>\n<p>The <code>!=</code> syntax below means that whatever is in the value assigned to the element won&#39;t be escaped. That&#39;s okay because <code>partial</code> is a view where Jade escaped anything that needed escaping, but we wouldn&#39;t want HTML tags to be escaped!</p>\n<pre><code class=\"lang-jade\">title=model.title\nmain!=partial\n</code></pre>\n<p>By the way, did you know that <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> are all optional in HTML 5, and that you can safely omit them in your HTML? Of course, rendering engines will still insert those elements automatically into the DOM for you! <em>How cool is that?</em></p>\n<pre><code class=\"lang-shell\">node app\n</code></pre>\n<p><img src=\"http://i.imgur.com/NvEWx9z.png\" alt=\"Screenshot with `node app` output\"></p>\n<p>You can now visit <code>localhost:3000</code> with your favorite web browser and you&#39;ll notice that the view renders as you&#39;d expect. The title will be properly set, and a <code>&lt;main&gt;</code> element will have the contents of your view.</p>\n<p><img src=\"http://i.imgur.com/LgZRFn5.png\" alt=\"Screenshot with application running on Google Chrome\"></p>\n<p>That&#39;s it, now your view has a title. Of course, there&#39;s nothing stopping you from adding database calls to fetch bits and pieces of the model before invoking <code>next</code> to render the view.</p>\n<p>Then there&#39;s also the client-side aspect of setting up Taunus. Let&#39;s set it up and see how it opens up our possibilities.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"taunus-in-the-client\">Taunus in the client</h1>\n<p>You already know how to set up the basics for server-side rendering, and you know that you should <a href=\"/api\">check out the API documentation</a> to get a more thorough understanding of the public interface on Taunus, and what it enables you to do.</p>\n<p>The way Taunus works on the client-side is so that once you set it up, it will hijack link clicks and use AJAX to fetch models and render those views in the client. If the JavaScript code fails to load, <em>or if it hasn&#39;t loaded yet due to a slow connection such as those in unstable mobile networks</em>, the regular link would be followed instead and no harm would be unleashed upon the human, except they would get a slightly less fancy experience.</p>\n<p>Setting up the client-side involves a few different steps. Firstly, we&#39;ll have to compile the application&#39;s wiring <em>(the routes and JavaScript view functions)</em> into something the browser understands. Then, you&#39;ll have to mount Taunus on the client-side, passing the wiring so that it knows which routes it should respond to, and which others it should merely ignore. Once that&#39;s out of the way, client-side routing would be set up.</p>\n<p>As sugar coating on top of that, you may add client-side functionality using controllers. These controllers would be executed even if the view was rendered on the server-side. They can access the Taunus API directly, in case you need to navigate to another view in some way other than by having humans click on anchor tags. The API, as you&#39;ll learn, will also let you render partial views using the powerful Taunus engine, listen for events that may occur at key stages of the view-rendering process, and even intercept AJAX requests blocking them before they ever happen.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"using-the-taunus-cli\">Using the Taunus CLI</h4>\n<p>Taunus comes with a CLI that can be used to wire your Node.js routes and views into the client-side. The same CLI can be used to wire up the client-side controllers as well. The main reason why the Taunus CLI exists is so that you don&#39;t have to <code>require</code> every single view and controller, undoing a lot of the work that was put into code reuse. Just like we did with <code>jadum</code> earlier, we&#39;ll install the <code>taunus</code> CLI globally for the sake of exercising, but we understand that relying on globally installed modules is insufficient for production-grade applications.</p>\n<pre><code class=\"lang-shell\">npm install --global taunus\n</code></pre>\n<p>Before you can use the CLI, you should move the route definitions to <code>controllers/routes.js</code>. That&#39;s where Taunus expects them to be. If you want to place them something else, <a href=\"/api\">the API documentation can help you</a>.</p>\n<pre><code class=\"lang-shell\">mv routes.js controllers/routes.js\n</code></pre>\n<p>Since you moved the routes you should also update the <code>require</code> statement in the <code>app.js</code> module.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar app = express();\nvar options = {\n  routes: require(&#39;./controllers/routes&#39;),\n  layout: require(&#39;./.bin/views/layout&#39;)\n};\n\ntaunusExpress(taunus, app, options);\napp.listen(3000);\n</code></pre>\n<p>The CLI is terse in both its inputs and its outputs. If you run it without any arguments it&#39;ll print out the wiring module, and if you want to persist it you should provide the <code>--output</code> flag. In typical <a href=\"http://en.wikipedia.org/wiki/Convention_over_configuration\">convention-over-configuration</a> fashion, the CLI will default to inferring your views are located in <code>.bin/views</code> and that you want the wiring module to be placed in <code>.bin/wiring.js</code>, but you&#39;ll be able to change that if it doesn&#39;t meet your needs.</p>\n<pre><code class=\"lang-shell\">taunus --output\n</code></pre>\n<p>At this point in our example, the CLI should create a <code>.bin/wiring.js</code> file with the contents detailed below. As you can see, even if <code>taunus</code> is an automated code-generation tool, it&#39;s output is as human readable as any other module.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar templates = {\n  &#39;home/index&#39;: require(&#39;./views/home/index.js&#39;),\n  &#39;layout&#39;: require(&#39;./views/layout.js&#39;)\n};\n\nvar controllers = {\n};\n\nvar routes = [\n  {\n    route: &#39;/&#39;,\n    action: &#39;home/index&#39;\n  }\n];\n\nmodule.exports = {\n  templates: templates,\n  controllers: controllers,\n  routes: routes\n};\n</code></pre>\n<p><img src=\"http://i.imgur.com/fIEe5Tm.png\" alt=\"Screenshot with `taunus` output\"></p>\n<p>Note that the <code>controllers</code> object is empty because you haven&#39;t created any <em>client-side controllers</em> yet. We created server-side controllers but those don&#39;t have any effect in the client-side, besides determining what gets sent to the client.</p>\n<blockquote>\n<p><strong>The CLI can be entirely ignored</strong>. You could write these definitions by yourself, but you would have to remember to update the wiring module whenever you add, change, or remove a view, a client-side controller, or a route. Doing that would be cumbersome, and the CLI solves that problem for us at the expense of one additional build step.</p>\n</blockquote>\n<p>During development, you can also add the <code>--watch</code> flag, which will rebuild the wiring module if a relevant file changes.</p>\n<pre><code class=\"lang-shell\">taunus --output --watch\n</code></pre>\n<p>If you&#39;re using Hapi instead of Express, you&#39;ll also need to pass in the <code>hapiify</code> transform so that routes get converted into something the client-side routing module understand.</p>\n<pre><code class=\"lang-shell\">taunus --output --transform hapiify\n</code></pre>\n<p>Now that you understand how to use the CLI or build the wiring module on your own, booting up Taunus on the client-side will be an easy thing to do!</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"booting-up-the-client-side-router\">Booting up the client-side router</h4>\n<p>Once we have the wiring module, booting up the client-side engine is pretty easy. Taunus suggests you use <code>client/js</code> to keep all of your client-side JavaScript logic, but that is up to you too. For the sake of this guide, let&#39;s stick to the conventions.</p>\n<pre><code class=\"lang-shell\">mkdir -p client/js\ntouch client/js/main.js\n</code></pre>\n<p>The <code>main</code> module will be used as the <em>entry point</em> of your application on the client-side. Here you&#39;ll need to import <code>taunus</code>, the wiring module we&#39;ve just built, and a reference to the DOM element where you are rendering your partial views. Once you have all that, you can invoke <code>taunus.mount</code>.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar wiring = require(&#39;../../.bin/wiring&#39;);\nvar main = document.getElementsByTagName(&#39;main&#39;)[0];\n\ntaunus.mount(main, wiring);\n</code></pre>\n<p>The mountpoint will set up the client-side Taunus router and fire the client-side view controller for the view that has been rendered in the server-side. Whenever an anchor link is clicked, Taunus will be able to hijack that click and request the model using AJAX, but only if it matches a view route. Otherwise the link will behave just like any normal link would.</p>\n<p>By default, the mountpoint will issue an AJAX request for the view model of the server-side rendered view. This is akin to what dedicated client-side rendering frameworks such as AngularJS do, where views are only rendered after all the JavaScript has been downloaded, parsed, and executed. Except Taunus provides human-readable content faster, before the JavaScript even begins downloading, although it won&#39;t be functional until the client-side controller runs.</p>\n<p>An alternative is to inline the view model alongside the views in a <code>&lt;script type=&#39;text/taunus&#39;&gt;</code> tag, but this tends to slow down the initial response (models are <em>typically larger</em> than the resulting views).</p>\n<p>A third strategy is that you request the model asynchronously outside of Taunus, allowing you to fetch both the view model and Taunus itself concurrently, but that&#39;s harder to set up.</p>\n<p>The three booting strategies are explained in <a href=\"/api\">the API documentation</a> and further discussed in <a href=\"/performance\">the optimization guide</a>. For now, the default strategy <em>(<code>&#39;auto&#39;</code>)</em> should suffice. It fetches the view model using an AJAX request right after Taunus loads.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"adding-functionality-in-a-client-side-controller\">Adding functionality in a client-side controller</h4>\n<p>Client-side controllers run whenever a view is rendered, even if it&#39;s a partial. The controller is passed the <code>model</code>, containing the model that was used to render the view; the <code>route</code>, broken down into its components; and the <code>container</code>, which is whatever DOM element the view was rendered into.</p>\n<p>These controllers are entirely optional, which makes sense since we&#39;re progressively enhancing the application: it might not even be necessary! Let&#39;s add some client-side functionality to the example we&#39;ve been building.</p>\n<pre><code class=\"lang-shell\">mkdir -p client/js/controllers/home\ntouch client/js/controllers/home/index.js\n</code></pre>\n<p>Guess what? The controller should be a module which exports a function. That function will be called whenever the view is rendered. For the sake of simplicity we&#39;ll just print the action and the model to the console. If there&#39;s one place where you&#39;d want to enhance the experience, client-side controllers are where you want to put your code.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nmodule.exports = function (model, container, route) {\n  console.log(&#39;Rendered view %s using model:\\n%s&#39;, route.action, JSON.stringify(model, null, 2));\n};\n</code></pre>\n<p>Since we weren&#39;t using the <code>--watch</code> flag from the Taunus CLI, you&#39;ll have to recompile the wiring at this point, so that the controller gets added to that manifest.</p>\n<pre><code class=\"lang-shell\">taunus --output\n</code></pre>\n<p>Of course, you&#39;ll now have to wire up the client-side JavaScript using <a href=\"http://browserify.org/\">Browserify</a>!</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"compiling-your-client-side-javascript\">Compiling your client-side JavaScript</h4>\n<p>You&#39;ll need to compile the <code>client/js/main.js</code> module, our client-side application&#39;s entry point, using Browserify since the code is written using CommonJS. In this example you&#39;ll install <code>browserify</code> globally to compile the code, but naturally you&#39;ll install it locally when working on a real-world application.</p>\n<pre><code class=\"lang-shell\">npm install --global browserify\n</code></pre>\n<p>Once you have the Browserify CLI, you&#39;ll be able to compile the code right from your command line. The <code>-d</code> flag tells Browserify to add an inline source map into the compiled bundle, making debugging easier for us. The <code>-o</code> flag redirects output to the indicated file, whereas the output is printed to standard output by default.</p>\n<pre><code class=\"lang-shell\">mkdir -p .bin/public/js\nbrowserify client/js/main.js -do .bin/public/js/all.js\n</code></pre>\n<p>We haven&#39;t done much of anything with the Express application, so you&#39;ll need to adjust the <code>app.js</code> module to serve static assets. If you&#39;re used to Express, you&#39;ll notice there&#39;s nothing special about how we&#39;re using <code>serve-static</code>.</p>\n<pre><code class=\"lang-shell\">npm install --save serve-static\n</code></pre>\n<p>Let&#39;s configure the application to serve static assets from <code>.bin/public</code>.</p>\n<pre><code class=\"lang-js\">&#39;use strict&#39;;\n\nvar taunus = require(&#39;taunus&#39;);\nvar taunusExpress = require(&#39;taunus-express&#39;);\nvar express = require(&#39;express&#39;);\nvar serveStatic = require(&#39;serve-static&#39;);\nvar app = express();\nvar options = {\n  routes: require(&#39;./controllers/routes&#39;),\n  layout: require(&#39;./.bin/views/layout&#39;)\n};\n\napp.use(serveStatic(&#39;.bin/public&#39;));\ntaunusExpress(taunus, app, options);\napp.listen(3000);\n</code></pre>\n<p>Next up, you&#39;ll have to edit the layout to include the compiled JavaScript bundle file.</p>\n<pre><code class=\"lang-jade\">title=model.title\nmain!=partial\nscript(src=&#39;/js/all.js&#39;)\n</code></pre>\n<p>Don&#39;t forget to compile <code>layout.jade</code> again.</p>\n<pre><code class=\"lang-shell\">jadum views/** --output .bin\n</code></pre>\n<p>Lastly, you can execute the application and see it in action!</p>\n<pre><code class=\"lang-shell\">node app\n</code></pre>\n<p><img src=\"http://i.imgur.com/68O84wX.png\" alt=\"Screenshot with `node app` output\"></p>\n<p>If you open the application on a web browser, you&#39;ll notice that the appropriate information will be logged into the developer <code>console</code>.</p>\n<p><img src=\"http://i.imgur.com/ZUF6NFl.png\" alt=\"Screenshot with the application running under Google Chrome\"></p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"using-the-client-side-taunus-api\">Using the client-side Taunus API</h4>\n<p>Taunus does provide <a href=\"/api\">a thin API</a> in the client-side. Usage of that API belongs mostly inside the body of client-side view controllers, but there&#39;s a few methods you can take advantage of on a global scale as well.</p>\n<p>Taunus can notify you whenever important events occur.</p>\n<table>\n<thead>\n<tr>\n<th>Event</th>\n<th>Arguments</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&#39;start&#39;</code></td>\n<td><code>container, model, route</code></td>\n<td>Emitted when <code>taunus.mount</code> finished the route setup and is about to invoke the client-side controller. Subscribe to this event before calling <code>taunus.mount</code>.</td>\n</tr>\n<tr>\n<td><code>&#39;render&#39;</code></td>\n<td><code>container, model, route</code></td>\n<td>A view has just been rendered and its client-side controller is about to be invoked</td>\n</tr>\n<tr>\n<td><code>&#39;change&#39;</code></td>\n<td><code>route, model</code></td>\n<td>Same as <code>&#39;render&#39;</code>, but only if <code>container</code> is the mountpoint and the route has changed.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.start&#39;</code></td>\n<td><code>route, context</code></td>\n<td>Emitted whenever an XHR request starts.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.done&#39;</code></td>\n<td><code>route, context, data</code></td>\n<td>Emitted whenever an XHR request ends successfully.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.abort&#39;</code></td>\n<td><code>route, context</code></td>\n<td>Emitted whenever an XHR request is purposely aborted.</td>\n</tr>\n<tr>\n<td><code>&#39;fetch.error&#39;</code></td>\n<td><code>route, context, err</code></td>\n<td>Emitted whenever an XHR request results in an HTTP error.</td>\n</tr>\n</tbody>\n</table>\n<p>Besides events, there&#39;s a couple more methods you can use. The <code>taunus.navigate</code> method allows you to navigate to a URL without the need for a human to click on an anchor link. Then there&#39;s <code>taunus.partial</code>, and that allows you to render any partial view on a DOM element of your choosing, and it&#39;ll then invoke its controller. You&#39;ll need to come up with the model yourself, though.</p>\n<p>Astonishingly, the API is further documented in <a href=\"/api\">the API documentation</a>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"caching-and-prefetching\">Caching and Prefetching</h4>\n<p><a href=\"/performance\">Performance</a> plays an important role in Taunus. That&#39;s why the you can perform caching and prefetching on the client-side just by turning on a pair of flags. But what do these flags do exactly?</p>\n<p>When turned on, by passing <code>{ cache: true }</code> as the third parameter for <code>taunus.mount</code>, the caching layer will make sure that responses are kept around for <code>15</code> seconds. Whenever a route needs a model in order to render a view, it&#39;ll first ask the caching layer for a fresh copy. If the caching layer doesn&#39;t have a copy, or if that copy is stale <em>(in this case, older than <code>15</code> seconds)</em>, then an AJAX request will be issued to the server. Of course, the duration is configurable. If you want to use a value other than the default, you should set <code>cache</code> to a number in seconds instead of just <code>true</code>.</p>\n<p>Since Taunus understands that not every view operates under the same constraints, you&#39;re also able to set a <code>cache</code> freshness duration directly in your routes. The <code>cache</code> property in routes has precedence over the default value.</p>\n<p>There&#39;s currently two caching stores: a raw in-memory store, and an <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a> store. IndexedDB is an embedded database solution, and you can think of it like an asynchronous version of <code>localStorage</code>. It has <a href=\"http://caniuse.com/#feat=indexeddb\">surprisingly broad browser support</a>, and in the cases where it&#39;s not supported then caching is done solely in-memory.</p>\n<p>The prefetching mechanism is an interesting spin-off of caching, and it requires caching to be enabled in order to work. Whenever humans hover over a link, or whenever they put their finger on one of them <em>(the <code>touchstart</code> event)</em>, the prefetcher will issue an AJAX request for the view model for that link.</p>\n<p>If the request ends successfully then the response will be cached in the same way any other view would be cached. If the human hovers over another link while the previous one is still being prefetched, then the old request is aborted, as not to drain their <em>(possibly limited)</em> Internet connection bandwidth.</p>\n<p>If the human clicks on the link before prefetching is completed, he&#39;ll navigate to the view as soon as prefetching ends, rather than firing another request. This helps Taunus save precious milliseconds when dealing with latency-sensitive operations.</p>\n<p>Turning prefetching on is simply a matter of setting <code>prefetch</code> to <code>true</code> in the options passed to <code>taunus.mount</code>. For additional insights into the performance improvements Taunus can offer, head over to the <a href=\"/performance\">Performance Optimizations</a> guide.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h4 id=\"versioning\">Versioning</h4>\n<p>When you alter your views, change controllers, or modify the models, chances are the client-side is going to come across one of the following issues.</p>\n<ul>\n<li>Outdated view template functions in the client-side, causing new models to break</li>\n<li>Outdated client-side controllers, causing new models to break or miss out on functionality</li>\n<li>Outdated models in the cache, causing new views or controllers to break</li>\n</ul>\n<p>Versioning handles these issues gracefully on your behalf. The way it works is that whenever you get a response from Taunus, a <em>version string (configured on the server-side)</em> is included with it. If that version string doesn&#39;t match the one stored in the client, then the cache will be flushed and the human will be redirected, forcing a full page reload.</p>\n<blockquote>\n<p>The versioning API is unable to handle changes to routes, and it&#39;s up to you to make sure that the application stays backwards compatible when it comes to routing.</p>\n<p>Versioning can&#39;t intervene when the client-side is heavily relying on cached views and models, and the human is refusing to reload their browser. The server isn&#39;t being accessed and thus it can&#39;t communicate that everything on the cache may have become stale. The good news is that the human won&#39;t notice any oddities, as the site will continue to work as he knows it. When he finally attempts to visit something that isn&#39;t cached, a request is made, and the versioning engine resolves version discrepancies for them.</p>\n</blockquote>\n<p>Making use of versioning involves setting the <code>version</code> field in the options, when invoking <code>taunus.mount</code> <strong>on both the server-side and the client-side, using the same value</strong>. The Taunus version string will be added to the one you provided, so that Taunus will know to stay alert for changes to Taunus itself, as well.</p>\n<p>You may use your build identifier or the <code>version</code> field in <code>package.json</code>, but understand that it may cause the client-side to flush the cache too often <em>(maybe even on every deployment)</em>.</p>\n<p>The default version string is set to <code>1</code>. The Taunus version will be prepended to yours, resulting in a value such as <code>t3.0.0;v1</code> where Taunus is running version <code>3.0.0</code> and your application is running version <code>1</code>.</p>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"the-sky-is-the-limit-\">The sky is the limit!</h1>\n<p>You&#39;re now familiar with how Taunus works on a high-level. You have covered a decent amount of ground, but you shouldn&#39;t stop there.</p>\n<ul>\n<li>Learn more about <a href=\"/api\">the API Taunus has</a> to offer</li>\n<li>Go through the <a href=\"/performance\">performance optimization tips</a>. You may learn something new!</li>\n<li><em>Familiarize yourself with the ways of progressive enhancement</em><ul>\n<li>Jeremy Keith enunciates <a href=\"https://adactio.com/journal/7706\">&quot;Be progressive&quot;</a></li>\n<li>Christian Heilmann advocates for <a href=\"http://icant.co.uk/articles/pragmatic-progressive-enhancement/\">&quot;Pragmatic progressive enhancement&quot;</a></li>\n<li>Jake Archibald explains how <a href=\"http://jakearchibald.com/2013/progressive-enhancement-is-faster/\">&quot;Progressive enhancement is faster&quot;</a></li>\n<li>I blogged about how we should <a href=\"http://ponyfoo.com/stop-breaking-the-web\">&quot;Stop Breaking the Web&quot;</a></li>\n<li>Guillermo Rauch argues for <a href=\"http://rauchg.com/2014/7-principles-of-rich-web-applications/\">&quot;7 Principles of Rich Web Applications&quot;</a></li>\n<li>Aaron Gustafson writes <a href=\"http://alistapart.com/article/understandingprogressiveenhancement\">&quot;Understanding Progressive Enhancement&quot;</a></li>\n<li>Orde Saunders gives his point of view in <a href=\"https://decadecity.net/blog/2013/09/16/progressive-enhancement-for-fault-tolerance\">&quot;Progressive enhancement for fault tolerance&quot;</a></li>\n</ul>\n</li>\n<li>Sift through the <a href=\"/complements\">complementary modules</a>. You may find something you hadn&#39;t thought of!</li>\n</ul>\n<p>Also, get involved!</p>\n<ul>\n<li>Fork this repository and <a href=\"https://github.com/taunus/taunus.io/pulls\">send some pull requests</a> to improve these guides!</li>\n<li>See something, say something! If you detect a bug, <a href=\"https://github.com/taunus/taunus/issues/new\">please create an issue</a>!</li>\n</ul>\n<p><sub><a href=\"#table-of-contents\"><em>(back to table of contents)</em></a></sub></p>\n<blockquote>\n<p>You&#39;ll find a <a href=\"https://github.com/taunus/getting-started\">full fledged version of the Getting Started</a> tutorial application on GitHub.</p>\n</blockquote>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.shift();;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "section.ly-section.md-markdown\n  :ultramarked\n    # Getting Started\n\n    Taunus is a shared-rendering MVC engine for Node.js, and it's _up to you how to use it_. In fact, it might be a good idea for you to **set up just the server-side aspect first**, as that'll teach you how it works even when JavaScript never gets to the client.\n\n    # Table of Contents\n\n    - [How it works](#how-it-works)\n    - [Installing Taunus](#installing-taunus)\n    - [Setting up the server-side](#setting-up-the-server-side)\n      - [Your first route](#your-first-route)\n      - [Creating a layout](#creating-a-layout)\n      - [Using Jade as your view engine](#using-jade-as-your-view-engine)\n      - [Throwing in a controller](#throwing-in-a-controller)\n    - [Taunus in the client](#taunus-in-the-client)\n      - [Using the Taunus CLI](#using-the-taunus-cli)\n      - [Booting up the client-side router](#booting-up-the-client-side-router)\n      - [Adding functionality in a client-side controller](#adding-functionality-in-a-client-side-controller)\n      - [Compiling your client-side JavaScript](#compiling-your-client-side-javascript)\n      - [Using the client-side Taunus API](#using-the-client-side-taunus-api)\n      - [Caching and Prefetching](#caching-and-prefetching)\n      - [Versioning](#versioning)\n    - [The sky is the limit!](#the-sky-is-the-limit-)\n\n    # How it works\n\n    Taunus follows a simple but **proven** set of rules.\n\n    - Define a `function(model)` for each your views\n    - Put these views in both the server and the client\n    - Define routes for your application\n    - Put those routes in both the server and the client\n    - Ensure route matches work the same way on both ends\n    - Create server-side controllers that yield the model for your views\n    - Create client-side controllers if you need to add client-side functionality to a particular view\n    - For the first request, always render views on the server-side\n    - When rendering a view on the server-side, include the full layout as well!\n    - Once the client-side code kicks in, **hijack link clicks** and make AJAX requests instead\n    - When you get the JSON model back, render views on the client-side\n    - If the `history` API is unavailable, fall back to good old request-response. **Don't confuse your humans with obscure hash routers!**\n\n    I'll step you through these, but rather than looking at implementation details, I'll walk you through the steps you need to take in order to make this flow happen.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Installing Taunus\n\n    First off, you'll need to choose a HTTP server framework for your application. At the moment Taunus supports only a couple of HTTP frameworks, but more may be added if they are popular enough.\n\n    - [Express][6], through [taunus-express][1]\n    - [Hapi][7], through [taunus-hapi][2] and the [hapiify][3] transform\n\n    > If you're more of a _\"rummage through someone else's code\"_ type of developer, you may feel comfortable [going through this website's source code][4], which uses the [Hapi][7] flavor of Taunus. Alternatively you can look at the source code for [ponyfoo.com][5], which is **a more advanced use-case** under the [Express][6] flavor. Or, you could just keep on reading this page, that's okay too.\n    >\n    > There's also [a Yeoman generator named `generator-taunus`][42] you could use to get started, instead.\n\n    Once you've settled for either [Express][6] or [Hapi][7] you'll be able to proceed. For the purposes of this guide, we'll use [Express][6]. Switching between one of the different HTTP flavors is strikingly easy, though.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Setting up the server-side\n\n    Naturally, you'll need to install all of the following modules from `npm` to get started.\n\n    ```shell\n    mkdir getting-started\n    cd getting-started\n    npm init\n    npm install --save taunus taunus-express express\n    ```\n\n    ![Screenshot with `npm init` output][30]\n\n    Let's build our application step-by-step, and I'll walk you through them as we go along. First of all, you'll need the famous `app.js` file.\n\n    ```shell\n    touch app.js\n    ```\n\n    It's probably a good idea to put something in your `app.js` file, let's do that now.\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var app = express();\n    var options = {};\n\n    taunusExpress(taunus, app, options);\n    app.listen(3000);\n    ```\n\n    All `taunus-express` really does is add a bunch of routes to your Express `app`. You should note that any middleware and API routes should probably come before the `taunusExpress` invocation. You'll probably be using a catch-all view route that renders a _\"Not Found\"_ view, blocking any routing beyond that route.\n\n    If you were to run the application now you would get a friendly reminder from Taunus letting you know that you forgot to declare any view routes. Silly you!\n\n    ```shell\n    node app\n    ```\n\n    ![Screenshot with `node app` output][31]\n\n    The `options` object passed to `taunusExpress` let's you configure Taunus. Instead of discussing every single configuration option you could set here, let's discuss what matters: the _required configuration_. There's two options that you must set if you want your Taunus application to make any sense.\n\n    - `routes` should be an array of view routes\n    - `layout` should be a function that takes a single `model` argument and returns an entire HTML document\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Your first route\n\n    Routes need to be placed in its own dedicated module, so that you can reuse it later on **when setting up client-side routing**. Let's create that module and add a route to it.\n\n    ```shell\n    touch routes.js\n    ```\n\n    ```js\n    'use strict';\n\n    module.exports = [\n      { route: '/', action: 'home/index' }\n    ];\n    ```\n\n    Each item in the exported array is a route. In this case, we only have the `/` route with the `home/index` action. Taunus follows the well known [convention over configuration pattern][8], which made [Ruby on Rails][9] famous. _Maybe one day Taunus will be famous too!_ By convention, Taunus will assume that the `home/index` action uses the `home/index` controller and renders the `home/index` view. Of course, _all of that can be changed using configuration_.\n\n    Time to go back to `app.js` and update the `options` object.\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var app = express();\n    var options = {\n      routes: require('./routes')\n    };\n\n    taunusExpress(taunus, app, options);\n    app.listen(3000);\n    ```\n\n    It's important to know that if you omit the creation of a controller then Taunus will skip that step, and render the view passing it whatever the default model is _(more on that [in the API documentation][18], but it defaults to `{}`)_.\n\n    Here's what you'd get if you attempted to run the application at this point.\n\n    ```shell\n    node app &\n    curl localhost:3000\n    ```\n\n    ![Screenshot with `node app` results][32]\n\n    Turns out you're missing a lot of things! Taunus is quite lenient and it'll try its best to let you know what you might be missing, though. Apparently you don't have a layout, a server-side controller, or even a view! _That's rough._\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Creating a layout\n\n    Let's also create a layout. For the purposes of making our way through this guide, it'll just be a plain JavaScript function.\n\n    ```shell\n    touch layout.js\n    ```\n\n    Note that the `partial` property in the `model` _(as seen below)_ is created on the fly after rendering partial views. The layout function we'll be using here effectively means _\"use the following combination of plain text and the **(maybe HTML)** partial view\"_.\n\n    ```js\n    'use strict';\n\n    module.exports = function (model) {\n      return 'This is the partial: \"' + model.partial + '\"';\n    };\n    ```\n\n    Of course, if you were developing a real application, then you probably wouldn't want to write views as JavaScript functions as that's unproductive, confusing, and hard to maintain. What you could do instead, is use a view-rendering engine that allows you to compile your view templates into JavaScript functions.\n\n    - [Mustache][10] is a templating engine that can compile your views into plain functions, using a syntax that's minimally different from HTML\n    - [Jade][11] is another option, and it has a terse syntax where spacing matters but there's no closing tags\n    - There's many more alternatives like [Mozilla's Nunjucks][12], [Handlebars][13], and [EJS][14].\n\n    Remember to add the `layout` under the `options` object passed to `taunusExpress`!\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var app = express();\n    var options = {\n      routes: require('./routes'),\n      layout: require('./layout')\n    };\n\n    taunusExpress(taunus, app, options);\n    app.listen(3000);\n    ```\n\n    Here's what you'd get if you ran the application at this point.\n\n    ```shell\n    node app &\n    curl localhost:3000\n    ```\n\n    ![Screenshot with `node app` output][33]\n\n    At this point we have a layout, but we're still missing the partial view and the server-side controller. We can do without the controller, but having no views is kind of pointless when you're trying to get an MVC engine up and running, right?\n\n    You'll find tools related to view templating in the [complementary modules section][15]. If you don't provide a `layout` property at all, Taunus will render your model in a response by wrapping it in `<pre>` and `<code>` tags, which may aid you when getting started.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Using Jade as your view engine\n\n    Let's go ahead and use Jade as the view-rendering engine of choice for our views.\n\n    ```shell\n    mkdir -p views/home\n    touch views/home/index.jade\n    ```\n\n    Since we're just getting started, the view will just have some basic static content, and that's it.\n\n    ```jade\n    p Hello Taunus!\n    ```\n\n    Next you'll want to compile the view into a function. To do that you can use [jadum][16], a specialized Jade compiler that plays well with Taunus by being aware of `require` statements, and thus saving bytes when it comes to client-side rendering. Let's install it globally, for the sake of this exercise _(you should install it locally when you're developing a real application)_.\n\n    ```shell\n    npm install --global jadum\n    ```\n\n    To compile every view in the `views` directory into functions that work well with Taunus, you can use the command below. The `--output` flag indicates where you want the views to be placed. We chose to use `.bin` because that's where Taunus expects your compiled views to be by default. But since Taunus follows the [convention over configuration][17] approach, you could change that if you wanted to.\n\n    ```shell\n    jadum views/** --output .bin\n    ```\n\n    Congratulations! Your first view is now operational and built using a full-fledged templating engine! All that's left is for you to run the application and visit it on port `3000`.\n\n    ```shell\n    node app &\n    open http://localhost:3000\n    ```\n\n    ![Screenshot with `node app` output][34]\n\n    Granted, you should _probably_ move the layout into a Jade _(any view engine will do)_ template as well.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Throwing in a controller\n\n    Controllers are indeed optional, but an application that renders every view using the same model won't get you very far. Controllers allow you to handle the request and put together the model to be used when sending a response. Contrary to what most frameworks propose, Taunus expects every action to have its own individual controller. Since Node.js makes it easy to import components, this setup helps you keep your code modular while still being able to reuse logic by sharing modules across different controllers. Let's create a controller for the `home/view` action.\n\n    ```shell\n    mkdir -p controllers/home\n    touch controllers/home/index.js\n    ```\n\n    The controller module should merely export a function. _Started noticing the pattern?_ The signature for the controller is the same signature as that of any other middleware passed to [Express][6] _(or any route handler passed to [Hapi][7] in the case of `taunus-hapi`)_.\n\n    As you may have noticed in the examples so far, you haven't even set a document title for your HTML pages! Turns out, there's a few model properties _(very few)_ that Taunus is aware of. One of those is the `title` property, and it'll be used to change the `document.title` in your pages when navigating through the client-side. Keep in mind that anything that's not in the `model` property won't be trasmitted to the client, and will just be accessible to the layout.\n\n    Here is our newfangled `home/index` controller. As you'll notice, it doesn't disrupt any of the typical Express experience, but merely builds upon it. When `next` is called, the Taunus view-rendering handler will kick in, and render the view using the information that was assigned to `res.viewModel`.\n\n    ```js\n    'use strict';\n\n    module.exports = function (req, res, next) {\n      res.viewModel = {\n        model: {\n          title: 'Welcome Home, Taunus!'\n        }\n      };\n      next();\n    };\n    ```\n\n    Of course, relying on the client-side changes to your page in order to set the view title _wouldn't be progressive_, and thus [it would be really, _really_ bad][17]. We should update the layout to use whatever `title` has been passed to the model. In fact, let's go back to the drawing board and make the layout into a Jade template!\n\n    ```shell\n    rm layout.js\n    touch views/layout.jade\n    jadum views/** --output .bin\n    ```\n\n    You should also remember to update the `app.js` module once again!\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var app = express();\n    var options = {\n      routes: require('./routes'),\n      layout: require('./.bin/views/layout')\n    };\n\n    taunusExpress(taunus, app, options);\n    app.listen(3000);\n    ```\n\n    The `!=` syntax below means that whatever is in the value assigned to the element won't be escaped. That's okay because `partial` is a view where Jade escaped anything that needed escaping, but we wouldn't want HTML tags to be escaped!\n\n    ```jade\n    title=model.title\n    main!=partial\n    ```\n\n    By the way, did you know that `<html>`, `<head>`, and `<body>` are all optional in HTML 5, and that you can safely omit them in your HTML? Of course, rendering engines will still insert those elements automatically into the DOM for you! _How cool is that?_\n\n    ```shell\n    node app\n    ```\n\n    ![Screenshot with `node app` output][35]\n\n    You can now visit `localhost:3000` with your favorite web browser and you'll notice that the view renders as you'd expect. The title will be properly set, and a `<main>` element will have the contents of your view.\n\n    ![Screenshot with application running on Google Chrome][36]\n\n    That's it, now your view has a title. Of course, there's nothing stopping you from adding database calls to fetch bits and pieces of the model before invoking `next` to render the view.\n\n    Then there's also the client-side aspect of setting up Taunus. Let's set it up and see how it opens up our possibilities.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # Taunus in the client\n\n    You already know how to set up the basics for server-side rendering, and you know that you should [check out the API documentation][18] to get a more thorough understanding of the public interface on Taunus, and what it enables you to do.\n\n    The way Taunus works on the client-side is so that once you set it up, it will hijack link clicks and use AJAX to fetch models and render those views in the client. If the JavaScript code fails to load, _or if it hasn't loaded yet due to a slow connection such as those in unstable mobile networks_, the regular link would be followed instead and no harm would be unleashed upon the human, except they would get a slightly less fancy experience.\n\n    Setting up the client-side involves a few different steps. Firstly, we'll have to compile the application's wiring _(the routes and JavaScript view functions)_ into something the browser understands. Then, you'll have to mount Taunus on the client-side, passing the wiring so that it knows which routes it should respond to, and which others it should merely ignore. Once that's out of the way, client-side routing would be set up.\n\n    As sugar coating on top of that, you may add client-side functionality using controllers. These controllers would be executed even if the view was rendered on the server-side. They can access the Taunus API directly, in case you need to navigate to another view in some way other than by having humans click on anchor tags. The API, as you'll learn, will also let you render partial views using the powerful Taunus engine, listen for events that may occur at key stages of the view-rendering process, and even intercept AJAX requests blocking them before they ever happen.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Using the Taunus CLI\n\n    Taunus comes with a CLI that can be used to wire your Node.js routes and views into the client-side. The same CLI can be used to wire up the client-side controllers as well. The main reason why the Taunus CLI exists is so that you don't have to `require` every single view and controller, undoing a lot of the work that was put into code reuse. Just like we did with `jadum` earlier, we'll install the `taunus` CLI globally for the sake of exercising, but we understand that relying on globally installed modules is insufficient for production-grade applications.\n\n    ```shell\n    npm install --global taunus\n    ```\n\n    Before you can use the CLI, you should move the route definitions to `controllers/routes.js`. That's where Taunus expects them to be. If you want to place them something else, [the API documentation can help you][18].\n\n    ```shell\n    mv routes.js controllers/routes.js\n    ```\n\n    Since you moved the routes you should also update the `require` statement in the `app.js` module.\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var app = express();\n    var options = {\n      routes: require('./controllers/routes'),\n      layout: require('./.bin/views/layout')\n    };\n\n    taunusExpress(taunus, app, options);\n    app.listen(3000);\n    ```\n\n    The CLI is terse in both its inputs and its outputs. If you run it without any arguments it'll print out the wiring module, and if you want to persist it you should provide the `--output` flag. In typical [convention-over-configuration][8] fashion, the CLI will default to inferring your views are located in `.bin/views` and that you want the wiring module to be placed in `.bin/wiring.js`, but you'll be able to change that if it doesn't meet your needs.\n\n    ```shell\n    taunus --output\n    ```\n\n    At this point in our example, the CLI should create a `.bin/wiring.js` file with the contents detailed below. As you can see, even if `taunus` is an automated code-generation tool, it's output is as human readable as any other module.\n\n    ```js\n    'use strict';\n\n    var templates = {\n      'home/index': require('./views/home/index.js'),\n      'layout': require('./views/layout.js')\n    };\n\n    var controllers = {\n    };\n\n    var routes = [\n      {\n        route: '/',\n        action: 'home/index'\n      }\n    ];\n\n    module.exports = {\n      templates: templates,\n      controllers: controllers,\n      routes: routes\n    };\n    ```\n\n    ![Screenshot with `taunus` output][37]\n\n    Note that the `controllers` object is empty because you haven't created any _client-side controllers_ yet. We created server-side controllers but those don't have any effect in the client-side, besides determining what gets sent to the client.\n\n    > **The CLI can be entirely ignored**. You could write these definitions by yourself, but you would have to remember to update the wiring module whenever you add, change, or remove a view, a client-side controller, or a route. Doing that would be cumbersome, and the CLI solves that problem for us at the expense of one additional build step.\n\n    During development, you can also add the `--watch` flag, which will rebuild the wiring module if a relevant file changes.\n\n    ```shell\n    taunus --output --watch\n    ```\n\n    If you're using Hapi instead of Express, you'll also need to pass in the `hapiify` transform so that routes get converted into something the client-side routing module understand.\n\n    ```shell\n    taunus --output --transform hapiify\n    ```\n\n    Now that you understand how to use the CLI or build the wiring module on your own, booting up Taunus on the client-side will be an easy thing to do!\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Booting up the client-side router\n\n    Once we have the wiring module, booting up the client-side engine is pretty easy. Taunus suggests you use `client/js` to keep all of your client-side JavaScript logic, but that is up to you too. For the sake of this guide, let's stick to the conventions.\n\n    ```shell\n    mkdir -p client/js\n    touch client/js/main.js\n    ```\n\n    The `main` module will be used as the _entry point_ of your application on the client-side. Here you'll need to import `taunus`, the wiring module we've just built, and a reference to the DOM element where you are rendering your partial views. Once you have all that, you can invoke `taunus.mount`.\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var wiring = require('../../.bin/wiring');\n    var main = document.getElementsByTagName('main')[0];\n\n    taunus.mount(main, wiring);\n    ```\n\n    The mountpoint will set up the client-side Taunus router and fire the client-side view controller for the view that has been rendered in the server-side. Whenever an anchor link is clicked, Taunus will be able to hijack that click and request the model using AJAX, but only if it matches a view route. Otherwise the link will behave just like any normal link would.\n\n    By default, the mountpoint will issue an AJAX request for the view model of the server-side rendered view. This is akin to what dedicated client-side rendering frameworks such as AngularJS do, where views are only rendered after all the JavaScript has been downloaded, parsed, and executed. Except Taunus provides human-readable content faster, before the JavaScript even begins downloading, although it won't be functional until the client-side controller runs.\n\n    An alternative is to inline the view model alongside the views in a `<script type='text/taunus'>` tag, but this tends to slow down the initial response (models are _typically larger_ than the resulting views).\n\n    A third strategy is that you request the model asynchronously outside of Taunus, allowing you to fetch both the view model and Taunus itself concurrently, but that's harder to set up.\n\n    The three booting strategies are explained in [the API documentation][18] and further discussed in [the optimization guide][25]. For now, the default strategy _(`'auto'`)_ should suffice. It fetches the view model using an AJAX request right after Taunus loads.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Adding functionality in a client-side controller\n\n    Client-side controllers run whenever a view is rendered, even if it's a partial. The controller is passed the `model`, containing the model that was used to render the view; the `route`, broken down into its components; and the `container`, which is whatever DOM element the view was rendered into.\n\n    These controllers are entirely optional, which makes sense since we're progressively enhancing the application: it might not even be necessary! Let's add some client-side functionality to the example we've been building.\n\n    ```shell\n    mkdir -p client/js/controllers/home\n    touch client/js/controllers/home/index.js\n    ```\n\n    Guess what? The controller should be a module which exports a function. That function will be called whenever the view is rendered. For the sake of simplicity we'll just print the action and the model to the console. If there's one place where you'd want to enhance the experience, client-side controllers are where you want to put your code.\n\n    ```js\n    'use strict';\n\n    module.exports = function (model, container, route) {\n      console.log('Rendered view %s using model:\\n%s', route.action, JSON.stringify(model, null, 2));\n    };\n    ```\n\n    Since we weren't using the `--watch` flag from the Taunus CLI, you'll have to recompile the wiring at this point, so that the controller gets added to that manifest.\n\n    ```shell\n    taunus --output\n    ```\n\n    Of course, you'll now have to wire up the client-side JavaScript using [Browserify][38]!\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Compiling your client-side JavaScript\n\n    You'll need to compile the `client/js/main.js` module, our client-side application's entry point, using Browserify since the code is written using CommonJS. In this example you'll install `browserify` globally to compile the code, but naturally you'll install it locally when working on a real-world application.\n\n    ```shell\n    npm install --global browserify\n    ```\n\n    Once you have the Browserify CLI, you'll be able to compile the code right from your command line. The `-d` flag tells Browserify to add an inline source map into the compiled bundle, making debugging easier for us. The `-o` flag redirects output to the indicated file, whereas the output is printed to standard output by default.\n\n    ```shell\n    mkdir -p .bin/public/js\n    browserify client/js/main.js -do .bin/public/js/all.js\n    ```\n\n    We haven't done much of anything with the Express application, so you'll need to adjust the `app.js` module to serve static assets. If you're used to Express, you'll notice there's nothing special about how we're using `serve-static`.\n\n    ```shell\n    npm install --save serve-static\n    ```\n\n    Let's configure the application to serve static assets from `.bin/public`.\n\n    ```js\n    'use strict';\n\n    var taunus = require('taunus');\n    var taunusExpress = require('taunus-express');\n    var express = require('express');\n    var serveStatic = require('serve-static');\n    var app = express();\n    var options = {\n      routes: require('./controllers/routes'),\n      layout: require('./.bin/views/layout')\n    };\n\n    app.use(serveStatic('.bin/public'));\n    taunusExpress(taunus, app, options);\n    app.listen(3000);\n    ```\n\n    Next up, you'll have to edit the layout to include the compiled JavaScript bundle file.\n\n    ```jade\n    title=model.title\n    main!=partial\n    script(src='/js/all.js')\n    ```\n\n    Don't forget to compile `layout.jade` again.\n\n    ```shell\n    jadum views/** --output .bin\n    ```\n\n    Lastly, you can execute the application and see it in action!\n\n    ```shell\n    node app\n    ```\n\n    ![Screenshot with `node app` output][39]\n\n    If you open the application on a web browser, you'll notice that the appropriate information will be logged into the developer `console`.\n\n    ![Screenshot with the application running under Google Chrome][40]\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Using the client-side Taunus API\n\n    Taunus does provide [a thin API][18] in the client-side. Usage of that API belongs mostly inside the body of client-side view controllers, but there's a few methods you can take advantage of on a global scale as well.\n\n    Taunus can notify you whenever important events occur.\n\n    Event            | Arguments                 | Description\n    -----------------|---------------------------|------------------------------------\n    `'start'`        | `container, model, route` | Emitted when `taunus.mount` finished the route setup and is about to invoke the client-side controller. Subscribe to this event before calling `taunus.mount`.\n    `'render'`       | `container, model, route` | A view has just been rendered and its client-side controller is about to be invoked\n    `'change'`       | `route, model`            | Same as `'render'`, but only if `container` is the mountpoint and the route has changed.\n    `'fetch.start'`  |  `route, context`         | Emitted whenever an XHR request starts.\n    `'fetch.done'`   |  `route, context, data`   | Emitted whenever an XHR request ends successfully.\n    `'fetch.abort'`  |  `route, context`         | Emitted whenever an XHR request is purposely aborted.\n    `'fetch.error'`  |  `route, context, err`    | Emitted whenever an XHR request results in an HTTP error.\n\n    Besides events, there's a couple more methods you can use. The `taunus.navigate` method allows you to navigate to a URL without the need for a human to click on an anchor link. Then there's `taunus.partial`, and that allows you to render any partial view on a DOM element of your choosing, and it'll then invoke its controller. You'll need to come up with the model yourself, though.\n\n    Astonishingly, the API is further documented in [the API documentation][18].\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Caching and Prefetching\n\n    [Performance][25] plays an important role in Taunus. That's why the you can perform caching and prefetching on the client-side just by turning on a pair of flags. But what do these flags do exactly?\n\n    When turned on, by passing `{ cache: true }` as the third parameter for `taunus.mount`, the caching layer will make sure that responses are kept around for `15` seconds. Whenever a route needs a model in order to render a view, it'll first ask the caching layer for a fresh copy. If the caching layer doesn't have a copy, or if that copy is stale _(in this case, older than `15` seconds)_, then an AJAX request will be issued to the server. Of course, the duration is configurable. If you want to use a value other than the default, you should set `cache` to a number in seconds instead of just `true`.\n\n    Since Taunus understands that not every view operates under the same constraints, you're also able to set a `cache` freshness duration directly in your routes. The `cache` property in routes has precedence over the default value.\n\n    There's currently two caching stores: a raw in-memory store, and an [IndexedDB][28] store. IndexedDB is an embedded database solution, and you can think of it like an asynchronous version of `localStorage`. It has [surprisingly broad browser support][29], and in the cases where it's not supported then caching is done solely in-memory.\n\n    The prefetching mechanism is an interesting spin-off of caching, and it requires caching to be enabled in order to work. Whenever humans hover over a link, or whenever they put their finger on one of them _(the `touchstart` event)_, the prefetcher will issue an AJAX request for the view model for that link.\n\n    If the request ends successfully then the response will be cached in the same way any other view would be cached. If the human hovers over another link while the previous one is still being prefetched, then the old request is aborted, as not to drain their _(possibly limited)_ Internet connection bandwidth.\n\n    If the human clicks on the link before prefetching is completed, he'll navigate to the view as soon as prefetching ends, rather than firing another request. This helps Taunus save precious milliseconds when dealing with latency-sensitive operations.\n\n    Turning prefetching on is simply a matter of setting `prefetch` to `true` in the options passed to `taunus.mount`. For additional insights into the performance improvements Taunus can offer, head over to the [Performance Optimizations][25] guide.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    #### Versioning\n\n    When you alter your views, change controllers, or modify the models, chances are the client-side is going to come across one of the following issues.\n\n    - Outdated view template functions in the client-side, causing new models to break\n    - Outdated client-side controllers, causing new models to break or miss out on functionality\n    - Outdated models in the cache, causing new views or controllers to break\n\n    Versioning handles these issues gracefully on your behalf. The way it works is that whenever you get a response from Taunus, a _version string (configured on the server-side)_ is included with it. If that version string doesn't match the one stored in the client, then the cache will be flushed and the human will be redirected, forcing a full page reload.\n\n    > The versioning API is unable to handle changes to routes, and it's up to you to make sure that the application stays backwards compatible when it comes to routing.\n    >\n    > Versioning can't intervene when the client-side is heavily relying on cached views and models, and the human is refusing to reload their browser. The server isn't being accessed and thus it can't communicate that everything on the cache may have become stale. The good news is that the human won't notice any oddities, as the site will continue to work as he knows it. When he finally attempts to visit something that isn't cached, a request is made, and the versioning engine resolves version discrepancies for them.\n\n    Making use of versioning involves setting the `version` field in the options, when invoking `taunus.mount` **on both the server-side and the client-side, using the same value**. The Taunus version string will be added to the one you provided, so that Taunus will know to stay alert for changes to Taunus itself, as well.\n\n    You may use your build identifier or the `version` field in `package.json`, but understand that it may cause the client-side to flush the cache too often _(maybe even on every deployment)_.\n\n    The default version string is set to `1`. The Taunus version will be prepended to yours, resulting in a value such as `t3.0.0;v1` where Taunus is running version `3.0.0` and your application is running version `1`.\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    # The sky is the limit!\n\n    You're now familiar with how Taunus works on a high-level. You have covered a decent amount of ground, but you shouldn't stop there.\n\n    - Learn more about [the API Taunus has][18] to offer\n    - Go through the [performance optimization tips][25]. You may learn something new!\n    - _Familiarize yourself with the ways of progressive enhancement_\n      - Jeremy Keith enunciates [\"Be progressive\"][20]\n      - Christian Heilmann advocates for [\"Pragmatic progressive enhancement\"][26]\n      - Jake Archibald explains how [\"Progressive enhancement is faster\"][22]\n      - I blogged about how we should [\"Stop Breaking the Web\"][17]\n      - Guillermo Rauch argues for [\"7 Principles of Rich Web Applications\"][24]\n      - Aaron Gustafson writes [\"Understanding Progressive Enhancement\"][21]\n      - Orde Saunders gives his point of view in [\"Progressive enhancement for fault tolerance\"][23]\n    - Sift through the [complementary modules][15]. You may find something you hadn't thought of!\n\n    Also, get involved!\n\n    - Fork this repository and [send some pull requests][19] to improve these guides!\n    - See something, say something! If you detect a bug, [please create an issue][27]!\n\n    <sub>[_(back to table of contents)_](#table-of-contents)</sub>\n\n    > You'll find a [full fledged version of the Getting Started][41] tutorial application on GitHub.\n\n    [1]: https://github.com/taunus/taunus-express\n    [2]: https://github.com/taunus/taunus-hapi\n    [3]: https://github.com/taunus/hapiify\n    [4]: https://github.com/taunus/taunus.io\n    [5]: https://github.com/ponyfoo/ponyfoo\n    [6]: http://expressjs.com\n    [7]: http://hapijs.com\n    [8]: http://en.wikipedia.org/wiki/Convention_over_configuration\n    [9]: http://en.wikipedia.org/wiki/Ruby_on_Rails\n    [10]: https://github.com/janl/mustache.js\n    [11]: https://github.com/jadejs/jade\n    [12]: http://mozilla.github.io/nunjucks/\n    [13]: http://handlebarsjs.com/\n    [14]: http://www.embeddedjs.com/\n    [15]: /complements\n    [16]: https://github.com/bevacqua/jadum\n    [17]: http://ponyfoo.com/stop-breaking-the-web\n    [18]: /api\n    [19]: https://github.com/taunus/taunus.io/pulls\n    [20]: https://adactio.com/journal/7706\n    [21]: http://alistapart.com/article/understandingprogressiveenhancement\n    [22]: http://jakearchibald.com/2013/progressive-enhancement-is-faster/\n    [23]: https://decadecity.net/blog/2013/09/16/progressive-enhancement-for-fault-tolerance\n    [24]: http://rauchg.com/2014/7-principles-of-rich-web-applications/\n    [25]: /performance\n    [26]: http://icant.co.uk/articles/pragmatic-progressive-enhancement/\n    [27]: https://github.com/taunus/taunus/issues/new\n    [28]: https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\n    [29]: http://caniuse.com/#feat=indexeddb\n    [30]: http://i.imgur.com/4P8vNe9.png\n    [31]: http://i.imgur.com/n8mH4mN.png\n    [32]: http://i.imgur.com/08lnCec.png\n    [33]: http://i.imgur.com/wUbnCyk.png\n    [34]: http://i.imgur.com/zjaJYCq.png\n    [35]: http://i.imgur.com/NvEWx9z.png\n    [36]: http://i.imgur.com/LgZRFn5.png\n    [37]: http://i.imgur.com/fIEe5Tm.png\n    [38]: http://browserify.org/\n    [39]: http://i.imgur.com/68O84wX.png\n    [40]: http://i.imgur.com/ZUF6NFl.png\n    [41]: https://github.com/taunus/getting-started\n    [42]: https://github.com/taunus/generator-taunus\n");
}
}
},{"jadum/runtime":32}],5:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function performance(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/documentation/performance.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_debug.unshift(new jade.DebugItem( 0, "views/documentation/performance.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/documentation/performance.jade" ));
buf.push("<section class=\"ly-section md-markdown\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 120, "views/documentation/performance.jade" ));
buf.push("<h1 id=\"performance-optimization\">Performance Optimization</h1>\n<p>Given that performance is one of the core values in both Taunus and User Experience, it deserved a first-class article on this site as well.</p>\n<p>There&#39;s a few things to take into account when developing an application if we want to strive for performance, and this article aims to be a collection of web performance best practices along with tips on how to improve performance especifically for applications built on top of Taunus.</p>\n<h1 id=\"performance-checklist\">Performance Checklist</h1>\n<p>If you haven&#39;t, you should read <a href=\"http://ponyfoo.com/articles/critical-path-performance-optimization\">&quot;Critical Path Performance Optimization&quot;</a> as a small guide of performance optimizations you should already be doing. The list below contains some of what&#39;s discussed in that article.</p>\n<ul>\n<li>Move away from dedicated client-side rendering</li>\n<li>Use <a href=\"http://nginx.org/\"><code>nginx</code></a> as a reverse proxy for your front-end servers</li>\n<li>Resize and optimize images</li>\n<li>Defer non-critical static asset loading</li>\n<li>Inline critical CSS and JavaScript</li>\n<li>Cache responses aggressively</li>\n<li>Ditch large libraries and frameworks</li>\n</ul>\n<h1 id=\"boosting-performance-with-taunus\">Boosting Performance with Taunus</h1>\n<p>When it comes to Taunus, there&#39;s a few more performance tweaks you should consider implementing.</p>\n<ul>\n<li>Choose <a href=\"#choose-the-right-boot-strategy\">the right boot strategy</a></li>\n<li>Turn on client-side <a href=\"#turn-on-client-side-caching\">caching</a></li>\n<li><a href=\"#use-versioning-to-ensure-cache-validity\">Use versioning</a> to ensure cache validity</li>\n<li>Enable prefetching for <a href=\"#enable-prefetching-for-predictive-cache-loading\">predictive cache loading</a></li>\n<li><a href=\"#send-views-and-controllers-to-the-client-selectively\">Send views and controllers to the client selectively</a></li>\n</ul>\n<p>Given that this site is about Taunus, we&#39;ll focus on the Taunus tweaks, as you can readily scour the web for general web performance advice.</p>\n<h1 id=\"choose-the-right-boot-strategy\">Choose the right boot strategy</h1>\n<p>Taunus needs to conjure up a view model so that you have access to its properties in the client-side view controller. To that end, Taunus offers three different boot strategies because there isn&#39;t a one-size-fits-all answer to the question <em>&quot;which boot strategy is the best one for me?&quot;</em>.</p>\n<p>When you want a relaxed approach to using Taunus, you should go for the <a href=\"/api#using-the-auto-strategy\"><code>auto</code></a> strategy. Maybe you&#39;re just getting started or you&#39;re not as concerned about performance just yet. Here Taunus will wait on you to call <a href=\"/api#-taunus-mount-container-wiring-options-\"><code>taunus.mount</code></a>, and then make an AJAX request to get the model for that view on your behalf. <em>This is the strategy that Taunus uses by default.</em></p>\n<p>If your models are consistently small because you have little dynamic content, or if you want to <em>execute the client-side controller as quickly as possible</em>, then the <a href=\"/api#using-the-inline-strategy\"><code>inline</code></a> strategy might be the best for you. Here you&#39;re expected to place the model in a <code>&lt;script&gt;</code> tag inside the view layout, and Taunus takes care of the rest.</p>\n<p>The third strategy is <a href=\"/api#using-the-manual-strategy\"><code>manual</code></a>, where you are supposed to somehow get a model, presumably using AJAX or script loading, and then letting Taunus know that you&#39;re done. This might be faster than the <a href=\"/api#using-the-auto-strategy\"><code>auto</code></a> approach, because you could write an inline script to fetch the model as Taunus is being downloaded. It also might be slower than <code>auto</code> in those cases where <code>auto</code> would&#39;ve used a cached copy of the model instead of making a request, so <em>your mileage may vary</em>.</p>\n<p>For more complex use cases, you may want to consider mixing different boot strategies, choosing the one that makes the most sense in each case. In these cases, you need to pay attention to having an agreement between what&#39;s being done in the view layout <em>(script inlining, AJAX call, or doing nothing)</em> and the <a href=\"/api#-taunus-mount-container-wiring-options-\"><code>taunus.mount</code></a> call <em>(picking a boot strategy that matches what&#39;s being done on the layout)</em>.</p>\n<p><sub><a href=\"#boosting-performance-with-taunus\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"turn-on-client-side-caching\">Turn on client-side caching</h1>\n<p>A caching engine is built into Taunus, and it&#39;s very easy to set up, you just have to ask for it by passing <a href=\"/api#caching\"><code>cache: true</code></a> to the client-side mountpoint. The cache can be used as a means to avoid making expensive AJAX calls for well-defined periods of time. You can determine how long an item will be cached for on a global level, as well as on a route-by-route basis.</p>\n<p>Taunus implements a two-tiered cache in which items are persisted both in-memory and in an IndexedDB database. This provides faster access to the cache while ensuring that data persists across browser reloads. In browsers that don&#39;t support IndexedDB, only the in-memory cache will be used.</p>\n<blockquote>\n<p>You can also use a <a href=\"/api#-taunus-intercept-action-fn-\">custom request interceptor</a> to listen for requests before they become AJAX calls and prevent that from happenning. The caching layer is in fact built as a request interceptor. You may want to use other mechanisms for preventing AJAX requests from being made, such as inferring a model from the models that were fetched so far for other views, or maybe simply preventing the request for views that don&#39;t need a model from the server at all.</p>\n</blockquote>\n<p>The <strong>cache can significantly improve your application&#39;s perceived responsiveness</strong>, but it could also do damage if your application is updated too frequently but you cache responses for long periods of time. It can also prove problematic if the models are highly volatile, as a cached response might be used for a view that expects some value to change every time. While caching isn&#39;t the solution to the latter, the former can be addressed using <a href=\"#use-versioning-to-ensure-cache-validity\">versioning</a>.</p>\n<p><sub><a href=\"#boosting-performance-with-taunus\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"use-versioning-to-ensure-cache-validity\">Use versioning to ensure cache validity</h1>\n<p>Versioning is a tough problem that single-page application frameworks don&#39;t address. If your framework of choice renders your application as a SPA, how exactly will it behave when you push updates to the server, <a href=\"http://bevacqua.io/bf\">many times a day</a>? Is it well defined? Will views received before the deployment be updated to the latest version? Will models cached in the old version of the application be invalidated? Will new views and client-side controllers make it to the user?</p>\n<p>Taunus handles all of these scenarios for you. Every response from the server contains the current version string for your app. If a response updates the version number stored in the client, cached views, controllers, and models, will become invalidated.</p>\n<p>If at any point Taunus is relying solely on the cache to render a view, then yes, the user will see the same view with the same model and the same controller that he saw a few seconds ago. But whenever a request hits the server and gets back to the client with an updated version number, Taunus will know to redirect the user <em>(or re-fetch each view)</em> so that the user gets the upgraded experience.</p>\n<blockquote>\n<p>Most importantly, versioning means that responses from the server will never break communication with clients that were connected before a deployment introduced an update, changing the models that the server returns, while the client expected models using a different structure.</p>\n</blockquote>\n<p>To <a href=\"/api#versioning\">enable versioning</a> you just have to choose a version number on both the server and the client mountpoints. This number should be updated with discretion, as frequent changes to the version number may defeat the performance improvements of client-side rendering.</p>\n<p><sub><a href=\"#boosting-performance-with-taunus\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"enable-prefetching-for-predictive-cache-loading\">Enable prefetching for predictive cache loading</h1>\n<blockquote>\n<p>Prefetching can yield huge performance boosts by simply issuing requests as soon as the human hints at his interest to load a view.</p>\n</blockquote>\n<p>By default Taunus ships with an <em>&quot;on-hover/on-touch-start&quot;</em> prefetcher that you can enable just by <a href=\"/api#prefetching\">setting the <code>prefetch: true</code> option</a> on the client-side mountpoint. It works by starting to fetch the model for a view as soon as humans hover over an anchor link, or put their finger on it on mobile devices. When the human does decide to click on the link, the prefetcher may be done, meaning that they&#39;ll be instantly redirected. If the prefetcher is still working, you&#39;d still be making a shortcut, as the user will be redirected as soon as the prefetcher finishes, giving you a head start and representing a perceived performance boost.</p>\n<p>You can also create your own prefetching rules. Maybe you&#39;d like to start prefetching a view as soon as humans start moving the mouse cursor towards a link. When you consider that a user shows intent to navigate to an action, you can call <a href=\"/api#using-taunus-prefetch-url-element-\"><code>taunus.prefetch</code></a> and start loading everything necessary for the view to be immediately loaded.</p>\n<p>Note that <strong>the prefetcher can only load <em>one route</em> at a time</strong>. This is by design, as prefetching lots of links would interfere with the human&#39;s connectivity, doing more harm than good. If the prefetcher is already loading a route when another attempt to prefetch is registered, the old request will be aborted to make room for the new one.</p>\n<p><sub><a href=\"#boosting-performance-with-taunus\"><em>(back to table of contents)</em></a></sub></p>\n<h1 id=\"send-views-and-controllers-to-the-client-selectively\">Send views and controllers to the client selectively</h1>\n<p>The most ambitious performance optimization that can be done with Taunus is deferring client-side views and controllers. The default behavior is to compile every view and controller, alongside routes and Taunus itself, and send everything in a single bundle to the client. As your application grows, it might no longer be practical to send everything together in a huge bundle, as performance would suffer.</p>\n<p>Taunus offers a mechanism through which you can defer specific actions, or parts of the application. When one of those parts of the application needs to be loaded, even when using <a href=\"/api#-taunus-partial-container-action-model-\"><code>taunus.partial</code></a>, the server-side will bundle the view template module and the client-side controller module and send that to the client. The client then runs <code>eval</code> on the bundle and proceeds to store it in its cache, using the same caching mechanism that&#39;s used for models <em>(except that views and controllers only go stale due to version changes, and never because of durations)</em>.</p>\n<p>To make use of the deferral mechanism you have to take a few things into consideration. First off, you&#39;ll have to use the <a href=\"/api#-defer-actions-\"><code>--defer</code></a> flag in the CLI to select the actions you want to defer. For instance, doing <code>taunus --defer admin</code> will defer all actions for the <code>admin</code> controller.</p>\n<p>Deferred modules are bundled with Browserify and get <strong>source maps by default</strong>, so debugging them during development is as easy as debugging non-deferred controllers or view template functions. You can change this behavior by <a href=\"/api#-options-deferminified-\">setting <code>deferMinified: true</code> at the server-side mountpoint</a>, which will minify the bundle and also remove the sourcemap. These bundles are generated the first time that they get requested, and subsequent requests for the same bundle will receive a copy that gets cached in memory.</p>\n<p>You have to be careful when deferring views and controllers, as the bundle for every component will be compiled independently. Here&#39;s a few considerations to take in mind.</p>\n<ul>\n<li>Take into account that each module you reference globally is a module that&#39;s not compiled on every component that <code>require</code>s it. This translates into leaner responses when clients need to fetch a template and a client-side controller</li>\n<li>Avoid maintaining global state across view controllers using modules. If you need to do so, consider using events instead. Deferred modules are self-contained, meaning that even if two separate controllers require a given <code>./state</code> module, each controller will get its own idependent instance of the <code>./state</code> module, and nothing will be shared.</li>\n</ul>\n<p>In the future, transports other than CommonJS may be available for defining controllers and view templates that can be deferred, but for now that&#39;s the only viable transport when it comes to deferred execution in Taunus.</p>\n<p><sub><a href=\"#boosting-performance-with-taunus\"><em>(back to table of contents)</em></a></sub></p>\n");
jade_debug.shift();
jade_debug.shift();
buf.push("</section>");
jade_debug.shift();
jade_debug.shift();;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "section.ly-section.md-markdown\n  :ultramarked\n    # Performance Optimization\n\n    Given that performance is one of the core values in both Taunus and User Experience, it deserved a first-class article on this site as well.\n\n    There's a few things to take into account when developing an application if we want to strive for performance, and this article aims to be a collection of web performance best practices along with tips on how to improve performance especifically for applications built on top of Taunus.\n\n    # Performance Checklist\n\n    If you haven't, you should read [\"Critical Path Performance Optimization\"][1] as a small guide of performance optimizations you should already be doing. The list below contains some of what's discussed in that article.\n\n    - Move away from dedicated client-side rendering\n    - Use [`nginx`][2] as a reverse proxy for your front-end servers\n    - Resize and optimize images\n    - Defer non-critical static asset loading\n    - Inline critical CSS and JavaScript\n    - Cache responses aggressively\n    - Ditch large libraries and frameworks\n\n    # Boosting Performance with Taunus\n\n    When it comes to Taunus, there's a few more performance tweaks you should consider implementing.\n\n    - Choose [the right boot strategy](#choose-the-right-boot-strategy)\n    - Turn on client-side [caching](#turn-on-client-side-caching)\n    - [Use versioning](#use-versioning-to-ensure-cache-validity) to ensure cache validity\n    - Enable prefetching for [predictive cache loading](#enable-prefetching-for-predictive-cache-loading)\n    - [Send views and controllers to the client selectively](#send-views-and-controllers-to-the-client-selectively)\n\n    Given that this site is about Taunus, we'll focus on the Taunus tweaks, as you can readily scour the web for general web performance advice.\n\n    # Choose the right boot strategy\n\n    Taunus needs to conjure up a view model so that you have access to its properties in the client-side view controller. To that end, Taunus offers three different boot strategies because there isn't a one-size-fits-all answer to the question _\"which boot strategy is the best one for me?\"_.\n\n    When you want a relaxed approach to using Taunus, you should go for the [`auto`][3] strategy. Maybe you're just getting started or you're not as concerned about performance just yet. Here Taunus will wait on you to call [`taunus.mount`][5], and then make an AJAX request to get the model for that view on your behalf. _This is the strategy that Taunus uses by default._\n\n    If your models are consistently small because you have little dynamic content, or if you want to _execute the client-side controller as quickly as possible_, then the [`inline`][4] strategy might be the best for you. Here you're expected to place the model in a `<script>` tag inside the view layout, and Taunus takes care of the rest.\n\n    The third strategy is [`manual`][6], where you are supposed to somehow get a model, presumably using AJAX or script loading, and then letting Taunus know that you're done. This might be faster than the [`auto`][3] approach, because you could write an inline script to fetch the model as Taunus is being downloaded. It also might be slower than `auto` in those cases where `auto` would've used a cached copy of the model instead of making a request, so _your mileage may vary_.\n\n    For more complex use cases, you may want to consider mixing different boot strategies, choosing the one that makes the most sense in each case. In these cases, you need to pay attention to having an agreement between what's being done in the view layout _(script inlining, AJAX call, or doing nothing)_ and the [`taunus.mount`][5] call _(picking a boot strategy that matches what's being done on the layout)_.\n\n    <sub>[_(back to table of contents)_](#boosting-performance-with-taunus)</sub>\n\n    # Turn on client-side caching\n\n    A caching engine is built into Taunus, and it's very easy to set up, you just have to ask for it by passing [`cache: true`][7] to the client-side mountpoint. The cache can be used as a means to avoid making expensive AJAX calls for well-defined periods of time. You can determine how long an item will be cached for on a global level, as well as on a route-by-route basis.\n\n    Taunus implements a two-tiered cache in which items are persisted both in-memory and in an IndexedDB database. This provides faster access to the cache while ensuring that data persists across browser reloads. In browsers that don't support IndexedDB, only the in-memory cache will be used.\n\n    > You can also use a [custom request interceptor][8] to listen for requests before they become AJAX calls and prevent that from happenning. The caching layer is in fact built as a request interceptor. You may want to use other mechanisms for preventing AJAX requests from being made, such as inferring a model from the models that were fetched so far for other views, or maybe simply preventing the request for views that don't need a model from the server at all.\n\n    The **cache can significantly improve your application's perceived responsiveness**, but it could also do damage if your application is updated too frequently but you cache responses for long periods of time. It can also prove problematic if the models are highly volatile, as a cached response might be used for a view that expects some value to change every time. While caching isn't the solution to the latter, the former can be addressed using [versioning](#use-versioning-to-ensure-cache-validity).\n\n    <sub>[_(back to table of contents)_](#boosting-performance-with-taunus)</sub>\n\n    # Use versioning to ensure cache validity\n\n    Versioning is a tough problem that single-page application frameworks don't address. If your framework of choice renders your application as a SPA, how exactly will it behave when you push updates to the server, [many times a day][10]? Is it well defined? Will views received before the deployment be updated to the latest version? Will models cached in the old version of the application be invalidated? Will new views and client-side controllers make it to the user?\n\n    Taunus handles all of these scenarios for you. Every response from the server contains the current version string for your app. If a response updates the version number stored in the client, cached views, controllers, and models, will become invalidated.\n\n    If at any point Taunus is relying solely on the cache to render a view, then yes, the user will see the same view with the same model and the same controller that he saw a few seconds ago. But whenever a request hits the server and gets back to the client with an updated version number, Taunus will know to redirect the user _(or re-fetch each view)_ so that the user gets the upgraded experience.\n\n    > Most importantly, versioning means that responses from the server will never break communication with clients that were connected before a deployment introduced an update, changing the models that the server returns, while the client expected models using a different structure.\n\n    To [enable versioning][11] you just have to choose a version number on both the server and the client mountpoints. This number should be updated with discretion, as frequent changes to the version number may defeat the performance improvements of client-side rendering.\n\n    <sub>[_(back to table of contents)_](#boosting-performance-with-taunus)</sub>\n\n    # Enable prefetching for predictive cache loading\n\n    > Prefetching can yield huge performance boosts by simply issuing requests as soon as the human hints at his interest to load a view.\n\n    By default Taunus ships with an _\"on-hover/on-touch-start\"_ prefetcher that you can enable just by [setting the `prefetch: true` option][12] on the client-side mountpoint. It works by starting to fetch the model for a view as soon as humans hover over an anchor link, or put their finger on it on mobile devices. When the human does decide to click on the link, the prefetcher may be done, meaning that they'll be instantly redirected. If the prefetcher is still working, you'd still be making a shortcut, as the user will be redirected as soon as the prefetcher finishes, giving you a head start and representing a perceived performance boost.\n\n    You can also create your own prefetching rules. Maybe you'd like to start prefetching a view as soon as humans start moving the mouse cursor towards a link. When you consider that a user shows intent to navigate to an action, you can call [`taunus.prefetch`][13] and start loading everything necessary for the view to be immediately loaded.\n\n    Note that **the prefetcher can only load _one route_ at a time**. This is by design, as prefetching lots of links would interfere with the human's connectivity, doing more harm than good. If the prefetcher is already loading a route when another attempt to prefetch is registered, the old request will be aborted to make room for the new one.\n\n    <sub>[_(back to table of contents)_](#boosting-performance-with-taunus)</sub>\n\n    # Send views and controllers to the client selectively\n\n    The most ambitious performance optimization that can be done with Taunus is deferring client-side views and controllers. The default behavior is to compile every view and controller, alongside routes and Taunus itself, and send everything in a single bundle to the client. As your application grows, it might no longer be practical to send everything together in a huge bundle, as performance would suffer.\n\n    Taunus offers a mechanism through which you can defer specific actions, or parts of the application. When one of those parts of the application needs to be loaded, even when using [`taunus.partial`][14], the server-side will bundle the view template module and the client-side controller module and send that to the client. The client then runs `eval` on the bundle and proceeds to store it in its cache, using the same caching mechanism that's used for models _(except that views and controllers only go stale due to version changes, and never because of durations)_.\n\n    To make use of the deferral mechanism you have to take a few things into consideration. First off, you'll have to use the [`--defer`][15] flag in the CLI to select the actions you want to defer. For instance, doing `taunus --defer admin` will defer all actions for the `admin` controller.\n\n    Deferred modules are bundled with Browserify and get **source maps by default**, so debugging them during development is as easy as debugging non-deferred controllers or view template functions. You can change this behavior by [setting `deferMinified: true` at the server-side mountpoint][16], which will minify the bundle and also remove the sourcemap. These bundles are generated the first time that they get requested, and subsequent requests for the same bundle will receive a copy that gets cached in memory.\n\n    You have to be careful when deferring views and controllers, as the bundle for every component will be compiled independently. Here's a few considerations to take in mind.\n\n    - Take into account that each module you reference globally is a module that's not compiled on every component that `require`s it. This translates into leaner responses when clients need to fetch a template and a client-side controller\n    - Avoid maintaining global state across view controllers using modules. If you need to do so, consider using events instead. Deferred modules are self-contained, meaning that even if two separate controllers require a given `./state` module, each controller will get its own idependent instance of the `./state` module, and nothing will be shared.\n\n    In the future, transports other than CommonJS may be available for defining controllers and view templates that can be deferred, but for now that's the only viable transport when it comes to deferred execution in Taunus.\n\n    <sub>[_(back to table of contents)_](#boosting-performance-with-taunus)</sub>\n\n    [1]: http://ponyfoo.com/articles/critical-path-performance-optimization\n    [2]: http://nginx.org/\n    [3]: /api#using-the-auto-strategy\n    [4]: /api#using-the-inline-strategy\n    [5]: /api#-taunus-mount-container-wiring-options-\n    [6]: /api#using-the-manual-strategy\n    [7]: /api#caching\n    [8]: /api#-taunus-intercept-action-fn-\n    [9]: http://rauchg.com/2014/7-principles-of-rich-web-applications/\n    [10]: http://bevacqua.io/bf\n    [11]: /api#versioning\n    [12]: /api#prefetching\n    [13]: /api#using-taunus-prefetch-url-element-\n    [14]: /api#-taunus-partial-container-action-model-\n    [15]: /api#-defer-actions-\n    [16]: /api#-options-deferminified-\n");
}
}
},{"jadum/runtime":32}],6:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function notFound(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/error/not-found.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;

jade_debug.unshift(new jade.DebugItem( 0, "views/error/not-found.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/error/not-found.jade" ));
buf.push("<h1>");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 1, jade_debug[0].filename ));
buf.push("Not Found");
jade_debug.shift();
jade_debug.shift();
buf.push("</h1>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 3, "views/error/not-found.jade" ));
buf.push("<p>");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 3, jade_debug[0].filename ));
buf.push("There doesn't seem to be anything here yet. If you believe this to be a mistake, please let us know!");
jade_debug.shift();
jade_debug.shift();
buf.push("</p>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 4, "views/error/not-found.jade" ));
buf.push("<p>");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 5, "views/error/not-found.jade" ));
buf.push("<a href=\"https://twitter.com/nzgb\" target=\"_blank\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 5, jade_debug[0].filename ));
buf.push("&mdash; @nzgb");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</p>");
jade_debug.shift();
jade_debug.shift();;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "h1 Not Found\n\np There doesn't seem to be anything here yet. If you believe this to be a mistake, please let us know!\np\n  a(href='https://twitter.com/nzgb', target='_blank') &mdash; @nzgb\n");
}
}
},{"jadum/runtime":32}],7:[function(require,module,exports){
var jade = require("jadum/runtime");
module.exports = function layout(locals) {
var jade_debug = [ new jade.DebugItem( 1, "views/layout.jade" ) ];
try {
var buf = [];
var jade_mixins = {};
var jade_interp;
;var locals_for_with = (locals || {});(function (model, partial) {
jade_debug.unshift(new jade.DebugItem( 0, "views/layout.jade" ));
jade_debug.unshift(new jade.DebugItem( 1, "views/layout.jade" ));
buf.push("<!DOCTYPE html>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 2, "views/layout.jade" ));
buf.push("<html lang=\"en\" itemscope itemtype=\"http://schema.org/Blog\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 3, "views/layout.jade" ));
buf.push("<head>");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 4, "views/layout.jade" ));
buf.push("<title>" + (jade.escape(null == (jade_interp = model.title) ? "" : jade_interp)));
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.shift();
buf.push("</title>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 5, "views/layout.jade" ));
buf.push("<meta charset=\"utf-8\">");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 6, "views/layout.jade" ));
buf.push("<link rel=\"shortcut icon\" href=\"/favicon.ico\">");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 7, "views/layout.jade" ));
buf.push("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 8, "views/layout.jade" ));
buf.push("<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 9, "views/layout.jade" ));
buf.push("<link rel=\"stylesheet\" type=\"text/css\" href=\"/css/all.css\">");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 10, "views/layout.jade" ));
buf.push("<link rel=\"stylesheet\" type=\"text/css\" href=\"http://fonts.googleapis.com/css?family=Unica+One:400|Playfair+Display:700|Megrim:700|Fauna+One:400italic,400,700\">");
jade_debug.shift();
jade_debug.shift();
buf.push("</head>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 12, "views/layout.jade" ));
buf.push("<body id=\"top\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 13, "views/layout.jade" ));
buf.push("<header>");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 14, "views/layout.jade" ));
buf.push("<h1>");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 15, "views/layout.jade" ));
buf.push("<a href=\"/\" aria-label=\"Go to home\" class=\"ly-title\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 15, jade_debug[0].filename ));
buf.push("Taunus");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</h1>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 16, "views/layout.jade" ));
buf.push("<h2 class=\"ly-subheading\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 16, jade_debug[0].filename ));
buf.push("Micro Isomorphic MVC Engine for Node.js");
jade_debug.shift();
jade_debug.shift();
buf.push("</h2>");
jade_debug.shift();
jade_debug.shift();
buf.push("</header>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 18, "views/layout.jade" ));
buf.push("<aside class=\"sb-sidebar\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 19, "views/layout.jade" ));
buf.push("<nav class=\"sb-container\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 20, "views/layout.jade" ));
buf.push("<ul class=\"nv-items\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 21, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 22, "views/layout.jade" ));
buf.push("<a href=\"/\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 22, jade_debug[0].filename ));
buf.push("About");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 23, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 24, "views/layout.jade" ));
buf.push("<a href=\"/getting-started\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 24, jade_debug[0].filename ));
buf.push("Getting Started");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 25, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 26, "views/layout.jade" ));
buf.push("<a href=\"/api\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 26, jade_debug[0].filename ));
buf.push("API Documentation");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 27, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 28, "views/layout.jade" ));
buf.push("<a href=\"/complements\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 28, jade_debug[0].filename ));
buf.push("Complementary Modules");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 29, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 30, "views/layout.jade" ));
buf.push("<a href=\"/performance\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 30, jade_debug[0].filename ));
buf.push("Performance Optimization");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 31, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 32, "views/layout.jade" ));
buf.push("<a href=\"/source-code\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 32, jade_debug[0].filename ));
buf.push("Source Code");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 33, "views/layout.jade" ));
buf.push("<li class=\"nv-item\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 34, "views/layout.jade" ));
buf.push("<a href=\"/changelog\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.unshift(new jade.DebugItem( 34, jade_debug[0].filename ));
buf.push("Changelog");
jade_debug.shift();
jade_debug.shift();
buf.push("</a>");
jade_debug.shift();
jade_debug.shift();
buf.push("</li>");
jade_debug.shift();
jade_debug.shift();
buf.push("</ul>");
jade_debug.shift();
jade_debug.shift();
buf.push("</nav>");
jade_debug.shift();
jade_debug.shift();
buf.push("</aside>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 36, "views/layout.jade" ));
buf.push("<main id=\"application-root\" data-taunus=\"model\" class=\"ly-main\">" + (null == (jade_interp = partial) ? "" : jade_interp));
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.shift();
buf.push("</main>");
jade_debug.shift();
jade_debug.unshift(new jade.DebugItem( 37, "views/layout.jade" ));
buf.push("<script src=\"/js/all.js\">");
jade_debug.unshift(new jade.DebugItem( undefined, jade_debug[0].filename ));
jade_debug.shift();
buf.push("</script>");
jade_debug.shift();
jade_debug.shift();
buf.push("</body>");
jade_debug.shift();
jade_debug.shift();
buf.push("</html>");
jade_debug.shift();
jade_debug.shift();}.call(this,"model" in locals_for_with?locals_for_with.model:typeof model!=="undefined"?model:undefined,"partial" in locals_for_with?locals_for_with.partial:typeof partial!=="undefined"?partial:undefined));;return buf.join("");
} catch (err) {
  jade.rethrow(err, jade_debug[0].filename, jade_debug[0].lineno, "doctype html\nhtml(lang='en', itemscope, itemtype='http://schema.org/Blog')\n  head\n    title=model.title\n    meta(charset='utf-8')\n    link(rel='shortcut icon', href='/favicon.ico')\n    meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')\n    meta(name='viewport', content='width=device-width, initial-scale=1')\n    link(rel='stylesheet', type='text/css', href='/css/all.css')\n    link(rel='stylesheet', type='text/css', href='http://fonts.googleapis.com/css?family=Unica+One:400|Playfair+Display:700|Megrim:700|Fauna+One:400italic,400,700')\n\n  body#top\n    header\n      h1\n        a.ly-title(href='/', aria-label='Go to home') Taunus\n      h2.ly-subheading Micro Isomorphic MVC Engine for Node.js\n\n    aside.sb-sidebar\n      nav.sb-container\n        ul.nv-items\n          li.nv-item\n            a(href='/') About\n          li.nv-item\n            a(href='/getting-started') Getting Started\n          li.nv-item\n            a(href='/api') API Documentation\n          li.nv-item\n            a(href='/complements') Complementary Modules\n          li.nv-item\n            a(href='/performance') Performance Optimization\n          li.nv-item\n            a(href='/source-code') Source Code\n          li.nv-item\n            a(href='/changelog') Changelog\n\n    main.ly-main#application-root(data-taunus='model')!=partial\n    script(src='/js/all.js')\n");
}
}
},{"jadum/runtime":32}],8:[function(require,module,exports){
'use strict';

var templates = {
  'documentation/about': require('./views/documentation/about.js'),
  'documentation/api': require('./views/documentation/api.js'),
  'documentation/complements': require('./views/documentation/complements.js'),
  'documentation/getting-started': require('./views/documentation/getting-started.js'),
  'documentation/performance': require('./views/documentation/performance.js'),
  'error/not-found': require('./views/error/not-found.js'),
  'layout': require('./views/layout.js')
};

var controllers = {
  'documentation/about': require('../client/js/controllers/documentation/about.js')
};

var routes = [
  {
    route: '/',
    action: 'documentation/about'
  },
  {
    route: '/getting-started',
    action: 'documentation/getting-started'
  },
  {
    route: '/api',
    action: 'documentation/api'
  },
  {
    route: '/complements',
    action: 'documentation/complements'
  },
  {
    route: '/performance',
    action: 'documentation/performance'
  },
  {
    route: '/source-code',
    ignore: true
  },
  {
    route: '/changelog',
    ignore: true
  },
  {
    route: '/:catchall*',
    action: 'error/not-found'
  }
];

module.exports = {
  templates: templates,
  controllers: controllers,
  routes: routes
};

},{"../client/js/controllers/documentation/about.js":9,"./views/documentation/about.js":1,"./views/documentation/api.js":2,"./views/documentation/complements.js":3,"./views/documentation/getting-started.js":4,"./views/documentation/performance.js":5,"./views/error/not-found.js":6,"./views/layout.js":7}],9:[function(require,module,exports){
'use strict';

module.exports = function () {
  console.log('Welcome to Taunus documentation mini-site!');
};

},{}],10:[function(require,module,exports){
'use strict';

var $ = require('dominus');
var raf = require('raf');
var taunus = require('taunus');
var throttle = require('./throttle');
var slowScrollCheck = throttle(scrollCheck, 50);
var hx = /^h[1-6]$/i;
var heading;

function conventions (container) {
  $('body').on('click', 'h1,h2,h3,h4,h5,h6', headingClick);

  raf(scroll);
}

function scroll () {
  slowScrollCheck();
  raf(scroll);
}

function scrollCheck () {
  var found = $('main').find('h1,h2,h3,h4,h5,h6').filter(inViewport);
  if (found.length === 0 || heading && found[0] === heading[0]) {
    return;
  }
  if (heading) {
    heading.removeClass('uv-highlight');
  }
  heading = found.i(0);
  heading.addClass('uv-highlight');
}

function inViewport (element) {
  var rect = element.getBoundingClientRect();
  var viewable = (
    Math.ceil(rect.top) >= 0 &&
    Math.ceil(rect.left) >= 0 &&
    Math.floor(rect.bottom) <= (window.innerHeight || document.documentElement.clientHeight) &&
    Math.floor(rect.right) <= (window.innerWidth || document.documentElement.clientWidth)
  );
  return viewable;
}

function findHeading (e) {
  var h = e.target;
  while (h && !hx.test(h.tagName)) {
    h = h.parentElement;
  }
  return h;
}

function headingClick (e) {
  var h = findHeading(e);
  if (h && h.id) {
    taunus.navigate('#' + h.id);
  }
}

module.exports = conventions;

},{"./throttle":12,"dominus":26,"raf":33,"taunus":50}],11:[function(require,module,exports){
(function (global){
'use strict';

// import the taunus module
var taunus = require('taunus');

// import the wiring module exported by Taunus
var wiring = require('../../.bin/wiring');

// import conventions
var conventions = require('./conventions');

// get the <main> element
var main = document.getElementById('application-root');

// set up conventions that get executed for every view
taunus.on('render', conventions);

// mount taunus so it starts its routing engine
taunus.mount(main, wiring);

// create globals to make it easy to debug
// don't do this in production!
global.$ = require('dominus');
global.taunus = taunus;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../.bin/wiring":8,"./conventions":10,"dominus":26,"taunus":50}],12:[function(require,module,exports){
(function (global){
'use strict';

function throttle (fn, t) {
  var cache;
  var last = -1;
  return function throttled () {
    var now = Date.now();
    if (now - last > t) {
      cache = fn.apply(this, arguments);
      last = now;
    }
    return cache;
  };
}

module.exports = throttle;
global.throttle=throttle;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],13:[function(require,module,exports){
(function (global){

var NativeCustomEvent = global.CustomEvent;

function useNative () {
  try {
    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });
    return  'cat' === p.type && 'bar' === p.detail.foo;
  } catch (e) {
  }
  return false;
}

/**
 * Cross-browser `CustomEvent` constructor.
 *
 * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent
 *
 * @public
 */

module.exports = useNative() ? NativeCustomEvent :

// IE >= 9
'function' === typeof document.createEvent ? function CustomEvent (type, params) {
  var e = document.createEvent('CustomEvent');
  if (params) {
    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);
  } else {
    e.initCustomEvent(type, false, false, void 0);
  }
  return e;
} :

// IE <= 8
function CustomEvent (type, params) {
  var e = document.createEventObject();
  e.type = type;
  if (params) {
    e.bubbles = Boolean(params.bubbles);
    e.cancelable = Boolean(params.cancelable);
    e.detail = params.detail;
  } else {
    e.bubbles = false;
    e.cancelable = false;
    e.detail = void 0;
  }
  return e;
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],14:[function(require,module,exports){
(function (global){
'use strict';

var customEvent = require('custom-event');
var eventmap = require('./eventmap');
var doc = document;
var addEvent = addEventEasy;
var removeEvent = removeEventEasy;
var hardCache = [];

if (!global.addEventListener) {
  addEvent = addEventHard;
  removeEvent = removeEventHard;
}

function addEventEasy (el, type, fn, capturing) {
  return el.addEventListener(type, fn, capturing);
}

function addEventHard (el, type, fn) {
  return el.attachEvent('on' + type, wrap(el, type, fn));
}

function removeEventEasy (el, type, fn, capturing) {
  return el.removeEventListener(type, fn, capturing);
}

function removeEventHard (el, type, fn) {
  return el.detachEvent('on' + type, unwrap(el, type, fn));
}

function fabricateEvent (el, type, model) {
  var e = eventmap.indexOf(type) === -1 ? makeCustomEvent() : makeClassicEvent();
  if (el.dispatchEvent) {
    el.dispatchEvent(e);
  } else {
    el.fireEvent('on' + type, e);
  }
  function makeClassicEvent () {
    var e;
    if (doc.createEvent) {
      e = doc.createEvent('Event');
      e.initEvent(type, true, true);
    } else if (doc.createEventObject) {
      e = doc.createEventObject();
    }
    return e;
  }
  function makeCustomEvent () {
    return new customEvent(type, { detail: model });
  }
}

function wrapperFactory (el, type, fn) {
  return function wrapper (originalEvent) {
    var e = originalEvent || global.event;
    e.target = e.target || e.srcElement;
    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };
    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };
    e.which = e.which || e.keyCode;
    fn.call(el, e);
  };
}

function wrap (el, type, fn) {
  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);
  hardCache.push({
    wrapper: wrapper,
    element: el,
    type: type,
    fn: fn
  });
  return wrapper;
}

function unwrap (el, type, fn) {
  var i = find(el, type, fn);
  if (i) {
    var wrapper = hardCache[i].wrapper;
    hardCache.splice(i, 1); // free up a tad of memory
    return wrapper;
  }
}

function find (el, type, fn) {
  var i, item;
  for (i = 0; i < hardCache.length; i++) {
    item = hardCache[i];
    if (item.element === el && item.type === type && item.fn === fn) {
      return i;
    }
  }
}

module.exports = {
  add: addEvent,
  remove: removeEvent,
  fabricate: fabricateEvent
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./eventmap":15,"custom-event":13}],15:[function(require,module,exports){
(function (global){
'use strict';

var eventmap = [];
var eventname = '';
var ron = /^on/;

for (eventname in global) {
  if (ron.test(eventname)) {
    eventmap.push(eventname.slice(2));
  }
}

module.exports = eventmap;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],16:[function(require,module,exports){
var poser = require('./src/node');

module.exports = poser;

['Array', 'Function', 'Object', 'Date', 'String'].forEach(pose);

function pose (type) {
  poser[type] = function poseComputedType () { return poser(type); };
}

},{"./src/node":17}],17:[function(require,module,exports){
(function (global){
'use strict';

var d = global.document;

function poser (type) {
  var iframe = d.createElement('iframe');

  iframe.style.display = 'none';
  d.body.appendChild(iframe);

  return map(type, iframe.contentWindow);
}

function map (type, source) { // forward polyfills to the stolen reference!
  var original = window[type].prototype;
  var value = source[type];
  var prop;

  for (prop in original) {
    value.prototype[prop] = original[prop];
  }

  return value;
}

module.exports = poser;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],18:[function(require,module,exports){
(function (global){
'use strict';

var expando = 'sektor-' + Date.now();
var rsiblings = /[+~]/;
var document = global.document;
var del = document.documentElement;
var match = del.matches ||
            del.webkitMatchesSelector ||
            del.mozMatchesSelector ||
            del.oMatchesSelector ||
            del.msMatchesSelector;

function qsa (selector, context) {
  var existed, id, prefix, prefixed, adapter, hack = context !== document;
  if (hack) { // id hack for context-rooted queries
    existed = context.getAttribute('id');
    id = existed || expando;
    prefix = '#' + id + ' ';
    prefixed = prefix + selector.replace(/,/g, ',' + prefix);
    adapter = rsiblings.test(selector) && context.parentNode;
    if (!existed) { context.setAttribute('id', id); }
  }
  try {
    return (adapter || context).querySelectorAll(prefixed || selector);
  } catch (e) {
    return [];
  } finally {
    if (existed === null) { context.removeAttribute('id'); }
  }
}

function find (selector, ctx, collection, seed) {
  var element;
  var context = ctx || document;
  var results = collection || [];
  var i = 0;
  if (typeof selector !== 'string') {
    return results;
  }
  if (context.nodeType !== 1 && context.nodeType !== 9) {
    return []; // bail if context is not an element or document
  }
  if (seed) {
    while ((element = seed[i++])) {
      if (matchesSelector(element, selector)) {
        results.push(element);
      }
    }
  } else {
    results.push.apply(results, qsa(selector, context));
  }
  return results;
}

function matches (selector, elements) {
  return find(selector, null, null, elements);
}

function matchesSelector (element, selector) {
  return match.call(element, selector);
}

module.exports = find;

find.matches = matches;
find.matchesSelector = matchesSelector;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],19:[function(require,module,exports){
'use strict';

var poser = require('poser');
var Dominus = poser.Array();

module.exports = Dominus;

},{"poser":16}],20:[function(require,module,exports){
'use strict';

var $ = require('./public');
var flatten = require('./flatten');
var dom = require('./dom');
var custom = require('./custom');
var classes = require('./classes');
var Dominus = require('./Dominus.ctor');

function equals (selector) {
  return function equals (elem) {
    return dom.matches(elem, selector);
  };
}

function straight (prop, one) {
  return function domMapping (selector) {
    var result = this.map(function (elem) {
      return dom[prop](elem, selector);
    });
    var results = flatten(result);
    return one ? results[0] : results;
  };
}

Dominus.prototype.prev = straight('prev');
Dominus.prototype.next = straight('next');
Dominus.prototype.parent = straight('parent');
Dominus.prototype.parents = straight('parents');
Dominus.prototype.children = straight('children');
Dominus.prototype.find = straight('qsa');
Dominus.prototype.findOne = straight('qs', true);

Dominus.prototype.where = function (selector) {
  return this.filter(equals(selector));
};

Dominus.prototype.is = function (selector) {
  return this.some(equals(selector));
};

Dominus.prototype.i = function (index) {
  return this[index] ? new Dominus(this[index]) : new Dominus();
};

function compareFactory (fn) {
  return function compare () {
    $.apply(null, arguments).forEach(fn, this);
    return this;
  };
}

Dominus.prototype.and = compareFactory(function addOne (elem) {
  if (this.indexOf(elem) === -1) {
    this.push(elem);
  }
  return this;
});

Dominus.prototype.but = compareFactory(function addOne (elem) {
  var index = this.indexOf(elem);
  if (index !== -1) {
    this.splice(index, 1);
  }
  return this;
});

Dominus.prototype.css = function (name, value) {
  var props;
  var many = name && typeof name === 'object';
  var getter = !many && !value;
  if (getter) {
    return this.length ? dom.getCss(this[0], name) : null;
  }
  if (many) {
    props = name;
  } else {
    props = {};
    props[name] = value;
  }
  this.forEach(dom.setCss(props));
  return this;
};

function eventer (method) {
  return function (types, filter, fn) {
    var typelist = types.split(' ');
    if (typeof fn !== 'function') {
      fn = filter;
      filter = null;
    }
    this.forEach(function (elem) {
      typelist.forEach(function (type) {
        var handler = custom.handlers[type];
        if (handler) {
          dom[method](elem, handler.event, filter, handler.wrap(fn));
        } else {
          dom[method](elem, type, filter, fn);
        }
      });
    });
    return this;
  };
}

Dominus.prototype.once = eventer('once');
Dominus.prototype.on = eventer('on');
Dominus.prototype.off = eventer('off');
Dominus.prototype.emit = eventer('emit');

[
  ['addClass', classes.add],
  ['removeClass', classes.remove],
  ['setClass', classes.set],
  ['removeClass', classes.remove],
  ['remove', dom.remove]
].forEach(mapMethods);

function mapMethods (data) {
  Dominus.prototype[data[0]] = function (value) {
    this.forEach(function (elem) {
      data[1](elem, value);
    });
    return this;
  };
}

[
  'append',
  'appendTo',
  'prepend',
  'prependTo',
  'before',
  'beforeOf',
  'after',
  'afterOf'
].forEach(mapManipulation);

function mapManipulation (method) {
  Dominus.prototype[method] = function (value) {
    dom[method](this, value);
    return this;
  };
}

Dominus.prototype.hasClass = function (value) {
  return this.some(function (elem) {
    return classes.contains(elem, value);
  });
};

Dominus.prototype.attr = function (name, value) {
  var hash = name && typeof name === 'object';
  var set = hash ? setMany : setSingle;
  var setter = hash || arguments.length > 1;
  if (setter) {
    this.forEach(set);
    return this;
  } else {
    return this.length ? dom.getAttr(this[0], name) : null;
  }
  function setMany (elem) {
    dom.manyAttr(elem, name);
  }
  function setSingle (elem) {
    dom.attr(elem, name, value);
  }
};

function keyValue (key, value) {
  var getter = arguments.length < 2;
  if (getter) {
    return this.length ? dom[key](this[0]) : '';
  }
  this.forEach(function (elem) {
    dom[key](elem, value);
  });
  return this;
}

function keyValueProperty (prop) {
  Dominus.prototype[prop] = function accessor (value) {
    var getter = arguments.length < 1;
    if (getter) {
      return keyValue.call(this, prop);
    }
    return keyValue.call(this, prop, value);
  };
}

['html', 'text', 'value'].forEach(keyValueProperty);

Dominus.prototype.clone = function () {
  return this.map(function (elem) {
    return dom.clone(elem);
  });
};

Dominus.prototype.focus = function () {
  if (this.length) {
    this[0].focus();
  }
  return this;
};

module.exports = require('./public');

},{"./Dominus.ctor":19,"./classes":23,"./custom":24,"./dom":25,"./flatten":27,"./public":28}],21:[function(require,module,exports){
'use strict';

var Dominus = require('./Dominus.ctor');
var proto = Dominus.prototype;

function Applied (args) {
  return Dominus.apply(this, args);
}

Applied.prototype = proto;

function apply (a) {
  return new Applied(a);
}

['map', 'filter', 'concat', 'slice'].forEach(ensure);

function ensure (key) {
  var original = proto[key];
  proto[key] = function applied () {
    return apply(original.apply(this, arguments));
  };
}

module.exports = apply;

},{"./Dominus.ctor":19}],22:[function(require,module,exports){
(function (global){
'use strict';

var test = require('./test');
var apply = require('./apply');
var Dominus = require('./Dominus.ctor');

function cast (a) {
  if (a === global) {
    return new Dominus(a);
  }
  if (a instanceof Dominus) {
    return a;
  }
  if (!a) {
    return new Dominus();
  }
  if (test.isElement(a)) {
    return new Dominus(a);
  }
  if (!test.isArray(a)) {
    return new Dominus();
  }
  return apply(a).filter(function (i) {
    return test.isElement(i);
  });
}

module.exports = cast;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./Dominus.ctor":19,"./apply":21,"./test":29}],23:[function(require,module,exports){
'use strict';

var trim = /^\s+|\s+$/g;
var whitespace = /\s+/g;
var test = require('./test');

function interpret (input) {
  return typeof input === 'string' ? input.replace(trim, '').split(whitespace) : input;
}

function classes (el) {
  if (test.isElement(el)) {
    return el.className.replace(trim, '').split(whitespace);
  }
  return [];
}

function set (el, input) {
  if (test.isElement(el)) {
    el.className = interpret(input).join(' ');
  }
}

function add (el, input) {
  var current = remove(el, input);
  var values = interpret(input);
  current.push.apply(current, values);
  set(el, current);
  return current;
}

function remove (el, input) {
  var current = classes(el);
  var values = interpret(input);
  values.forEach(function (value) {
    var i = current.indexOf(value);
    if (i !== -1) {
      current.splice(i, 1);
    }
  });
  set(el, current);
  return current;
}

function contains (el, input) {
  var current = classes(el);
  var values = interpret(input);

  return values.every(function (value) {
    return current.indexOf(value) !== -1;
  });
}

module.exports = {
  add: add,
  remove: remove,
  contains: contains,
  set: set,
  get: classes
};

},{"./test":29}],24:[function(require,module,exports){
'use strict';

var handlers = {};

function register (name, type, filter) {
  handlers[name] = {
    event: type,
    filter: filter,
    wrap: wrap
  };

  function wrap (fn) {
    return wrapper(name, fn);
  }
}

function wrapper (name, fn) {
  if (!fn) {
    return fn;
  }
  var key = '__dce_' + name;
  if (fn[key]) {
    return fn[key];
  }
  fn[key] = function customEvent (e) {
    var match = handlers[name].filter(e);
    if (match) {
      return fn.apply(this, arguments);
    }
  };
  return fn[key];
}

register('left-click', 'click', function (e) {
  return e.which === 1 && !e.metaKey && !e.ctrlKey;
});

module.exports = {
  register: register,
  wrapper: wrapper,
  handlers: handlers
};

},{}],25:[function(require,module,exports){
(function (global){
'use strict';

var sektor = require('sektor');
var crossvent = require('crossvent');
var Dominus = require('./Dominus.ctor');
var cast = require('./cast');
var apply = require('./apply');
var text = require('./text');
var test = require('./test');
var api = module.exports = {};
var delegates = {};

function castContext (context) {
  if (typeof context === 'string') {
    return api.qs(null, context);
  }
  if (test.isElement(context)) {
    return context;
  }
  if (context instanceof Dominus) {
    return context[0];
  }
  return null;
}

api.qsa = function (el, selector) {
  var results = new Dominus();
  return sektor(selector, castContext(el), results);
};

api.qs = function (el, selector) {
  return api.qsa(el, selector)[0];
};

api.matches = function (el, selector) {
  return test.isElement(el) && sektor.matchesSelector(el, selector);
};

function relatedFactory (prop) {
  return function related (el, selector) {
    var relative = el[prop];
    if (relative) {
      if (!selector || api.matches(relative, selector)) {
        return cast(relative);
      }
    }
    return new Dominus();
  };
}

api.prev = relatedFactory('previousElementSibling');
api.next = relatedFactory('nextElementSibling');
api.parent = relatedFactory('parentElement');

function matches (el, value) {
  if (!value) {
    return true;
  }
  if (value instanceof Dominus) {
    return value.indexOf(el) !== -1;
  }
  if (test.isElement(value)) {
    return el === value;
  }
  return api.matches(el, value);
}

api.parents = function (el, value) {
  var elements = [];
  var current = el;
  while (current.parentElement) {
    if (matches(current.parentElement, value)) {
      elements.push(current.parentElement);
    }
    current = current.parentElement;
  }
  return apply(elements);
};

api.children = function (el, value) {
  var elements = [];
  var children = el.children;
  var child;
  var i;
  for (i = 0; children && i < children.length; i++) {
    child = children[i];
    if (matches(child, value)) {
      elements.push(child);
    }
  }
  return apply(elements);
};

// this method caches delegates so that .off() works seamlessly
function delegate (root, filter, fn) {
  if (delegates[fn._dd]) {
    return delegates[fn._dd];
  }
  fn._dd = Date.now();
  delegates[fn._dd] = delegator;
  function delegator (e) {
    var el = e.target;
    while (el && el !== root) {
      if (api.matches(el, filter)) {
        fn.apply(this, arguments); return;
      }
      el = el.parentElement;
    }
  }
  return delegator;
}

function evented (method, el, type, filter, fn) {
  if (filter === null) {
    crossvent[method](el, type, fn);
  } else {
    crossvent[method](el, type, delegate(el, filter, fn));
  }
}

function once (el, type, filter, fn) {
  var things = [el, type, filter, disposable];
  api.on.apply(api, things);
  function disposable () {
    api.off.apply(api, things);
    return fn.apply(this, arguments);
  }
}

api.once = once;
api.on = evented.bind(null, 'add');
api.off = evented.bind(null, 'remove');
api.emit = evented.bind(null, 'fabricate');

api.html = function (elem, html) {
  var getter = arguments.length < 2;
  if (getter) {
    return elem.innerHTML;
  } else {
    elem.innerHTML = html;
  }
};

api.text = function (elem, text) {
  var checkable = test.isCheckable(elem);
  var getter = arguments.length < 2;
  if (getter) {
    return checkable ? elem.value : elem.innerText || elem.textContent;
  } else if (checkable) {
    elem.value = text;
  } else {
    elem.innerText = elem.textContent = text;
  }
};

api.value = function (el, value) {
  var checkable = test.isCheckable(el);
  var getter = arguments.length < 2;
  if (getter) {
    return checkable ? el.checked : el.value;
  } else if (checkable) {
    el.checked = value;
  } else {
    el.value = value;
  }
};

api.attr = function (el, name, value) {
  if (!test.isElement(el)) {
    return;
  }
  if (value === null || value === void 0) {
    el.removeAttribute(name); return;
  }
  var camel = text.hyphenToCamel(name);
  if (camel in el) {
    el[camel] = value;
  } else {
    el.setAttribute(name, value);
  }
};

api.getAttr = function (el, name) {
  var camel = text.hyphenToCamel(name);
  if (camel in el) {
    return el[camel];
  } else if (el.getAttribute) {
    return el.getAttribute(name);
  }
  return null;
};

api.manyAttr = function (elem, attrs) {
  Object.keys(attrs).forEach(function (attr) {
    api.attr(elem, attr, attrs[attr]);
  });
};

api.make = function (type) {
  return new Dominus(document.createElement(type));
};

api.clone = function (el) {
  if (el.cloneNode) {
    return el.cloneNode(true);
  }
  return el;
};

api.remove = function (el) {
  if (el.parentElement) {
    el.parentElement.removeChild(el);
  }
};

api.append = function (el, target) {
  if (manipulationGuard(el, target, api.append)) {
    return;
  }
  if (el.appendChild) {
    el.appendChild(target);
  }
};

api.prepend = function (el, target) {
  if (manipulationGuard(el, target, api.prepend)) {
    return;
  }
  if (el.insertBefore) {
    el.insertBefore(target, el.firstChild);
  }
};

api.before = function (el, target) {
  if (manipulationGuard(el, target, api.before)) {
    return;
  }
  if (el.parentElement) {
    el.parentElement.insertBefore(target, el);
  }
};

api.after = function (el, target) {
  if (manipulationGuard(el, target, api.after)) {
    return;
  }
  if (el.parentElement) {
    el.parentElement.insertBefore(target, el.nextSibling);
  }
};

function manipulationGuard (el, target, fn) {
  var right = target instanceof Dominus;
  var left = el instanceof Dominus;
  if (left) {
    el.forEach(manipulateMany);
  } else if (right) {
    manipulate(el, true);
  }
  return !el || !target || left || right;

  function manipulate (el, precondition) {
    if (right) {
      target.forEach(function (target, j) {
        fn(el, cloneUnless(target, precondition && j === 0));
      });
    } else {
      fn(el, cloneUnless(target, precondition));
    }
  }

  function manipulateMany (el, i) {
    manipulate(el, i === 0);
  }
}

function cloneUnless (target, condition) {
  return condition ? target : api.clone(target);
}

['appendTo', 'prependTo', 'beforeOf', 'afterOf'].forEach(flip);

function flip (key) {
  var original = key.split(/[A-Z]/)[0];
  api[key] = function (el, target) {
    api[original](target, el);
  };
}

var numericCssProperties = {
  'column-count': true,
  'fill-opacity': true,
  'flex-grow': true,
  'flex-shrink': true,
  'font-weight': true,
  'line-height': true,
  'opacity': true,
  'order': true,
  'orphans': true,
  'widows': true,
  'z-index': true,
  'zoom': true
};
var numeric = /^\d+$/;
var canFloat = 'float' in document.body.style;

api.getCss = function (el, prop) {
  if (!test.isElement(el)) {
    return null;
  }
  var hprop = text.hyphenate(prop);
  var fprop = !canFloat && hprop === 'float' ? 'cssFloat' : hprop;
  var result = global.getComputedStyle(el)[hprop];
  if (prop === 'opacity' && result === '') {
    return 1;
  }
  if (result.substr(-2) === 'px' || numeric.test(result)) {
    return parseFloat(result, 10);
  }
  return result;
};

api.setCss = function (props) {
  var mapped = Object.keys(props).filter(bad).map(expand);
  function bad (prop) {
    var value = props[prop];
    return value !== null && value === value;
  }
  function expand (prop) {
    var hprop = text.hyphenate(prop);
    var value = props[prop];
    if (typeof value === 'number' && !numericCssProperties[hprop]) {
      value += 'px';
    }
    return {
      name: hprop, value: value
    };
  }
  return function (el) {
    if (!test.isElement(el)) {
      return;
    }
    mapped.forEach(function (prop) {
      el.style[prop.name] = prop.value;
    });
  };
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./Dominus.ctor":19,"./apply":21,"./cast":22,"./test":29,"./text":30,"crossvent":14,"sektor":18}],26:[function(require,module,exports){
'use strict';

module.exports = require('./Dominus.prototype');

},{"./Dominus.prototype":20}],27:[function(require,module,exports){
'use strict';

var Dominus = require('./Dominus.ctor');

function flatten (a, cache) {
  return a.reduce(function (current, item) {
    if (Dominus.isArray(item)) {
      return flatten(item, current);
    } else if (current.indexOf(item) === -1) {
      return current.concat(item);
    }
    return current;
  }, cache || new Dominus());
}

module.exports = flatten;

},{"./Dominus.ctor":19}],28:[function(require,module,exports){
'use strict';

var dom = require('./dom');
var cast = require('./cast');
var custom = require('./custom');
var Dominus = require('./Dominus.ctor');
var tag = /^\s*<([a-z]+(?:-[a-z]+)?)\s*\/?>\s*$/i;

function api (selector, context) {
  var notText = typeof selector !== 'string';
  if (notText && arguments.length < 2) {
    return cast(selector);
  }
  if (notText) {
    return new Dominus();
  }
  var matches = selector.match(tag);
  if (matches) {
    return dom.make(matches[1]);
  }
  return api.find(selector, context);
}

api.find = function (selector, context) {
  return dom.qsa(context, selector);
};

api.findOne = function (selector, context) {
  return dom.qs(context, selector);
};

api.custom = custom.register;

module.exports = api;

},{"./Dominus.ctor":19,"./cast":22,"./custom":24,"./dom":25}],29:[function(require,module,exports){
'use strict';

var elementObjects = typeof HTMLElement === 'object';

function isElement (o) {
  return elementObjects ? o instanceof HTMLElement : isElementObject(o);
}

function isElementObject (o) {
  return o &&
    typeof o === 'object' &&
    typeof o.nodeName === 'string' &&
    o.nodeType === 1;
}

function isArray (a) {
  return Object.prototype.toString.call(a) === '[object Array]';
}

function isCheckable (elem) {
  return 'checked' in elem && elem.type === 'radio' || elem.type === 'checkbox';
}

module.exports = {
  isElement: isElement,
  isArray: isArray,
  isCheckable: isCheckable
};

},{}],30:[function(require,module,exports){
'use strict';

function hyphenToCamel (hyphens) {
  var part = /-([a-z])/g;
  return hyphens.replace(part, function (g, m) {
    return m.toUpperCase();
  });
}

function hyphenate (text) {
  var camel = /([a-z])([A-Z])/g;
  return text.replace(camel, '$1-$2').toLowerCase();
}

module.exports = {
  hyphenToCamel: hyphenToCamel,
  hyphenate: hyphenate
};

},{}],31:[function(require,module,exports){
(function (global){
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jade = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = function merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = merge(attrs, a[i]);
    }
    return attrs;
  }
  var ac = a['class'];
  var bc = b['class'];

  if (ac || bc) {
    ac = ac || [];
    bc = bc || [];
    if (!Array.isArray(ac)) ac = [ac];
    if (!Array.isArray(bc)) bc = [bc];
    a['class'] = ac.concat(bc).filter(nulls);
  }

  for (var key in b) {
    if (key != 'class') {
      a[key] = b[key];
    }
  }

  return a;
};

/**
 * Filter null `val`s.
 *
 * @param {*} val
 * @return {Boolean}
 * @api private
 */

function nulls(val) {
  return val != null && val !== '';
}

/**
 * join array as classes.
 *
 * @param {*} val
 * @return {String}
 */
exports.joinClasses = joinClasses;
function joinClasses(val) {
  return (Array.isArray(val) ? val.map(joinClasses) :
    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :
    [val]).filter(nulls).join(' ');
}

/**
 * Render the given classes.
 *
 * @param {Array} classes
 * @param {Array.<Boolean>} escaped
 * @return {String}
 */
exports.cls = function cls(classes, escaped) {
  var buf = [];
  for (var i = 0; i < classes.length; i++) {
    if (escaped && escaped[i]) {
      buf.push(exports.escape(joinClasses([classes[i]])));
    } else {
      buf.push(joinClasses(classes[i]));
    }
  }
  var text = joinClasses(buf);
  if (text.length) {
    return ' class="' + text + '"';
  } else {
    return '';
  }
};


exports.style = function (val) {
  if (val && typeof val === 'object') {
    return Object.keys(val).map(function (style) {
      return style + ':' + val[style];
    }).join(';');
  } else {
    return val;
  }
};
/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = function attr(key, val, escaped, terse) {
  if (key === 'style') {
    val = exports.style(val);
  }
  if ('boolean' == typeof val || null == val) {
    if (val) {
      return ' ' + (terse ? key : key + '="' + key + '"');
    } else {
      return '';
    }
  } else if (0 == key.indexOf('data') && 'string' != typeof val) {
    if (JSON.stringify(val).indexOf('&') !== -1) {
      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +
                   'will be escaped to `&amp;`');
    };
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will eliminate the double quotes around dates in ' +
                   'ISO form after 2.0.0');
    }
    return ' ' + key + "='" + JSON.stringify(val).replace(/'/g, '&apos;') + "'";
  } else if (escaped) {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + exports.escape(val) + '"';
  } else {
    if (val && typeof val.toISOString === 'function') {
      console.warn('Jade will stringify dates in ISO form after 2.0.0');
    }
    return ' ' + key + '="' + val + '"';
  }
};

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} escaped
 * @return {String}
 */
exports.attrs = function attrs(obj, terse){
  var buf = [];

  var keys = Object.keys(obj);

  if (keys.length) {
    for (var i = 0; i < keys.length; ++i) {
      var key = keys[i]
        , val = obj[key];

      if ('class' == key) {
        if (val = joinClasses(val)) {
          buf.push(' ' + key + '="' + val + '"');
        }
      } else {
        buf.push(exports.attr(key, val, false, terse));
      }
    }
  }

  return buf.join('');
};

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var jade_encode_html_rules = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;'
};
var jade_match_html = /[&<>"]/g;

function jade_encode_char(c) {
  return jade_encode_html_rules[c] || c;
}

exports.escape = jade_escape;
function jade_escape(html){
  var result = String(html).replace(jade_match_html, jade_encode_char);
  if (result === '' + html) return html;
  else return result;
};

/**
 * Re-throw the given `err` in context to the
 * the jade in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @api private
 */

exports.rethrow = function rethrow(err, filename, lineno, str){
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  try {
    str = str || require('fs').readFileSync(filename, 'utf8')
  } catch (ex) {
    rethrow(err, null, lineno)
  }
  var context = 3
    , lines = str.split('\n')
    , start = Math.max(lineno - context, 0)
    , end = Math.min(lines.length, lineno + context);

  // Error context
  var context = lines.slice(start, end).map(function(line, i){
    var curr = i + start + 1;
    return (curr == lineno ? '  > ' : '    ')
      + curr
      + '| '
      + line;
  }).join('\n');

  // Alter exception message
  err.path = filename;
  err.message = (filename || 'Jade') + ':' + lineno
    + '\n' + context + '\n\n' + err.message;
  throw err;
};

exports.DebugItem = function DebugItem(lineno, filename) {
  this.lineno = lineno;
  this.filename = filename;
}

},{"fs":2}],2:[function(require,module,exports){

},{}]},{},[1])(1)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"fs":124}],32:[function(require,module,exports){
module.exports = require('jade/runtime');

},{"jade/runtime":31}],33:[function(require,module,exports){
var now = require('performance-now')
  , global = typeof window === 'undefined' ? {} : window
  , vendors = ['moz', 'webkit']
  , suffix = 'AnimationFrame'
  , raf = global['request' + suffix]
  , caf = global['cancel' + suffix] || global['cancelRequest' + suffix]

for(var i = 0; i < vendors.length && !raf; i++) {
  raf = global[vendors[i] + 'Request' + suffix]
  caf = global[vendors[i] + 'Cancel' + suffix]
      || global[vendors[i] + 'CancelRequest' + suffix]
}

// Some versions of FF have rAF but not cAF
if(!raf || !caf) {
  var last = 0
    , id = 0
    , queue = []
    , frameDuration = 1000 / 60

  raf = function(callback) {
    if(queue.length === 0) {
      var _now = now()
        , next = Math.max(0, frameDuration - (_now - last))
      last = next + _now
      setTimeout(function() {
        var cp = queue.slice(0)
        // Clear queue here to prevent
        // callbacks from appending listeners
        // to the current frame's queue
        queue.length = 0
        for(var i = 0; i < cp.length; i++) {
          if(!cp[i].cancelled) {
            try{
              cp[i].callback(last)
            } catch(e) {
              setTimeout(function() { throw e }, 0)
            }
          }
        }
      }, Math.round(next))
    }
    queue.push({
      handle: ++id,
      callback: callback,
      cancelled: false
    })
    return id
  }

  caf = function(handle) {
    for(var i = 0; i < queue.length; i++) {
      if(queue[i].handle === handle) {
        queue[i].cancelled = true
      }
    }
  }
}

module.exports = function(fn) {
  // Wrap in a new function to prevent
  // `cancel` potentially being assigned
  // to the native rAF function
  return raf.call(global, fn)
}
module.exports.cancel = function() {
  caf.apply(global, arguments)
}

},{"performance-now":34}],34:[function(require,module,exports){
(function (process){
// Generated by CoffeeScript 1.7.1
(function() {
  var getNanoSeconds, hrtime, loadTime;

  if ((typeof performance !== "undefined" && performance !== null) && performance.now) {
    module.exports = function() {
      return performance.now();
    };
  } else if ((typeof process !== "undefined" && process !== null) && process.hrtime) {
    module.exports = function() {
      return (getNanoSeconds() - loadTime) / 1e6;
    };
    hrtime = process.hrtime;
    getNanoSeconds = function() {
      var hr;
      hr = hrtime();
      return hr[0] * 1e9 + hr[1];
    };
    loadTime = getNanoSeconds();
  } else if (Date.now) {
    module.exports = function() {
      return Date.now() - loadTime;
    };
    loadTime = Date.now();
  } else {
    module.exports = function() {
      return new Date().getTime() - loadTime;
    };
    loadTime = new Date().getTime();
  }

}).call(this);

}).call(this,require('_process'))

},{"_process":125}],35:[function(require,module,exports){
(function (global){
'use strict';

var raf = require('raf');
var clone = require('./clone');
var emitter = require('./emitter');
var fetcher = require('./fetcher');
var prefetcherIntent = require('./prefetcherIntent');
var view = require('./view');
var router = require('./router');
var state = require('./state');
var redirector = require('./redirector');
var doc = require('./global/document');
var location = require('./global/location');
var history = require('./global/history');
var versionCheck = require('./versionCheck');
var hardRedirect = require('./hardRedirect');

function modern () { // needs to be a function because testing
  return history && history.modern !== false;
}

function go (url, options) {
  if (state.hardRedirect) {
    global.DEBUG && global.DEBUG('[activator] hard redirect in progress, aborting');
    return;
  }

  var o = options || {};
  var direction = o.replaceState ? 'replaceState' : 'pushState';
  var context = o.context || null;
  var route = router(url);
  if (!route) {
    if (o.strict !== true) {
      global.DEBUG && global.DEBUG('[activator] redirecting to %s', url);
      hardRedirect(url);
    }
    return;
  }

  global.DEBUG && global.DEBUG('[activator] route matches %s', route.route);

  if (o.dry) {
    global.DEBUG && global.DEBUG('[activator] history update only');
    navigation(route, state.model, direction); return;
  }

  var notForced = o.force !== true;
  var same = router.equals(route, state.route);
  if (same && notForced) {
    if (route.hash) {
      global.DEBUG && global.DEBUG('[activator] same route and hash, updating scroll position');
      scrollInto(id(route.hash), o.scroll);
      navigation(route, state.model, direction);
    } else {
      global.DEBUG && global.DEBUG('[activator] same route, resolving');
      resolved(state.model);
    }
    return;
  }

  global.DEBUG && global.DEBUG('[activator] %s', notForced ? 'not same route as before' : 'forced to fetch same route');

  if (!modern()) {
    global.DEBUG && global.DEBUG('[activator] not modern, redirecting to %s', url);
    hardRedirect(url);
    return;
  }

  global.DEBUG && global.DEBUG('[activator] fetching %s', route.url);
  prefetcherIntent.abort();
  fetcher.abortPending();
  fetcher(route, { element: context, source: 'intent' }, maybeResolved);

  function maybeResolved (err, data) {
    if (err) {
      return;
    }
    if (versionCheck(data.version, url) === false) {
      return;
    }
    if ('redirect' in data) {
      global.DEBUG && global.DEBUG('[activator] redirect detected in response');
      redirector.redirect(data.redirect);
      return;
    }
    resolved(data.model);
  }

  function resolved (model) {
    var same = router.equals(route, state.route);
    navigation(route, model, same ? 'replaceState' : direction);
    view(state.container, null, model, route);
    scrollInto(id(route.hash), o.scroll);
  }
}

function start (data) {
  if (data.version !== state.version) {
    global.DEBUG && global.DEBUG('[activator] version change, reloading browser');
    location.reload(); // version may change between Taunus loading and a model becoming available
    return;
  }
  var model = data.model;
  var route = router(location.href);
  navigation(route, model, 'replaceState');
  emitter.emit('start', state.container, model, route);
  global.DEBUG && global.DEBUG('[activator] started, executing client-side controller');
  view(state.container, null, model, route, { render: false });
  global.onpopstate = back;
}

function back (e) {
  var s = e.state;
  var empty = !s || !s.__taunus;
  if (empty) {
    return;
  }
  global.DEBUG && global.DEBUG('[activator] backwards history navigation with state', s);
  var model = s.model;
  var route = router(location.href);
  navigation(route, model, 'replaceState');
  view(state.container, null, model, route);
  scrollInto(id(route.hash));
}

function scrollInto (id, enabled) {
  if (enabled === false) {
    return;
  }
  global.DEBUG && global.DEBUG('[activator] scrolling into "%s"', id || '#document');

  var elem = id && doc.getElementById(id) || doc.documentElement;
  if (elem && elem.scrollIntoView) {
    raf(scrollSoon);
  }

  function scrollSoon () {
    elem.scrollIntoView();
  }
}

function id (hash) {
  return orEmpty(hash).substr(1);
}

function orEmpty (value) {
  return value || '';
}

function navigation (route, model, direction) {
  var data;

  global.DEBUG && global.DEBUG('[activator] history :%s %s', direction.replace('State', ''), route.url);
  state.route = route;
  state.model = clone(model);
  if (model.title) {
    doc.title = model.title;
  }
  if (modern() && history[direction]) {
    data = {
      __taunus: true,
      model: model
    };
    history[direction](data, model.title, route.url);
    setTimeout(emit, 0);
  }
  function emit () {
    emitter.emit('router', route);
  }
}

module.exports = {
  start: start,
  go: go
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./clone":38,"./emitter":41,"./fetcher":42,"./global/document":45,"./global/history":46,"./global/location":47,"./hardRedirect":48,"./prefetcherIntent":58,"./redirector":59,"./router":60,"./state":61,"./versionCheck":68,"./view":69,"raf":108}],36:[function(require,module,exports){
'use strict';

var clone = require('./clone');
var once = require('./once');
var state = require('./state');
var raw = require('./stores/raw');
var idb = require('./stores/idb');
var stores = [raw, idb];

function get (type, key, done) {
  var i = 0;

  function next () {
    var gotOnce = once(got);
    var store = stores[i++];
    if (store) {
      store.get(type, key, gotOnce);
      setTimeout(gotOnce, store === idb ? 35 : 5); // at worst, spend 40ms on caching layers
    } else {
      done(true);
    }

    function got (err, item) {
      if (err) {
        next();
      } else if (valid(item)) {
        done(false, blob(item)); // always return a unique copy
      } else {
        next();
      }
    }

    function valid (item) {
      if (!item) {
        return false; // cache must have item
      }
      var mismatch = typeof item.version !== 'string' || item.version !== state.version;
      if (mismatch) {
        return false; // cache must match current version
      }
      var stale = typeof item.expires !== 'number' || Date.now() >= item.expires;
      if (stale) {
        return false; // cache must be fresh
      }
      return true;
    }

    function blob (item) {
      var singular = type.substr(0, type.length - 1);
      var data = clone(item.data);
      var response = {
        version: item.version
      };
      response[singular] = data;
      return response;
    }
  }

  next();
}

function set (type, key, data, duration, v) {
  if (duration < 1) { // sanity
    return;
  }
  var version = arguments.length === 5 ? v : state.version;
  var cloned = clone(data); // freeze a copy for our records
  stores.forEach(store);
  function store (s) {
    s.set(type, key, {
      data: cloned,
      version: version,
      expires: Date.now() + duration
    });
  }
}

module.exports = {
  get: get,
  set: set
};

},{"./clone":38,"./once":55,"./state":61,"./stores/idb":63,"./stores/raw":64}],37:[function(require,module,exports){
(function (global){
'use strict';

var cache = require('./cache');
var idb = require('./stores/idb');
var state = require('./state');
var emitter = require('./emitter');
var interceptor = require('./interceptor');
var defaults = 15;
var baseline;

function e (value) {
  return value || '';
}

function setup (duration, route) {
  baseline = parseDuration(duration);
  if (baseline < 1) {
    state.cache = false;
    return;
  }
  interceptor.add(intercept);
  emitter.on('fetch.done', persist);
  state.cache = true;
}

function intercept (e) {
  global.DEBUG && global.DEBUG('[cache] attempting to intercept %s', e.route.url);
  cache.get('models', e.route.path, result);

  function result (err, data) {
    global.DEBUG && global.DEBUG('[cache] interception for %s %s', e.route.url, err || !data ? 'failed' : 'succeeded');
    if (!err && data) {
      e.preventDefault(data);
    }
  }
}

function parseDuration (value) {
  if (value === true) {
    return baseline || defaults;
  }
  if (typeof value === 'number') {
    return value;
  }
  return 0;
}

function persist (route, context, data) {
  if (!state.cache) {
    return;
  }
  if (route.cache === false) {
    return;
  }
  var d = baseline;
  if (typeof route.cache === 'number') {
    d = route.cache;
  }
  var target = context.hijacker || route.action;
  var freshness = parseDuration(d) * 1000;
  if ('model' in data) {
    global.DEBUG && global.DEBUG('[cache] saving model for %s', route.path);
    cache.set('models', route.path, data.model, freshness, data.version);
  }
  if ('template' in data) {
    global.DEBUG && global.DEBUG('[cache] saving template for %s', target);
    cache.set('templates', target, data.template, Infinity);
  }
  if ('controller' in data) {
    global.DEBUG && global.DEBUG('[cache] saving controller for %s', target);
    cache.set('controllers', target, data.controller, Infinity);
  }
}

function ready (fn) {
  if (state.cache) {
    idb.tested(fn); // wait on idb compatibility tests
  } else {
    fn(false); // caching is a no-op
  }
}

module.exports = {
  setup: setup,
  persist: persist,
  ready: ready
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./cache":36,"./emitter":41,"./interceptor":51,"./state":61,"./stores/idb":63}],38:[function(require,module,exports){
'use strict';

function clone (value) {
  return JSON.parse(JSON.stringify(value));
}

module.exports = clone;

},{}],39:[function(require,module,exports){
(function (global){
'use strict';

var state = require('./state');
var caching = require('./caching');
var unstrictEval = require('./unstrictEval');
var idb = require('./stores/idb');
var deferred = require('../lib/deferred');

function set (action, data) {
  store('template');
  store('controller');

  function store (key) {
    var type = key + 's';

    if (key in data) {
      push(type, action, data[key], data.version);
    }
  }
}

function refill () {
  caching.ready(pullComponents);
}

function pullComponents (enabled) {
  if (!enabled) { // bail if caching is turned off
    return;
  }
  idb.get('controllers', pull.bind(null, 'controllers'));
  idb.get('templates', pull.bind(null, 'templates'));
}

function pull (type, err, items) {
  if (err) {
    return;
  }
  items.forEach(pullItem);

  function pullItem (item) {
    push(type, item.key, item.data, item.version);
  }
}

function push (type, action, value, version) {
  var singular = type.substr(0, type.length - 1);
  var is = deferred(action, state.deferrals);
  if (is === false) {
    global.DEBUG && global.DEBUG('[componentCache] action "%s" is not deferred, not storing %s', action, singular);
    return;
  }
  global.DEBUG && global.DEBUG('[componentCache] storing %s for %s in state', singular, action);
  state[type][action] = state[type][action] || {};
  state[type][action][version] = {
    fn: parse(singular, value)
  };
}

function parse (type, value) {
  if (value) {
    try {
      return unstrictEval(value);
    } catch (e) {
      global.DEBUG && global.DEBUG('[componentCache] %s eval failed', type, e);
    }
  }
}

module.exports = {
  set: set,
  refill: refill
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../lib/deferred":71,"./caching":37,"./state":61,"./stores/idb":63,"./unstrictEval":67}],40:[function(require,module,exports){
(function (global){
'use strict';

var state = require('./state');
var deferred = require('../lib/deferred');

function needs (action) {
  var demands = [];
  var is = deferred(action, state.deferrals);
  if (is) {
    if (invalid('templates')) {
      demands.push('template');
    }
    if (invalid('controllers')) {
      demands.push('controller');
    }
  }

  function invalid (type) {
    var store = state[type];
    var fail = !store[action] || !store[action][state.version];
    if (fail) {
      global.DEBUG && global.DEBUG('[deferral] deferred %s %s not found', action, type.substr(0, type.length - 1));
    }
    return !!fail;
  }

  return demands;
}

module.exports = {
  needs: needs
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../lib/deferred":71,"./state":61}],41:[function(require,module,exports){
'use strict';

var emitter = require('contra/emitter');

module.exports = emitter({}, { throws: false });

},{"contra/emitter":75}],42:[function(require,module,exports){
(function (global){
'use strict';

var xhr = require('./xhr');
var state = require('./state');
var router = require('./router');
var emitter = require('./emitter');
var deferral = require('./deferral');
var interceptor = require('./interceptor');
var componentCache = require('./componentCache');
var lastXhr = {};

function e (value) {
  return value || '';
}

function negotiate (route, context) {
  var qs = e(route.search);
  var p = qs ? '&' : '?';
  var target = context.hijacker || route.action;
  var demands = ['json'].concat(deferral.needs(target));
  if (context.hijacker && context.hijacker !== route.action) {
    demands.push('hijacker=' + context.hijacker);
  }
  return route.pathname + qs + p + demands.join('&');
}

function abort (source) {
  if (lastXhr[source]) {
    lastXhr[source].abort();
  }
}

function abortPending () {
  Object.keys(lastXhr).forEach(abort);
  lastXhr = {};
}

function fetcher (route, context, done) {
  var url = route.url;
  if (lastXhr[context.source]) {
    lastXhr[context.source].abort();
    lastXhr[context.source] = null;
  }

  global.DEBUG && global.DEBUG('[fetcher] requested %s', route.url);

  interceptor.execute(route, afterInterceptors);

  function afterInterceptors (err, result) {
    if (!err && result.defaultPrevented && !context.hijacker) {
      global.DEBUG && global.DEBUG('[fetcher] prevented %s with data', route.url, result.data);
      done(null, result.data);
    } else {
      emitter.emit('fetch.start', route, context);
      lastXhr[context.source] = xhr(negotiate(route, context), notify);
    }
  }

  function notify (err, data, res) {
    if (err) {
      global.DEBUG && global.DEBUG('[fetcher] failed for %s', route.url);
      if (err.message === 'aborted') {
        emitter.emit('fetch.abort', route, context);
      } else {
        emitter.emit('fetch.error', route, context, err);
      }
    } else {
      global.DEBUG && global.DEBUG('[fetcher] succeeded for %s', route.url);
      if (data && data.version) {
        componentCache.set(router(res.url).query.hijacker || route.action, data);
      }
      emitter.emit('fetch.done', route, context, data);
    }
    done(err, data);
  }
}

fetcher.abortPending = abortPending;

module.exports = fetcher;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./componentCache":39,"./deferral":40,"./emitter":41,"./interceptor":51,"./router":60,"./state":61,"./xhr":70}],43:[function(require,module,exports){
(function (global){
'use strict';

var gradual = require('gradual');
var crossvent = require('crossvent');
var state = require('./state');
var document = require('./global/document');
var body = document.body;

function setup () {
  if (state.forms === false) {
    global.DEBUG && global.DEBUG('[gradual] disabled');
    return;
  }
  global.DEBUG && global.DEBUG('[gradual] enabled');
  gradual.configure({
    taunus: global.taunus,
    qs: state.qs
  });
  crossvent.add(body, 'submit', maybeHijack);
}

function maybeHijack (e) {
  if (e.target.tagName === 'FORM') {
    global.DEBUG && global.DEBUG('[gradual] hijacking form submission');
    gradual.hijack(e);
  }
}

module.exports = {
  setup: setup
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./global/document":45,"./state":61,"crossvent":79,"gradual":80}],44:[function(require,module,exports){
'use strict';

var document = require('./global/document');
var emitter = require('./emitter');
var body = document.body;
var tracker = [];

function enable () {
  emitter.on('render', collect);
}

function track (el, destroyable, options) {
  var o = options || {};
  if (o.implodes !== true) { o.implodes = false; }
  tracker.push({ el: el, destroyable: destroyable, options: o });
}

function collect (container) {
  tracker.filter(removables).forEach(remove);
  tracker = tracker.filter(not(removables));
  function removables (context) {
    if (context.el === container && context.options.implodes) {
      return true; // not typically what we want. may unbind events and never rebind
    }
    if (body.contains(context.el) === false) {
      return true;
    }
  }
}

function not (fn) {
  return function negated () {
    return !fn.apply(this, arguments);
  };
}

function remove (context) {
  context.destroyable.destroy();
}

module.exports = {
  enable: enable,
  track: track,
  collect: collect
};

},{"./emitter":41,"./global/document":45}],45:[function(require,module,exports){
(function (global){
'use strict';

module.exports = global.document;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],46:[function(require,module,exports){
(function (global){
'use strict';

var modern = 'history' in global && 'pushState' in global.history;
var api = modern && global.history;

// Google Chrome 38 on iOS makes weird changes to history.replaceState, breaking it
var nativeFn = require('../nativeFn');
var nativeReplaceBroken = modern && !nativeFn(api.replaceState);
if (nativeReplaceBroken) {
  api = {
    pushState: api.pushState.bind(api)
  };
}

module.exports = api;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../nativeFn":54}],47:[function(require,module,exports){
(function (global){
'use strict';

module.exports = global.location;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],48:[function(require,module,exports){
'use strict';

var state = require('./state');
var location = require('./global/location');

function hardRedirect (href) {
  location.href = href;
  state.redirecting = true;
}

module.exports = hardRedirect;

},{"./global/location":47,"./state":61}],49:[function(require,module,exports){
'use strict';

var emitter = require('./emitter');
var links = require('./links');

function attach () {
  emitter.on('start', links);
}

module.exports = {
  attach: attach
};

},{"./emitter":41,"./links":52}],50:[function(require,module,exports){
(function (global){
'use strict';

global.DEBUG && global.DEBUG('[index] loading taunus');

if (global.taunus !== void 0) {
  throw new Error('Use require(\'taunus/global\') after the initial require(\'taunus\') statement!');
}

var gradual = require('gradual');
var state = require('./state');
var stateClear = require('./stateClear');
var interceptor = require('./interceptor');
var activator = require('./activator');
var emitter = require('./emitter');
var hooks = require('./hooks');
var view = require('./view');
var mount = require('./mount');
var router = require('./router');
var xhr = require('./xhr');
var gc = require('./gc');
var prefetcher = require('./prefetcher');
var redirector = require('./redirector');
var resolve = require('../lib/resolve');
var version = require('../version.json');
var versionCheck = require('./versionCheck');

state.clear = stateClear;
hooks.attach();

function bind (method) {
  return function () {
    return emitter[method].apply(emitter, arguments);
  };
}

module.exports = global.taunus = {
  mount: mount,
  partial: view.partial,
  on: bind('on'),
  once: bind('once'),
  off: bind('off'),
  track: gc.track,
  intercept: interceptor.add,
  navigate: activator.go,
  prefetch: prefetcher.start,
  gradual: gradual,
  state: state,
  route: router,
  resolve: resolve,
  redirect: redirector.redirect,
  xhr: xhr,
  version: version,
  versionCheck: versionCheck
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../lib/resolve":73,"../version.json":122,"./activator":35,"./emitter":41,"./gc":44,"./hooks":49,"./interceptor":51,"./mount":53,"./prefetcher":57,"./redirector":59,"./router":60,"./state":61,"./stateClear":62,"./versionCheck":68,"./view":69,"./xhr":70,"gradual":80}],51:[function(require,module,exports){
(function (global){
'use strict';

var emitter = require('contra/emitter');
var once = require('./once');
var router = require('./router');
var interceptors = emitter({ count: 0 }, { async: true });

function getInterceptorEvent (route) {
  var e = {
    url: route.url,
    route: route,
    data: null,
    canPreventDefault: true,
    defaultPrevented: false,
    preventDefault: once(preventDefault)
  };

  function preventDefault (data) {
    if (!e.canPreventDefault) {
      return;
    }
    e.canPreventDefault = false;
    e.defaultPrevented = true;
    e.data = data;
  }

  return e;
}

function add (action, fn) {
  if (arguments.length === 1) {
    fn = action;
    action = '*';
  }
  interceptors.count++;
  interceptors.on(action, fn);
}

function execute (route, done) {
  var e = getInterceptorEvent(route);
  if (interceptors.count === 0) { // fail fast
    end(); return;
  }
  var fn = once(end);
  var preventDefaultBase = e.preventDefault;

  e.preventDefault = once(preventDefaultEnds);

  global.DEBUG && global.DEBUG('[interceptor] executing for %s', route.url);

  interceptors.emit('*', e);
  interceptors.emit(route.action, e);

  setTimeout(fn, 50); // at worst, spend 50ms waiting on interceptors

  function preventDefaultEnds () {
    preventDefaultBase.apply(null, arguments);
    fn();
  }

  function end () {
    global.DEBUG && global.DEBUG('[interceptor] %s for %s', interceptors.count === 0 && 'skipped' || e.defaultPrevented && 'prevented' || 'timed out', route.url);
    e.canPreventDefault = false;
    done(null, e);
  }
}

module.exports = {
  add: add,
  execute: execute
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./once":55,"./router":60,"contra/emitter":75}],52:[function(require,module,exports){
(function (global){
'use strict';

var crossvent = require('crossvent');
var state = require('./state');
var router = require('./router');
var prefetcher = require('./prefetcher');
var prefetcherIntent = require('./prefetcherIntent');
var activator = require('./activator');
var document = require('./global/document');
var location = require('./global/location');
var origin = require('./origin');
var body = document.body;
var leftClick = 1;
var prefetching = [];
var clicksOnHold = [];

function links () {
  if (state.links === false) {
    return;
  }
  if (state.prefetch && state.cache) { // prefetch without cache makes no sense
    global.DEBUG && global.DEBUG('[links] listening for prefetching opportunities');
    crossvent.add(body, 'mouseover', maybePrefetch);
    crossvent.add(body, 'touchstart', maybePrefetch);
  }
  global.DEBUG && global.DEBUG('[links] listening for rerouting opportunities');
  crossvent.add(body, 'click', maybeReroute);
}

function so (anchor) {
  return anchor.origin === origin;
}

function leftClickOnAnchor (e, anchor) {
  return anchor.pathname && e.which === leftClick && !e.metaKey && !e.ctrlKey;
}

function targetOrAnchor (e) {
  var anchor = e.target;
  while (anchor) {
    if (anchor.tagName === 'A') {
      return anchor;
    }
    anchor = anchor.parentElement;
  }
}

function maybeReroute (e) {
  var anchor = targetOrAnchor(e);
  if (anchor && so(anchor) && notjusthashchange(anchor) && leftClickOnAnchor(e, anchor) && routable(anchor)) {
    reroute(e, anchor);
  }
}

function attr (el, name) {
  var value = el.getAttribute(name);
  return typeof value === 'string' ? value : null;
}

function routable (anchor) {
  return attr(anchor, 'download') === null && attr(anchor, 'target') !== '_blank' && attr(anchor, 'data-taunus-ignore') === null;
}

function notjusthashchange (anchor) {
  return (
    anchor.pathname !== location.pathname ||
    anchor.search !== location.search ||
    anchor.hash === location.hash
  );
}

function maybePrefetch (e) {
  var anchor = targetOrAnchor(e);
  if (anchor && so(anchor)) {
    prefetch(e, anchor);
  }
}

function noop () {}

function parse (anchor) {
  return anchor.pathname + anchor.search + anchor.hash;
}

function reroute (e, anchor) {
  var url = parse(anchor);
  var route = router(url);
  if (!route) {
    return;
  }

  prevent();

  if (state.hardRedirect) {
    global.DEBUG && global.DEBUG('[links] hard redirect in progress, aborting');
    return;
  }

  if (prefetcher.busy(url)) {
    global.DEBUG && global.DEBUG('[links] navigation to %s blocked by prefetcher', route.url);
    prefetcherIntent.set(url);
    return;
  }

  global.DEBUG && global.DEBUG('[links] navigating to %s', route.url);
  activator.go(route.url, { context: anchor });

  function prevent () { e.preventDefault(); }
}

function prefetch (e, anchor) {
  prefetcher.start(parse(anchor), anchor);
}

module.exports = links;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./activator":35,"./global/document":45,"./global/location":47,"./origin":56,"./prefetcher":57,"./prefetcherIntent":58,"./router":60,"./state":61,"crossvent":79}],53:[function(require,module,exports){
(function (global){

'use strict';

var safeson = require('safeson');
var state = require('./state');
var router = require('./router');
var activator = require('./activator');
var caching = require('./caching');
var componentCache = require('./componentCache');
var fetcher = require('./fetcher');
var forms = require('./forms');
var gc = require('./gc');
var versioning = require('../versioning');
var document = require('./global/document');
var location = require('./global/location');
var resolve = require('../lib/resolve');
var g = global;
var mounted;
var booted;

function mount (container, wiring, options) {
  var o = options || {};
  if (mounted) {
    throw new Error('Taunus already mounted!');
  }
  if (!container || !container.tagName) { // nave is enough
    throw new Error('You must define an application root container!');
  }
  if (!o.bootstrap) { o.bootstrap = 'auto'; }

  mounted = true;

  global.DEBUG && global.DEBUG('[mount] mountpoint invoked using "%s" strategy', o.bootstrap);

  state.container = container;
  state.controllers = wiring.controllers;
  state.templates = wiring.templates;
  state.routes = wiring.routes;
  state.deferrals = wiring.deferrals || [];
  state.prefetch = !!o.prefetch;
  state.version = versioning.get(o.version || '1');
  state.qs = o.qs || noop;
  state.links = 'links' in o ? !!o.links : true;
  state.forms = 'forms' in o ? !!o.forms : true;

  resolve.set(state.routes);
  router.setup(state.routes);
  forms.setup();
  gc.enable();

  var route = router(location.href);

  caching.setup(o.cache, route);
  caching.ready(kickstart);
  componentCache.refill();

  function kickstart () {
    if (o.bootstrap === 'auto') {
      autoboot();
    } else if (o.bootstrap === 'inline') {
      inlineboot();
    } else if (o.bootstrap === 'manual') {
      manualboot();
    } else {
      throw new Error(o.bootstrap + ' is not a valid bootstrap mode!');
    }
  }

  function autoboot () {
    fetcher(route, { element: container, source: 'boot' }, fetched);
  }

  function fetched (err, data) {
    if (err) {
      throw new Error('Fetching JSON data model failed at mountpoint.');
    }
    boot(data);
  }

  function inlineboot () {
    var id = container.getAttribute('data-taunus');
    var script = document.getElementById(id);
    var data = safeson.decode(script.innerText || script.textContent);
    boot(data);
  }

  function manualboot () {
    if (typeof g.taunusReady === 'function') {
      g.taunusReady = boot; // not yet an object? turn it into the boot method
    } else if (g.taunusReady && typeof g.taunusReady === 'object') {
      boot(g.taunusReady); // already an object? boot with that as the data object
    } else {
      throw new Error('Did you forget to add the taunusReady global?');
    }
  }

  function boot (data) {
    if (booted) { // sanity
      return;
    }

    global.DEBUG && global.DEBUG('[mount] mountpoint booted with data', data);

    if (!data) {
      throw new Error('Taunus data is required! Boot failed');
    }
    if (!data.version) {
      throw new Error('Version data is missing! Boot failed');
    }
    if (!data.model || typeof data.model !== 'object') {
      throw new Error('Taunus model must be an object! Boot failed');
    }
    booted = true;
    caching.persist(route, state.container, data);
    activator.start(data);
  }
}

function noop () {}

module.exports = mount;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../lib/resolve":73,"../versioning":123,"./activator":35,"./caching":37,"./componentCache":39,"./fetcher":42,"./forms":43,"./gc":44,"./global/document":45,"./global/location":47,"./router":60,"./state":61,"safeson":112}],54:[function(require,module,exports){
'use strict';

// source: https://gist.github.com/jdalton/5e34d890105aca44399f
// thanks @jdalton!

var toString = Object.prototype.toString; // used to resolve the internal `[[Class]]` of values
var fnToString = Function.prototype.toString; // used to resolve the decompiled source of functions
var host = /^\[object .+?Constructor\]$/; // used to detect host constructors (Safari > 4; really typed array specific)

// Escape any special regexp characters.
var specials = /[.*+?^${}()|[\]\/\\]/g;

// Replace mentions of `toString` with `.*?` to keep the template generic.
// Replace thing like `for ...` to support environments, like Rhino, which add extra
// info such as method arity.
var extras = /toString|(function).*?(?=\\\()| for .+?(?=\\\])/g;

// Compile a regexp using a common native method as a template.
// We chose `Object#toString` because there's a good chance it is not being mucked with.
var fnString = String(toString).replace(specials, '\\$&').replace(extras, '$1.*?');
var reNative = new RegExp('^' + fnString + '$');

function nativeFn (value) {
  var type = typeof value;
  if (type === 'function') {
    // Use `Function#toString` to bypass the value's own `toString` method
    // and avoid being faked out.
    return reNative.test(fnToString.call(value));
  }

  // Fallback to a host object check because some environments will represent
  // things like typed arrays as DOM methods which may not conform to the
  // normal native pattern.
  return (value && type === 'object' && host.test(toString.call(value))) || false;
}

module.exports = nativeFn;

},{}],55:[function(require,module,exports){
'use strict';

module.exports = function disposable (fn) {
  var used;
  var result;
  return function once () {
    if (used) { return result; } used = true;
    return (result = fn.apply(this, arguments));
  };
};

},{}],56:[function(require,module,exports){
'use strict';

var l = require('./global/location');
var origin = l.origin || (l.protocol + '//' + l.hostname + (l.port ? ':' + l.port: ''));

module.exports = origin;

},{"./global/location":47}],57:[function(require,module,exports){
(function (global){
'use strict';

var state = require('./state');
var router = require('./router');
var fetcher = require('./fetcher');
var activator = require('./activator');
var prefetcherIntent = require('./prefetcherIntent');
var jobs = [];
var intent;

function busy (url) {
  return jobs.indexOf(url) !== -1;
}

function start (url, element) {
  if (state.hardRedirect) {
    return; // no point in prefetching if location.href has changed
  }
  if (state.cache !== true) {
    return; // can't prefetch if caching is disabled
  }
  if (prefetcherIntent.is(null) === false) {
    return; // don't prefetch if the human wants to navigate: it'd abort the previous attempt
  }
  var route = router(url);
  if (route === null) {
    return; // only prefetch taunus view routes
  }
  if (busy(url)) {
    return; // already prefetching this url
  }

  global.DEBUG && global.DEBUG('[prefetcher] prefetching %s', route.url);
  jobs.push(url);
  fetcher(route, { element: element, source: 'prefetch' }, fetched);

  function fetched () {
    jobs.splice(jobs.indexOf(url), 1);
    if (prefetcherIntent.is(url)) {
      prefetcherIntent.abort();
      global.DEBUG && global.DEBUG('[prefetcher] resumed navigation for %s', route.url);
      activator.go(route.url, { context: element });
    }
  }
}

module.exports = {
  busy: busy,
  start: start
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./activator":35,"./fetcher":42,"./prefetcherIntent":58,"./router":60,"./state":61}],58:[function(require,module,exports){
'use strict';

var intent = null;
var prefetcherIntent = {
  is: is,
  set: set,
  abort: abort
};

function is (url) {
  return intent === url;
}

function set (url) {
  intent = url;
}

function abort (url) {
  intent = null;
}

module.exports = prefetcherIntent;

},{}],59:[function(require,module,exports){
(function (global){
'use strict';

var location = require('./global/location');
var hardRedirect = require('./hardRedirect');

function redirect (options) {
  var activator = require('./activator');
  var o = options || {};
  if (o.hard === true) { // hard redirects are safer but slower
    global.DEBUG && global.DEBUG('[redirector] hard, to', o.href);
    hardRedirect(o.href);
  } else { // soft redirects are faster but may break expectations
    global.DEBUG && global.DEBUG('[redirector] soft, to', o.href);
    activator.go(o.href, { force: o.force === true });
  }
}

module.exports = {
  redirect: redirect
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./activator":35,"./global/location":47,"./hardRedirect":48}],60:[function(require,module,exports){
(function (global){
'use strict';

var omnibox = require('omnibox');
var ruta3 = require('ruta3');
var location = require('./global/location');
var queryparser = require('../lib/queryparser');
var origin = require('./origin');
var matcher = ruta3();
var protocol = /^[a-z]+?:\/\//i;

function getFullUrl (raw) {
  var base = location.href.substr(origin.length);
  var hashless;
  if (!raw) {
    return base;
  }
  if (raw[0] === '#') {
    hashless = base.substr(0, base.length - location.hash.length);
    return hashless + raw;
  }
  if (protocol.test(raw)) {
    if (raw.indexOf(origin) === 0) {
      return raw.substr(origin.length);
    }
    return null;
  }
  return raw;
}

function router (raw) {
  var full = getFullUrl(raw);
  if (full === null) {
    return null;
  }
  var parts = omnibox.parse(full);
  var info = matcher.match(parts.pathname);

  global.DEBUG && global.DEBUG('[router] %s produces %o', raw, info);

  var route = info ? merge(info) : null;
  if (route === null || route.ignore) {
    return null;
  }

  route.url = full;
  route.hash = parts.hash || '';
  route.query = queryparser(parts.query);
  route.path = parts.path;
  route.pathname = parts.pathname;
  route.search = parts.search;

  global.DEBUG && global.DEBUG('[router] %s yields %s', raw, route.route);

  return route;
}

function merge (info) {
  var route = Object.keys(info.action).reduce(copyOver, {
    params: info.params
  });
  info.params.args = info.splats;

  return route;

  function copyOver (route, key) {
    route[key] = info.action[key]; return route;
  }
}

function setup (definitions) {
  definitions.forEach(define);
}

function define (definition) {
  if (typeof definition.action !== 'string') {
    definition.action = null;
  }
  matcher.addRoute(definition.route, definition);
}

function equals (left, right) {
  return left && right && left.path === right.path;
}

router.setup = setup;
router.equals = equals;

module.exports = router;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../lib/queryparser":72,"./global/location":47,"./origin":56,"omnibox":106,"ruta3":110}],61:[function(require,module,exports){
'use strict';

module.exports = {
  container: null
};

},{}],62:[function(require,module,exports){
'use strict';

var state = require('./state');
var raw = require('./stores/raw');
var idb = require('./stores/idb');

function clear () {
  raw.clear();
  idb.clear('models');
  idb.clear('controllers');
  idb.clear('templates');
  clearStore('controllers');
  clearStore('templates');
}

function clearStore (type) {
  var store = state[type];
  Object.keys(store).filter(o).forEach(rm);

  function o (action) {
    return store[action] && typeof store[action] === 'object';
  }
  function rm (action) {
    delete store[action];
  }
}


module.exports = clear;

},{"./state":61,"./stores/idb":63,"./stores/raw":64}],63:[function(require,module,exports){
(function (global){
'use strict';

var api = {};
var once = require('../once');
var idb = require('./underlying_idb');
var supports;
var db;
var dbVersion = 3;
var dbName = 'taunus';
var keyPath = 'key';
var setQueue = [];
var testedQueue = [];

function noop () {}

function test () {
  var key = 'indexed-db-feature-detection';
  var req;
  var db;

  if (!idb || !('deleteDatabase' in idb)) {
    support(false); return;
  }

  try {
    idb.deleteDatabase(key).onsuccess = transactionalTest;
  } catch (e) {
    support(false);
  }

  function transactionalTest () {
    req = idb.open(key, 1);
    req.onupgradeneeded = upgneeded;
    req.onerror = error;
    req.onsuccess = success;

    function upgneeded () {
      req.result.createObjectStore('store');
    }

    function success () {
      db = req.result;
      try {
        db.transaction('store', 'readwrite').objectStore('store').add(new global.Blob(), 'key');
      } catch (e) {
        support(false);
      } finally {
        db.close();
        idb.deleteDatabase(key);
        if (supports !== false) {
          open();
        }
      }
    }

    function error () {
      support(false);
    }
  }
}

function open () {
  var req = idb.open(dbName, dbVersion);
  req.onerror = error;
  req.onupgradeneeded = upgneeded;
  req.onsuccess = success;

  function upgneeded (e) {
    var db = req.result;
    var v = e.oldVersion;
    if (v === 1) {
      db.deleteObjectStore('wildstore');
    }
    if (v < 2) {
      db.createObjectStore('models', { keyPath: keyPath });
      db.createObjectStore('templates', { keyPath: keyPath });
      db.createObjectStore('controllers', { keyPath: keyPath });
    }
  }

  function success () {
    db = req.result;
    api.name = 'IndexedDB';
    api.get = get;
    api.set = set;
    api.clear = clear;
    support(true);
  }

  function error () {
    support(false);
  }
}

function fallback () {
  api.name = 'IndexedDB-fallbackStore';
  api.get = undefinedGet;
  api.set = enqueueSet;
  api.clear = noop;
}

function undefinedGet (store, key, done) {
  (done || key)(null, done ? null : []);
}

function enqueueSet (store, key,  value, done) {
  var next = done || noop;
  if (supports === false) {
    next(null); return;
  }
  if (setQueue.length > 10) { // let's not waste any more memory
    next(new Error('EFULLQUEUE')); return;
  }
  setQueue.push({ store: store, key: key, value: value, done: next });
}

function drainSet () {
  if (supports === false) {
    setQueue = [];
    return;
  }
  global.DEBUG && global.DEBUG('[idb] draining setQueue (%s items)', setQueue.length);
  while (setQueue.length) {
    var item = setQueue.shift();
    set(item.store, item.key, item.value, item.done);
  }
}

function query (op, store, value, done) {
  var next = done || noop;
  var req = db.transaction(store, 'readwrite').objectStore(store)[op](value);

  req.onsuccess = success;
  req.onerror = error;

  function success () {
    next(null, req.result);
  }

  function error () {
    next(new Error('Taunus cache query failed at IndexedDB!'));
  }
}

function queryCollection (store, done) {
  var next = done || noop;
  var tx = db.transaction(store, 'readonly');
  var s = tx.objectStore(store);
  var req = s.openCursor();
  var items = [];

  req.onsuccess = success;
  req.onerror = error;
  tx.oncomplete = complete;

  function complete () {
    next(null, items);
  }

  function success (e) {
    var cursor = e.target.result;
    if (cursor) {
      items.push(cursor.value);
      cursor.continue();
    }
  }

  function error () {
    next(new Error('Taunus cache queryCollection failed at IndexedDB!'));
  }
}

function clear (store, done) {
  var next = done || noop;
  var tx = db.transaction(store, 'readwrite');
  var s = tx.objectStore(store);
  var req = s.clear();
  var items = [];

  req.onerror = error;
  tx.oncomplete = complete;

  function complete () {
    next(null, items);
  }

  function error () {
    next(new Error('Taunus cache clear failed at IndexedDB!'));
  }
}

function get (store, key, done) {
  if (done === void 0) {
    queryCollection(store, key);
  } else {
    query('get', store, key, done);
  }
}

function set (store, key, value, done) {
  var next = once(done || noop);
  global.DEBUG && global.DEBUG('[idb] storing %s, in %s db', key, store, value);
  value[keyPath] = key;
  query('add', store, value, next); // attempt to insert
  query('put', store, value, next); // attempt to update
}

function drainTested () {
  while (testedQueue.length) {
    testedQueue.shift()(supports);
  }
}

function tested (fn) {
  if (supports !== void 0) {
    fn(supports);
  } else {
    testedQueue.push(fn);
  }
}

function support (value) {
  if (supports !== void 0) {
    return; // sanity
  }
  global.DEBUG && global.DEBUG('[idb] test result %s, db %s', value, value ? 'ready' : 'unavailable');
  supports = value;
  drainTested();
  drainSet();
}

function failed () {
  support(false);
}

fallback();
test();
setTimeout(failed, 600); // the test can take somewhere near 300ms to complete

module.exports = api;

api.tested = tested;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../once":55,"./underlying_idb":65}],64:[function(require,module,exports){
'use strict';

var raw = {};

function noop () {}

function ensure (store) {
  if (!raw[store]) { raw[store] = {}; }
}

function get (store, key, done) {
  ensure(store);
  done(null, raw[store][key]);
}

function set (store, key, value, done) {
  ensure(store);
  raw[store][key] = value;
  (done || noop)(null);
}

function clear () {
  raw = {};
}

module.exports = {
  name: 'memoryStore',
  get: get,
  set: set,
  clear: clear
};

},{}],65:[function(require,module,exports){
(function (global){
'use strict';

var g = global;

// fallback to empty object because tests
module.exports = g.indexedDB || g.mozIndexedDB || g.webkitIndexedDB || g.msIndexedDB || {};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],66:[function(require,module,exports){
'use strict';

var resolve = require('../lib/resolve');

module.exports = {
  resolve: resolve,
  toJSON: function () {}
};

},{"../lib/resolve":73}],67:[function(require,module,exports){
/* jshint strict:false */
// this module doesn't use strict, so eval is unstrict.

module.exports = function (code) {
  /* jshint evil:true */
  return eval(code);
};

},{}],68:[function(require,module,exports){
(function (global){
'use strict';

var state = require('./state');
var hardRedirect = require('./hardRedirect');
var location = require('./global/location');

function versionCheck (version, href) {
  var match = version === state.version;
  if (match === false) {
    global.DEBUG && global.DEBUG('[activator] version change (is "%s", was "%s"), redirecting to %s', version, state.version, href);
    hardRedirect(href || location.href); // version change demands fallback to strict navigation
  }
  return match;
}

module.exports = versionCheck;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./global/location":47,"./hardRedirect":48,"./state":61}],69:[function(require,module,exports){
(function (global){
'use strict';

var clone = require('./clone');
var state = require('./state');
var ee = require('contra/emitter');
var emitter = require('./emitter');
var fetcher = require('./fetcher');
var deferral = require('./deferral');
var templatingAPI = require('./templatingAPI');
var doc = require('./global/document');

function noop () {}

function view (container, enforcedAction, model, route, options) {
  var action = enforcedAction || model && model.action || route && route.action;
  var demands = deferral.needs(action);
  var api = ee();

  global.DEBUG && global.DEBUG('[view] rendering view %s with [%s] demands', action, demands.join(','));

  if (demands.length) {
    pull();
  } else {
    ready();
  }

  return api;

  function pull () {
    var victim = route || state.route;
    var context = {
      source: 'hijacking',
      hijacker: action,
      element: container
    };
    global.DEBUG && global.DEBUG('[view] hijacking %s for action %s', victim.url, action);
    fetcher(victim, context, ready);
  }

  function ready () {
    var html;
    var controller = getComponent('controllers', action);
    var internals = options || {};
    if (internals.render !== false) {
      html = render(action, model, route);
      container = (internals.draw || insert)(container, html) || container;
      setTimeout(done, 0);
    } else {
      global.DEBUG && global.DEBUG('[view] not rendering %s', action);
    }
    if (container === state.container) {
      emitter.emit('change', route, model);
    }
    emitter.emit('render', container, model, route);
    global.DEBUG && global.DEBUG('[view] %s client-side controller for %s', controller ? 'executing' : 'no', action);
    if (typeof controller === 'function') {
      controller(model, container, route);
    }

    function done () {
      api.emit('render', html, container);
    }
  }
}

function render (action, model, route) {
  global.DEBUG && global.DEBUG('[view] rendering %s with model', action, model);
  var template = getComponent('templates', action);
  if (typeof template !== 'function') {
    throw new Error('Client-side "' + action + '" template not found');
  }
  var cloned = clone(model);
  cloned.taunus = templatingAPI;
  cloned.route = route || state.route;
  cloned.route.toJSON = noop;
  try {
    return template(cloned);
  } catch (e) {
    throw new Error('Error rendering "' + action + '" view template\n' + e.stack);
  }
}

function getComponent (type, action) {
  var component = state[type][action];
  var transport = typeof component;
  if (transport === 'function') {
    return component;
  }
  if (component && component[state.version]) {
    return component[state.version].fn; // deferreds are stored as {v1:{fn},v2:{fn}}
  }
  return null;
}

function mode (draw) {
  return function partial (container, action, model) {
    global.DEBUG && global.DEBUG('[view] rendering partial %s', action);
    return view(container, action, model, null, { draw: draw });
  };
}

function insert (container, html) {
  container.innerHTML = html;
}

function replacer (html, next) {
  var placeholder = doc.createElement('div');
  placeholder.innerHTML = html;
  while (placeholder.children.length) {
    next(placeholder);
  }
}

function replace (container, html) {
  var first;
  replacer(html, before);
  container.parentElement.removeChild(container);
  return first;
  function before (placeholder) {
    var el = placeholder.children[0];
    if (!first) { first = el; }
    container.parentElement.insertBefore(el, container);
  }
}

function appendTo (container, html) {
  replacer(html, function append (placeholder) {
    container.appendChild(placeholder.children[0]);
  });
}

function prependTo (container, html) {
  replacer(html, function append (p) {
    container.insertBefore(p.children[p.children.length - 1], container.firstChild);
  });
}

view.partial = mode();
view.partial.replace = mode(replace);
view.partial.appendTo = mode(appendTo);
view.partial.prependTo = mode(prependTo);

module.exports = view;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./clone":38,"./deferral":40,"./emitter":41,"./fetcher":42,"./global/document":45,"./state":61,"./templatingAPI":66,"contra/emitter":75}],70:[function(require,module,exports){
(function (global){
'use strict';

var xhr = require('xhr');
var sum = require('hash-sum');
var temporize = require('temporize');

function request (url, options, end) {
  var displaced = typeof options === 'function';
  var hasUrl = typeof url === 'string';
  var user;
  var done = displaced ? options : end;

  if (hasUrl) {
    if (displaced) {
      user = { url: url };
    } else {
      user = options;
      user.url = url;
    }
  } else {
    user = url;
  }

  var o = {
    headers: { Accept: 'application/json' }
  };
  Object.keys(user).forEach(overwrite);

  var req;
  var hash = sum(o) + ':' + o.url;
  var cached = true;

  temporize({
    name: hash,
    seconds: 1,
    load: load
  }, loaded);

  return req;

  function overwrite (prop) {
    o[prop] = user[prop];
  }

  function load (done) {
    global.DEBUG && global.DEBUG('[xhr] %s %s', o.method || 'GET', o.url);
    cached = false;
    var result = xhr(o, handle);
    done(null, result);
    return result;
  }

  function loaded (result) {
    if (cached) {
      global.DEBUG && global.DEBUG('[xhr] %s %s (cache)', o.method || 'GET', o.url);
    }
    req = result;
  }

  function handle (err, res, body) {
    if (err && !req.getAllResponseHeaders()) {
      global.DEBUG && global.DEBUG('[xhr] %s %s (aborted)', o.method || 'GET', o.url);
      done(new Error('aborted'), null, res);
    } else {
      try  {
        res.body = body = JSON.parse(body);
      } catch (e) {
        // suppress
      }
      global.DEBUG && global.DEBUG('[xhr] %s %s (done)', o.method || 'GET', o.url);
      done(err, body, res);
    }
  }
}

module.exports = request;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"hash-sum":103,"temporize":114,"xhr":115}],71:[function(require,module,exports){
'use strict';

module.exports = function deferred (action, rules) {
  return rules.some(failed);
  function failed (challenge) {
    var left = challenge.split('/');
    var right = action.split('/');
    var lpart, rpart;
    while (left.length) {
      lpart = left.shift();
      rpart = right.shift();
      if (lpart !== '?' && lpart !== rpart) {
        return false;
      }
    }
    return true;
  }
};

},{}],72:[function(require,module,exports){
'use strict';

var rdigits = /^[+-]?\d+$/;

function queryparser (query) {
  return Object.keys(query).reduce(parsed, {});
  function parsed (result, key) {
    result[key] = field(query[key]);
    return result;
  }
}

function field (value) {
  if (rdigits.test(value)) {
    return parseInt(value, 10);
  }
  if (value === '' || value === 'true') {
    return true;
  }
  if (value === 'false') {
    return false;
  }
  return value;
}

queryparser.field = field;
module.exports = queryparser;

},{}],73:[function(require,module,exports){
'use strict';

/*
 * # a named parameter in the ':name' format
 * :([a-z]+)
 *
 * # matches a regexp that constraints the possible values for this parameter
 * # e.g ':name([a-z+])'
 * (?:\((?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\))?
 *
 * # the parameter may be optional, e.g ':name?'
 * (\?)?
 *
 * - i: routes are typically lower-case but they may be mixed case as well
 * - g: routes may have zero or more named parameters
 *
 * regexper: http://regexper.com/#%2F%3A(%5Ba-z%5D%2B)(%3F%3A%5C((%3F!%5B*%2B%3F%5D)(%3F%3A%5B%5E%5Cr%5Cn%5C%5B%2F%5C%5C%5D%7C%5C%5C.%7C%5C%5B(%3F%3A%5B%5E%5Cr%5Cn%5C%5D%5C%5C%5D%7C%5C%5C.)*%5C%5D)%2B%5C))%3F(%5C%3F)%3F%2Fig
 */

var defaultMatcher = /:([a-z]+)(?:\((?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\))?(\?)?/ig;
var rtrailingslash = /\/$/;
var routes;
var matcher;

function find (action) {
  var i;
  for (i = 0; i < routes.length; i++) {
    if (routes[i].action === action) {
      return routes[i].route;
    }
  }
  return null;
}

function use (m) {
  matcher = m || defaultMatcher;
}

function set (r) {
  routes = r || [];
}

function resolve (action, data) {
  var props = data || {};
  var route = find(action);
  if (route === null) {
    return null;
  }
  var qs = queryString(props.args);
  var pathname = route.replace(matcher, replacer);
  if (pathname.length > 1) {
    return pathname.replace(rtrailingslash, '') + qs;
  }
  return pathname + qs;

  function replacer (match, key, optional) {
    var value = props[key];
    if (value !== void 0 && value !== null) {
      return props[key];
    }
    if (key in props || optional) {
      return '';
    }
    throw new Error('Route ' + route + ' expected "' + key + '" parameter.');
  }

  function queryString (args) {
    var parts = args || {};
    var query = Object.keys(parts).map(keyValuePair).join('&');
    if (query) {
      return '?' + query;
    }
    return '';

    function keyValuePair (prop) {
      var value = parts[prop];
      if (value === void 0 || value === null || value === '') {
        return prop;
      }
      return prop + '=' + value;
    }
  }
}

use();
set();

resolve.use = use;
resolve.set = set;

module.exports = resolve;

},{}],74:[function(require,module,exports){
'use strict';

var ticky = require('ticky');

module.exports = function debounce (fn, args, ctx) {
  if (!fn) { return; }
  ticky(function run () {
    fn.apply(ctx || null, args || []);
  });
};

},{"ticky":77}],75:[function(require,module,exports){
'use strict';

var atoa = require('atoa');
var debounce = require('./debounce');

module.exports = function emitter (thing, options) {
  var opts = options || {};
  var evt = {};
  if (thing === undefined) { thing = {}; }
  thing.on = function (type, fn) {
    if (!evt[type]) {
      evt[type] = [fn];
    } else {
      evt[type].push(fn);
    }
    return thing;
  };
  thing.once = function (type, fn) {
    fn._once = true; // thing.off(fn) still works!
    thing.on(type, fn);
    return thing;
  };
  thing.off = function (type, fn) {
    var c = arguments.length;
    if (c === 1) {
      delete evt[type];
    } else if (c === 0) {
      evt = {};
    } else {
      var et = evt[type];
      if (!et) { return thing; }
      et.splice(et.indexOf(fn), 1);
    }
    return thing;
  };
  thing.emit = function () {
    var args = atoa(arguments);
    return thing.emitterSnapshot(args.shift()).apply(this, args);
  };
  thing.emitterSnapshot = function (type) {
    var et = (evt[type] || []).slice(0);
    return function () {
      var args = atoa(arguments);
      var ctx = this || thing;
      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }
      et.forEach(function emitter (listen) {
        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }
        if (listen._once) { thing.off(type, listen); }
      });
      return thing;
    };
  };
  return thing;
};

},{"./debounce":74,"atoa":76}],76:[function(require,module,exports){
module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }

},{}],77:[function(require,module,exports){
var si = typeof setImmediate === 'function', tick;
if (si) {
  tick = function (fn) { setImmediate(fn); };
} else {
  tick = function (fn) { setTimeout(fn, 0); };
}

module.exports = tick;
},{}],78:[function(require,module,exports){
(function (global){

var NativeCustomEvent = global.CustomEvent;

function useNative () {
  try {
    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });
    return  'cat' === p.type && 'bar' === p.detail.foo;
  } catch (e) {
  }
  return false;
}

/**
 * Cross-browser `CustomEvent` constructor.
 *
 * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent
 *
 * @public
 */

module.exports = useNative() ? NativeCustomEvent :

// IE >= 9
'function' === typeof document.createEvent ? function CustomEvent (type, params) {
  var e = document.createEvent('CustomEvent');
  if (params) {
    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);
  } else {
    e.initCustomEvent(type, false, false, void 0);
  }
  return e;
} :

// IE <= 8
function CustomEvent (type, params) {
  var e = document.createEventObject();
  e.type = type;
  if (params) {
    e.bubbles = Boolean(params.bubbles);
    e.cancelable = Boolean(params.cancelable);
    e.detail = params.detail;
  } else {
    e.bubbles = false;
    e.cancelable = false;
    e.detail = void 0;
  }
  return e;
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],79:[function(require,module,exports){
(function (global){
'use strict';

var customEvent = require('custom-event');
var doc = document;
var addEvent = addEventEasy;
var removeEvent = removeEventEasy;
var hardCache = [];

if (!global.addEventListener) {
  addEvent = addEventHard;
  removeEvent = removeEventHard;
}

function addEventEasy (el, type, fn, capturing) {
  return el.addEventListener(type, fn, capturing);
}

function addEventHard (el, type, fn) {
  return el.attachEvent('on' + type, wrap(el, type, fn));
}

function removeEventEasy (el, type, fn, capturing) {
  return el.removeEventListener(type, fn, capturing);
}

function removeEventHard (el, type, fn) {
  return el.detachEvent('on' + type, unwrap(el, type, fn));
}

function fabricateEvent (el, type, model) {
  var e = new customEvent(type, { detail: model });
  if (el.dispatchEvent) {
    el.dispatchEvent(e);
  } else {
    el.fireEvent('on' + type, e);
  }
}

function wrapperFactory (el, type, fn) {
  return function wrapper (originalEvent) {
    var e = originalEvent || global.event;
    e.target = e.target || e.srcElement;
    e.preventDefault = e.preventDefault || function preventDefault () { e.returnValue = false; };
    e.stopPropagation = e.stopPropagation || function stopPropagation () { e.cancelBubble = true; };
    e.which = e.which || e.keyCode;
    fn.call(el, e);
  };
}

function wrap (el, type, fn) {
  var wrapper = unwrap(el, type, fn) || wrapperFactory(el, type, fn);
  hardCache.push({
    wrapper: wrapper,
    element: el,
    type: type,
    fn: fn
  });
  return wrapper;
}

function unwrap (el, type, fn) {
  var i = find(el, type, fn);
  if (i) {
    var wrapper = hardCache[i].wrapper;
    hardCache.splice(i, 1); // free up a tad of memory
    return wrapper;
  }
}

function find (el, type, fn) {
  var i, item;
  for (i = 0; i < hardCache.length; i++) {
    item = hardCache[i];
    if (item.element === el && item.type === type && item.fn === fn) {
      return i;
    }
  }
}

module.exports = {
  add: addEvent,
  remove: removeEvent,
  fabricate: fabricateEvent
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"custom-event":78}],80:[function(require,module,exports){
'use strict';

var emitter = require('contra/emitter');
var formium = require('formium');
var formulario = require('formulario');
var formResponseHandler = require('./lib/formResponseHandler');
var state = require('./lib/state');
var transformers = [];
var gradual = emitter({
  hijack: hijack,
  transform: formium.transform,
  submit: submit,
  configure: state.configure
});

function noop () {}

function hijack (e) {
  var form = e.target;
  submitForm(form);
  e.preventDefault();
}

function submitForm (form, done) {
  formium.submit(form, handler);
  function handler (err, data) {
    raise(err, data, form, done);
  }
}

function submit (options, done) {
  var form = options.form;
  if (form) {
    submitForm(form, done); return;
  }
  var formData = formulario(options.data);
  var req = {
    method: options.method,
    headers: formData.headers,
    body: formData.body
  };
  return state.taunus.xhr(options.action, req, handler);
  function handler (err, data) {
    raise(err, data, null, done);
  }
}

function raise (err, data, context, done) {
  if (err) {
    gradual.emit.call(context, 'error', err);
  } else {
    gradual.emit.call(context, 'data', data);
  }
  gradual.emit.call(context, 'response', err, data);
  formResponseHandler(err, data, context, done);
}

module.exports = gradual;

},{"./lib/formResponseHandler":81,"./lib/state":82,"contra/emitter":75,"formium":99,"formulario":102}],81:[function(require,module,exports){
'use strict';

var $ = require('dominus');
var state = require('./state');

function noop () {}

function formResponseHandler (err, data, form, done) {
  var end = done || noop;
  if (err) {
    end(err); return;
  }
  var host = getNotificationHost(data);
  if (host) {
    messages(form, host);
  } else if (data.redirect) {
    data.redirect.force = true;
    state.taunus.redirect(data.redirect); return;
  }
  end(null, data);
}

function hasItems (host, prop) {
   return Array.isArray(host[prop]) ? host[prop].length : host[prop];
}

function getNotificationHost (host) {
  if (!host) {
    return false;
  }
  if (hasItems(host, 'errors') || hasItems(host, 'validation') || hasItems(host, 'messages')) {
    return host;
  }
  return getNotificationHost(host.model) || getNotificationHost(host.flash);
}

function messages (form, model) {
  var partial = 'partials/form-validation';
  var dialog = $('<div>');
  var dialogElement = dialog[0];
  var show = form ? attachToForm : displayInDialog;

  $('.fv-dialog').remove();

  if (form) {
    $('.ss-container,.fv-container', form).remove();
  }

  state.taunus.partial(dialogElement, partial, model).on('render', show);

  function attachToForm () {
    var contents = dialog.children();
    $(form).addClass('ff-validated').prepend(contents);
    dialog.remove();
  }

  function displayInDialog () {
    var body = $(document.body);

    dialog.appendTo(body).addClass('fv-dialog');
    body.on('click', dialogClose);
  }

  function dialogClose (e) {
    var body = $(document.body);
    var target = $(e.target);
    if (target.is('.fv-dialog-dismiss') || (target.is('.fv-dialog') === false && target.parents('.fv-dialog').length === 0)) {
      body.off('click', dialogClose);
      dialog.remove();
    }
  }
}

module.exports = formResponseHandler;

},{"./state":82,"dominus":94}],82:[function(require,module,exports){
'use strict';

var assign = require('assignment');
var formium = require('formium');
var state = {
  configure: configure
};

function configure (options) {
  formium.configure({ qs: qs });
  state.taunus = options.taunus;
  function qs (form) {
    var jsonText = { json: true, 'as-text': true };
    return assign(jsonText, (options.qs || noop)(form));
  }
}

function noop () {}

module.exports = state;

},{"assignment":83,"formium":99}],83:[function(require,module,exports){
'use strict';

function assignment (result) {
  var stack = Array.prototype.slice.call(arguments, 1);
  var item;
  var key;
  while (stack.length) {
    item = stack.shift();
    for (key in item) {
      if (item.hasOwnProperty(key)) {
        if (typeof result[key] === 'object' && result[key] && Object.prototype.toString.call(result[key]) !== '[object Array]') {
          if (typeof item[key] === 'object' && item[key] !== null) {
            result[key] = assignment(result[key], item[key]);
          } else {
            result[key] = item[key];
          }
        } else {
          result[key] = item[key];
        }
      }
    }
  }
  return result;
}

module.exports = assignment;

},{}],84:[function(require,module,exports){
arguments[4][16][0].apply(exports,arguments)
},{"./src/node":85,"dup":16}],85:[function(require,module,exports){
(function (global){
'use strict';

var d = global.document;

function poser (type) {
  var iframe = d.createElement('iframe');

  iframe.style.display = 'none';
  d.body.appendChild(iframe);

  return map(type, iframe.contentWindow);
}

function map (type, source) { // forward polyfills to the stolen reference!
  var original = window[type].prototype;
  var value = source[type];
  var prop;

  for (prop in original) {
    value.prototype[prop] = original[prop];
  }

  return value;
}

module.exports = poser;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],86:[function(require,module,exports){
(function (global){
'use strict';

var expando = 'sektor-' + Date.now();
var rsiblings = /[+~]/;
var document = global.document;
var del = document.documentElement;
var match = del.matches ||
            del.webkitMatchesSelector ||
            del.mozMatchesSelector ||
            del.oMatchesSelector ||
            del.msMatchesSelector;

function qsa (selector, context) {
  var existed, id, prefix, prefixed, adapter, hack = context !== document;
  if (hack) { // id hack for context-rooted queries
    existed = context.getAttribute('id');
    id = existed || expando;
    prefix = '#' + id + ' ';
    prefixed = prefix + selector.replace(/,/g, ',' + prefix);
    adapter = rsiblings.test(selector) && context.parentNode;
    if (!existed) { context.setAttribute('id', id); }
  }
  try {
    return (adapter || context).querySelectorAll(prefixed || selector);
  } catch (e) {
    return [];
  } finally {
    if (existed === null) { context.removeAttribute('id'); }
  }
}

function find (selector, ctx, collection, seed) {
  var element;
  var context = ctx || document;
  var results = collection || [];
  var i = 0;
  if (typeof selector !== 'string') {
    return results;
  }
  if (context.nodeType !== 1 && context.nodeType !== 9) {
    return []; // bail if context is not an element or document
  }
  if (seed) {
    while ((element = seed[i++])) {
      if (matchesSelector(element, selector)) {
        results.push(element);
      }
    }
  } else {
    results.push.apply(results, qsa(selector, context));
  }
  return results;
}

function matches (selector, elements) {
  return find(selector, null, null, elements);
}

function matchesSelector (element, selector) {
  return match.call(element, selector);
}

module.exports = find;

find.matches = matches;
find.matchesSelector = matchesSelector;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],87:[function(require,module,exports){
arguments[4][19][0].apply(exports,arguments)
},{"dup":19,"poser":84}],88:[function(require,module,exports){
arguments[4][20][0].apply(exports,arguments)
},{"./Dominus.ctor":87,"./classes":91,"./custom":92,"./dom":93,"./flatten":95,"./public":96,"dup":20}],89:[function(require,module,exports){
arguments[4][21][0].apply(exports,arguments)
},{"./Dominus.ctor":87,"dup":21}],90:[function(require,module,exports){
(function (global){
'use strict';

var test = require('./test');
var apply = require('./apply');
var Dominus = require('./Dominus.ctor');

function cast (a) {
  if (a === global) {
    return new Dominus(a);
  }
  if (a instanceof Dominus) {
    return a;
  }
  if (!a) {
    return new Dominus();
  }
  if (test.isElement(a)) {
    return new Dominus(a);
  }
  if (!test.isArray(a)) {
    return new Dominus();
  }
  return apply(a).filter(function (i) {
    return test.isElement(i);
  });
}

module.exports = cast;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./Dominus.ctor":87,"./apply":89,"./test":97}],91:[function(require,module,exports){
arguments[4][23][0].apply(exports,arguments)
},{"./test":97,"dup":23}],92:[function(require,module,exports){
arguments[4][24][0].apply(exports,arguments)
},{"dup":24}],93:[function(require,module,exports){
(function (global){
'use strict';

var sektor = require('sektor');
var crossvent = require('crossvent');
var Dominus = require('./Dominus.ctor');
var cast = require('./cast');
var apply = require('./apply');
var text = require('./text');
var test = require('./test');
var api = module.exports = {};
var delegates = {};

function castContext (context) {
  if (typeof context === 'string') {
    return api.qs(null, context);
  }
  if (test.isElement(context)) {
    return context;
  }
  if (context instanceof Dominus) {
    return context[0];
  }
  return null;
}

api.qsa = function (el, selector) {
  var results = new Dominus();
  return sektor(selector, castContext(el), results);
};

api.qs = function (el, selector) {
  return api.qsa(el, selector)[0];
};

api.matches = function (el, selector) {
  return test.isElement(el) && sektor.matchesSelector(el, selector);
};

function relatedFactory (prop) {
  return function related (el, selector) {
    var relative = el[prop];
    if (relative) {
      if (!selector || api.matches(relative, selector)) {
        return cast(relative);
      }
    }
    return new Dominus();
  };
}

api.prev = relatedFactory('previousElementSibling');
api.next = relatedFactory('nextElementSibling');
api.parent = relatedFactory('parentElement');

function matches (el, value) {
  if (!value) {
    return true;
  }
  if (value instanceof Dominus) {
    return value.indexOf(el) !== -1;
  }
  if (test.isElement(value)) {
    return el === value;
  }
  return api.matches(el, value);
}

api.parents = function (el, value) {
  var elements = [];
  var current = el;
  while (current.parentElement) {
    if (matches(current.parentElement, value)) {
      elements.push(current.parentElement);
    }
    current = current.parentElement;
  }
  return apply(elements);
};

api.children = function (el, value) {
  var elements = [];
  var children = el.children;
  var child;
  var i;
  for (i = 0; children && i < children.length; i++) {
    child = children[i];
    if (matches(child, value)) {
      elements.push(child);
    }
  }
  return apply(elements);
};

// this method caches delegates so that .off() works seamlessly
function delegate (root, filter, fn) {
  if (delegates[fn._dd]) {
    return delegates[fn._dd];
  }
  fn._dd = Date.now();
  delegates[fn._dd] = delegator;
  function delegator (e) {
    var el = e.target;
    while (el && el !== root) {
      if (api.matches(el, filter)) {
        fn.apply(this, arguments); return;
      }
      el = el.parentElement;
    }
  }
  return delegator;
}

function evented (method, el, type, filter, fn) {
  if (filter === null) {
    crossvent[method](el, type, fn);
  } else {
    crossvent[method](el, type, delegate(el, filter, fn));
  }
}

function once (el, type, filter, fn) {
  var things = [el, type, filter, disposable];
  api.on.apply(api, things);
  function disposable () {
    api.off.apply(api, things);
    return fn.apply(this, arguments);
  }
}

api.once = once;
api.on = evented.bind(null, 'add');
api.off = evented.bind(null, 'remove');
api.emit = evented.bind(null, 'fabricate');

api.html = function (elem, html) {
  var getter = arguments.length < 2;
  if (getter) {
    return elem.innerHTML;
  } else {
    elem.innerHTML = html;
  }
};

api.text = function (elem, text) {
  var checkable = test.isCheckable(elem);
  var getter = arguments.length < 2;
  if (getter) {
    return checkable ? elem.value : elem.innerText || elem.textContent;
  } else if (checkable) {
    elem.value = text;
  } else {
    elem.innerText = elem.textContent = text;
  }
};

api.value = function (el, value) {
  var checkable = test.isCheckable(el);
  var getter = arguments.length < 2;
  if (getter) {
    return checkable ? el.checked : el.value;
  } else if (checkable) {
    el.checked = value;
  } else {
    el.value = value;
  }
};

api.attr = function (el, name, value) {
  if (!test.isElement(el)) {
    return;
  }
  if (value === null || value === void 0) {
    el.removeAttribute(name); return;
  }
  var camel = text.hyphenToCamel(name);
  if (camel in el) {
    el[camel] = value;
  } else {
    el.setAttribute(name, value);
  }
};

api.getAttr = function (el, name) {
  var camel = text.hyphenToCamel(name);
  if (camel in el) {
    return el[camel];
  } else if (el.getAttribute) {
    return el.getAttribute(name);
  }
  return null;
};

api.manyAttr = function (elem, attrs) {
  Object.keys(attrs).forEach(function (attr) {
    api.attr(elem, attr, attrs[attr]);
  });
};

api.make = function (type) {
  return new Dominus(document.createElement(type));
};

api.clone = function (el) {
  if (el.cloneNode) {
    return el.cloneNode(true);
  }
  return el;
};

api.remove = function (el) {
  if (el.parentElement) {
    el.parentElement.removeChild(el);
  }
};

api.append = function (el, target) {
  if (manipulationGuard(el, target, api.append)) {
    return;
  }
  if (el.appendChild) {
    el.appendChild(target);
  }
};

api.prepend = function (el, target) {
  if (manipulationGuard(el, target, api.prepend)) {
    return;
  }
  if (el.insertBefore) {
    el.insertBefore(target, el.firstChild);
  }
};

api.before = function (el, target) {
  if (manipulationGuard(el, target, api.before)) {
    return;
  }
  if (el.parentElement) {
    el.parentElement.insertBefore(target, el);
  }
};

api.after = function (el, target) {
  if (manipulationGuard(el, target, api.after)) {
    return;
  }
  if (el.parentElement) {
    el.parentElement.insertBefore(target, el.nextSibling);
  }
};

function manipulationGuard (el, target, fn) {
  var right = target instanceof Dominus;
  var left = el instanceof Dominus;
  if (left) {
    el.forEach(manipulateMany);
  } else if (right) {
    manipulate(el, true);
  }
  return !el || !target || left || right;

  function manipulate (el, precondition) {
    if (right) {
      target.forEach(function (target, j) {
        fn(el, cloneUnless(target, precondition && j === 0));
      });
    } else {
      fn(el, cloneUnless(target, precondition));
    }
  }

  function manipulateMany (el, i) {
    manipulate(el, i === 0);
  }
}

function cloneUnless (target, condition) {
  return condition ? target : api.clone(target);
}

['appendTo', 'prependTo', 'beforeOf', 'afterOf'].forEach(flip);

function flip (key) {
  var original = key.split(/[A-Z]/)[0];
  api[key] = function (el, target) {
    api[original](target, el);
  };
}

var numericCssProperties = {
  'column-count': true,
  'fill-opacity': true,
  'flex-grow': true,
  'flex-shrink': true,
  'font-weight': true,
  'line-height': true,
  'opacity': true,
  'order': true,
  'orphans': true,
  'widows': true,
  'z-index': true,
  'zoom': true
};
var numeric = /^\d+$/;
var canFloat = 'float' in document.body.style;

api.getCss = function (el, prop) {
  if (!test.isElement(el)) {
    return null;
  }
  var hprop = text.hyphenate(prop);
  var fprop = !canFloat && hprop === 'float' ? 'cssFloat' : hprop;
  var result = global.getComputedStyle(el)[hprop];
  if (prop === 'opacity' && result === '') {
    return 1;
  }
  if (result.substr(-2) === 'px' || numeric.test(result)) {
    return parseFloat(result, 10);
  }
  return result;
};

api.setCss = function (props) {
  var mapped = Object.keys(props).filter(bad).map(expand);
  function bad (prop) {
    var value = props[prop];
    return value !== null && value === value;
  }
  function expand (prop) {
    var hprop = text.hyphenate(prop);
    var value = props[prop];
    if (typeof value === 'number' && !numericCssProperties[hprop]) {
      value += 'px';
    }
    return {
      name: hprop, value: value
    };
  }
  return function (el) {
    if (!test.isElement(el)) {
      return;
    }
    mapped.forEach(function (prop) {
      el.style[prop.name] = prop.value;
    });
  };
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./Dominus.ctor":87,"./apply":89,"./cast":90,"./test":97,"./text":98,"crossvent":79,"sektor":86}],94:[function(require,module,exports){
arguments[4][26][0].apply(exports,arguments)
},{"./Dominus.prototype":88,"dup":26}],95:[function(require,module,exports){
arguments[4][27][0].apply(exports,arguments)
},{"./Dominus.ctor":87,"dup":27}],96:[function(require,module,exports){
arguments[4][28][0].apply(exports,arguments)
},{"./Dominus.ctor":87,"./cast":90,"./custom":92,"./dom":93,"dup":28}],97:[function(require,module,exports){
arguments[4][29][0].apply(exports,arguments)
},{"dup":29}],98:[function(require,module,exports){
arguments[4][30][0].apply(exports,arguments)
},{"dup":30}],99:[function(require,module,exports){
'use strict';

// jshint scripturl:true

var $ = require('dominus');
var queso = require('queso');
var safeson = require('safeson');
var state = require('./lib/state');
var transformers = [];
var formium = {
  submit: submit,
  transform: transform,
  configure: state.configure
};

function noop () {}

function transform (fn) {
  transformers.push(fn);
}

/* AJAX form submissions use an intermediary <iframe> to help browsers remember
 * autocompletion suggestions. We submit the form against the <iframe> and then
 * grab the response as plain-text JSON that we need to parse into JSON.
 * Afterwards we can hand that JSON to the response handler, business as usual.
 * Since we've submitted the form "organically", the browser stores suggestions.
 */
function frame (form) {
  var name = 'ff-' + new Date().valueOf();
  $(form)
    .attr('autocomplete', 'on')
    .attr('target', name);
  return $('<iframe>')
    .css('display', 'none')
    .attr('id', name)
    .attr('name', name)
    .attr('src', 'javascript:void 0')
    .afterOf(form);
}

function submit (form, done) {
  var textareaCloneValue = 'data-clone-value';
  var iframe = frame(form);
  var content = iframe[0].contentWindow;
  var restore = transformers.map(run);
  var textareas = $('textarea', form);
  textareas.forEach(preserveValue);
  var formClone = form.cloneNode(true);
  var textareaClones = $('textarea', formClone);
  disable(form);
  $('button', form).forEach(disable);
  $('[autofocus]', formClone).attr('autofocus', null);
  textareaClones.forEach(updateValue);
  textareas.forEach(restoreTextarea);
  var formCloneId = 'f' + iframe[0].id;
  formClone.id = formCloneId;
  iframe.once('load', grabResponse);
  content.document.body.appendChild(formClone);
  var frameForm = content.document.getElementById(formCloneId);
  var amp;
  if (state.qs) {
    amp = frameForm.action.indexOf('?') !== -1;
    frameForm.action += queso.stringify(state.qs(form), amp);
  }
  frameForm.onsubmit = null;
  frameForm.submit();
  restore.forEach(run);
  function preserveValue (textarea) {
    var ta = $(textarea);
    ta.attr(textareaCloneValue, ta.value());
  }
  function updateValue (textarea) {
    var ta = $(textarea);
    ta.value(ta.attr(textareaCloneValue)).attr(textareaCloneValue, null);
  }
  function restoreTextarea (textarea) {
    $(textarea).attr(textareaCloneValue, null);
  }
  function grabResponse () {
    var html = readResponse(content);
    if (!html) {
      gotResponse(new Error('Internal Server Error')); return;
    }
    var json = decodeResponse(html);
    var err = json ? null : new Error('Malformed response');
    gotResponse(err, json);
    function gotResponse (err, data) {
      $('button', form).forEach(enable);
      enable(form);
      iframe.remove();
      (done || noop).call(form, err, data);
      $(form).emit('formium', { error: err, data: data });
    }
  }
  function readResponse (content) {
    try {
      return content.document.body.innerHTML;
    } catch (e) { // failure to read (most likely) means server crashed or response timed out
    }
  }
  function decodeResponse (html) {
    try {
      return safeson.decode(html);
    } catch (e) {
    }
  }
  function run (fn) {
    return (fn || noop)(form);
  }
  function disable (el) {
    el.disabled = true;
  }
  function enable (el) {
    el.disabled = false;
  }
}

module.exports = formium;

},{"./lib/state":100,"dominus":94,"queso":101,"safeson":112}],100:[function(require,module,exports){
'use strict';

var state = {
  configure: configure
};

function configure (options) {
  state.qs = options.qs;
}

module.exports = state;

},{}],101:[function(require,module,exports){
'use strict';

function stringify (query, amp) {
  return Object.keys(query).reduce(pairs, '');
  function pairs (q, key) {
    var prefix = amp !== true && q.length === 0 ? '?' : '&';
    var left = q + prefix + key;
    var value = query[key];
    if (value === true) {
      return left;
    }
    var encoded = encodeURIComponent(value);
    return left + '=' + encoded;
  }
}

module.exports = {
  stringify: stringify
};

},{}],102:[function(require,module,exports){
'use strict';

function formulario (form) {
  var boundary = 'GradualFormBoundary' + Math.random().toString(2).substr(2);
  var formData = form.tagName === 'FORM' ? readForm(form) : form;
  var body = encode(formData, boundary);
  var headers = {
    'Accept': 'application/json',
    'Content-Type': 'multipart/form-data; boundary=' + boundary
  };
  return { headers: headers, body: body };
}

function cast (collection) {
  var casted = [];
  for (var i = 0; i < collection.length; i++) {
    casted.push(collection[i]);
  }
  return casted;
}

function readForm (form) {
  var inputs = form.getElementsByTagName('input');
  var textareas = form.getElementsByTagName('textarea');
  return cast(inputs).concat(cast(textareas)).reduce(merge, {});
}

function merge (data, input) {
  var choice = input.type === 'checkbox' || input.type === 'radio';
  var value = input.value;
  var key = input.name;
  if (choice) {
    if (input.checked) {
      data[key] = value;
    } else if (!(key in data)) {
      data[key] = '';
    }
  } else if (key in data) {
    if (typeof data[key] === 'string') {
      data[key] = [data[key], value];
    } else {
      data[key].push(value);
    }
  } else {
    data[key] = value;
  }
  return data;
}

function encode (formData, boundary) {
  return Object.keys(formData).reduce(append, []).concat('--' + boundary + '--').join('\r\n');

  function append (encoded, key) {
    var name = key;
    var item = formData[key];
    var items = Array.isArray(item) ? item : [item];

    items.forEach(appendOne);

    function appendOne (value) {
      encoded.push('--' + boundary);
      encoded.push('content-disposition: form-data; name="' + name + '"');
      encoded.push('');
      encoded.push(value);
    }

    // TODO: handle file uploads

    return encoded;
  }
}

formulario.encode = encode;
module.exports = formulario;

},{}],103:[function(require,module,exports){
'use strict';

function pad (hash, len) {
  while (hash.length < len) {
    hash = '0' + hash;
  }
  return hash;
}

function fold (hash, text) {
  var i;
  var chr;
  var len;
  if (text.length === 0) {
    return hash;
  }
  for (i = 0, len = text.length; i < len; i++) {
    chr = text.charCodeAt(i);
    hash = ((hash << 5) - hash) + chr;
    hash |= 0;
  }
  return hash < 0 ? hash * -2 : hash;
}

function foldObject (hash, o, seen) {
  return Object.keys(o).sort().reduce(foldKey, hash);
  function foldKey (hash, key) {
    return foldValue(hash, o[key], key, seen);
  }
}

function foldValue (input, value, key, seen) {
  var hash = fold(fold(fold(input, key), toString(value)), typeof value);
  if (value === null) {
    return fold(hash, 'null');
  }
  if (value === undefined) {
    return fold(hash, 'undefined');
  }
  if (typeof value === 'object') {
    if (seen.indexOf(value) !== -1) {
      return fold(hash, '[Circular]' + key);
    }
    seen.push(value);
    return foldObject(hash, value, seen);
  }
  return fold(hash, value.toString());
}

function toString (o) {
  return Object.prototype.toString.call(o);
}

function sum (o) {
  return pad(foldValue(0, o, '', []).toString(16), 8);
}

module.exports = sum;

},{}],104:[function(require,module,exports){
(function (global){
'use strict';

var characters = ['<', '>', '"', '`', ' ', '\r', '\n', '\t', '{', '}', '|', '\\', '^', '`', '\''];
var map = [];
var i;
var ch;
var esc;
var len;
for (i = 0, len = characters.length; i < len; ++i) {
  ch = characters[i];
  esc = encodeURIComponent(ch);
  if (esc === ch) {
    esc = global.escape(ch);
  }
  map[ch.charCodeAt(0)] = esc;
}

module.exports = map;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],105:[function(require,module,exports){
'use strict';

var autoescape = require('./autoescape');

function getComponentEscaped (text, start, end) {
  var i = start;
  var current = start;
  var result = '';
  var ch;
  var escaped;
  for (; i <= end; ++i) {
    ch = text.charCodeAt(i);
    escaped = autoescape[ch];
    if (escaped) {
      if (current < i) {
        result += text.slice(current, i);
      }
      result += escaped;
      current = i + 1;
    }
  }
  if (current < i + 1) {
    result += text.slice(current, i);
  }
  return result;
}

module.exports = getComponentEscaped;

},{"./autoescape":104}],106:[function(require,module,exports){
'use strict';

var querystring = require('./querystring');
var autoescape = require('./autoescape');
var getComponentEscaped = require('./getComponentEscaped');

function parse (input) {
  var start = 0;
  var end = input.length - 1;
  var _protocol;
  var _hostname;
  var _host;
  var _port;
  var _prependSlash;
  var _pathname;
  var _path;
  var _query;
  var _search;
  var _hash;
  var ch;

  while (input.charCodeAt(start) <= 0x20 /*' '*/) { start++; }
  while (input.charCodeAt(end) <= 0x20 /*' '*/) { end--; }

  start = parseProtocol(input, start, end);
  start = parseHost(input, start, end);

  if (start <= end) {
    ch = input.charCodeAt(start);
    if (ch === 0x2F /*'/'*/) {
      parsePath(input, start, end);
    } else if (ch === 0x3F /*'?'*/) {
      parseQuery(input, start, end);
    } else if (ch === 0x23 /*'#'*/) {
      parseHash(input, start, end);
    } else {
      parsePath(input, start, end);
    }
  }

  if (!_pathname) { _pathname = '/'; }
  if (!_query) { _query = ''; }
  if (!_search) { _search = ''; }

  _path = parseFullPath();

  parseQueryString();

  return {
    protocol: _protocol,
    hostname: _hostname,
    host: _host,
    port: _port,
    pathname: _pathname,
    path: _path,
    search: _search,
    hash: _hash,
    query: _query
  };

  function parseProtocol (input, start, end) {
    for (var i = start; i <= end; ++i) {
      if (input.charCodeAt(i) === 0x3A /*':'*/) {
        _protocol = input.slice(start, i).toLowerCase();
        return i + 1;
      }
    }
    return start;
  }

  function parseHost (input, start, end) {
    if (input.charCodeAt(start) !== 0x2F /*'/'*/ ||
        input.charCodeAt(start + 1) !== 0x2F /*'/'*/) {
      return start;
    }

    start += 2; // assume slashes

    var lower = false;
    var hostNameStart = start;
    var hostNameEnd = end;
    var portLength = 0;
    var charsAfterDot = 0;
    var hostname;

    for (var i = start; i <= end; ++i) {
      if (charsAfterDot > 62) {
        _hostname = _host = input.slice(start, i);
        return i;
      }
      var ch = input.charCodeAt(i);
      if (ch === 0x3A /*':'*/) {
        portLength = parsePort(input, i + 1, end) + 1;
        hostNameEnd = i - 1;
        break;
      } else if (ch < 0x61 /*'a'*/) {
        if (ch === 0x2E /*'.'*/) {
          charsAfterDot = -1;
        } else if (0x41 /*'A'*/ <= ch && ch <= 0x5A /*'Z'*/) {
          lower = true;
        } else if (!(ch === 0x2D /*'-'*/ || ch === 0x5F /*'_'*/ || (0x30 /*'0'*/ <= ch && ch <= 0x39 /*'9'*/))) {
          if (ch !== 0x2F /*'/'*/ && ch !== 0x3F /*'?'*/ && ch !== 0x23 /*'#'*/) {
            _prependSlash = true;
          }
          hostNameEnd = i - 1;
          break;
        }
      }
      charsAfterDot++;
    }
    if (hostNameEnd + 1 !== start && hostNameEnd - hostNameStart <= 256) {
      hostname = input.slice(hostNameStart, hostNameEnd + 1);
      if (lower) {
        hostname = hostname.toLowerCase();
      }
      _hostname = hostname;
      _host = _port > 0 ? hostname + ':' + _port : hostname;
    }
    return hostNameEnd + 1 + portLength;
  }

  function parsePort (text, start, end) {
    var port = 0;
    var any = false;

    for (var i = start; i <= end; ++i) {
      var ch = text.charCodeAt(i);
      if (ch >= 0x30 /*'0'*/ && ch <= 0x39 /*'9'*/) {
        port = (10 * port) + (ch - 0x30 /*'0'*/);
        any = true;
      } else {
        break;
      }
    }
    if (port === 0 && !any) {
      return 0;
    }
    _port = port;
    return i - start;
  }

  function parsePath (text, start, end) {
    var pathStart = start;
    var pathEnd = end;
    var escape = false;
    var path;
    var i;
    var ch;
    for (i = start; i <= end; ++i) {
      ch = text.charCodeAt(i);
      if (ch === 0x23 /*'#'*/) {
        parseHash(text, i, end);
        pathEnd = i - 1;
        break;
      } else if (ch === 0x3F /*'?'*/) {
        parseQuery(text, i, end);
        pathEnd = i - 1;
        break;
      } else if (!escape && autoescape[ch]) {
        escape = true;
      }
    }
    if (pathStart > pathEnd) {
      _pathname = '/'; return;
    }
    if (escape) {
      path = getComponentEscaped(text, pathStart, pathEnd);
    } else {
      path = text.slice(pathStart, pathEnd + 1);
    }
    _pathname = _prependSlash ? '/' + path : path;
  }

  function parseQuery (text, start, end) {
    var queryStart = start;
    var queryEnd = end;
    var escape = false;
    var i;
    var ch;
    var query;

    for (i = start; i <= end; ++i) {
      ch = text.charCodeAt(i);
      if (ch === 0x23 /*'#'*/) {
        parseHash(text, i, end);
        queryEnd = i - 1;
        break;
      } else if (!escape && autoescape[ch]) {
        escape = true;
      }
    }
    if (queryStart > queryEnd) {
      _search = ''; return;
    }
    if (escape) {
      query = getComponentEscaped(text, queryStart, queryEnd);
    } else {
      query = text.slice(queryStart, queryEnd + 1);
    }
    _search = query;
  }

  function parseQueryString () {
    var search = _search;
    if (search.charCodeAt(0) === 0x3F /*'?'*/) {
      search = search.slice(1);
    }
    _query = querystring.parse(search);
  }

  function parseHash (text, start, end) {
    if (start > end) {
      _hash = ''; return;
    }
    _hash = getComponentEscaped(text, start, end);
  }

  function parseFullPath () {
    if (_pathname || _search) {
      return _pathname + _search;
    }
    if (!_pathname && _search) {
      return '/' + _search;
    }
    return '';
  }
}

module.exports = {
  parse: parse
};

},{"./autoescape":104,"./getComponentEscaped":105,"./querystring":107}],107:[function(require,module,exports){
'use strict';

var separator = '&';
var equals = '=';
var plus = '%20';
var maxKeys = 1000;
var isArray = Array.isArray || function isArray (input) {
  return Object.prototype.toString.call(input) === '[object Array]';
};

function hasOwnProperty (input, prop) {
  return Object.prototype.hasOwnProperty.call(input, prop);
}

function parse (qs) {
  var map = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return map;
  }

  var rplus = /\+/g;
  var x;
  var idx;
  var kstr;
  var vstr;
  var k;
  var v;
  var i;
  var parts = qs.split(separator);
  var len = parts.length;
  if (len > maxKeys) {
    len = maxKeys;
  }

  for (i = 0; i < len; i++) {
    x = parts[i].replace(rplus, plus);
    idx = x.indexOf(equals);

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(map, k)) {
      map[k] = v;
    } else if (isArray(map[k])) {
      map[k].push(v);
    } else {
      map[k] = [map[k], v];
    }
  }

  return map;
}

module.exports = {
  parse: parse
};

},{}],108:[function(require,module,exports){
var now = require('performance-now')
  , global = typeof window === 'undefined' ? {} : window
  , vendors = ['moz', 'webkit']
  , suffix = 'AnimationFrame'
  , raf = global['request' + suffix]
  , caf = global['cancel' + suffix] || global['cancelRequest' + suffix]
  , native = true

for(var i = 0; i < vendors.length && !raf; i++) {
  raf = global[vendors[i] + 'Request' + suffix]
  caf = global[vendors[i] + 'Cancel' + suffix]
      || global[vendors[i] + 'CancelRequest' + suffix]
}

// Some versions of FF have rAF but not cAF
if(!raf || !caf) {
  native = false

  var last = 0
    , id = 0
    , queue = []
    , frameDuration = 1000 / 60

  raf = function(callback) {
    if(queue.length === 0) {
      var _now = now()
        , next = Math.max(0, frameDuration - (_now - last))
      last = next + _now
      setTimeout(function() {
        var cp = queue.slice(0)
        // Clear queue here to prevent
        // callbacks from appending listeners
        // to the current frame's queue
        queue.length = 0
        for(var i = 0; i < cp.length; i++) {
          if(!cp[i].cancelled) {
            try{
              cp[i].callback(last)
            } catch(e) {
              setTimeout(function() { throw e }, 0)
            }
          }
        }
      }, Math.round(next))
    }
    queue.push({
      handle: ++id,
      callback: callback,
      cancelled: false
    })
    return id
  }

  caf = function(handle) {
    for(var i = 0; i < queue.length; i++) {
      if(queue[i].handle === handle) {
        queue[i].cancelled = true
      }
    }
  }
}

module.exports = function(fn) {
  // Wrap in a new function to prevent
  // `cancel` potentially being assigned
  // to the native rAF function
  if(!native) {
    return raf.call(global, fn)
  }
  return raf.call(global, function() {
    try{
      fn.apply(this, arguments)
    } catch(e) {
      setTimeout(function() { throw e }, 0)
    }
  })
}
module.exports.cancel = function() {
  caf.apply(global, arguments)
}

},{"performance-now":109}],109:[function(require,module,exports){
(function (process){
// Generated by CoffeeScript 1.6.3
(function() {
  var getNanoSeconds, hrtime, loadTime;

  if ((typeof performance !== "undefined" && performance !== null) && performance.now) {
    module.exports = function() {
      return performance.now();
    };
  } else if ((typeof process !== "undefined" && process !== null) && process.hrtime) {
    module.exports = function() {
      return (getNanoSeconds() - loadTime) / 1e6;
    };
    hrtime = process.hrtime;
    getNanoSeconds = function() {
      var hr;
      hr = hrtime();
      return hr[0] * 1e9 + hr[1];
    };
    loadTime = getNanoSeconds();
  } else if (Date.now) {
    module.exports = function() {
      return Date.now() - loadTime;
    };
    loadTime = Date.now();
  } else {
    module.exports = function() {
      return new Date().getTime() - loadTime;
    };
    loadTime = new Date().getTime();
  }

}).call(this);

/*

*/

}).call(this,require('_process'))

},{"_process":125}],110:[function(require,module,exports){
'use strict';

var pathToRegExp = require('./pathToRegExp');

function match (routes, uri, startAt) {
  var captures;
  var i = startAt || 0;

  for (var len = routes.length; i < len; ++i) {
    var route = routes[i];
    var re = route.re;
    var keys = route.keys;
    var splats = [];
    var params = {};

    if (captures = uri.match(re)) {
      for (var j = 1, len = captures.length; j < len; ++j) {
        var value = typeof captures[j] === 'string' ? unescape(captures[j]) : captures[j];
        var key = keys[j - 1];
        if (key) {
          params[key] = value;
        } else {
          splats.push(value);
        }
      }

      return {
        params: params,
        splats: splats,
        route: route.src,
        next: i + 1,
        index: route.index
      };
    }
  }
}

function routeInfo (path, index) {
  var src;
  var re;
  var keys = [];

  if (path instanceof RegExp) {
    re = path;
    src = path.toString();
  } else {
    re = pathToRegExp(path, keys);
    src = path;
  }

  return {
     re: re,
     src: path.toString(),
     keys: keys,
     index: index
  };
}

function Router () {
  if (!(this instanceof Router)) {
    return new Router();
  }

  this.routes = [];
  this.routeMap = [];
}

Router.prototype.addRoute = function (path, action) {
  if (!path) {
    throw new Error(' route requires a path');
  }
  if (!action) {
    throw new Error(' route ' + path.toString() + ' requires an action');
  }

  var route = routeInfo(path, this.routeMap.length);
  route.action = action;
  this.routes.push(route);
  this.routeMap.push([path, action]);
}

Router.prototype.match = function (uri, startAt) {
  var route = match(this.routes, uri, startAt);
  if (route) {
    route.action = this.routeMap[route.index][1];
    route.next = this.match.bind(this, uri, route.next);
  }
  return route;
}

module.exports = Router;

},{"./pathToRegExp":111}],111:[function(require,module,exports){
'use strict';

function pathToRegExp (path, keys) {
  path = path
    .concat('/?')
    .replace(/\/\(/g, '(?:/')
    .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?|\*/g, tweak)
    .replace(/([\/.])/g, '\\$1')
    .replace(/\*/g, '(.*)');

  return new RegExp('^' + path + '$', 'i');

  function tweak (match, slash, format, key, capture, optional) {
    if (match === '*') {
      keys.push(void 0);
      return match;
    }

    keys.push(key);

    slash = slash || '';

    return ''
      + (optional ? '' : slash)
      + '(?:'
      + (optional ? slash : '')
      + (format || '')
      + (capture ? capture.replace(/\*/g, '{0,}').replace(/\./g, '[\\s\\S]') : '([^/]+?)')
      + ')'
      + (optional || '');
  }
}

module.exports = pathToRegExp;

},{}],112:[function(require,module,exports){
'use strict';

var unescape = require('./unescape');

function safeson (data, spaces) {
  return JSON.stringify(data, null, spaces)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;');
}

function decode (data) {
  return JSON.parse(unescape(data));
}

module.exports = safeson;
safeson.decode = decode;

},{"./unescape":113}],113:[function(require,module,exports){
'use strict';

var reEscapedHtml = /&(?:amp|lt|gt|quot|#39|#96);/g;
var htmlUnescapes = {
  '&amp;': '&',
  '&lt;': '<',
  '&gt;': '>',
  '&quot;': '"',
  '&#39;': '\'',
  '&#96;': '`'
};

function unescapeHtmlChar (c) {
  return htmlUnescapes[c];
}

function unescape (input) {
  var data = input == null ? '' : String(input);
  if (data && (reEscapedHtml.lastIndex = 0, reEscapedHtml.test(data))) {
    return data.replace(reEscapedHtml, unescapeHtmlChar);
  }
  return data;
}

module.exports = unescape;

},{}],114:[function(require,module,exports){
'use strict';

var cache = {};

function temporize (options, done) {
  var store = cache[options.name];
  if (store === void 0) {
    store = cache[options.name] = {
      callbacks: [],
      expires: -Infinity
    };
  }
  store.callbacks.push(done);
  if (store.loading) {
    return;
  }
  var now = new Date();
  if (now > store.expires) {
    reload();
  } else {
    cached();
  }
  function reload () {
    store.loading = true;
    options.load(loaded);
  }
  function loaded () {
    var expires = new Date();
    expires.setSeconds(expires.getSeconds() + options.seconds);
    store.expires = expires;
    store.context = this;
    store.args = arguments;
    cached();
  }
  function cached () {
    store.loading = false;
    store.callbacks.forEach(callback);
    store.callbacks = [];
    function callback (fn) {
      setTimeout(go, 0);
      function go () {
        fn.apply(store.context, store.args);
      }
    }
  }
}

module.exports = temporize;

},{}],115:[function(require,module,exports){
"use strict";
var window = require("global/window")
var once = require("once")
var parseHeaders = require("parse-headers")


var XHR = window.XMLHttpRequest || noop
var XDR = "withCredentials" in (new XHR()) ? XHR : window.XDomainRequest

module.exports = createXHR

function createXHR(options, callback) {
    function readystatechange() {
        if (xhr.readyState === 4) {
            loadFunc()
        }
    }

    function getBody() {
        // Chrome with requestType=blob throws errors arround when even testing access to responseText
        var body = undefined

        if (xhr.response) {
            body = xhr.response
        } else if (xhr.responseType === "text" || !xhr.responseType) {
            body = xhr.responseText || xhr.responseXML
        }

        if (isJson) {
            try {
                body = JSON.parse(body)
            } catch (e) {}
        }

        return body
    }
    
    var failureResponse = {
                body: undefined,
                headers: {},
                statusCode: 0,
                method: method,
                url: uri,
                rawRequest: xhr
            }
    
    function errorFunc(evt) {
        clearTimeout(timeoutTimer)
        if(!(evt instanceof Error)){
            evt = new Error("" + (evt || "unknown") )
        }
        evt.statusCode = 0
        callback(evt, failureResponse)
    }

    // will load the data & process the response in a special response object
    function loadFunc() {
        clearTimeout(timeoutTimer)
        
        var status = (xhr.status === 1223 ? 204 : xhr.status)
        var response = failureResponse
        var err = null
        
        if (status !== 0){
            response = {
                body: getBody(),
                statusCode: status,
                method: method,
                headers: {},
                url: uri,
                rawRequest: xhr
            }
            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE
                response.headers = parseHeaders(xhr.getAllResponseHeaders())
            }
        } else {
            err = new Error("Internal XMLHttpRequest Error")
        }
        callback(err, response, response.body)
        
    }
    
    if (typeof options === "string") {
        options = { uri: options }
    }

    options = options || {}
    if(typeof callback === "undefined"){
        throw new Error("callback argument missing")
    }
    callback = once(callback)

    var xhr = options.xhr || null

    if (!xhr) {
        if (options.cors || options.useXDR) {
            xhr = new XDR()
        }else{
            xhr = new XHR()
        }
    }

    var key
    var uri = xhr.url = options.uri || options.url
    var method = xhr.method = options.method || "GET"
    var body = options.body || options.data
    var headers = xhr.headers = options.headers || {}
    var sync = !!options.sync
    var isJson = false
    var timeoutTimer

    if ("json" in options) {
        isJson = true
        headers["Accept"] || (headers["Accept"] = "application/json") //Don't override existing accept header declared by user
        if (method !== "GET" && method !== "HEAD") {
            headers["Content-Type"] = "application/json"
            body = JSON.stringify(options.json)
        }
    }

    xhr.onreadystatechange = readystatechange
    xhr.onload = loadFunc
    xhr.onerror = errorFunc
    // IE9 must have onprogress be set to a unique function.
    xhr.onprogress = function () {
        // IE must die
    }
    xhr.ontimeout = errorFunc
    xhr.open(method, uri, !sync)
    //has to be after open
    xhr.withCredentials = !!options.withCredentials
    
    // Cannot set timeout with sync request
    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly
    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent
    if (!sync && options.timeout > 0 ) {
        timeoutTimer = setTimeout(function(){
            xhr.abort("timeout");
        }, options.timeout+2 );
    }

    if (xhr.setRequestHeader) {
        for(key in headers){
            if(headers.hasOwnProperty(key)){
                xhr.setRequestHeader(key, headers[key])
            }
        }
    } else if (options.headers) {
        throw new Error("Headers cannot be set on an XDomainRequest object")
    }

    if ("responseType" in options) {
        xhr.responseType = options.responseType
    }
    
    if ("beforeSend" in options && 
        typeof options.beforeSend === "function"
    ) {
        options.beforeSend(xhr)
    }

    xhr.send(body)

    return xhr


}


function noop() {}

},{"global/window":116,"once":117,"parse-headers":121}],116:[function(require,module,exports){
(function (global){
if (typeof window !== "undefined") {
    module.exports = window;
} else if (typeof global !== "undefined") {
    module.exports = global;
} else if (typeof self !== "undefined"){
    module.exports = self;
} else {
    module.exports = {};
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],117:[function(require,module,exports){
module.exports = once

once.proto = once(function () {
  Object.defineProperty(Function.prototype, 'once', {
    value: function () {
      return once(this)
    },
    configurable: true
  })
})

function once (fn) {
  var called = false
  return function () {
    if (called) return
    called = true
    return fn.apply(this, arguments)
  }
}

},{}],118:[function(require,module,exports){
var isFunction = require('is-function')

module.exports = forEach

var toString = Object.prototype.toString
var hasOwnProperty = Object.prototype.hasOwnProperty

function forEach(list, iterator, context) {
    if (!isFunction(iterator)) {
        throw new TypeError('iterator must be a function')
    }

    if (arguments.length < 3) {
        context = this
    }
    
    if (toString.call(list) === '[object Array]')
        forEachArray(list, iterator, context)
    else if (typeof list === 'string')
        forEachString(list, iterator, context)
    else
        forEachObject(list, iterator, context)
}

function forEachArray(array, iterator, context) {
    for (var i = 0, len = array.length; i < len; i++) {
        if (hasOwnProperty.call(array, i)) {
            iterator.call(context, array[i], i, array)
        }
    }
}

function forEachString(string, iterator, context) {
    for (var i = 0, len = string.length; i < len; i++) {
        // no such thing as a sparse string.
        iterator.call(context, string.charAt(i), i, string)
    }
}

function forEachObject(object, iterator, context) {
    for (var k in object) {
        if (hasOwnProperty.call(object, k)) {
            iterator.call(context, object[k], k, object)
        }
    }
}

},{"is-function":119}],119:[function(require,module,exports){
module.exports = isFunction

var toString = Object.prototype.toString

function isFunction (fn) {
  var string = toString.call(fn)
  return string === '[object Function]' ||
    (typeof fn === 'function' && string !== '[object RegExp]') ||
    (typeof window !== 'undefined' &&
     // IE8 and below
     (fn === window.setTimeout ||
      fn === window.alert ||
      fn === window.confirm ||
      fn === window.prompt))
};

},{}],120:[function(require,module,exports){

exports = module.exports = trim;

function trim(str){
  return str.replace(/^\s*|\s*$/g, '');
}

exports.left = function(str){
  return str.replace(/^\s*/, '');
};

exports.right = function(str){
  return str.replace(/\s*$/, '');
};

},{}],121:[function(require,module,exports){
var trim = require('trim')
  , forEach = require('for-each')
  , isArray = function(arg) {
      return Object.prototype.toString.call(arg) === '[object Array]';
    }

module.exports = function (headers) {
  if (!headers)
    return {}

  var result = {}

  forEach(
      trim(headers).split('\n')
    , function (row) {
        var index = row.indexOf(':')
          , key = trim(row.slice(0, index)).toLowerCase()
          , value = trim(row.slice(index + 1))

        if (typeof(result[key]) === 'undefined') {
          result[key] = value
        } else if (isArray(result[key])) {
          result[key].push(value)
        } else {
          result[key] = [ result[key], value ]
        }
      }
  )

  return result
}
},{"for-each":118,"trim":120}],122:[function(require,module,exports){
module.exports="7.1.5"

},{}],123:[function(require,module,exports){
'use strict';

var t = require('./version.json');

function get (v) {
  return 't' + t + ';v' + v;
}

module.exports = {
  get: get
};

},{"./version.json":122}],124:[function(require,module,exports){

},{}],125:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            currentQueue[queueIndex].run();
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}]},{},[11])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiLmJpbi92aWV3cy9kb2N1bWVudGF0aW9uL2Fib3V0LmpzIiwiLmJpbi92aWV3cy9kb2N1bWVudGF0aW9uL2FwaS5qcyIsIi5iaW4vdmlld3MvZG9jdW1lbnRhdGlvbi9jb21wbGVtZW50cy5qcyIsIi5iaW4vdmlld3MvZG9jdW1lbnRhdGlvbi9nZXR0aW5nLXN0YXJ0ZWQuanMiLCIuYmluL3ZpZXdzL2RvY3VtZW50YXRpb24vcGVyZm9ybWFuY2UuanMiLCIuYmluL3ZpZXdzL2Vycm9yL25vdC1mb3VuZC5qcyIsIi5iaW4vdmlld3MvbGF5b3V0LmpzIiwiLmJpbi93aXJpbmcuanMiLCJjbGllbnQvanMvY29udHJvbGxlcnMvZG9jdW1lbnRhdGlvbi9hYm91dC5qcyIsImNsaWVudC9qcy9jb252ZW50aW9ucy5qcyIsImNsaWVudC9qcy9tYWluLmpzIiwiY2xpZW50L2pzL3Rocm90dGxlLmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9ub2RlX21vZHVsZXMvY3VzdG9tLWV2ZW50L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvY3Jvc3N2ZW50LmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvZXZlbnRtYXAuanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9ub2RlX21vZHVsZXMvcG9zZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9ub2RlX21vZHVsZXMvcG9zZXIvc3JjL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9ub2RlX21vZHVsZXMvc2VrdG9yL3NyYy9zZWt0b3IuanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9zcmMvRG9taW51cy5jdG9yLmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvc3JjL0RvbWludXMucHJvdG90eXBlLmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvc3JjL2FwcGx5LmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvc3JjL2Nhc3QuanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9zcmMvY2xhc3Nlcy5qcyIsIm5vZGVfbW9kdWxlcy9kb21pbnVzL3NyYy9jdXN0b20uanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9zcmMvZG9tLmpzIiwibm9kZV9tb2R1bGVzL2RvbWludXMvc3JjL2RvbWludXMuanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9zcmMvZmxhdHRlbi5qcyIsIm5vZGVfbW9kdWxlcy9kb21pbnVzL3NyYy9wdWJsaWMuanMiLCJub2RlX21vZHVsZXMvZG9taW51cy9zcmMvdGVzdC5qcyIsIm5vZGVfbW9kdWxlcy9kb21pbnVzL3NyYy90ZXh0LmpzIiwibm9kZV9tb2R1bGVzL2phZHVtL25vZGVfbW9kdWxlcy9qYWRlL3J1bnRpbWUuanMiLCJub2RlX21vZHVsZXMvamFkdW0vcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9yYWYvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcmFmL25vZGVfbW9kdWxlcy9wZXJmb3JtYW5jZS1ub3cvbGliL3BlcmZvcm1hbmNlLW5vdy5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9hY3RpdmF0b3IuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvY2FjaGUuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvY2FjaGluZy5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9jbG9uZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9jb21wb25lbnRDYWNoZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9kZWZlcnJhbC5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9lbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL2ZldGNoZXIuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvZm9ybXMuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvZ2MuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvZ2xvYmFsL2RvY3VtZW50LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL2dsb2JhbC9oaXN0b3J5LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL2dsb2JhbC9sb2NhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9oYXJkUmVkaXJlY3QuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvaG9va3MuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvaW50ZXJjZXB0b3IuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvbGlua3MuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvbW91bnQuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvbmF0aXZlRm4uanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvb25jZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9vcmlnaW4uanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvcHJlZmV0Y2hlci5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9wcmVmZXRjaGVySW50ZW50LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL3JlZGlyZWN0b3IuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvcm91dGVyLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL3N0YXRlLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL3N0YXRlQ2xlYXIuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvc3RvcmVzL2lkYi5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci9zdG9yZXMvcmF3LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL3N0b3Jlcy91bmRlcmx5aW5nX2lkYi5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci90ZW1wbGF0aW5nQVBJLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9icm93c2VyL3Vuc3RyaWN0RXZhbC5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci92ZXJzaW9uQ2hlY2suanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2Jyb3dzZXIvdmlldy5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvYnJvd3Nlci94aHIuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL2xpYi9kZWZlcnJlZC5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbGliL3F1ZXJ5cGFyc2VyLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9saWIvcmVzb2x2ZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvY29udHJhL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9jb250cmEvbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvY3Jvc3N2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvZ3JhZHVhbC9ncmFkdWFsLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvZ3JhZHVhbC9saWIvZm9ybVJlc3BvbnNlSGFuZGxlci5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL2dyYWR1YWwvbGliL3N0YXRlLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvZ3JhZHVhbC9ub2RlX21vZHVsZXMvYXNzaWdubWVudC9hc3NpZ25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvZ3JhZHVhbC9ub2RlX21vZHVsZXMvZG9taW51cy9ub2RlX21vZHVsZXMvcG9zZXIvc3JjL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9ncmFkdWFsL25vZGVfbW9kdWxlcy9kb21pbnVzL25vZGVfbW9kdWxlcy9zZWt0b3Ivc3JjL3Nla3Rvci5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL2dyYWR1YWwvbm9kZV9tb2R1bGVzL2RvbWludXMvc3JjL2Nhc3QuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9ncmFkdWFsL25vZGVfbW9kdWxlcy9kb21pbnVzL3NyYy9kb20uanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9ncmFkdWFsL25vZGVfbW9kdWxlcy9mb3JtaXVtL2Zvcm1pdW0uanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9ncmFkdWFsL25vZGVfbW9kdWxlcy9mb3JtaXVtL2xpYi9zdGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL2dyYWR1YWwvbm9kZV9tb2R1bGVzL2Zvcm1pdW0vbm9kZV9tb2R1bGVzL3F1ZXNvL3F1ZXNvLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvZ3JhZHVhbC9ub2RlX21vZHVsZXMvZm9ybXVsYXJpby9mb3JtdWxhcmlvLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvaGFzaC1zdW0vaGFzaC1zdW0uanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9vbW5pYm94L2F1dG9lc2NhcGUuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9vbW5pYm94L2dldENvbXBvbmVudEVzY2FwZWQuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9vbW5pYm94L29tbmlib3guanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy9vbW5pYm94L3F1ZXJ5c3RyaW5nLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvcmFmL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvcmFmL25vZGVfbW9kdWxlcy9wZXJmb3JtYW5jZS1ub3cvbGliL3BlcmZvcm1hbmNlLW5vdy5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL3J1dGEzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvcnV0YTMvcGF0aFRvUmVnRXhwLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvc2FmZXNvbi9zYWZlc29uLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy9ub2RlX21vZHVsZXMvc2FmZXNvbi91bmVzY2FwZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL3RlbXBvcml6ZS90ZW1wb3JpemUuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy94aHIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy94aHIvbm9kZV9tb2R1bGVzL2dsb2JhbC93aW5kb3cuanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy94aHIvbm9kZV9tb2R1bGVzL29uY2Uvb25jZS5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL3hoci9ub2RlX21vZHVsZXMvcGFyc2UtaGVhZGVycy9ub2RlX21vZHVsZXMvZm9yLWVhY2gvaW5kZXguanMiLCJub2RlX21vZHVsZXMvdGF1bnVzL25vZGVfbW9kdWxlcy94aHIvbm9kZV9tb2R1bGVzL3BhcnNlLWhlYWRlcnMvbm9kZV9tb2R1bGVzL2Zvci1lYWNoL25vZGVfbW9kdWxlcy9pcy1mdW5jdGlvbi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL3hoci9ub2RlX21vZHVsZXMvcGFyc2UtaGVhZGVycy9ub2RlX21vZHVsZXMvdHJpbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy90YXVudXMvbm9kZV9tb2R1bGVzL3hoci9ub2RlX21vZHVsZXMvcGFyc2UtaGVhZGVycy9wYXJzZS1oZWFkZXJzLmpzIiwibm9kZV9tb2R1bGVzL3RhdW51cy92ZXJzaW9uLmpzb24iLCJub2RlX21vZHVsZXMvdGF1bnVzL3ZlcnNpb25pbmcuanMiLCJub2RlX21vZHVsZXMvd2F0Y2hpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9lbXB0eS5qcyIsIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMzVkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMzUEE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMvS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN6SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2xQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQy9JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUMzVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWR1bS9ydW50aW1lXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhYm91dChsb2NhbHMpIHtcbnZhciBqYWRlX2RlYnVnID0gWyBuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvZG9jdW1lbnRhdGlvbi9hYm91dC5qYWRlXCIgKSBdO1xudHJ5IHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAwLCBcInZpZXdzL2RvY3VtZW50YXRpb24vYWJvdXQuamFkZVwiICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMSwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2Fib3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPHNlY3Rpb24gY2xhc3M9XFxcImx5LXNlY3Rpb24gbWQtbWFya2Rvd25cXFwiPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDE1LCBcInZpZXdzL2RvY3VtZW50YXRpb24vYWJvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8aDEgaWQ9XFxcIndoeS10YXVudXMtXFxcIj5XaHkgVGF1bnVzPzwvaDE+XFxuPHA+VGF1bnVzIGZvY3VzZXMgb24gZGVsaXZlcmluZyBhIHByb2dyZXNzaXZlbHkgZW5oYW5jZWQgZXhwZXJpZW5jZSB0byB0aGUgZW5kLXVzZXIsIHdoaWxlIHByb3ZpZGluZyA8ZW0+YSByZWFzb25hYmxlIGRldmVsb3BtZW50IGV4cGVyaWVuY2U8L2VtPiBhcyB3ZWxsLiA8c3Ryb25nPlRhdW51cyBwcmlvcml0aXplcyBjb250ZW50PC9zdHJvbmc+LiBJdCB1c2VzIHNlcnZlci1zaWRlIHJlbmRlcmluZyB0byBnZXQgY29udGVudCB0byB5b3VyIGh1bWFucyBhcyBmYXN0IGFzIHBvc3NpYmxlLCBhbmQgaXQgdXNlcyBjbGllbnQtc2lkZSByZW5kZXJpbmcgdG8gaW1wcm92ZSB0aGVpciBleHBlcmllbmNlLjwvcD5cXG48cD5XaGlsZSBpdCBmb2N1c2VzIG9uIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50LCA8c3Ryb25nPjxhIGhyZWY9XFxcImh0dHA6Ly9wb255Zm9vLmNvbS9hcnRpY2xlcy9hZGp1c3RpbmctdXgtZm9yLWh1bWFuc1xcXCI+dXNhYmlsaXR5PC9hPiBhbmQgcGVyZm9ybWFuY2UgYXJlIGJvdGggY29yZSBjb25jZXJuczwvc3Ryb25nPiBmb3IgVGF1bnVzLiBJbmNpZGVudGFsbHksIGZvY3VzaW5nIG9uIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50IGFsc28gaW1wcm92ZXMgYm90aCBvZiB0aGVzZS4gVXNhYmlsaXR5IGlzIGltcHJvdmVkIGJlY2F1c2UgdGhlIGV4cGVyaWVuY2UgaXMgZ3JhZHVhbGx5IGltcHJvdmVkLCBtZWFuaW5nIHRoYXQgaWYgc29tZXdoZXJlIGFsb25nIHRoZSBsaW5lIGEgZmVhdHVyZSBpcyBtaXNzaW5nLCB0aGUgY29tcG9uZW50IGlzIDxzdHJvbmc+c3RpbGwgZXhwZWN0ZWQgdG8gd29yazwvc3Ryb25nPi48L3A+XFxuPHA+Rm9yIGV4YW1wbGUsIGEgcHJvZ3Jlc3NpdmVseSBlbmhhbmNlZCBzaXRlIHVzZXMgcGxhaW4tb2xkIGxpbmtzIHRvIG5hdmlnYXRlIGZyb20gb25lIHZpZXcgdG8gYW5vdGhlciwgYW5kIHRoZW4gYWRkcyBhIDxjb2RlPmNsaWNrPC9jb2RlPiBldmVudCBoYW5kbGVyIHRoYXQgYmxvY2tzIG5hdmlnYXRpb24gYW5kIGlzc3VlcyBhbiBBSkFYIHJlcXVlc3QgaW5zdGVhZC4gSWYgSmF2YVNjcmlwdCBmYWlscyB0byBsb2FkLCBwZXJoYXBzIHRoZSBleHBlcmllbmNlIG1pZ2h0IHN0YXkgYSBsaXR0bGUgYml0IHdvcnNlLCBidXQgdGhhdCYjMzk7cyBva2F5LCBiZWNhdXNlIHdlIGFja25vd2xlZGdlIHRoYXQgPHN0cm9uZz5vdXIgc2l0ZXMgZG9uJiMzOTt0IG5lZWQgdG8gbG9vayBhbmQgYmVoYXZlIHRoZSBzYW1lIG9uIGV2ZXJ5IGJyb3dzZXI8L3N0cm9uZz4uIFNpbWlsYXJseSwgPGEgaHJlZj1cXFwiaHR0cDovL3Bvbnlmb28uY29tL2FydGljbGVzL2NyaXRpY2FsLXBhdGgtcGVyZm9ybWFuY2Utb3B0aW1pemF0aW9uXFxcIj5wZXJmb3JtYW5jZSBpcyBncmVhdGx5IGVuaGFuY2VkPC9hPiBieSBkZWxpdmVyaW5nIGNvbnRlbnQgdG8gdGhlIGh1bWFuIGFzIGZhc3QgYXMgcG9zc2libGUsIGFuZCB0aGVuIGFkZGluZyBmdW5jdGlvbmFsaXR5IG9uIHRvcCBvZiB0aGF0LjwvcD5cXG48cD5XaXRoIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50LCBpZiB0aGUgZnVuY3Rpb25hbGl0eSBuZXZlciBnZXRzIHRoZXJlIGJlY2F1c2UgYSBKYXZhU2NyaXB0IHJlc291cmNlIGZhaWxlZCB0byBsb2FkIGJlY2F1c2UgdGhlIG5ldHdvcmsgZmFpbGVkIDxlbT4obm90IHVuY29tbW9uIGluIHRoZSBtb2JpbGUgZXJhKTwvZW0+IG9yIGJlY2F1c2UgdGhlIHVzZXIgYmxvY2tlZCBKYXZhU2NyaXB0LCB5b3VyIGFwcGxpY2F0aW9uIHdpbGwgc3RpbGwgd29yayE8L3A+XFxuXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L3NlY3Rpb24+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMTYsIFwidmlld3MvZG9jdW1lbnRhdGlvbi9hYm91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxzZWN0aW9uIGNsYXNzPVxcXCJseS1zZWN0aW9uIG1kLW1hcmtkb3duXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAyOCwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2Fib3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxIGlkPVxcXCJ3aHktbm90LW90aGVyLWZyYW1ld29ya3MtXFxcIj5XaHkgTm90IE90aGVyIEZyYW1ld29ya3M/PC9oMT5cXG48cD5NYW55IG90aGVyIGZyYW1ld29ya3Mgd2VyZW4mIzM5O3QgZGVzaWduZWQgd2l0aCBwcm9ncmVzc2l2ZSBlbmhhbmNlbWVudCwgb3IgZXZlbiBzaGFyZWQtcmVuZGVyaW5nIGluIG1pbmQuIENvbnRlbnQgaXNuJiMzOTt0IHByaW9yaXRpemVkLCBhbmQgaHVtYW5zIGFyZSBleHBlY3RlZCB0byA8YSBocmVmPVxcXCJodHRwOi8vcG9ueWZvby5jb20vYXJ0aWNsZXMvc3RvcC1icmVha2luZy10aGUtd2ViXFxcIj5kb3dubG9hZCBtb3N0IG9mIGEgd2ViIHBhZ2UgYmVmb3JlIHRoZXkgY2FuIHNlZSBhbnkgZGlnZXN0aWJsZSBjb250ZW50PC9hPi4gV2hpbGUgR29vZ2xlIGlzIGdvaW5nIHRvIHJlc29sdmUgdGhlIFNFTyBpc3N1ZXMgd2l0aCBkZWRpY2F0ZWQgY2xpZW50LXNpZGUgcmVuZGVyaW5nIHNvb24sIHRoYXQgd29uJiMzOTt0IHNvbHZlIGFsbCB5b3VyIHByb2JsZW1zLiBHb29nbGUgaXNuJiMzOTt0IHRoZSBvbmx5IHdlYiBjcmF3bGVyIG9wZXJhdG9yIG91dCB0aGVyZSwgYW5kIGl0IG1pZ2h0IGJlIGEgd2hpbGUgYmVmb3JlIHNvY2lhbCBtZWRpYSBsaW5rIGNyYXdsZXJzIGNhdGNoIHVwIHdpdGggdGhlbS4gRXZlbiBpZiBjcmF3bGVycyBhcmUgbm90IGFuIGlzc3VlLCBiZWluZyBhYmxlIHRvIHByb3ZpZGUgdGhlIGZhc3Rlc3QgcG9zc2libGUgZXhwZXJpZW5jZSBpcyBhIGJpZyBwcm9ibGVtIHRvIHJlc29sdmUuPC9wPlxcbjxwPkxhdGVseSwgbWFueSBtYXR1cmUgb3Blbi1zb3VyY2UgZnJhbWV3b3JrcyBzdGFydGVkIGRyb3BwaW5nIHN1cHBvcnQgZm9yIG9sZGVyIGJyb3dzZXJzLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIG9mIHRoZSB3YXkgdGhleSYjMzk7cmUgYXJjaGl0ZWN0ZWQsIHdoZXJlIHRoZSBkZXZlbG9wZXIgaXMgcHV0IGZpcnN0LiA8c3Ryb25nPlRhdW51cyBpcyA8YSBocmVmPVxcXCJodHRwczovL3R3aXR0ZXIuY29tL2hhc2h0YWcvaHVtYW5maXJzdFxcXCI+I2h1bWFuZmlyc3Q8L2E+PC9zdHJvbmc+LCBtZWFuaW5nIHRoYXQgaXQgY29uY2VkZXMgdGhhdCBodW1hbnMgYXJlIG1vcmUgaW1wb3J0YW50IHRoYW4gdGhlIGRldmVsb3BlcnMgYnVpbGRpbmcgdGhlaXIgYXBwbGljYXRpb25zLjwvcD5cXG48cD5Qcm9ncmVzc2l2ZWx5IGVuaGFuY2VkIGFwcGxpY2F0aW9ucyBhcmUgYWx3YXlzIGdvaW5nIHRvIGhhdmUgZ3JlYXQgYnJvd3NlciBzdXBwb3J0IGJlY2F1c2Ugb2YgdGhlIHdheSB0aGV5JiMzOTtyZSBhcmNoaXRlY3RlZC4gQXMgdGhlIG5hbWUgaW1wbGllcywgYSBiYXNlbGluZSBpcyBlc3RhYmxpc2hlZCB3aGVyZSB3ZSBkZWxpdmVyIHRoZSBjb3JlIGV4cGVyaWVuY2UgdG8gdGhlIHVzZXIgPGVtPih0eXBpY2FsbHkgaW4gdGhlIGZvcm0gb2YgcmVhZGFibGUgSFRNTCBjb250ZW50KTwvZW0+LCBhbmQgdGhlbiBlbmhhbmNlIGl0IDxzdHJvbmc+aWYgcG9zc2libGU8L3N0cm9uZz4gdXNpbmcgQ1NTIGFuZCBKYXZhU2NyaXB0LiBCdWlsZGluZyBhcHBsaWNhdGlvbnMgaW4gdGhpcyB3YXkgbWVhbnMgdGhhdCA8c3Ryb25nPnlvdSYjMzk7bGwgYmUgYWJsZSB0byByZWFjaCB0aGUgbW9zdCBwZW9wbGUgd2l0aCB5b3VyIGNvcmUgZXhwZXJpZW5jZTwvc3Ryb25nPiwgYW5kIHlvdSYjMzk7bGwgYWxzbyBiZSBhYmxlIHRvIHByb3ZpZGUgaHVtYW5zIGluIG1vcmUgbW9kZXJuIGJyb3dzZXJzIHdpdGggYWxsIG9mIHRoZSBsYXRlc3QgZmVhdHVyZXMgYW5kIHRlY2hub2xvZ2llcy48L3A+XFxuXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L3NlY3Rpb24+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjksIFwidmlld3MvZG9jdW1lbnRhdGlvbi9hYm91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxzZWN0aW9uIGNsYXNzPVxcXCJseS1zZWN0aW9uIG1kLW1hcmtkb3duXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCA0OSwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2Fib3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxIGlkPVxcXCJmZWF0dXJlc1xcXCI+RmVhdHVyZXM8L2gxPlxcbjxwPk91dCBvZiB0aGUgYm94LCBUYXVudXMgZW5zdXJlcyB0aGF0IHlvdXIgc2l0ZSB3b3JrcyBvbiBhbnkgSFRNTC1lbmFibGVkIGRvY3VtZW50IHZpZXdlciwgb3IgZXZlbiBvbiB0aGUgdGVybWluYWwsIHByb3ZpZGluZyBzdXBwb3J0IGZvciBwbGFpbiB0ZXh0IHJlc3BvbnNlcyA8YSBocmVmPVxcXCIvZ2V0dGluZy1zdGFydGVkXFxcIj53aXRob3V0IGFueSBjb25maWd1cmF0aW9uIG5lZWRlZDwvYT4uIEV2ZW4gd2hpbGUgVGF1bnVzIHByb3ZpZGVzIHNoYXJlZC1yZW5kZXJpbmcgY2FwYWJpbGl0aWVzLCBpdCBvZmZlcnMgY29kZSByZXVzZSBvZiB2aWV3cyBhbmQgcm91dGVzLCBtZWFuaW5nIHlvdSYjMzk7bGwgb25seSBoYXZlIHRvIGRlY2xhcmUgdGhlc2Ugb25jZSBidXQgdGhleSYjMzk7bGwgYmUgdXNlZCBpbiBib3RoIHRoZSBzZXJ2ZXItc2lkZSBhbmQgdGhlIGNsaWVudC1zaWRlLjwvcD5cXG48cD5UYXVudXMgZmVhdHVyZXMgYSByZWFzb25hYmx5IGVuaGFuY2VkIGV4cGVyaWVuY2UsIHdoZXJlIGlmIGZlYXR1cmVzIGFyZW4mIzM5O3QgYXZhaWxhYmxlIG9uIGEgYnJvd3NlciwgdGhleSYjMzk7cmUganVzdCBub3QgcHJvdmlkZWQuIEZvciBleGFtcGxlLCB0aGUgY2xpZW50LXNpZGUgcm91dGVyIG1ha2VzIHVzZSBvZiB0aGUgPGNvZGU+aGlzdG9yeTwvY29kZT4gQVBJIGJ1dCBpZiB0aGF0JiMzOTtzIG5vdCBhdmFpbGFibGUgdGhlbiBpdCYjMzk7bGwgZmFsbCBiYWNrIHRvIHNpbXBseSBub3QgbWVkZGxpbmcgd2l0aCBsaW5rcyBpbnN0ZWFkIG9mIHVzaW5nIGEgY2xpZW50LXNpZGUtb25seSBoYXNoIHJvdXRlci48L3A+XFxuPHA+VGF1bnVzIGNhbiBkZWFsIHdpdGggdmlldyBjYWNoaW5nIG9uIHlvdXIgYmVoYWxmLCBpZiB5b3Ugc28gZGVzaXJlLCB1c2luZyA8YSBocmVmPVxcXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSVxcXCI+YXN5bmNocm9ub3VzIGVtYmVkZGVkIGRhdGFiYXNlIHN0b3JlczwvYT4gb24gdGhlIGNsaWVudC1zaWRlLiBUdXJucyBvdXQsIHRoZXJlJiMzOTtzIDxhIGhyZWY9XFxcImh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPWluZGV4ZWRkYlxcXCI+cHJldHR5IGdvb2QgYnJvd3NlciBzdXBwb3J0IGZvciBJbmRleGVkREI8L2E+LiBPZiBjb3Vyc2UsIEluZGV4ZWREQiB3aWxsIG9ubHkgYmUgdXNlZCBpZiBpdCYjMzk7cyBhdmFpbGFibGUsIGFuZCBpZiBpdCYjMzk7cyBub3QgdGhlbiB2aWV3IG1vZGVscyB3b24mIzM5O3QgYmUgY2FjaGVkIGluIHRoZSBjbGllbnQtc2lkZSBiZXNpZGVzIGFuIGluLW1lbW9yeSBzdG9yZS4gPHN0cm9uZz5UaGUgc2l0ZSB3b24mIzM5O3Qgc2ltcGx5IHJvbGwgb3ZlciBhbmQgZGllLCB0aG91Z2guPC9zdHJvbmc+PC9wPlxcbjxwPklmIHlvdSYjMzk7dmUgdHVybmVkIGNsaWVudC1zaWRlIGNhY2hpbmcgb24sIHRoZW4geW91IGNhbiBhbHNvIHR1cm4gb24gdGhlIDxzdHJvbmc+dmlldyBwcmUtZmV0Y2hpbmcgZmVhdHVyZTwvc3Ryb25nPiwgd2hpY2ggd2lsbCBzdGFydCBkb3dubG9hZGluZyB2aWV3cyBhcyBzb29uIGFzIGh1bWFucyBob3ZlciBvbiBsaW5rcywgYXMgdG8gZGVsaXZlciBhIDxlbT5mYXN0ZXIgcGVyY2VpdmVkIGh1bWFuIGV4cGVyaWVuY2U8L2VtPi48L3A+XFxuPHA+VGF1bnVzIHByb3ZpZGVzIHRoZSBiYXJlIGJvbmVzIGZvciB5b3VyIGFwcGxpY2F0aW9uIHNvIHRoYXQgeW91IGNhbiBzZXBhcmF0ZSBjb25jZXJucyBpbnRvIHJvdXRlcywgY29udHJvbGxlcnMsIG1vZGVscywgYW5kIHZpZXdzLiBUaGVuIGl0IGdldHMgb3V0IG9mIHRoZSB3YXksIGJ5IGRlc2lnbi4gVGhlcmUgYXJlIDxhIGhyZWY9XFxcIi9jb21wbGVtZW50c1xcXCI+YSBmZXcgY29tcGxlbWVudGFyeSBtb2R1bGVzPC9hPiB5b3UgY2FuIHVzZSB0byBlbmhhbmNlIHlvdXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZSwgYXMgd2VsbC48L3A+XFxuPHA+V2l0aCBUYXVudXMgeW91JiMzOTtsbCBiZSBpbiBjaGFyZ2UuIDxhIGhyZWY9XFxcIi9nZXR0aW5nLXN0YXJ0ZWRcXFwiPkFyZSB5b3UgcmVhZHkgdG8gZ2V0IHN0YXJ0ZWQ/PC9hPjwvcD5cXG5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvc2VjdGlvbj5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCA1MCwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2Fib3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPHNlY3Rpb24gY2xhc3M9XFxcImx5LXNlY3Rpb24gbWQtbWFya2Rvd25cXFwiPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDY0LCBcInZpZXdzL2RvY3VtZW50YXRpb24vYWJvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8aDEgaWQ9XFxcImZhbWlsaWFyaXR5XFxcIj5GYW1pbGlhcml0eTwvaDE+XFxuPHA+WW91IGNhbiB1c2UgVGF1bnVzIHRvIGRldmVsb3AgYXBwbGljYXRpb25zIHVzaW5nIHlvdXIgZmF2b3JpdGUgTm9kZS5qcyBIVFRQIHNlcnZlciwgPHN0cm9uZz5ib3RoIDxhIGhyZWY9XFxcImh0dHA6Ly9leHByZXNzanMuY29tXFxcIj5FeHByZXNzPC9hPiBhbmQgPGEgaHJlZj1cXFwiaHR0cDovL2hhcGlqcy5jb21cXFwiPkhhcGk8L2E+IGFyZSBmdWxseSBzdXBwb3J0ZWQ8L3N0cm9uZz4uIEluIGJvdGggY2FzZXMsIHlvdSYjMzk7bGwgPGEgaHJlZj1cXFwiL2dldHRpbmctc3RhcnRlZFxcXCI+YnVpbGQgY29udHJvbGxlcnMgdGhlIHdheSB5b3UmIzM5O3JlIGFscmVhZHkgdXNlZCB0bzwvYT4sIGV4Y2VwdCB5b3Ugd29uJiMzOTt0IGhhdmUgdG8gPGNvZGU+cmVxdWlyZTwvY29kZT4gdGhlIHZpZXcgY29udHJvbGxlcnMgb3IgZGVmaW5lIGFueSB2aWV3IHJvdXRlcyBzaW5jZSBUYXVudXMgd2lsbCBkZWFsIHdpdGggdGhhdCBvbiB5b3VyIGJlaGFsZi4gSW4gdGhlIGNvbnRyb2xsZXJzIHlvdSYjMzk7bGwgYmUgYWJsZSB0byBkbyBldmVyeXRoaW5nIHlvdSYjMzk7cmUgYWxyZWFkeSBhYmxlIHRvIGRvLCBhbmQgdGhlbiB5b3UmIzM5O2xsIGhhdmUgdG8gcmV0dXJuIGEgSlNPTiBtb2RlbCB3aGljaCB3aWxsIGJlIHVzZWQgdG8gcmVuZGVyIGEgdmlldy48L3A+XFxuPHA+WW91IGNhbiB1c2UgYW55IHZpZXctcmVuZGVyaW5nIGVuZ2luZSB0aGF0IHlvdSB3YW50LCBwcm92aWRlZCB0aGF0IGl0IGNhbiBiZSBjb21waWxlZCBpbnRvIEphdmFTY3JpcHQgZnVuY3Rpb25zLiBUaGF0JiMzOTtzIGJlY2F1c2UgVGF1bnVzIHRyZWF0cyB2aWV3cyBhcyBtZXJlIEphdmFTY3JpcHQgZnVuY3Rpb25zLCByYXRoZXIgdGhhbiBiZWluZyB0aWVkIGludG8gYSBzcGVjaWZpYyB2aWV3LXJlbmRlcmluZyBlbmdpbmUuPC9wPlxcbjxwPkNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFyZSBqdXN0IGZ1bmN0aW9ucywgdG9vLiBZb3UgY2FuIGJyaW5nIHlvdXIgb3duIHNlbGVjdG9yIGVuZ2luZSwgeW91ciBvd24gQUpBWCBsaWJyYXJpZXMsIGFuZCB5b3VyIG93biBkYXRhLWJpbmRpbmcgc29sdXRpb25zLiBJdCBtaWdodCBtZWFuIHRoZXJlJiMzOTtzIGEgYml0IG1vcmUgd29yayBpbnZvbHZlZCBmb3IgeW91LCBidXQgeW91JiMzOTtsbCBhbHNvIGJlIGZyZWUgdG8gcGljayB3aGF0ZXZlciBsaWJyYXJpZXMgeW91JiMzOTtyZSBtb3N0IGNvbWZvcnRhYmxlIHdpdGghIFRoYXQgYmVpbmcgc2FpZCwgVGF1bnVzIDxhIGhyZWY9XFxcIi9jb21wbGVtZW50c1xcXCI+ZG9lcyByZWNvbW1lbmQgYSBmZXcgbGlicmFyaWVzPC9hPiB0aGF0IHdvcmsgd2VsbCB3aXRoIGl0LjwvcD5cXG5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvc2VjdGlvbj5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn0gY2F0Y2ggKGVycikge1xuICBqYWRlLnJldGhyb3coZXJyLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lLCBqYWRlX2RlYnVnWzBdLmxpbmVubywgXCJzZWN0aW9uLmx5LXNlY3Rpb24ubWQtbWFya2Rvd25cXG4gIDp1bHRyYW1hcmtlZFxcbiAgICAjIFdoeSBUYXVudXM/XFxuXFxuICAgIFRhdW51cyBmb2N1c2VzIG9uIGRlbGl2ZXJpbmcgYSBwcm9ncmVzc2l2ZWx5IGVuaGFuY2VkIGV4cGVyaWVuY2UgdG8gdGhlIGVuZC11c2VyLCB3aGlsZSBwcm92aWRpbmcgX2EgcmVhc29uYWJsZSBkZXZlbG9wbWVudCBleHBlcmllbmNlXyBhcyB3ZWxsLiAqKlRhdW51cyBwcmlvcml0aXplcyBjb250ZW50KiouIEl0IHVzZXMgc2VydmVyLXNpZGUgcmVuZGVyaW5nIHRvIGdldCBjb250ZW50IHRvIHlvdXIgaHVtYW5zIGFzIGZhc3QgYXMgcG9zc2libGUsIGFuZCBpdCB1c2VzIGNsaWVudC1zaWRlIHJlbmRlcmluZyB0byBpbXByb3ZlIHRoZWlyIGV4cGVyaWVuY2UuXFxuXFxuICAgIFdoaWxlIGl0IGZvY3VzZXMgb24gcHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQsICoqW3VzYWJpbGl0eV1bMl0gYW5kIHBlcmZvcm1hbmNlIGFyZSBib3RoIGNvcmUgY29uY2VybnMqKiBmb3IgVGF1bnVzLiBJbmNpZGVudGFsbHksIGZvY3VzaW5nIG9uIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50IGFsc28gaW1wcm92ZXMgYm90aCBvZiB0aGVzZS4gVXNhYmlsaXR5IGlzIGltcHJvdmVkIGJlY2F1c2UgdGhlIGV4cGVyaWVuY2UgaXMgZ3JhZHVhbGx5IGltcHJvdmVkLCBtZWFuaW5nIHRoYXQgaWYgc29tZXdoZXJlIGFsb25nIHRoZSBsaW5lIGEgZmVhdHVyZSBpcyBtaXNzaW5nLCB0aGUgY29tcG9uZW50IGlzICoqc3RpbGwgZXhwZWN0ZWQgdG8gd29yayoqLlxcblxcbiAgICBGb3IgZXhhbXBsZSwgYSBwcm9ncmVzc2l2ZWx5IGVuaGFuY2VkIHNpdGUgdXNlcyBwbGFpbi1vbGQgbGlua3MgdG8gbmF2aWdhdGUgZnJvbSBvbmUgdmlldyB0byBhbm90aGVyLCBhbmQgdGhlbiBhZGRzIGEgYGNsaWNrYCBldmVudCBoYW5kbGVyIHRoYXQgYmxvY2tzIG5hdmlnYXRpb24gYW5kIGlzc3VlcyBhbiBBSkFYIHJlcXVlc3QgaW5zdGVhZC4gSWYgSmF2YVNjcmlwdCBmYWlscyB0byBsb2FkLCBwZXJoYXBzIHRoZSBleHBlcmllbmNlIG1pZ2h0IHN0YXkgYSBsaXR0bGUgYml0IHdvcnNlLCBidXQgdGhhdCdzIG9rYXksIGJlY2F1c2Ugd2UgYWNrbm93bGVkZ2UgdGhhdCAqKm91ciBzaXRlcyBkb24ndCBuZWVkIHRvIGxvb2sgYW5kIGJlaGF2ZSB0aGUgc2FtZSBvbiBldmVyeSBicm93c2VyKiouIFNpbWlsYXJseSwgW3BlcmZvcm1hbmNlIGlzIGdyZWF0bHkgZW5oYW5jZWRdWzFdIGJ5IGRlbGl2ZXJpbmcgY29udGVudCB0byB0aGUgaHVtYW4gYXMgZmFzdCBhcyBwb3NzaWJsZSwgYW5kIHRoZW4gYWRkaW5nIGZ1bmN0aW9uYWxpdHkgb24gdG9wIG9mIHRoYXQuXFxuXFxuICAgIFdpdGggcHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQsIGlmIHRoZSBmdW5jdGlvbmFsaXR5IG5ldmVyIGdldHMgdGhlcmUgYmVjYXVzZSBhIEphdmFTY3JpcHQgcmVzb3VyY2UgZmFpbGVkIHRvIGxvYWQgYmVjYXVzZSB0aGUgbmV0d29yayBmYWlsZWQgXyhub3QgdW5jb21tb24gaW4gdGhlIG1vYmlsZSBlcmEpXyBvciBiZWNhdXNlIHRoZSB1c2VyIGJsb2NrZWQgSmF2YVNjcmlwdCwgeW91ciBhcHBsaWNhdGlvbiB3aWxsIHN0aWxsIHdvcmshXFxuXFxuICAgIFsxXTogaHR0cDovL3Bvbnlmb28uY29tL2FydGljbGVzL2NyaXRpY2FsLXBhdGgtcGVyZm9ybWFuY2Utb3B0aW1pemF0aW9uXFxuICAgIFsyXTogaHR0cDovL3Bvbnlmb28uY29tL2FydGljbGVzL2FkanVzdGluZy11eC1mb3ItaHVtYW5zXFxuXFxuc2VjdGlvbi5seS1zZWN0aW9uLm1kLW1hcmtkb3duXFxuICA6dWx0cmFtYXJrZWRcXG4gICAgIyBXaHkgTm90IE90aGVyIEZyYW1ld29ya3M/XFxuXFxuICAgIE1hbnkgb3RoZXIgZnJhbWV3b3JrcyB3ZXJlbid0IGRlc2lnbmVkIHdpdGggcHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQsIG9yIGV2ZW4gc2hhcmVkLXJlbmRlcmluZyBpbiBtaW5kLiBDb250ZW50IGlzbid0IHByaW9yaXRpemVkLCBhbmQgaHVtYW5zIGFyZSBleHBlY3RlZCB0byBbZG93bmxvYWQgbW9zdCBvZiBhIHdlYiBwYWdlIGJlZm9yZSB0aGV5IGNhbiBzZWUgYW55IGRpZ2VzdGlibGUgY29udGVudF1bMl0uIFdoaWxlIEdvb2dsZSBpcyBnb2luZyB0byByZXNvbHZlIHRoZSBTRU8gaXNzdWVzIHdpdGggZGVkaWNhdGVkIGNsaWVudC1zaWRlIHJlbmRlcmluZyBzb29uLCB0aGF0IHdvbid0IHNvbHZlIGFsbCB5b3VyIHByb2JsZW1zLiBHb29nbGUgaXNuJ3QgdGhlIG9ubHkgd2ViIGNyYXdsZXIgb3BlcmF0b3Igb3V0IHRoZXJlLCBhbmQgaXQgbWlnaHQgYmUgYSB3aGlsZSBiZWZvcmUgc29jaWFsIG1lZGlhIGxpbmsgY3Jhd2xlcnMgY2F0Y2ggdXAgd2l0aCB0aGVtLiBFdmVuIGlmIGNyYXdsZXJzIGFyZSBub3QgYW4gaXNzdWUsIGJlaW5nIGFibGUgdG8gcHJvdmlkZSB0aGUgZmFzdGVzdCBwb3NzaWJsZSBleHBlcmllbmNlIGlzIGEgYmlnIHByb2JsZW0gdG8gcmVzb2x2ZS5cXG5cXG4gICAgTGF0ZWx5LCBtYW55IG1hdHVyZSBvcGVuLXNvdXJjZSBmcmFtZXdvcmtzIHN0YXJ0ZWQgZHJvcHBpbmcgc3VwcG9ydCBmb3Igb2xkZXIgYnJvd3NlcnMuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugb2YgdGhlIHdheSB0aGV5J3JlIGFyY2hpdGVjdGVkLCB3aGVyZSB0aGUgZGV2ZWxvcGVyIGlzIHB1dCBmaXJzdC4gKipUYXVudXMgaXMgWyNodW1hbmZpcnN0XVsxXSoqLCBtZWFuaW5nIHRoYXQgaXQgY29uY2VkZXMgdGhhdCBodW1hbnMgYXJlIG1vcmUgaW1wb3J0YW50IHRoYW4gdGhlIGRldmVsb3BlcnMgYnVpbGRpbmcgdGhlaXIgYXBwbGljYXRpb25zLlxcblxcbiAgICBQcm9ncmVzc2l2ZWx5IGVuaGFuY2VkIGFwcGxpY2F0aW9ucyBhcmUgYWx3YXlzIGdvaW5nIHRvIGhhdmUgZ3JlYXQgYnJvd3NlciBzdXBwb3J0IGJlY2F1c2Ugb2YgdGhlIHdheSB0aGV5J3JlIGFyY2hpdGVjdGVkLiBBcyB0aGUgbmFtZSBpbXBsaWVzLCBhIGJhc2VsaW5lIGlzIGVzdGFibGlzaGVkIHdoZXJlIHdlIGRlbGl2ZXIgdGhlIGNvcmUgZXhwZXJpZW5jZSB0byB0aGUgdXNlciBfKHR5cGljYWxseSBpbiB0aGUgZm9ybSBvZiByZWFkYWJsZSBIVE1MIGNvbnRlbnQpXywgYW5kIHRoZW4gZW5oYW5jZSBpdCAqKmlmIHBvc3NpYmxlKiogdXNpbmcgQ1NTIGFuZCBKYXZhU2NyaXB0LiBCdWlsZGluZyBhcHBsaWNhdGlvbnMgaW4gdGhpcyB3YXkgbWVhbnMgdGhhdCAqKnlvdSdsbCBiZSBhYmxlIHRvIHJlYWNoIHRoZSBtb3N0IHBlb3BsZSB3aXRoIHlvdXIgY29yZSBleHBlcmllbmNlKiosIGFuZCB5b3UnbGwgYWxzbyBiZSBhYmxlIHRvIHByb3ZpZGUgaHVtYW5zIGluIG1vcmUgbW9kZXJuIGJyb3dzZXJzIHdpdGggYWxsIG9mIHRoZSBsYXRlc3QgZmVhdHVyZXMgYW5kIHRlY2hub2xvZ2llcy5cXG5cXG4gICAgWzFdOiBodHRwczovL3R3aXR0ZXIuY29tL2hhc2h0YWcvaHVtYW5maXJzdFxcbiAgICBbMl06IGh0dHA6Ly9wb255Zm9vLmNvbS9hcnRpY2xlcy9zdG9wLWJyZWFraW5nLXRoZS13ZWJcXG5cXG5zZWN0aW9uLmx5LXNlY3Rpb24ubWQtbWFya2Rvd25cXG4gIDp1bHRyYW1hcmtlZFxcbiAgICAjIEZlYXR1cmVzXFxuXFxuICAgIE91dCBvZiB0aGUgYm94LCBUYXVudXMgZW5zdXJlcyB0aGF0IHlvdXIgc2l0ZSB3b3JrcyBvbiBhbnkgSFRNTC1lbmFibGVkIGRvY3VtZW50IHZpZXdlciwgb3IgZXZlbiBvbiB0aGUgdGVybWluYWwsIHByb3ZpZGluZyBzdXBwb3J0IGZvciBwbGFpbiB0ZXh0IHJlc3BvbnNlcyBbd2l0aG91dCBhbnkgY29uZmlndXJhdGlvbiBuZWVkZWRdWzJdLiBFdmVuIHdoaWxlIFRhdW51cyBwcm92aWRlcyBzaGFyZWQtcmVuZGVyaW5nIGNhcGFiaWxpdGllcywgaXQgb2ZmZXJzIGNvZGUgcmV1c2Ugb2Ygdmlld3MgYW5kIHJvdXRlcywgbWVhbmluZyB5b3UnbGwgb25seSBoYXZlIHRvIGRlY2xhcmUgdGhlc2Ugb25jZSBidXQgdGhleSdsbCBiZSB1c2VkIGluIGJvdGggdGhlIHNlcnZlci1zaWRlIGFuZCB0aGUgY2xpZW50LXNpZGUuXFxuXFxuICAgIFRhdW51cyBmZWF0dXJlcyBhIHJlYXNvbmFibHkgZW5oYW5jZWQgZXhwZXJpZW5jZSwgd2hlcmUgaWYgZmVhdHVyZXMgYXJlbid0IGF2YWlsYWJsZSBvbiBhIGJyb3dzZXIsIHRoZXkncmUganVzdCBub3QgcHJvdmlkZWQuIEZvciBleGFtcGxlLCB0aGUgY2xpZW50LXNpZGUgcm91dGVyIG1ha2VzIHVzZSBvZiB0aGUgYGhpc3RvcnlgIEFQSSBidXQgaWYgdGhhdCdzIG5vdCBhdmFpbGFibGUgdGhlbiBpdCdsbCBmYWxsIGJhY2sgdG8gc2ltcGx5IG5vdCBtZWRkbGluZyB3aXRoIGxpbmtzIGluc3RlYWQgb2YgdXNpbmcgYSBjbGllbnQtc2lkZS1vbmx5IGhhc2ggcm91dGVyLlxcblxcbiAgICBUYXVudXMgY2FuIGRlYWwgd2l0aCB2aWV3IGNhY2hpbmcgb24geW91ciBiZWhhbGYsIGlmIHlvdSBzbyBkZXNpcmUsIHVzaW5nIFthc3luY2hyb25vdXMgZW1iZWRkZWQgZGF0YWJhc2Ugc3RvcmVzXVszXSBvbiB0aGUgY2xpZW50LXNpZGUuIFR1cm5zIG91dCwgdGhlcmUncyBbcHJldHR5IGdvb2QgYnJvd3NlciBzdXBwb3J0IGZvciBJbmRleGVkREJdWzRdLiBPZiBjb3Vyc2UsIEluZGV4ZWREQiB3aWxsIG9ubHkgYmUgdXNlZCBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGlmIGl0J3Mgbm90IHRoZW4gdmlldyBtb2RlbHMgd29uJ3QgYmUgY2FjaGVkIGluIHRoZSBjbGllbnQtc2lkZSBiZXNpZGVzIGFuIGluLW1lbW9yeSBzdG9yZS4gKipUaGUgc2l0ZSB3b24ndCBzaW1wbHkgcm9sbCBvdmVyIGFuZCBkaWUsIHRob3VnaC4qKlxcblxcbiAgICBJZiB5b3UndmUgdHVybmVkIGNsaWVudC1zaWRlIGNhY2hpbmcgb24sIHRoZW4geW91IGNhbiBhbHNvIHR1cm4gb24gdGhlICoqdmlldyBwcmUtZmV0Y2hpbmcgZmVhdHVyZSoqLCB3aGljaCB3aWxsIHN0YXJ0IGRvd25sb2FkaW5nIHZpZXdzIGFzIHNvb24gYXMgaHVtYW5zIGhvdmVyIG9uIGxpbmtzLCBhcyB0byBkZWxpdmVyIGEgX2Zhc3RlciBwZXJjZWl2ZWQgaHVtYW4gZXhwZXJpZW5jZV8uXFxuXFxuICAgIFRhdW51cyBwcm92aWRlcyB0aGUgYmFyZSBib25lcyBmb3IgeW91ciBhcHBsaWNhdGlvbiBzbyB0aGF0IHlvdSBjYW4gc2VwYXJhdGUgY29uY2VybnMgaW50byByb3V0ZXMsIGNvbnRyb2xsZXJzLCBtb2RlbHMsIGFuZCB2aWV3cy4gVGhlbiBpdCBnZXRzIG91dCBvZiB0aGUgd2F5LCBieSBkZXNpZ24uIFRoZXJlIGFyZSBbYSBmZXcgY29tcGxlbWVudGFyeSBtb2R1bGVzXVsxXSB5b3UgY2FuIHVzZSB0byBlbmhhbmNlIHlvdXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZSwgYXMgd2VsbC5cXG5cXG4gICAgV2l0aCBUYXVudXMgeW91J2xsIGJlIGluIGNoYXJnZS4gW0FyZSB5b3UgcmVhZHkgdG8gZ2V0IHN0YXJ0ZWQ/XVsyXVxcblxcbiAgICBbMV06IC9jb21wbGVtZW50c1xcbiAgICBbMl06IC9nZXR0aW5nLXN0YXJ0ZWRcXG4gICAgWzNdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSVxcbiAgICBbNF06IGh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPWluZGV4ZWRkYlxcblxcbnNlY3Rpb24ubHktc2VjdGlvbi5tZC1tYXJrZG93blxcbiAgOnVsdHJhbWFya2VkXFxuICAgICMgRmFtaWxpYXJpdHlcXG5cXG4gICAgWW91IGNhbiB1c2UgVGF1bnVzIHRvIGRldmVsb3AgYXBwbGljYXRpb25zIHVzaW5nIHlvdXIgZmF2b3JpdGUgTm9kZS5qcyBIVFRQIHNlcnZlciwgKipib3RoIFtFeHByZXNzXVszXSBhbmQgW0hhcGldWzRdIGFyZSBmdWxseSBzdXBwb3J0ZWQqKi4gSW4gYm90aCBjYXNlcywgeW91J2xsIFtidWlsZCBjb250cm9sbGVycyB0aGUgd2F5IHlvdSdyZSBhbHJlYWR5IHVzZWQgdG9dWzFdLCBleGNlcHQgeW91IHdvbid0IGhhdmUgdG8gYHJlcXVpcmVgIHRoZSB2aWV3IGNvbnRyb2xsZXJzIG9yIGRlZmluZSBhbnkgdmlldyByb3V0ZXMgc2luY2UgVGF1bnVzIHdpbGwgZGVhbCB3aXRoIHRoYXQgb24geW91ciBiZWhhbGYuIEluIHRoZSBjb250cm9sbGVycyB5b3UnbGwgYmUgYWJsZSB0byBkbyBldmVyeXRoaW5nIHlvdSdyZSBhbHJlYWR5IGFibGUgdG8gZG8sIGFuZCB0aGVuIHlvdSdsbCBoYXZlIHRvIHJldHVybiBhIEpTT04gbW9kZWwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIHJlbmRlciBhIHZpZXcuXFxuXFxuICAgIFlvdSBjYW4gdXNlIGFueSB2aWV3LXJlbmRlcmluZyBlbmdpbmUgdGhhdCB5b3Ugd2FudCwgcHJvdmlkZWQgdGhhdCBpdCBjYW4gYmUgY29tcGlsZWQgaW50byBKYXZhU2NyaXB0IGZ1bmN0aW9ucy4gVGhhdCdzIGJlY2F1c2UgVGF1bnVzIHRyZWF0cyB2aWV3cyBhcyBtZXJlIEphdmFTY3JpcHQgZnVuY3Rpb25zLCByYXRoZXIgdGhhbiBiZWluZyB0aWVkIGludG8gYSBzcGVjaWZpYyB2aWV3LXJlbmRlcmluZyBlbmdpbmUuXFxuXFxuICAgIENsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFyZSBqdXN0IGZ1bmN0aW9ucywgdG9vLiBZb3UgY2FuIGJyaW5nIHlvdXIgb3duIHNlbGVjdG9yIGVuZ2luZSwgeW91ciBvd24gQUpBWCBsaWJyYXJpZXMsIGFuZCB5b3VyIG93biBkYXRhLWJpbmRpbmcgc29sdXRpb25zLiBJdCBtaWdodCBtZWFuIHRoZXJlJ3MgYSBiaXQgbW9yZSB3b3JrIGludm9sdmVkIGZvciB5b3UsIGJ1dCB5b3UnbGwgYWxzbyBiZSBmcmVlIHRvIHBpY2sgd2hhdGV2ZXIgbGlicmFyaWVzIHlvdSdyZSBtb3N0IGNvbWZvcnRhYmxlIHdpdGghIFRoYXQgYmVpbmcgc2FpZCwgVGF1bnVzIFtkb2VzIHJlY29tbWVuZCBhIGZldyBsaWJyYXJpZXNdWzJdIHRoYXQgd29yayB3ZWxsIHdpdGggaXQuXFxuXFxuICAgIFsxXTogL2dldHRpbmctc3RhcnRlZFxcbiAgICBbMl06IC9jb21wbGVtZW50c1xcbiAgICBbM106IGh0dHA6Ly9leHByZXNzanMuY29tXFxuICAgIFs0XTogaHR0cDovL2hhcGlqcy5jb21cXG5cIik7XG59XG59IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkdW0vcnVudGltZVwiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXBpKGxvY2Fscykge1xudmFyIGphZGVfZGVidWcgPSBbIG5ldyBqYWRlLkRlYnVnSXRlbSggMSwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2FwaS5qYWRlXCIgKSBdO1xudHJ5IHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAwLCBcInZpZXdzL2RvY3VtZW50YXRpb24vYXBpLmphZGVcIiApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvZG9jdW1lbnRhdGlvbi9hcGkuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8c2VjdGlvbiBjbGFzcz1cXFwibHktc2VjdGlvbiBtZC1tYXJrZG93blxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggOTE2LCBcInZpZXdzL2RvY3VtZW50YXRpb24vYXBpLmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxIGlkPVxcXCJhcGktZG9jdW1lbnRhdGlvblxcXCI+QVBJIERvY3VtZW50YXRpb248L2gxPlxcbjxwPkhlcmUmIzM5O3MgdGhlIEFQSSBkb2N1bWVudGF0aW9uIGZvciBUYXVudXMuIElmIHlvdSYjMzk7dmUgbmV2ZXIgdXNlZCBpdCBiZWZvcmUsIHdlIHJlY29tbWVuZCBnb2luZyBvdmVyIHRoZSA8YSBocmVmPVxcXCIvZ2V0dGluZy1zdGFydGVkXFxcIj5HZXR0aW5nIFN0YXJ0ZWQ8L2E+IGd1aWRlIGJlZm9yZSBqdW1waW5nIGludG8gdGhlIEFQSSBkb2N1bWVudGF0aW9uLiBUaGF0IHdheSwgeW91JiMzOTtsbCBnZXQgYSBiZXR0ZXIgaWRlYSBvZiB3aGF0IHRvIGxvb2sgZm9yIGFuZCBob3cgdG8gcHV0IHRvZ2V0aGVyIHNpbXBsZSBhcHBsaWNhdGlvbnMgdXNpbmcgVGF1bnVzLCBiZWZvcmUgZ29pbmcgdGhyb3VnaCBkb2N1bWVudGF0aW9uIG9uIGV2ZXJ5IHB1YmxpYyBpbnRlcmZhY2UgdG8gVGF1bnVzLjwvcD5cXG48cD5UYXVudXMgZXhwb3NlcyA8ZW0+dGhyZWUgZGlmZmVyZW50IHB1YmxpYyBBUElzPC9lbT4sIGFuZCB0aGVyZSYjMzk7cyBhbHNvIDxzdHJvbmc+cGx1Z2lucyB0byBpbnRlZ3JhdGUgVGF1bnVzIGFuZCBhbiBIVFRQIHNlcnZlcjwvc3Ryb25nPi4gVGhpcyBkb2N1bWVudCBjb3ZlcnMgYWxsIHRocmVlIEFQSXMgZXh0ZW5zaXZlbHkuIElmIHlvdSYjMzk7cmUgY29uY2VybmVkIGFib3V0IHRoZSBpbm5lciB3b3JraW5ncyBvZiBUYXVudXMsIHBsZWFzZSByZWZlciB0byB0aGUgPGEgaHJlZj1cXFwiL2dldHRpbmctc3RhcnRlZFxcXCI+R2V0dGluZyBTdGFydGVkPC9hPiBndWlkZS4gVGhpcyBkb2N1bWVudCBhaW1zIHRvIG9ubHkgY292ZXIgaG93IHRoZSBwdWJsaWMgaW50ZXJmYWNlIGFmZmVjdHMgYXBwbGljYXRpb24gc3RhdGUsIGJ1dCA8c3Ryb25nPmRvZXNuJiMzOTt0IGRlbHZlIGludG8gaW1wbGVtZW50YXRpb24gZGV0YWlsczwvc3Ryb25nPi48L3A+XFxuPGgxIGlkPVxcXCJ0YWJsZS1vZi1jb250ZW50c1xcXCI+VGFibGUgb2YgQ29udGVudHM8L2gxPlxcbjx1bD5cXG48bGk+QSA8YSBocmVmPVxcXCIjc2VydmVyLXNpZGUtYXBpXFxcIj5zZXJ2ZXItc2lkZSBBUEk8L2E+IHRoYXQgZGVhbHMgd2l0aCBzZXJ2ZXItc2lkZSByZW5kZXJpbmc8dWw+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1tb3VudC1hZGRyb3V0ZS1vcHRpb25zLVxcXCI+PGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPjwvYT4gbWV0aG9kPHVsPlxcbjxsaT5JdHMgPGEgaHJlZj1cXFwiI3RoZS1vcHRpb25zLW9iamVjdFxcXCI+PGNvZGU+b3B0aW9uczwvY29kZT48L2E+IGFyZ3VtZW50PHVsPlxcbjxsaT48YSBocmVmPVxcXCIjLW9wdGlvbnMtbGF5b3V0LVxcXCI+PGNvZGU+bGF5b3V0PC9jb2RlPjwvYT48L2xpPlxcbjxsaT48YSBocmVmPVxcXCIjLW9wdGlvbnMtcm91dGVzLVxcXCI+PGNvZGU+cm91dGVzPC9jb2RlPjwvYT48L2xpPlxcbjxsaT48YSBocmVmPVxcXCIjLW9wdGlvbnMtZ2V0ZGVmYXVsdHZpZXdtb2RlbC1cXFwiPjxjb2RlPmdldERlZmF1bHRWaWV3TW9kZWw8L2NvZGU+PC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiMtb3B0aW9ucy1wbGFpbnRleHQtXFxcIj48Y29kZT5wbGFpbnRleHQ8L2NvZGU+PC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiMtb3B0aW9ucy1yZXNvbHZlcnMtXFxcIj48Y29kZT5yZXNvbHZlcnM8L2NvZGU+PC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiMtb3B0aW9ucy12ZXJzaW9uLVxcXCI+PGNvZGU+dmVyc2lvbjwvY29kZT48L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiIy1vcHRpb25zLWRlZmVybWluaWZpZWQtXFxcIj48Y29kZT5kZWZlck1pbmlmaWVkPC9jb2RlPjwvYT48L2xpPlxcbjwvdWw+XFxuPC9saT5cXG48bGk+SXRzIDxhIGhyZWY9XFxcIiMtYWRkcm91dGUtZGVmaW5pdGlvbi1cXFwiPjxjb2RlPmFkZFJvdXRlPC9jb2RlPjwvYT4gYXJndW1lbnQ8L2xpPlxcbjwvdWw+XFxuPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtdGF1bnVzLXJlbmRlci1hY3Rpb24tdmlld21vZGVsLXJlcS1yZXMtbmV4dC1cXFwiPjxjb2RlPnRhdW51cy5yZW5kZXI8L2NvZGU+PC9hPiBtZXRob2Q8L2xpPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiIy10YXVudXMtcmVzb2x2ZS1hY3Rpb24tZGF0YS1cXFwiPjxjb2RlPnRhdW51cy5yZXNvbHZlPC9jb2RlPjwvYT4gbWV0aG9kPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtdGF1bnVzLXJlZGlyZWN0LXJlcS1yZXMtdXJsLW9wdGlvbnMtXFxcIj48Y29kZT50YXVudXMucmVkaXJlY3Q8L2NvZGU+PC9hPiBtZXRob2Q8L2xpPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiIy10YXVudXMtcmVidWlsZGRlZmF1bHR2aWV3bW9kZWwtZG9uZS1cXFwiPjxjb2RlPnRhdW51cy5yZWJ1aWxkRGVmYXVsdFZpZXdNb2RlbDwvY29kZT48L2E+IG1ldGhvZDwvbGk+XFxuPC91bD5cXG48L2xpPlxcbjxsaT48YSBocmVmPVxcXCIjc2VydmVyLXNpZGUtY29udHJvbGxlcnNcXFwiPlNlcnZlci1zaWRlIGNvbnRyb2xsZXJzPC9hPjwvbGk+XFxuPGxpPkEgPGEgaHJlZj1cXFwiI2h0dHAtZnJhbWV3b3JrLXBsdWdpbnNcXFwiPnN1aXRlIG9mIHBsdWdpbnM8L2E+IGNhbiBpbnRlZ3JhdGUgVGF1bnVzIGFuZCBhbiBIVFRQIHNlcnZlcjx1bD5cXG48bGk+VXNpbmcgPGEgaHJlZj1cXFwiI3VzaW5nLXRhdW51cy1leHByZXNzLVxcXCI+PGNvZGU+dGF1bnVzLWV4cHJlc3M8L2NvZGU+PC9hPiBmb3IgPGEgaHJlZj1cXFwiaHR0cDovL2V4cHJlc3Nqcy5jb21cXFwiPkV4cHJlc3M8L2E+PC9saT5cXG48bGk+VXNpbmcgPGEgaHJlZj1cXFwiI3VzaW5nLXRhdW51cy1oYXBpLVxcXCI+PGNvZGU+dGF1bnVzLWhhcGk8L2NvZGU+PC9hPiBmb3IgPGEgaHJlZj1cXFwiaHR0cDovL2hhcGlqcy5jb21cXFwiPkhhcGk8L2E+PC9saT5cXG48L3VsPlxcbjwvbGk+XFxuPGxpPkEgPGEgaHJlZj1cXFwiI2NvbW1hbmQtbGluZS1pbnRlcmZhY2VcXFwiPkNMSSB0aGF0IHByb2R1Y2VzIGEgd2lyaW5nIG1vZHVsZTwvYT4gZm9yIHRoZSBjbGllbnQtc2lkZTx1bD5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtb3V0cHV0LVxcXCI+PGNvZGU+LS1vdXRwdXQ8L2NvZGU+PC9hPiBmbGFnPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtd2F0Y2gtXFxcIj48Y29kZT4tLXdhdGNoPC9jb2RlPjwvYT4gZmxhZzwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRyYW5zZm9ybS1tb2R1bGUtXFxcIj48Y29kZT4tLXRyYW5zZm9ybSAmbHQ7bW9kdWxlJmd0OzwvY29kZT48L2E+IGZsYWc8L2xpPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiIy1kZWZlci1hY3Rpb25zLVxcXCI+PGNvZGU+LS1kZWZlcjwvY29kZT48L2E+IGZsYWc8L2xpPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiIy1yZXNvbHZlcnMtbW9kdWxlLVxcXCI+PGNvZGU+LS1yZXNvbHZlcnMgJmx0O21vZHVsZSZndDs8L2NvZGU+PC9hPiBmbGFnPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtYnVuZGxlLVxcXCI+PGNvZGU+LS1idW5kbGU8L2NvZGU+PC9hPiBmbGFnPC9saT5cXG48L3VsPlxcbjwvbGk+XFxuPGxpPkEgPGEgaHJlZj1cXFwiI2NsaWVudC1zaWRlLWFwaVxcXCI+Y2xpZW50LXNpZGUgQVBJPC9hPiB0aGF0IGRlYWxzIHdpdGggY2xpZW50LXNpZGUgcmVuZGVyaW5nPHVsPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiIy10YXVudXMtbW91bnQtY29udGFpbmVyLXdpcmluZy1vcHRpb25zLVxcXCI+PGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPjwvYT4gbWV0aG9kPHVsPlxcbjxsaT5Vc2luZyB0aGUgPGEgaHJlZj1cXFwiI3VzaW5nLXRoZS1hdXRvLXN0cmF0ZWd5XFxcIj48Y29kZT5hdXRvPC9jb2RlPjwvYT4gc3RyYXRlZ3k8L2xpPlxcbjxsaT5Vc2luZyB0aGUgPGEgaHJlZj1cXFwiI3VzaW5nLXRoZS1pbmxpbmUtc3RyYXRlZ3lcXFwiPjxjb2RlPmlubGluZTwvY29kZT48L2E+IHN0cmF0ZWd5PC9saT5cXG48bGk+VXNpbmcgdGhlIDxhIGhyZWY9XFxcIiN1c2luZy10aGUtbWFudWFsLXN0cmF0ZWd5XFxcIj48Y29kZT5tYW51YWw8L2NvZGU+PC9hPiBzdHJhdGVneTwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNjYWNoaW5nXFxcIj5DYWNoaW5nPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNwcmVmZXRjaGluZ1xcXCI+UHJlZmV0Y2hpbmc8L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiI3ZlcnNpb25pbmdcXFwiPlZlcnNpb25pbmc8L2E+PC9saT5cXG48L3VsPlxcbjwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1vbi10eXBlLWZuLVxcXCI+PGNvZGU+dGF1bnVzLm9uPC9jb2RlPjwvYT4gbWV0aG9kPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtdGF1bnVzLW9uY2UtdHlwZS1mbi1cXFwiPjxjb2RlPnRhdW51cy5vbmNlPC9jb2RlPjwvYT4gbWV0aG9kPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtdGF1bnVzLW9mZi10eXBlLWZuLVxcXCI+PGNvZGU+dGF1bnVzLm9mZjwvY29kZT48L2E+IG1ldGhvZDwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1pbnRlcmNlcHQtYWN0aW9uLWZuLVxcXCI+PGNvZGU+dGF1bnVzLmludGVyY2VwdDwvY29kZT48L2E+IG1ldGhvZDwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1wYXJ0aWFsLWNvbnRhaW5lci1hY3Rpb24tbW9kZWwtXFxcIj48Y29kZT50YXVudXMucGFydGlhbDwvY29kZT48L2E+IG1ldGhvZDwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1uYXZpZ2F0ZS11cmwtb3B0aW9ucy1cXFwiPjxjb2RlPnRhdW51cy5uYXZpZ2F0ZTwvY29kZT48L2E+IG1ldGhvZDwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1yb3V0ZS11cmwtXFxcIj48Y29kZT50YXVudXMucm91dGU8L2NvZGU+PC9hPiBtZXRob2Q8dWw+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1yb3V0ZS1lcXVhbHMtcm91dGUtcm91dGUtXFxcIj48Y29kZT50YXVudXMucm91dGUuZXF1YWxzPC9jb2RlPjwvYT4gbWV0aG9kPC9saT5cXG48L3VsPlxcbjwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy1yZWRpcmVjdC1vcHRpb25zLVxcXCI+PGNvZGU+dGF1bnVzLnJlZGlyZWN0PC9jb2RlPjwvYT4gbWV0aG9kPC9saT5cXG48bGk+VGhlIDxhIGhyZWY9XFxcIiMtdGF1bnVzLXJlc29sdmUtb24tdGhlLWNsaWVudFxcXCI+PGNvZGU+dGF1bnVzLnJlc29sdmU8L2NvZGU+PC9hPiBtZXRob2Q8L2xpPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiIy10YXVudXMtc3RhdGUtXFxcIj48Y29kZT50YXVudXMuc3RhdGU8L2NvZGU+PC9hPiBwcm9wZXJ0eTwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjLXRhdW51cy14aHItdXJsLW9wdGlvbnMtZG9uZS1cXFwiPjxjb2RlPnRhdW51cy54aHI8L2NvZGU+PC9hPiBtZXRob2Q8L2xpPlxcbjxsaT5UaGUgPGEgaHJlZj1cXFwiI3VzaW5nLXRhdW51cy1wcmVmZXRjaC11cmwtZWxlbWVudC1cXFwiPjxjb2RlPnRhdW51cy5wcmVmZXRjaDwvY29kZT48L2E+IG1ldGhvZDwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNkZWJ1Z2dpbmctdGF1bnVzXFxcIj5EZWJ1Z2dpbmcgVGF1bnVzPC9hPjwvbGk+XFxuPC91bD5cXG48L2xpPlxcbjxsaT48YSBocmVmPVxcXCIjY2xpZW50LXNpZGUtY29udHJvbGxlcnNcXFwiPkNsaWVudC1zaWRlIGNvbnRyb2xsZXJzPC9hPjwvbGk+XFxuPGxpPlRoZSA8YSBocmVmPVxcXCIjdGhlLXRhdW51c3JjLW1hbmlmZXN0XFxcIj48Y29kZT4udGF1bnVzcmM8L2NvZGU+PC9hPiBtYW5pZmVzdDwvbGk+XFxuPC91bD5cXG48aDEgaWQ9XFxcInNlcnZlci1zaWRlLWFwaVxcXCI+U2VydmVyLXNpZGUgQVBJPC9oMT5cXG48cD5UaGUgc2VydmVyLXNpZGUgQVBJIGlzIHVzZWQgdG8gc2V0IHVwIHRoZSB2aWV3IHJvdXRlci4gSXQgdGhlbiBnZXRzIG91dCBvZiB0aGUgd2F5LCBhbGxvd2luZyB0aGUgY2xpZW50LXNpZGUgdG8gZXZlbnR1YWxseSB0YWtlIG92ZXIgYW5kIGFkZCBhbnkgZXh0cmEgc3VnYXIgb24gdG9wLCA8ZW0+aW5jbHVkaW5nIGNsaWVudC1zaWRlIHJlbmRlcmluZzwvZW0+LjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi10YXVudXMtbW91bnQtYWRkcm91dGUtb3B0aW9ucy1cXFwiPjxjb2RlPnRhdW51cy5tb3VudChhZGRSb3V0ZSwgb3B0aW9ucz8pPC9jb2RlPjwvaDI+XFxuPHA+TW91bnRzIFRhdW51cyBvbiB0b3Agb2YgYSBzZXJ2ZXItc2lkZSByb3V0ZXIsIGJ5IHJlZ2lzdGVyaW5nIGVhY2ggcm91dGUgaW4gPGNvZGU+b3B0aW9ucy5yb3V0ZXM8L2NvZGU+IHdpdGggdGhlIDxjb2RlPmFkZFJvdXRlPC9jb2RlPiBtZXRob2QuPC9wPlxcbjxibG9ja3F1b3RlPlxcbjxwPk5vdGUgdGhhdCBtb3N0IG9mIHRoZSB0aW1lLCA8c3Ryb25nPnRoaXMgbWV0aG9kIHNob3VsZG4mIzM5O3QgYmUgaW52b2tlZCBkaXJlY3RseTwvc3Ryb25nPiwgYnV0IHJhdGhlciB0aHJvdWdoIG9uZSBvZiB0aGUgPGEgaHJlZj1cXFwiI2h0dHAtZnJhbWV3b3JrLXBsdWdpbnNcXFwiPkhUVFAgZnJhbWV3b3JrIHBsdWdpbnM8L2E+IHByZXNlbnRlZCBiZWxvdy48L3A+XFxuPC9ibG9ja3F1b3RlPlxcbjxwPkhlcmUmIzM5O3MgYW4gaW5jb21wbGV0ZSBleGFtcGxlIG9mIGhvdyB0aGlzIG1ldGhvZCBtYXkgYmUgdXNlZC4gSXQgaXMgaW5jb21wbGV0ZSBiZWNhdXNlIHJvdXRlIGRlZmluaXRpb25zIGhhdmUgbW9yZSBvcHRpb25zIGJleW9uZCB0aGUgPGNvZGU+cm91dGU8L2NvZGU+IGFuZCA8Y29kZT5hY3Rpb248L2NvZGU+IHByb3BlcnRpZXMuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbnRhdW51cy5tb3VudChhZGRSb3V0ZSwge1xcbiAgcm91dGVzOiBbeyByb3V0ZTogJiMzOTsvJiMzOTssIGFjdGlvbjogJiMzOTtob21lL2luZGV4JiMzOTsgfV1cXG59KTtcXG5cXG5mdW5jdGlvbiBhZGRSb3V0ZSAoZGVmaW5pdGlvbikge1xcbiAgYXBwLmdldChkZWZpbml0aW9uLnJvdXRlLCBkZWZpbml0aW9uLmFjdGlvbik7XFxufVxcbjwvY29kZT48L3ByZT5cXG48cD5MZXQmIzM5O3MgZ28gb3ZlciB0aGUgb3B0aW9ucyB5b3UgY2FuIHBhc3MgdG8gPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPiBmaXJzdC48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGg0IGlkPVxcXCJ0aGUtb3B0aW9ucy1vYmplY3RcXFwiPlRoZSA8Y29kZT5vcHRpb25zPzwvY29kZT4gb2JqZWN0PC9oND5cXG48cD5UaGVyZSYjMzk7cyBhIGZldyBvcHRpb25zIHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgc2VydmVyLXNpZGUgbW91bnRwb2ludC4gWW91JiMzOTtyZSBwcm9iYWJseSBnb2luZyB0byBiZSBwYXNzaW5nIHRoZXNlIHRvIHlvdXIgPGEgaHJlZj1cXFwiI2h0dHAtZnJhbWV3b3JrLXBsdWdpbnNcXFwiPkhUVFAgZnJhbWV3b3JrIHBsdWdpbjwvYT4sIHJhdGhlciB0aGFuIHVzaW5nIDxjb2RlPnRhdW51cy5tb3VudDwvY29kZT4gZGlyZWN0bHkuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNiBpZD1cXFwiLW9wdGlvbnMtbGF5b3V0LVxcXCI+PGNvZGU+b3B0aW9ucy5sYXlvdXQ/PC9jb2RlPjwvaDY+XFxuPHA+VGhlIDxjb2RlPmxheW91dDwvY29kZT4gcHJvcGVydHkgaXMgZXhwZWN0ZWQgdG8gaGF2ZSB0aGUgPGNvZGU+ZnVuY3Rpb24oZGF0YSk8L2NvZGU+IHNpZ25hdHVyZS4gSXQmIzM5O2xsIGJlIGludm9rZWQgd2hlbmV2ZXIgYSBmdWxsIEhUTUwgZG9jdW1lbnQgbmVlZHMgdG8gYmUgcmVuZGVyZWQsIGFuZCBhIDxjb2RlPmRhdGE8L2NvZGU+IG9iamVjdCB3aWxsIGJlIHBhc3NlZCB0byBpdC4gVGhhdCBvYmplY3Qgd2lsbCBjb250YWluIGV2ZXJ5dGhpbmcgeW91JiMzOTt2ZSBzZXQgYXMgdGhlIHZpZXcgbW9kZWwsIHBsdXMgYSA8Y29kZT5wYXJ0aWFsPC9jb2RlPiBwcm9wZXJ0eSBjb250YWluaW5nIHRoZSByYXcgSFRNTCBvZiB0aGUgcmVuZGVyZWQgcGFydGlhbCB2aWV3LiBZb3VyIDxjb2RlPmxheW91dDwvY29kZT4gbWV0aG9kIHdpbGwgdHlwaWNhbGx5IHdyYXAgdGhlIHJhdyBIVE1MIGZvciB0aGUgcGFydGlhbCB3aXRoIHRoZSBiYXJlIGJvbmVzIG9mIGFuIEhUTUwgZG9jdW1lbnQuIENoZWNrIG91dCA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vcG9ueWZvby9wb255Zm9vL2Jsb2IvMzMyNzE3NTEzMTJkYjZlOTIwNTlkOTgyOTNkMGE3YWM2ZTllOGU1Yi92aWV3cy9zZXJ2ZXIvbGF5b3V0L2xheW91dC5qYWRlXFxcIj50aGUgPGNvZGU+bGF5b3V0LmphZGU8L2NvZGU+IHVzZWQgaW4gUG9ueSBGb288L2E+IGFzIGFuIGV4YW1wbGUuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNiBpZD1cXFwiLW9wdGlvbnMtcm91dGVzLVxcXCI+PGNvZGU+b3B0aW9ucy5yb3V0ZXM8L2NvZGU+PC9oNj5cXG48cD5UaGUgb3RoZXIgYmlnIG9wdGlvbiBpcyA8Y29kZT5yb3V0ZXM8L2NvZGU+LCB3aGljaCBleHBlY3RzIGEgY29sbGVjdGlvbiBvZiByb3V0ZSBkZWZpbml0aW9ucy4gUm91dGUgZGVmaW5pdGlvbnMgdXNlIGEgbnVtYmVyIG9mIHByb3BlcnRpZXMgdG8gZGV0ZXJtaW5lIGhvdyB0aGUgcm91dGUgaXMgZ29pbmcgdG8gYmVoYXZlLjwvcD5cXG48cD5IZXJlJiMzOTtzIGFuIGV4YW1wbGUgcm91dGUgdGhhdCB1c2VzIHRoZSA8YSBocmVmPVxcXCJodHRwOi8vZXhwcmVzc2pzLmNvbVxcXCI+RXhwcmVzczwvYT4gcm91dGluZyBzY2hlbWUuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPntcXG4gIHJvdXRlOiAmIzM5Oy9hcnRpY2xlcy86c2x1ZyYjMzk7LFxcbiAgYWN0aW9uOiAmIzM5O2FydGljbGVzL2FydGljbGUmIzM5OyxcXG4gIGlnbm9yZTogZmFsc2UsXFxuICBjYWNoZTogJmx0O2luaGVyaXQmZ3Q7XFxufVxcbjwvY29kZT48L3ByZT5cXG48dWw+XFxuPGxpPjxjb2RlPnJvdXRlPC9jb2RlPiBpcyBhIHJvdXRlIGluIHRoZSBmb3JtYXQgeW91ciBIVFRQIGZyYW1ld29yayBvZiBjaG9pY2UgdW5kZXJzdGFuZHM8L2xpPlxcbjxsaT48Y29kZT5hY3Rpb248L2NvZGU+IGlzIHRoZSBuYW1lIG9mIHlvdXIgY29udHJvbGxlciBhY3Rpb24uIEl0JiMzOTtsbCBiZSB1c2VkIHRvIGZpbmQgdGhlIHNlcnZlci1zaWRlIGNvbnRyb2xsZXIsIHRoZSBkZWZhdWx0IHZpZXcgdGhhdCBzaG91bGQgYmUgdXNlZCB3aXRoIHRoaXMgcm91dGUsIGFuZCB0aGUgY2xpZW50LXNpZGUgY29udHJvbGxlcjwvbGk+XFxuPGxpPjxjb2RlPmNhY2hlPC9jb2RlPiBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGNsaWVudC1zaWRlIGNhY2hpbmcgYmVoYXZpb3IgaW4gdGhpcyBhcHBsaWNhdGlvbiBwYXRoLCBhbmQgaXQmIzM5O2xsIGRlZmF1bHQgdG8gaW5oZXJpdGluZyBmcm9tIHRoZSBvcHRpb25zIHBhc3NlZCB0byA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IDxlbT5vbiB0aGUgY2xpZW50LXNpZGU8L2VtPjwvbGk+XFxuPGxpPjxjb2RlPmlnbm9yZTwvY29kZT4gaXMgdXNlZCBpbiB0aG9zZSBjYXNlcyB3aGVyZSB5b3Ugd2FudCBhIFVSTCB0byBiZSBpZ25vcmVkIGJ5IHRoZSBjbGllbnQtc2lkZSByb3V0ZXIgZXZlbiBpZiB0aGVyZSYjMzk7cyBhIGNhdGNoLWFsbCByb3V0ZSB0aGF0IHdvdWxkIG1hdGNoIHRoYXQgVVJMPC9saT5cXG48L3VsPlxcbjxwPkFzIGFuIGV4YW1wbGUgb2YgdGhlIDxjb2RlPmlnbm9yZTwvY29kZT4gdXNlIGNhc2UsIGNvbnNpZGVyIHRoZSByb3V0aW5nIHRhYmxlIHNob3duIGJlbG93LiBUaGUgY2xpZW50LXNpZGUgcm91dGVyIGRvZXNuJiMzOTt0IGtub3cgPGVtPihhbmQgY2FuJiMzOTt0IGtub3cgdW5sZXNzIHlvdSBwb2ludCBpdCBvdXQpPC9lbT4gd2hhdCByb3V0ZXMgYXJlIHNlcnZlci1zaWRlIG9ubHksIGFuZCBpdCYjMzk7cyB1cCB0byB5b3UgdG8gcG9pbnQgdGhvc2Ugb3V0LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj5bXFxuICB7IHJvdXRlOiAmIzM5Oy8mIzM5OywgYWN0aW9uOiAmIzM5Oy9ob21lL2luZGV4JiMzOTsgfSxcXG4gIHsgcm91dGU6ICYjMzk7L2ZlZWQmIzM5OywgaWdub3JlOiB0cnVlIH0sXFxuICB7IHJvdXRlOiAmIzM5Oy8qJiMzOTssIGFjdGlvbjogJiMzOTtlcnJvci9ub3QtZm91bmQmIzM5OyB9XFxuXVxcbjwvY29kZT48L3ByZT5cXG48cD5UaGlzIHN0ZXAgaXMgbmVjZXNzYXJ5IHdoZW5ldmVyIHlvdSBoYXZlIGFuIGFuY2hvciBsaW5rIHBvaW50ZWQgYXQgc29tZXRoaW5nIGxpa2UgYW4gUlNTIGZlZWQuIFRoZSA8Y29kZT5pZ25vcmU8L2NvZGU+IHByb3BlcnR5IGlzIGVmZmVjdGl2ZWx5IHRlbGxpbmcgdGhlIGNsaWVudC1zaWRlIDxlbT4mcXVvdDtkb24mIzM5O3QgaGlqYWNrIGxpbmtzIGNvbnRhaW5pbmcgdGhpcyBVUkwmcXVvdDs8L2VtPi48L3A+XFxuPHA+UGxlYXNlIG5vdGUgdGhhdCBleHRlcm5hbCBsaW5rcyBhcmUgbmV2ZXIgaGlqYWNrZWQuIE9ubHkgc2FtZS1vcmlnaW4gbGlua3MgY29udGFpbmluZyBhIFVSTCB0aGF0IG1hdGNoZXMgb25lIG9mIHRoZSByb3V0ZXMgd2lsbCBiZSBoaWphY2tlZCBieSBUYXVudXMuIEV4dGVybmFsIGxpbmtzIGRvbiYjMzk7dCBuZWVkIHRvIGJlIDxjb2RlPmlnbm9yZTwvY29kZT5kLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDYgaWQ9XFxcIi1vcHRpb25zLWdldGRlZmF1bHR2aWV3bW9kZWwtXFxcIj48Y29kZT5vcHRpb25zLmdldERlZmF1bHRWaWV3TW9kZWw/PC9jb2RlPjwvaDY+XFxuPHA+VGhlIDxjb2RlPmdldERlZmF1bHRWaWV3TW9kZWwoZG9uZSk8L2NvZGU+IHByb3BlcnR5IGNhbiBiZSBhIG1ldGhvZCB0aGF0IHB1dHMgdG9nZXRoZXIgdGhlIGJhc2UgdmlldyBtb2RlbCwgd2hpY2ggd2lsbCB0aGVuIGJlIGV4dGVuZGVkIG9uIGFuIGFjdGlvbi1ieS1hY3Rpb24gYmFzaXMuIFdoZW4geW91JiMzOTtyZSBkb25lIGNyZWF0aW5nIGEgdmlldyBtb2RlbCwgeW91IGNhbiBpbnZva2UgPGNvZGU+ZG9uZShudWxsLCBtb2RlbCk8L2NvZGU+LiBJZiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgYnVpbGRpbmcgdGhlIHZpZXcgbW9kZWwsIHlvdSBzaG91bGQgY2FsbCA8Y29kZT5kb25lKGVycik8L2NvZGU+IGluc3RlYWQuPC9wPlxcbjxwPlRhdW51cyB3aWxsIHRocm93IGFuIGVycm9yIGlmIDxjb2RlPmRvbmU8L2NvZGU+IGlzIGludm9rZWQgd2l0aCBhbiBlcnJvciwgc28geW91IG1pZ2h0IHdhbnQgdG8gcHV0IHNhZmVndWFyZHMgaW4gcGxhY2UgYXMgdG8gYXZvaWQgdGhhdCBmcm9tIGhhcHBlbm5pbmcuIFRoZSByZWFzb24gdGhpcyBtZXRob2QgaXMgYXN5bmNocm9ub3VzIGlzIGJlY2F1c2UgeW91IG1heSBuZWVkIGRhdGFiYXNlIGFjY2VzcyBvciBzb21lc3VjaCB3aGVuIHB1dHRpbmcgdG9nZXRoZXIgdGhlIGRlZmF1bHRzLiBUaGUgcmVhc29uIHRoaXMgaXMgYSBtZXRob2QgYW5kIG5vdCBqdXN0IGFuIG9iamVjdCBpcyB0aGF0IHRoZSBkZWZhdWx0cyBtYXkgY2hhbmdlIGR1ZSB0byBodW1hbiBpbnRlcmFjdGlvbiB3aXRoIHRoZSBhcHBsaWNhdGlvbiwgYW5kIGluIHRob3NlIGNhc2VzIDxhIGhyZWY9XFxcIiN0YXVudXMtcmVidWlsZGRlZmF1bHR2aWV3bW9kZWxcXFwiPnRoZSBkZWZhdWx0cyBjYW4gYmUgcmVidWlsdDwvYT4uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNiBpZD1cXFwiLW9wdGlvbnMtcGxhaW50ZXh0LVxcXCI+PGNvZGU+b3B0aW9ucy5wbGFpbnRleHQ/PC9jb2RlPjwvaDY+XFxuPHA+VGhlIDxjb2RlPnBsYWludGV4dDwvY29kZT4gb3B0aW9ucyBvYmplY3QgaXMgcGFzc2VkIGRpcmVjdGx5IHRvIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9oZ2V0XFxcIj5oZ2V0PC9hPiwgYW5kIGl0JiMzOTtzIHVzZWQgdG8gPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL3Bvbnlmb28vcG9ueWZvby9ibG9iL2Y2ZDZiNTA2OGZmMDNhMzg3ZjUwMzkwMDE2MGQ5ZmRjMWU3NDk3NTAvY29udHJvbGxlcnMvcm91dGluZy5qcyNMNzAtTDcyXFxcIj50d2VhayB0aGUgcGxhaW50ZXh0IHZlcnNpb248L2E+IG9mIHlvdXIgc2l0ZS48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGg2IGlkPVxcXCItb3B0aW9ucy1yZXNvbHZlcnMtXFxcIj48Y29kZT5vcHRpb25zLnJlc29sdmVycz88L2NvZGU+PC9oNj5cXG48cD5SZXNvbHZlcnMgYXJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBsb2NhdGlvbiBvZiBzb21lIG9mIHRoZSBkaWZmZXJlbnQgcGllY2VzIG9mIHlvdXIgYXBwbGljYXRpb24uIFR5cGljYWxseSB5b3Ugd29uJiMzOTt0IGhhdmUgdG8gdG91Y2ggdGhlc2UgaW4gdGhlIHNsaWdodGVzdC48L3A+XFxuPHRhYmxlPlxcbjx0aGVhZD5cXG48dHI+XFxuPHRoPlNpZ25hdHVyZTwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+Z2V0U2VydmVyQ29udHJvbGxlcihhY3Rpb24pPC9jb2RlPjwvdGQ+XFxuPHRkPlJldHVybiBwYXRoIHRvIHNlcnZlci1zaWRlIGNvbnRyb2xsZXIgYWN0aW9uIGhhbmRsZXIgbW9kdWxlPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+Z2V0VmlldyhhY3Rpb24pPC9jb2RlPjwvdGQ+XFxuPHRkPlJldHVybiBwYXRoIHRvIHZpZXcgdGVtcGxhdGUgbW9kdWxlPC90ZD5cXG48L3RyPlxcbjwvdGJvZHk+XFxuPC90YWJsZT5cXG48cD5UaGUgPGNvZGU+YWRkUm91dGU8L2NvZGU+IG1ldGhvZCBwYXNzZWQgdG8gPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPiBvbiB0aGUgc2VydmVyLXNpZGUgaXMgbW9zdGx5IGdvaW5nIHRvIGJlIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgSFRUUCBmcmFtZXdvcmsgcGx1Z2lucywgc28gZmVlbCBmcmVlIHRvIHNraXAgb3ZlciB0aGUgZm9sbG93aW5nIHNlY3Rpb24uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNiBpZD1cXFwiLW9wdGlvbnMtdmVyc2lvbi1cXFwiPjxjb2RlPm9wdGlvbnMudmVyc2lvbj88L2NvZGU+PC9oNj5cXG48cD5SZWZlciB0byB0aGUgPGEgaHJlZj1cXFwiI3ZlcnNpb25pbmdcXFwiPlZlcnNpb25pbmc8L2E+IHNlY3Rpb24uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNiBpZD1cXFwiLW9wdGlvbnMtZ2V0cGFydGlhbC1cXFwiPjxjb2RlPm9wdGlvbnMuZ2V0UGFydGlhbD88L2NvZGU+PC9oNj5cXG48cD5CeSBkZWZhdWx0LCBUYXVudXMgd2lsbCByZW5kZXIgcGFydGlhbHMgb24gdGhlIHNlcnZlci1zaWRlIGJ5IGxvb2tpbmcgdXAgdGhlIG1vZHVsZSBmb3IgYW4gYWN0aW9uIG1ldGhvZCwgYW5kIGNhbGxpbmcgdGhhdCBhY3Rpb24gcGFzc2luZyBpbiBhIG1vZGVsLjwvcD5cXG48cD5Zb3UgY2FuIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGJ5IHNldHRpbmcgPGNvZGU+b3B0aW9ucy5nZXRQYXJ0aWFsPC9jb2RlPiB0byBhIGZ1bmN0aW9uLiBUaGlzIG1ldGhvZCB0YWtlcyB0aHJlZSBwYXJhbWV0ZXJzLjwvcD5cXG48dWw+XFxuPGxpPjxjb2RlPmFjdGlvbjwvY29kZT4gaXMgdGhlIGFjdGlvbiB0aGF0IG5lZWRzIHRvIGJlIHJlbmRlcmVkPC9saT5cXG48bGk+PGNvZGU+bW9kZWw8L2NvZGU+IGlzIHRoZSBtb2RlbCB5b3UgY2FuIHVzZSB0byByZW5kZXIgdGhlIHZpZXcgZm9yIHRoYXQgYWN0aW9uPC9saT5cXG48bGk+PGNvZGU+ZG9uZShlcnIsIGh0bWwpPC9jb2RlPiBpcyBjYWxsZWQgd2hlbiB5b3UmIzM5O3JlIGRvbmUsIHBhc3NpbmcgaW4gdGhlIHJlc3VsdGluZyA8Y29kZT5odG1sPC9jb2RlPiBmb3IgdGhlIHBhcnRpYWw8L2xpPlxcbjwvdWw+XFxuPHA+Tm90ZSB0aGF0IGlmIHlvdSBkb24mIzM5O3Qgc2V0IDxjb2RlPmdldFBhcnRpYWw8L2NvZGU+LCBUYXVudXMgd2lsbCBqdXN0IHJlcXVpcmUgeW91ciBjb250cm9sbGVyIGFjdGlvbiBtZXRob2QgYW5kIGludm9rZSB0aGF0IGluc3RlYWQuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNiBpZD1cXFwiLW9wdGlvbnMtZGVmZXJtaW5pZmllZC1cXFwiPjxjb2RlPm9wdGlvbnMuZGVmZXJNaW5pZmllZD88L2NvZGU+PC9oNj5cXG48cD5XaGVuIHZpZXdzIGFuZCBjb250cm9sbGVycyBhcmUgbGF6aWx5IGxvYWRlZCwgdGhleSBhcmUgY29tcGlsZWQgYW5kIGJ1bmRsZWQgdXNpbmcgQnJvd3NlcmlmeS4gVGF1bnVzIHdpbGwgZXZlbiBwcm9kdWNlIGEgc291cmNlIG1hcC4gVG8gYXZvaWQgdGhlIHNvdXJjZSBtYXAsIGFuZCBtaW5pZnkgdGhlIGJ1bmRsZSBpbnN0ZWFkLCBzZXQgPGNvZGU+ZGVmZXJNaW5pZmllZDwvY29kZT4gdG8gPGNvZGU+dHJ1ZTwvY29kZT4uPC9wPlxcbjxwPllvdSYjMzk7bGwgcHJvYmFibHkgd2FudCB0byBzZXQgPGNvZGU+ZGVmZXJNaW5pZmllZDwvY29kZT4gdG8gd2hldGhlciB0aGUgYXBwbGljYXRpb24gaXMgcnVubmluZyBvbiB0aGUgcHJvZHVjdGlvbiBlbnZpcm9ubWVudC48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGg0IGlkPVxcXCItYWRkcm91dGUtZGVmaW5pdGlvbi1cXFwiPjxjb2RlPmFkZFJvdXRlKGRlZmluaXRpb24pPC9jb2RlPjwvaDQ+XFxuPHA+VGhlIDxjb2RlPmFkZFJvdXRlKGRlZmluaXRpb24pPC9jb2RlPiBtZXRob2Qgd2lsbCBiZSBwYXNzZWQgYSByb3V0ZSBkZWZpbml0aW9uLCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcy4gVGhpcyBtZXRob2QgaXMgZXhwZWN0ZWQgdG8gcmVnaXN0ZXIgYSByb3V0ZSBpbiB5b3VyIEhUVFAgZnJhbWV3b3JrJiMzOTtzIHJvdXRlci48L3A+XFxuPHVsPlxcbjxsaT48Y29kZT5yb3V0ZTwvY29kZT4gaXMgdGhlIHJvdXRlIHRoYXQgeW91IHNldCBhcyA8Y29kZT5kZWZpbml0aW9uLnJvdXRlPC9jb2RlPjwvbGk+XFxuPGxpPjxjb2RlPmFjdGlvbjwvY29kZT4gaXMgdGhlIGFjdGlvbiBhcyBwYXNzZWQgdG8gdGhlIHJvdXRlIGRlZmluaXRpb248L2xpPlxcbjxsaT48Y29kZT5hY3Rpb25GbjwvY29kZT4gd2lsbCBiZSB0aGUgY29udHJvbGxlciBmb3IgdGhpcyBhY3Rpb24gbWV0aG9kPC9saT5cXG48bGk+PGNvZGU+bWlkZGxld2FyZTwvY29kZT4gd2lsbCBiZSBhbiBhcnJheSBvZiBtZXRob2RzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSA8Y29kZT5hY3Rpb25GbjwvY29kZT48L2xpPlxcbjwvdWw+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLXJlbmRlci1hY3Rpb24tdmlld21vZGVsLXJlcS1yZXMtbmV4dC1cXFwiPjxjb2RlPnRhdW51cy5yZW5kZXIoYWN0aW9uLCB2aWV3TW9kZWwsIHJlcSwgcmVzLCBuZXh0KTwvY29kZT48L2gyPlxcbjxwPlRoaXMgbWV0aG9kIGlzIGFsbW9zdCBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWwgYXMgeW91IHNob3VsZCBiZSB1c2luZyBUYXVudXMgdGhyb3VnaCBvbmUgb2YgdGhlIHBsdWdpbnMgYW55d2F5cywgc28gd2Ugd29uJiMzOTt0IGdvIHZlcnkgZGVlcCBpbnRvIGl0LjwvcD5cXG48cD5UaGUgcmVuZGVyIG1ldGhvZCBpcyB3aGF0IFRhdW51cyB1c2VzIHRvIHJlbmRlciB2aWV3cyBieSBjb25zdHJ1Y3RpbmcgSFRNTCwgSlNPTiwgb3IgcGxhaW50ZXh0IHJlc3BvbnNlcy4gVGhlIDxjb2RlPmFjdGlvbjwvY29kZT4gcHJvcGVydHkgZGV0ZXJtaW5lcyB0aGUgZGVmYXVsdCB2aWV3IHRoYXQgd2lsbCBiZSByZW5kZXJlZC4gVGhlIDxjb2RlPnZpZXdNb2RlbDwvY29kZT4gd2lsbCBiZSBleHRlbmRlZCBieSA8YSBocmVmPVxcXCIjLW9wdGlvbnMtZ2V0ZGVmYXVsdHZpZXdtb2RlbC1cXFwiPnRoZSBkZWZhdWx0IHZpZXcgbW9kZWw8L2E+LCBhbmQgaXQgbWF5IGFsc28gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgPGNvZGU+YWN0aW9uPC9jb2RlPiBieSBzZXR0aW5nIDxjb2RlPnZpZXdNb2RlbC5tb2RlbC5hY3Rpb248L2NvZGU+LjwvcD5cXG48cD5UaGUgPGNvZGU+cmVxPC9jb2RlPiwgPGNvZGU+cmVzPC9jb2RlPiwgYW5kIDxjb2RlPm5leHQ8L2NvZGU+IGFyZ3VtZW50cyBhcmUgZXhwZWN0ZWQgdG8gYmUgdGhlIEV4cHJlc3Mgcm91dGluZyBhcmd1bWVudHMsIGJ1dCB0aGV5IGNhbiBhbHNvIGJlIG1vY2tlZCA8ZW0+KHdoaWNoIGlzIGluIGZhY3Qgd2hhdCB0aGUgSGFwaSBwbHVnaW4gZG9lcyk8L2VtPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLXJlYnVpbGRkZWZhdWx0dmlld21vZGVsLWRvbmUtXFxcIj48Y29kZT50YXVudXMucmVidWlsZERlZmF1bHRWaWV3TW9kZWwoZG9uZT8pPC9jb2RlPjwvaDI+XFxuPHA+T25jZSBUYXVudXMgaGFzIGJlZW4gbW91bnRlZCwgY2FsbGluZyB0aGlzIG1ldGhvZCB3aWxsIHJlYnVpbGQgdGhlIHZpZXcgbW9kZWwgZGVmYXVsdHMgdXNpbmcgdGhlIDxjb2RlPmdldERlZmF1bHRWaWV3TW9kZWw8L2NvZGU+IHRoYXQgd2FzIHBhc3NlZCB0byA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IGluIHRoZSBvcHRpb25zLiBBbiBvcHRpb25hbCA8Y29kZT5kb25lPC9jb2RlPiBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgbW9kZWwgaXMgcmVidWlsdC48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLXJlc29sdmUtYWN0aW9uLWRhdGEtXFxcIj48Y29kZT50YXVudXMucmVzb2x2ZShhY3Rpb24sIGRhdGE/KTwvY29kZT48L2gyPlxcbjxwPlJldHVybnMgdGhlIGZpcnN0IHJvdXRlIHRoYXQgbWF0Y2hlcyBhbiA8Y29kZT5hY3Rpb248L2NvZGU+LCByZXBsYWNpbmcgbmFtZWQgcGFyYW1ldGVycyB3aXRoIGRhdGEgZnJvbSB0aGUgPGNvZGU+ZGF0YTwvY29kZT4gb2JqZWN0LiBJZiBhIG1hdGNoaW5nIHJvdXRlIGlzIG5vdCBmb3VuZCwgPGNvZGU+bnVsbDwvY29kZT4gaXMgcmV0dXJuZWQuPC9wPlxcbjxibG9ja3F1b3RlPlxcbjxwPklmIGEgcm91dGUgaXMgbWF0Y2hlZCBidXQgYSByZXF1aXJlZCBuYW1lZCBwYXJhbWV0ZXIgaXNuJiMzOTt0IGluIDxjb2RlPmRhdGE8L2NvZGU+LCA8c3Ryb25nPmFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bjwvc3Ryb25nPi48L3A+XFxuPC9ibG9ja3F1b3RlPlxcbjxwPlRoaXMgbWV0aG9kIGlzIG1vc3QgdXNlZnVsIHdoZW4gY29tcG9zaW5nIHRoZSBVUkwgZm9yIGEgcmVkaXJlY3Qgb3IgYW4gYWN0aW9uIGxpbmsgd2l0aGluIGEgdGVtcGxhdGUsIGFzIGEgbWVhbnMgdG8ga2VlcCB0aGUgcm91dGUgZGVjbGFyYXRpb24gaXNvbGF0ZWQgZnJvbSB0aGUgcm91dGUgaXRzZWxmLiBJZiB0aGUgcm91dGUgY2hhbmdlcywgdGhlIG1ldGhvZCB3aWxsIHJlZmxlY3QgdGhlIG5ld2VyIHJvdXRlIGFzIGxvbmcgYXMgdGhlIHBhcmFtZXRlcnMgc3RheSB0aGUgc2FtZSwgcmVzdWx0aW5nIGluIGluY3JlYXNlZCBtYWludGFpbmFiaWxpdHkuIDxlbT5UaGUgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBib3RoIGxheW91dCB0ZW1wbGF0ZXMgYW5kIHBhcnRpYWwgdmlldyB0ZW1wbGF0ZXMuPC9lbT48L3A+XFxuPGg2IGlkPVxcXCJleGFtcGxlXFxcIj5FeGFtcGxlPC9oNj5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj50YXVudXMucmVzb2x2ZSgmIzM5O3Byb2plY3RzL3Byb2plY3QmIzM5Oywge1xcbiAgbmFtZTogJiMzOTtwdXBwaWVzJiMzOTssIG9yZ2FuaXphdGlvbjogJiMzOTtjYW5pdXNlJiMzOTtcXG59KTtcXG4vLyAmbHQ7LSAvcC9jYW5pdXNlL3B1cHBpZXNcXG48L2NvZGU+PC9wcmU+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLXJlZGlyZWN0LXJlcS1yZXMtdXJsLW9wdGlvbnMtXFxcIj48Y29kZT50YXVudXMucmVkaXJlY3QocmVxLCByZXMsIHVybCwgb3B0aW9ucz8pPC9jb2RlPjwvaDI+XFxuPHA+UmVkaXJlY3RzIHRoZSByZXNwb25zZSB0byBhIGRpZmZlcmVudCBVUkwuIElmIHRoZSByZXF1ZXN0IGFjY2VwdHMgSFRNTCwgdGhpcyBtZXRob2QgaXMgZXF1aXZhbGVudCB0byA8Y29kZT5yZXMucmVkaXJlY3QodXJsKTwvY29kZT4uIElmIHRoZSByZXF1ZXN0IGFjY2VwdHMgSlNPTiwgYSBzcGVjaWFsbHkgY3JhZnRlZCBKU09OIHJlc3BvbnNlIHdpbGwgdHJpZ2dlciBhIGNsaWVudC1zaWRlIHJlZGlyZWN0IHVzaW5nIDxhIGhyZWY9XFxcIiMtdGF1bnVzLW5hdmlnYXRlLXVybC1vcHRpb25zLVxcXCI+dGF1bnVzLm5hdmlnYXRlPC9hPi48L3A+XFxuPHRhYmxlPlxcbjx0aGVhZD5cXG48dHI+XFxuPHRoPk9wdGlvbjwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+aGFyZDwvY29kZT48L3RkPlxcbjx0ZD5Vc2VzIGEgZnVsbCBwYWdlIHJlZGlyZWN0IHdoZW4gPGNvZGU+dHJ1ZTwvY29kZT48L3RkPlxcbjwvdHI+XFxuPHRyPlxcbjx0ZD48Y29kZT5mb3JjZTwvY29kZT48L3RkPlxcbjx0ZD5DbGllbnQtc2lkZSByZWRpcmVjdHMgd2lsbCBiZSBjYXJyaWVkIG91dCBldmVuIGlmIHRoZSB0YXJnZXQgVVJMIGlzIHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50IDxjb2RlPmxvY2F0aW9uPC9jb2RlPjwvdGQ+XFxuPC90cj5cXG48L3Rib2R5PlxcbjwvdGFibGU+XFxuPGg2IGlkPVxcXCJleGFtcGxlXFxcIj5FeGFtcGxlPC9oNj5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj50YXVudXMucmVkaXJlY3QocmVxLCByZXMsICYjMzk7L2xvZ2luJiMzOTspO1xcbjwvY29kZT48L3ByZT5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDEgaWQ9XFxcInNlcnZlci1zaWRlLWNvbnRyb2xsZXJzXFxcIj5TZXJ2ZXItU2lkZSBDb250cm9sbGVyczwvaDE+XFxuPHA+T24gdGhlIHNlcnZlci1zaWRlLCBjb250cm9sbGVycyBhcmUgbW9kdWxlcyB0aGF0IGV4cG9ydCBhIHNpbmdsZSBmdW5jdGlvbi4gVGhlIHBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZXNlIGNvbnRyb2xsZXJzIGRlcGVuZCBvbiB0aGUgc2VydmVyLXNpZGUgSFRUUCBmcmFtZXdvcmsgdGhhdCYjMzk7cyBiZWluZyB1c2VkLjwvcD5cXG48cD5Gb3IgZXhhbXBsZSwgRXhwcmVzcyBnaXZlcyB1cyB0aHJlZSBwYXJhbWV0ZXJzOiA8Y29kZT5yZXE8L2NvZGU+LCA8Y29kZT5yZXM8L2NvZGU+IGFuZCA8Y29kZT5uZXh0PC9jb2RlPi4gSGFwaSBnaXZlcyB1cyB0d28gaW5zdGVhZDogPGNvZGU+cmVxdWVzdDwvY29kZT4gYW5kIDxjb2RlPnJlcGx5PC9jb2RlPi48L3A+XFxuPHA+SGVyZSYjMzk7cyBhIHNhbXBsZSBjb250cm9sbGVyIHVzaW5nIDxjb2RlPnRhdW51cy1leHByZXNzPC9jb2RlPiwgYXMgPGEgaHJlZj1cXFwiI3VzaW5nLXRhdW51cy1leHByZXNzLVxcXCI+ZGV0YWlsZWQgYmVsb3c8L2E+LiBUaGlzIGlzIGEgdmVyeSBzaW1wbGUgY29udHJvbGxlciB3aGVyZSB3ZSBhcmUgc2V0dGluZyB0aGUgc3BlY2lhbCA8Y29kZT52aWV3TW9kZWw8L2NvZGU+IHByb3BlcnR5IG9uIHRoZSByZXNwb25zZSwgYW5kIGNhbGxpbmcgPGNvZGU+bmV4dDwvY29kZT4uIFN1cHBvc2UgdGhpcyBjb250cm9sbGVyIGlzIHRoZSA8Y29kZT5wcm9kdWN0L2hvbWU8L2NvZGU+IGFjdGlvbiBoYW5kbGVyLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xcbiAgcmVzLnZpZXdNb2RlbCA9IHtcXG4gICAgbW9kZWw6IHtcXG4gICAgICB0aXRsZTogJiMzOTt2aWV3IHRpdGxlJiMzOTtcXG4gICAgfVxcbiAgfTtcXG4gIG5leHQoKTtcXG59O1xcbjwvY29kZT48L3ByZT5cXG48cD5BcyB5b3UgY2FuIHNlZSwgVGF1bnVzIHdvbiYjMzk7dCBhbHRlciB0aGUgQVBJIHByb3ZpZGVkIGJ5IEV4cHJlc3MuIEluc3RlYWQsIGl0IGJ1aWxkcyB1cG9uIHRoZSBub3Rpb24gb2YgdXNpbmcgbWlkZGxld2FyZS4gT25jZSB0aGUgPGNvZGU+cHJvZHVjdC9ob21lPC9jb2RlPiB2aWV3IGlzIHJlbmRlcmVkIGFuZCBKYXZhU2NyaXB0IGxvYWRzLCB0aGUgPGNvZGU+cHJvZHVjdC9ob21lPC9jb2RlPiB2aWV3IGNvbnRyb2xsZXIgaXMgZXhlY3V0ZWQgb24gdGhlIGNsaWVudC1zaWRlLjwvcD5cXG48cD5Zb3UgY291bGQgY2hhbmdlIHRoZSB2aWV3IHRvIGJlIHJlbmRlcmVkIGJ5IHNldHRpbmcgdGhlIDxjb2RlPmFjdGlvbjwvY29kZT4gcHJvcGVydHkgb24gdGhlIDxjb2RlPm1vZGVsPC9jb2RlPi4gSW4gdGhlIGV4YW1wbGUgc2hvd24gYmVsb3cgdGhpcyB3b3VsZCBtZWFuIHRoYXQgdGhlIDxjb2RlPmVycm9yL29mZmxpbmU8L2NvZGU+IHZpZXcgd291bGQgYmUgcmVuZGVyZWQuIFRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyIHdpbGwgYmUgdGhhdCBvZiA8Y29kZT5lcnJvci9vZmZsaW5lPC9jb2RlPiwgYXMgd2VsbC4gVmlldyBjb250cm9sbGVycyBhcmUgdGllZCB0byB0aGUgdmlldyB0aGF0IGdldHMgcmVuZGVyZWQuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XFxuICByZXMudmlld01vZGVsID0ge1xcbiAgICBtb2RlbDoge1xcbiAgICAgIHRpdGxlOiAmIzM5O3ZpZXcgdGl0bGUmIzM5O1xcbiAgICB9XFxuICB9O1xcbiAgaWYgKG9mZmxpbmUpIHtcXG4gICAgcmVzLnZpZXdNb2RlbC5tb2RlbC5hY3Rpb24gPSAmIzM5O2Vycm9yL29mZmxpbmUmIzM5OztcXG4gIH1cXG4gIG5leHQoKTtcXG59O1xcbjwvY29kZT48L3ByZT5cXG48cD5IYXZpbmcgYSBkZWZhdWx0IGFjdGlvbiBhbmQgdGhlIGFiaWxpdHkgdG8gcmVkaXJlY3QgdG8gYW5vdGhlciBnaXZlcyB1cyBhIGxvdCBvZiBmbGV4aWJpbGl0eSB3aGVuIGRldGVybWluaW5nIGhvdyB0byByZXNwb25kIHRvIGEgcmVxdWVzdC48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgxIGlkPVxcXCJodHRwLWZyYW1ld29yay1wbHVnaW5zXFxcIj5IVFRQIEZyYW1ld29yayBQbHVnaW5zPC9oMT5cXG48cD5UaGVyZSYjMzk7cyBjdXJyZW50bHkgdHdvIGRpZmZlcmVudCBIVFRQIGZyYW1ld29ya3MgPGVtPig8YSBocmVmPVxcXCJodHRwOi8vZXhwcmVzc2pzLmNvbVxcXCI+RXhwcmVzczwvYT4gYW5kIDxhIGhyZWY9XFxcImh0dHA6Ly9oYXBpanMuY29tXFxcIj5IYXBpPC9hPik8L2VtPiB0aGF0IHlvdSBjYW4gcmVhZGlseSB1c2Ugd2l0aCBUYXVudXMgd2l0aG91dCBoYXZpbmcgdG8gZGVhbCB3aXRoIGFueSBvZiB0aGUgcm91dGUgcGx1bWJpbmcgeW91cnNlbGYuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwidXNpbmctdGF1bnVzLWV4cHJlc3MtXFxcIj5Vc2luZyA8Y29kZT50YXVudXMtZXhwcmVzczwvY29kZT48L2gyPlxcbjxwPlRoZSA8Y29kZT50YXVudXMtZXhwcmVzczwvY29kZT4gcGx1Z2luIGlzIHByb2JhYmx5IHRoZSBlYXNpZXN0IHRvIHVzZSwgYXMgVGF1bnVzIHdhcyBvcmlnaW5hbGx5IGRldmVsb3BlZCB3aXRoIGp1c3QgPGEgaHJlZj1cXFwiaHR0cDovL2V4cHJlc3Nqcy5jb21cXFwiPkV4cHJlc3M8L2E+IGluIG1pbmQuIEluIGFkZGl0aW9uIHRvIHRoZSBvcHRpb25zIGFscmVhZHkgb3V0bGluZWQgZm9yIDxhIGhyZWY9XFxcIiMtdGF1bnVzLW1vdW50LWFkZHJvdXRlLW9wdGlvbnMtXFxcIj50YXVudXMubW91bnQ8L2E+LCB5b3UgY2FuIGFkZCBtaWRkbGV3YXJlIGZvciBhbnkgcm91dGUgaW5kaXZpZHVhbGx5LjwvcD5cXG48dWw+XFxuPGxpPjxjb2RlPm1pZGRsZXdhcmU8L2NvZGU+IGFyZSBhbnkgbWV0aG9kcyB5b3Ugd2FudCBUYXVudXMgdG8gZXhlY3V0ZSBhcyBtaWRkbGV3YXJlIGluIEV4cHJlc3MgYXBwbGljYXRpb25zPC9saT5cXG48L3VsPlxcbjxwPlRvIGdldCA8Y29kZT50YXVudXMtZXhwcmVzczwvY29kZT4gZ29pbmcgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyBwaWVjZSBvZiBjb2RlLCBwcm92aWRlZCB0aGF0IHlvdSBjb21lIHVwIHdpdGggYW4gPGNvZGU+b3B0aW9uczwvY29kZT4gb2JqZWN0LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj4mIzM5O3VzZSBzdHJpY3QmIzM5OztcXG5cXG52YXIgdGF1bnVzID0gcmVxdWlyZSgmIzM5O3RhdW51cyYjMzk7KTtcXG52YXIgdGF1bnVzRXhwcmVzcyA9IHJlcXVpcmUoJiMzOTt0YXVudXMtZXhwcmVzcyYjMzk7KTtcXG52YXIgZXhwcmVzcyA9IHJlcXVpcmUoJiMzOTtleHByZXNzJiMzOTspO1xcbnZhciBhcHAgPSBleHByZXNzKCk7XFxudmFyIG9wdGlvbnMgPSB7XFxuICAvLyAuLi5cXG59O1xcblxcbnRhdW51c0V4cHJlc3ModGF1bnVzLCBhcHAsIG9wdGlvbnMpO1xcbjwvY29kZT48L3ByZT5cXG48cD5UaGUgPGNvZGU+dGF1bnVzRXhwcmVzczwvY29kZT4gbWV0aG9kIHdpbGwgbWVyZWx5IHNldCB1cCBUYXVudXMgYW5kIGFkZCB0aGUgcmVsZXZhbnQgcm91dGVzIHRvIHlvdXIgRXhwcmVzcyBhcHBsaWNhdGlvbiBieSBjYWxsaW5nIDxjb2RlPmFwcC5nZXQ8L2NvZGU+IGEgYnVuY2ggb2YgdGltZXMuIFlvdSBjYW4gPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy90YXVudXMtZXhwcmVzc1xcXCI+ZmluZCB0YXVudXMtZXhwcmVzcyBvbiBHaXRIdWI8L2E+LjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcInVzaW5nLXRhdW51cy1oYXBpLVxcXCI+VXNpbmcgPGNvZGU+dGF1bnVzLWhhcGk8L2NvZGU+PC9oMj5cXG48cD5UaGUgPGNvZGU+dGF1bnVzLWhhcGk8L2NvZGU+IHBsdWdpbiBpcyBhIGJpdCBtb3JlIGludm9sdmVkLCBhbmQgeW91JiMzOTtsbCBoYXZlIHRvIGNyZWF0ZSBhIFBhY2sgaW4gb3JkZXIgdG8gdXNlIGl0LiBJbiBhZGRpdGlvbiB0byA8YSBocmVmPVxcXCIjLXRhdW51cy1tb3VudC1hZGRyb3V0ZS1vcHRpb25zLVxcXCI+dGhlIG9wdGlvbnMgd2UmIzM5O3ZlIGFscmVhZHkgY292ZXJlZDwvYT4sIHlvdSBjYW4gYWRkIDxjb2RlPmNvbmZpZzwvY29kZT4gb24gYW55IHJvdXRlLjwvcD5cXG48dWw+XFxuPGxpPjxjb2RlPmNvbmZpZzwvY29kZT4gaXMgcGFzc2VkIGRpcmVjdGx5IGludG8gdGhlIHJvdXRlIHJlZ2lzdGVyZWQgd2l0aCBIYXBpLCBnaXZpbmcgeW91IHRoZSBtb3N0IGZsZXhpYmlsaXR5PC9saT5cXG48L3VsPlxcbjxwPlRvIGdldCA8Y29kZT50YXVudXMtaGFwaTwvY29kZT4gZ29pbmcgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyBwaWVjZSBvZiBjb2RlLCBhbmQgeW91IGNhbiBicmluZyB5b3VyIG93biA8Y29kZT5vcHRpb25zPC9jb2RlPiBvYmplY3QuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbnZhciBIYXBpID0gcmVxdWlyZSgmIzM5O2hhcGkmIzM5Oyk7XFxudmFyIHRhdW51cyA9IHJlcXVpcmUoJiMzOTt0YXVudXMmIzM5Oyk7XFxudmFyIHRhdW51c0hhcGkgPSByZXF1aXJlKCYjMzk7dGF1bnVzLWhhcGkmIzM5OykodGF1bnVzKTtcXG52YXIgcGFjayA9IG5ldyBIYXBpLlBhY2soKTtcXG5cXG5wYWNrLnJlZ2lzdGVyKHtcXG4gIHBsdWdpbjogdGF1bnVzSGFwaSxcXG4gIG9wdGlvbnM6IHtcXG4gICAgLy8gLi4uXFxuICB9XFxufSk7XFxuPC9jb2RlPjwvcHJlPlxcbjxwPlRoZSA8Y29kZT50YXVudXNIYXBpPC9jb2RlPiBwbHVnaW4gd2lsbCBtb3VudCBUYXVudXMgYW5kIHJlZ2lzdGVyIGFsbCBvZiB0aGUgbmVjZXNzYXJ5IHJvdXRlcy4gWW91IGNhbiA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vdGF1bnVzL3RhdW51cy1oYXBpXFxcIj5maW5kIHRhdW51cy1oYXBpIG9uIEdpdEh1YjwvYT4uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMSBpZD1cXFwiY29tbWFuZC1saW5lLWludGVyZmFjZVxcXCI+Q29tbWFuZC1MaW5lIEludGVyZmFjZTwvaDE+XFxuPHA+T25jZSB5b3UmIzM5O3ZlIHNldCB1cCB0aGUgc2VydmVyLXNpZGUgdG8gcmVuZGVyIHlvdXIgdmlld3MgdXNpbmcgVGF1bnVzLCBpdCYjMzk7cyBvbmx5IGxvZ2ljYWwgdGhhdCB5b3UmIzM5O2xsIHdhbnQgdG8gcmVuZGVyIHRoZSB2aWV3cyBpbiB0aGUgY2xpZW50LXNpZGUgYXMgd2VsbCwgZWZmZWN0aXZlbHkgY29udmVydGluZyB5b3VyIGFwcGxpY2F0aW9uIGludG8gYSBzaW5nbGUtcGFnZSBhcHBsaWNhdGlvbiBhZnRlciB0aGUgZmlyc3QgdmlldyBoYXMgYmVlbiByZW5kZXJlZCBvbiB0aGUgc2VydmVyLXNpZGUuPC9wPlxcbjxwPlRoZSBUYXVudXMgQ0xJIGlzIGFuIHVzZWZ1bCBpbnRlcm1lZGlhcnkgaW4gdGhlIHByb2Nlc3Mgb2YgZ2V0dGluZyB0aGUgY29uZmlndXJhdGlvbiB5b3Ugd3JvdGUgc28gZmFyIGZvciB0aGUgc2VydmVyLXNpZGUgdG8gYWxzbyB3b3JrIHdlbGwgaW4gdGhlIGNsaWVudC1zaWRlLjwvcD5cXG48cD5JbnN0YWxsIGl0IGdsb2JhbGx5IGZvciBkZXZlbG9wbWVudCwgYnV0IHJlbWVtYmVyIHRvIHVzZSBsb2NhbCBjb3BpZXMgZm9yIHByb2R1Y3Rpb24tZ3JhZGUgdXNlcy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bnBtIGluc3RhbGwgLWcgdGF1bnVzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPldoZW4gaW52b2tlZCB3aXRob3V0IGFueSBhcmd1bWVudHMsIHRoZSBDTEkgd2lsbCBzaW1wbHkgZm9sbG93IHRoZSBkZWZhdWx0IGNvbnZlbnRpb25zIHRvIGZpbmQgeW91ciByb3V0ZSBkZWZpbml0aW9ucywgdmlld3MsIGFuZCBjbGllbnQtc2lkZSBjb250cm9sbGVycy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+dGF1bnVzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPkJ5IGRlZmF1bHQsIHRoZSBvdXRwdXQgd2lsbCBiZSBwcmludGVkIHRvIHRoZSBzdGFuZGFyZCBvdXRwdXQsIG1ha2luZyBmb3IgYSBmYXN0IGRlYnVnZ2luZyBleHBlcmllbmNlLiBIZXJlJiMzOTtzIHRoZSBvdXRwdXQgaWYgeW91IGp1c3QgaGFkIGEgc2luZ2xlIDxjb2RlPmhvbWUvaW5kZXg8L2NvZGU+IHJvdXRlLCBhbmQgdGhlIG1hdGNoaW5nIHZpZXcgYW5kIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgZXhpc3RlZC48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxudmFyIHRlbXBsYXRlcyA9IHtcXG4gICYjMzk7aG9tZS9pbmRleCYjMzk7OiByZXF1aXJlKCYjMzk7Li92aWV3cy9ob21lL2luZGV4LmpzJiMzOTspXFxufTtcXG5cXG52YXIgY29udHJvbGxlcnMgPSB7XFxuICAmIzM5O2hvbWUvaW5kZXgmIzM5OzogcmVxdWlyZSgmIzM5Oy4uL2NsaWVudC9qcy9jb250cm9sbGVycy9ob21lL2luZGV4LmpzJiMzOTspXFxufTtcXG5cXG52YXIgcm91dGVzID0gW1xcbiAge1xcbiAgICByb3V0ZTogJiMzOTsvJiMzOTssXFxuICAgIGFjdGlvbjogJiMzOTtob21lL2luZGV4JiMzOTtcXG4gIH1cXG5dO1xcblxcbm1vZHVsZS5leHBvcnRzID0ge1xcbiAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXFxuICBjb250cm9sbGVyczogY29udHJvbGxlcnMsXFxuICByb3V0ZXM6IHJvdXRlc1xcbn07XFxuPC9jb2RlPjwvcHJlPlxcbjxwPllvdSBjYW4gdXNlIGEgZmV3IG9wdGlvbnMgdG8gYWx0ZXIgdGhlIG91dGNvbWUgb2YgaW52b2tpbmcgPGNvZGU+dGF1bnVzPC9jb2RlPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItb3V0cHV0LVxcXCI+PGNvZGU+LS1vdXRwdXQ8L2NvZGU+PC9oMj5cXG48cD48c3ViPnRoZSA8Y29kZT4tbzwvY29kZT4gYWxpYXMgaXMgYXZhaWxhYmxlPC9zdWI+PC9wPlxcbjxwPk91dHB1dCBpcyB3cml0dGVuIHRvIGEgZmlsZSBpbnN0ZWFkIG9mIHRvIHN0YW5kYXJkIG91dHB1dC4gVGhlIGZpbGUgcGF0aCB1c2VkIHdpbGwgYmUgdGhlIDxjb2RlPmNsaWVudF93aXJpbmc8L2NvZGU+IG9wdGlvbiBpbiA8YSBocmVmPVxcXCIjdGhlLXRhdW51c3JjLW1hbmlmZXN0XFxcIj48Y29kZT4udGF1bnVzcmM8L2NvZGU+PC9hPiwgd2hpY2ggZGVmYXVsdHMgdG8gPGNvZGU+JiMzOTsuYmluL3dpcmluZy5qcyYjMzk7PC9jb2RlPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItd2F0Y2gtXFxcIj48Y29kZT4tLXdhdGNoPC9jb2RlPjwvaDI+XFxuPHA+PHN1Yj50aGUgPGNvZGU+LXc8L2NvZGU+IGFsaWFzIGlzIGF2YWlsYWJsZTwvc3ViPjwvcD5cXG48cD5XaGVuZXZlciBhIHNlcnZlci1zaWRlIHJvdXRlIGRlZmluaXRpb24gY2hhbmdlcywgdGhlIG91dHB1dCBpcyBwcmludGVkIGFnYWluIHRvIGVpdGhlciBzdGFuZGFyZCBvdXRwdXQgb3IgYSBmaWxlLCBkZXBlbmRpbmcgb24gd2hldGhlciA8Y29kZT4tLW91dHB1dDwvY29kZT4gd2FzIHVzZWQuPC9wPlxcbjxwPlRoZSBwcm9ncmFtIHdvbiYjMzk7dCBleGl0LjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi10cmFuc2Zvcm0tbW9kdWxlLVxcXCI+PGNvZGU+LS10cmFuc2Zvcm0gJmx0O21vZHVsZSZndDs8L2NvZGU+PC9oMj5cXG48cD48c3ViPnRoZSA8Y29kZT4tdDwvY29kZT4gYWxpYXMgaXMgYXZhaWxhYmxlPC9zdWI+PC9wPlxcbjxwPlRoaXMgZmxhZyBhbGxvd3MgeW91IHRvIHRyYW5zZm9ybSBzZXJ2ZXItc2lkZSByb3V0ZXMgaW50byBzb21ldGhpbmcgdGhlIGNsaWVudC1zaWRlIHVuZGVyc3RhbmRzLiBFeHByZXNzIHJvdXRlcyBhcmUgY29tcGxldGVseSBjb21wYXRpYmxlIHdpdGggdGhlIGNsaWVudC1zaWRlIHJvdXRlciwgYnV0IEhhcGkgcm91dGVzIG5lZWQgdG8gYmUgdHJhbnNmb3JtZWQgdXNpbmcgdGhlIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvaGFwaWlmeVxcXCI+PGNvZGU+aGFwaWlmeTwvY29kZT48L2E+IG1vZHVsZS48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bnBtIGluc3RhbGwgaGFwaWlmeVxcbnRhdW51cyAtdCBoYXBpaWZ5XFxuPC9jb2RlPjwvcHJlPlxcbjxwPlVzaW5nIHRoaXMgdHJhbnNmb3JtIHJlbGlldmVzIHlvdSBmcm9tIGhhdmluZyB0byBkZWZpbmUgdGhlIHNhbWUgcm91dGVzIHR3aWNlIHVzaW5nIHNsaWdodGx5IGRpZmZlcmVudCBmb3JtYXRzIHRoYXQgY29udmV5IHRoZSBzYW1lIG1lYW5pbmcuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwiLWRlZmVyLWFjdGlvbnMtXFxcIj48Y29kZT4tLWRlZmVyIFthY3Rpb25zXTwvY29kZT48L2gyPlxcbjxwPjxzdWI+dGhlIDxjb2RlPi1kPC9jb2RlPiBhbGlhcyBpcyBhdmFpbGFibGU8L3N1Yj48L3A+XFxuPHA+SGVyZSBpcyB3aGVyZSB0aGluZ3MgZ2V0IGludGVyZXN0aW5nLiBUaGUgPGNvZGU+LS1kZWZlcjwvY29kZT4gZmxhZyBhbGxvd3MgeW91IHRvIGRlZmVyIGxvYWRpbmcgZm9yIHplcm8gb3IgbW9yZSBhY3Rpb25zLiBFeGNsdWRpbmcgdGhlIGNvbnRyb2xsZXIgYW5kIHZpZXcgdGVtcGxhdGVzIGZvciBhbnkgZGVmZXJyZWQgYWN0aW9uIGNhbiBzaWduaWZpY2FudGx5IHJlZHVjZSB0aGUgZmluZ2VycHJpbnQgb2YgeW91ciBhcHBsaWNhdGlvbi48L3A+XFxuPHA+VGhlIDxjb2RlPlthY3Rpb25zXTwvY29kZT4gYXJndW1lbnQgZGV0ZXJtaW5lcyB3aGF0IGFjdGlvbnMgZ2V0IGRlZmVycmVkLCBhbmQgd2hpY2ggZG9uJiMzOTt0LiBJdCBleHBlY3RzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgYWN0aW9ucywgd2hlcmUgeW91IGNhbiBwYXNzIGluIGVpdGhlciB0aGUgY29udHJvbGxlciBuYW1lLCBvciBib3RoIHRoZSBjb250cm9sbGVyIG5hbWUgYW5kIHRoZSBhY3Rpb24gbmFtZS4gVXNpbmcgPGNvZGU+PzwvY29kZT4gYWN0cyBhcyBhIHdpbGRjYXJkLjwvcD5cXG48cD5Gb3IgZXhhbXBsZSwgdXNpbmcgPGNvZGU+YWRtaW48L2NvZGU+IDxlbT4oZXF1aXZhbGVudCB0byB1c2luZyA8Y29kZT5hZG1pbi8/PC9jb2RlPik8L2VtPiB3aWxsIGRlZmVyIGV2ZXJ5IGFjdGlvbiB1bmRlciB0aGUgPGNvZGU+YWRtaW48L2NvZGU+IGNvbnRyb2xsZXIuIFVzaW5nIDxjb2RlPmFkbWluL251a2U8L2NvZGU+IHdpbGwgb25seSBkZWZlciB0aGUgPGNvZGU+YWRtaW4vbnVrZTwvY29kZT4gYWN0aW9uLiBJZiB5b3Ugb21pdCB0aGUgPGNvZGU+W2FjdGlvbnNdPC9jb2RlPiBwYXJhbWV0ZXIgZW50aXJlbHksIHRoZSBkZWZhdWx0IHZhbHVlIG9mIDxjb2RlPiYjMzk7PyYjMzk7PC9jb2RlPiB3aWxsIGJlIHVzZWQgYW5kIGV2ZXJ5dGhpbmcgd2lsbCBiZSBkZWZlcnJlZC48L3A+XFxuPHA+V2hlbiBjb21wb25lbnRzIGdldCBkZWZlcnJlZCwgdGhleSYjMzk7bGwgYmUgbG9hZGVkIGFzIHNvb24gYXMgVGF1bnVzIGRldGVjdHMgdGhhdCB0aGV5JiMzOTtyZSBuZWVkZWQuIFRoaXMgY2FuIGhhcHBlbiBpbiBhIGZldyBwbGFjZXMuPC9wPlxcbjx1bD5cXG48bGk+VGhlIHVzZXIgbmF2aWdhdGVzIHRvIChvciA8YSBocmVmPVxcXCIjcHJlZmV0Y2hpbmdcXFwiPjxlbT5wcmVmZXRjaGVzPC9lbT48L2E+KSB0aGUgPGNvZGU+L2FkbWluPC9jb2RlPiByb3V0ZSwgYW5kIDxjb2RlPmFkbWluL2luZGV4PC9jb2RlPiB3YXMgZGVmZXJyZWQsIGFuZCBpdHMgY29tcG9uZW50cyBhcmVuJiMzOTt0IGNhY2hlZCBvbiB0aGUgY2xpZW50LXNpZGUgeWV0PC9saT5cXG48bGk+QSBjb250cm9sbGVyIHVzZXMgPGNvZGU+dGF1bnVzLnBhcnRpYWw8L2NvZGU+IHRvIHJlbmRlciBhbiBhY3Rpb24gdGhhdCB3YXMgZGVmZXJyZWQsIGFuZCBpdHMgY29tcG9uZW50cyBhcmVuJiMzOTt0IGNhY2hlZCBvbiB0aGUgY2xpZW50LXNpZGUgeWV0PC9saT5cXG48bGk+VGhlIHVzZXIgbmF2aWdhdGVzIHRvIHRoZSA8Y29kZT4vYWRtaW48L2NvZGU+IHJvdXRlLCBhbmQgaXRzIG1hdGNoaW5nIDxjb2RlPmFkbWluL2luZGV4PC9jb2RlPiByb3V0ZSB3YXNuJiMzOTt0IGRlZmVycmVkLCBidXQgdGhlIHNlcnZlci1zaWRlIGNvbnRyb2xsZXIgZGVjaWRlcyB0byBjaGFuZ2UgdGhlIGFjdGlvbiB0byA8Y29kZT5hZG1pbi9zdXBlcmFkbWluPC9jb2RlPi4gV2hlbiB0aGUgcmVzcG9uc2UgZ2V0cyB0byB0aGUgY2xpZW50LCBpdCYjMzk7bGwgbmVlZCB0byBhc2sgdGhlIHNlcnZlciBmb3IgdGhlIDxjb2RlPmFkbWluL3N1cGVyYWRtaW48L2NvZGU+IHRlbXBsYXRlIGlmIHRoZSBjbGllbnQgZG9lc24mIzM5O3QgYWxyZWFkeSBoYXZlIGl0PC9saT5cXG48L3VsPlxcbjxwPllvdSBkb24mIzM5O3QgaGF2ZSB0byB3b3JyeSBhYm91dCB0aG9zZSBkaWZmZXJlbnQgc2NlbmFyaW9zLCB0aG91Z2gsIGFzIFRhdW51cyBoYW5kbGVzIHRoZW0gYWxsIGZvciB5b3UgdHJhbnNwYXJlbnRseS4gWW91IHNob3VsZCA8YSBocmVmPVxcXCIvcGVyZm9ybWFuY2Ujc2VuZC12aWV3cy1hbmQtY29udHJvbGxlcnMtdG8tdGhlLWNsaWVudC1zZWxlY3RpdmVseVxcXCI+bGVhcm4gbW9yZSBhYm91dCBkZWZlcnJlZCBsb2FkaW5nIG9uIHRoZSBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb24gZ3VpZGU8L2E+LjwvcD5cXG48YmxvY2txdW90ZT5cXG48cD5BIHBvc3NpYmxlIGNvbmNlcm4gd2l0aCBkZWZlcnJlZCBleGVjdXRpb24gaXMgdGhhdCBwYXJ0aWFsIHZpZXdzIG1heSBub3QgYmUgcmVuZGVyZWQgaW1tZWRpYXRlbHksIGFzIGEgcmVxdWVzdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIGZldGNoIHRoZSBjb250cm9sbGVyIG9yIHRlbXBsYXRlIGZvciB0aGUgcGFydGlhbC48L3A+XFxuPC9ibG9ja3F1b3RlPlxcbjxwPlNvbWUgb3RoZXIgY29uc2lkZXJhdGlvbnMsIHJlZ2FyZGluZyBob3cgZGVmZXJyZWQgY29tcG9uZW50cyBnZXQgYnVuZGxlZCwgYXJlIGxpc3RlZCBpbiB0aGUgPGEgaHJlZj1cXFwiL3BlcmZvcm1hbmNlI3NlbmQtdmlld3MtYW5kLWNvbnRyb2xsZXJzLXRvLXRoZS1jbGllbnQtc2VsZWN0aXZlbHlcXFwiPlBlcmZvcm1hbmNlIE9wdGltaXphdGlvbjwvYT4gZ3VpZGUuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwiLXJlc29sdmVycy1tb2R1bGUtXFxcIj48Y29kZT4tLXJlc29sdmVycyAmbHQ7bW9kdWxlJmd0OzwvY29kZT48L2gyPlxcbjxwPjxzdWI+dGhlIDxjb2RlPi1yPC9jb2RlPiBhbGlhcyBpcyBhdmFpbGFibGU8L3N1Yj48L3A+XFxuPHA+U2ltaWxhcmx5IHRvIHRoZSA8YSBocmVmPVxcXCIjLW9wdGlvbnMtcmVzb2x2ZXJzLVxcXCI+PGNvZGU+cmVzb2x2ZXJzPC9jb2RlPjwvYT4gb3B0aW9uIHRoYXQgeW91IGNhbiBwYXNzIHRvIDxhIGhyZWY9XFxcIiMtdGF1bnVzLW1vdW50LWFkZHJvdXRlLW9wdGlvbnMtXFxcIj48Y29kZT50YXVudXMubW91bnQ8L2NvZGU+PC9hPiwgdGhlc2UgcmVzb2x2ZXJzIGNhbiBjaGFuZ2UgdGhlIHdheSBpbiB3aGljaCBmaWxlIHBhdGhzIGFyZSByZXNvbHZlZC48L3A+XFxuPHRhYmxlPlxcbjx0aGVhZD5cXG48dHI+XFxuPHRoPlNpZ25hdHVyZTwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+Z2V0Q2xpZW50Q29udHJvbGxlcihhY3Rpb24pPC9jb2RlPjwvdGQ+XFxuPHRkPlJldHVybiBwYXRoIHRvIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgYWN0aW9uIGhhbmRsZXIgbW9kdWxlPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+Z2V0VmlldyhhY3Rpb24pPC9jb2RlPjwvdGQ+XFxuPHRkPlJldHVybiBwYXRoIHRvIHZpZXcgdGVtcGxhdGUgbW9kdWxlPC90ZD5cXG48L3RyPlxcbjwvdGJvZHk+XFxuPC90YWJsZT5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi1idW5kbGUtXFxcIj48Y29kZT4tLWJ1bmRsZTwvY29kZT48L2gyPlxcbjxwPjxzdWI+dGhlIDxjb2RlPi1iPC9jb2RlPiBhbGlhcyBpcyBhdmFpbGFibGU8L3N1Yj48L3A+XFxuPHA+VW5kZXIgdGhpcyBleHBlcmltZW50YWwgZmxhZywgdGhlIENMSSB3aWxsIHVzZSBCcm93c2VyaWZ5IHRvIGNvbXBpbGUgYSBzdGFuZGFsb25lIG1vZHVsZSB0aGF0IGluY2x1ZGVzIHRoZSB3aXJpbmcgbm9ybWFsbHkgZXhwb3J0ZWQgYnkgdGhlIENMSSBwbHVzIGFsbCBvZiBUYXVudXMgPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZFxcXCI+YXMgYSBVTUQgbW9kdWxlPC9hPi48L3A+XFxuPHA+VGhpcyBhbGxvd3MgeW91IHRvIHVzZSBUYXVudXMgb24gdGhlIGNsaWVudC1zaWRlIGV2ZW4gaWYgeW91IGRvbiYjMzk7dCB3YW50IHRvIHVzZSA8YSBocmVmPVxcXCJodHRwOi8vYnJvd3NlcmlmeS5vcmdcXFwiPkJyb3dzZXJpZnk8L2E+IGRpcmVjdGx5LjwvcD5cXG48cD5GZWVkYmFjayBhbmQgc3VnZ2VzdGlvbnMgYWJvdXQgdGhpcyBmbGFnLCA8ZW0+YW5kIHBvc3NpYmxlIGFsdGVybmF0aXZlcyB0aGF0IHdvdWxkIG1ha2UgVGF1bnVzIGVhc2llciB0byB1c2U8L2VtPiwgYXJlIHdlbGNvbWUuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMSBpZD1cXFwiY2xpZW50LXNpZGUtYXBpXFxcIj5DbGllbnQtc2lkZSBBUEk8L2gxPlxcbjxwPkp1c3QgbGlrZSB0aGUgc2VydmVyLXNpZGUsIGV2ZXJ5dGhpbmcgaW4gdGhlIGNsaWVudC1zaWRlIGJlZ2lucyBhdCB0aGUgbW91bnRwb2ludC4gT25jZSB0aGUgYXBwbGljYXRpb24gaXMgbW91bnRlZCwgYW5jaG9yIGxpbmtzIHdpbGwgYmUgaGlqYWNrZWQgYW5kIHRoZSBjbGllbnQtc2lkZSByb3V0ZXIgd2lsbCB0YWtlIG92ZXIgdmlldyByZW5kZXJpbmcuIENsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFyZSBleGVjdXRlZCB3aGVuZXZlciBhIHZpZXcgaXMgcmVuZGVyZWQuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwiLXRhdW51cy1tb3VudC1jb250YWluZXItd2lyaW5nLW9wdGlvbnMtXFxcIj48Y29kZT50YXVudXMubW91bnQoY29udGFpbmVyLCB3aXJpbmcsIG9wdGlvbnM/KTwvY29kZT48L2gyPlxcbjxwPlRoZSBtb3VudHBvaW50IHRha2VzIGEgcm9vdCBjb250YWluZXIsIHRoZSB3aXJpbmcgbW9kdWxlLCBhbmQgYW4gb3B0aW9ucyBwYXJhbWV0ZXIuIFRoZSA8Y29kZT5jb250YWluZXI8L2NvZGU+IGlzIHdoZXJlIGNsaWVudC1zaWRlLXJlbmRlcmVkIHZpZXdzIHdpbGwgYmUgcGxhY2VkLCBieSByZXBsYWNpbmcgd2hhdGV2ZXIgSFRNTCBjb250ZW50cyBhbHJlYWR5IGV4aXN0LiBZb3UgY2FuIHBhc3MgaW4gdGhlIDxjb2RlPndpcmluZzwvY29kZT4gbW9kdWxlIGV4YWN0bHkgYXMgYnVpbHQgYnkgdGhlIENMSSwgYW5kIG5vIGZ1cnRoZXIgY29uZmlndXJhdGlvbiBpcyBuZWNlc3NhcnkuPC9wPlxcbjxwPldoZW4gdGhlIG1vdW50cG9pbnQgZXhlY3V0ZXMsIFRhdW51cyB3aWxsIGNvbmZpZ3VyZSBpdHMgaW50ZXJuYWwgc3RhdGUsIDxlbT5zZXQgdXAgdGhlIGNsaWVudC1zaWRlIHJvdXRlcjwvZW0+LCBydW4gdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgZm9yIHRoZSBzZXJ2ZXItc2lkZSByZW5kZXJlZCB2aWV3LCBhbmQgc3RhcnQgaGlqYWNraW5nIGxpbmtzLjwvcD5cXG48cD5BcyBhbiBleGFtcGxlLCBjb25zaWRlciBhIGJyb3dzZXIgbWFrZXMgYSA8Y29kZT5HRVQ8L2NvZGU+IHJlcXVlc3QgZm9yIDxjb2RlPi9hcnRpY2xlcy90aGUtZm94PC9jb2RlPiBmb3IgdGhlIGZpcnN0IHRpbWUuIE9uY2UgPGNvZGU+dGF1bnVzLm1vdW50KGNvbnRhaW5lciwgd2lyaW5nKTwvY29kZT4gaXMgaW52b2tlZCBvbiB0aGUgY2xpZW50LXNpZGUsIHNldmVyYWwgdGhpbmdzIHdvdWxkIGhhcHBlbiBpbiB0aGUgb3JkZXIgbGlzdGVkIGJlbG93LjwvcD5cXG48dWw+XFxuPGxpPlRhdW51cyBzZXRzIHVwIHRoZSBjbGllbnQtc2lkZSB2aWV3IHJvdXRpbmcgZW5naW5lPC9saT5cXG48bGk+SWYgZW5hYmxlZCA8ZW0+KHZpYSA8Y29kZT5vcHRpb25zPC9jb2RlPik8L2VtPiwgdGhlIGNhY2hpbmcgZW5naW5lIGlzIGNvbmZpZ3VyZWQ8L2xpPlxcbjxsaT5UYXVudXMgb2J0YWlucyB0aGUgdmlldyBtb2RlbCA8ZW0+KG1vcmUgb24gdGhpcyBsYXRlcik8L2VtPjwvbGk+XFxuPGxpPldoZW4gYSB2aWV3IG1vZGVsIGlzIG9idGFpbmVkLCB0aGUgPGNvZGU+JiMzOTtzdGFydCYjMzk7PC9jb2RlPiBldmVudCBpcyBlbWl0dGVkPC9saT5cXG48bGk+QW5jaG9yIGxpbmtzIHN0YXJ0IGJlaW5nIG1vbml0b3JlZCBmb3IgY2xpY2tzIDxlbT4oYXQgdGhpcyBwb2ludCB5b3VyIGFwcGxpY2F0aW9uIGJlY29tZXMgYSA8YSBocmVmPVxcXCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NpbmdsZS1wYWdlX2FwcGxpY2F0aW9uXFxcIj5TUEE8L2E+KTwvZW0+PC9saT5cXG48bGk+VGhlIDxjb2RlPmFydGljbGVzL2FydGljbGU8L2NvZGU+IGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgaXMgZXhlY3V0ZWQ8L2xpPlxcbjwvdWw+XFxuPHA+VGhhdCYjMzk7cyBxdWl0ZSBhIGJpdCBvZiBmdW5jdGlvbmFsaXR5LCBidXQgaWYgeW91IHRoaW5rIGFib3V0IGl0LCBtb3N0IG90aGVyIGZyYW1ld29ya3MgYWxzbyByZW5kZXIgdGhlIHZpZXcgYXQgdGhpcyBwb2ludCwgPGVtPnJhdGhlciB0aGFuIG9uIHRoZSBzZXJ2ZXItc2lkZSE8L2VtPjwvcD5cXG48cD5JbiBvcmRlciB0byBiZXR0ZXIgdW5kZXJzdGFuZCB0aGUgcHJvY2VzcywgSSYjMzk7bGwgd2FsayB5b3UgdGhyb3VnaCB0aGUgPGNvZGU+b3B0aW9uczwvY29kZT4gcGFyYW1ldGVyLjwvcD5cXG48cD5GaXJzdCBvZmYsIHRoZSA8Y29kZT5ib290c3RyYXA8L2NvZGU+IG9wdGlvbiBkZXRlcm1pbmVzIHRoZSBzdHJhdGVneSB1c2VkIHRvIHB1bGwgdGhlIHZpZXcgbW9kZWwgb2YgdGhlIHNlcnZlci1zaWRlIHJlbmRlcmVkIHZpZXcgaW50byB0aGUgY2xpZW50LXNpZGUuIFRoZXJlIGFyZSB0aHJlZSBwb3NzaWJsZSBzdHJhdGVnaWVzIGF2YWlsYWJsZTogPGNvZGU+YXV0bzwvY29kZT4gPGVtPih0aGUgZGVmYXVsdCBzdHJhdGVneSk8L2VtPiwgPGNvZGU+aW5saW5lPC9jb2RlPiwgb3IgPGNvZGU+bWFudWFsPC9jb2RlPi4gVGhlIDxjb2RlPmF1dG88L2NvZGU+IHN0cmF0ZWd5IGludm9sdmVzIHRoZSBsZWFzdCB3b3JrLCB3aGljaCBpcyB3aHkgaXQmIzM5O3MgdGhlIGRlZmF1bHQuPC9wPlxcbjx1bD5cXG48bGk+PGNvZGU+YXV0bzwvY29kZT4gd2lsbCBtYWtlIGFuIEFKQVggcmVxdWVzdCBmb3IgdGhlIHZpZXcgbW9kZWw8L2xpPlxcbjxsaT48Y29kZT5pbmxpbmU8L2NvZGU+IGV4cGVjdHMgeW91IHRvIHBsYWNlIHRoZSBtb2RlbCBpbnRvIGEgPGNvZGU+Jmx0O3NjcmlwdCB0eXBlPSYjMzk7dGV4dC90YXVudXMmIzM5OyZndDs8L2NvZGU+IHRhZzwvbGk+XFxuPGxpPjxjb2RlPm1hbnVhbDwvY29kZT4gZXhwZWN0cyB5b3UgdG8gZ2V0IHRoZSB2aWV3IG1vZGVsIGhvd2V2ZXIgeW91IHdhbnQgdG8sIGFuZCB0aGVuIGxldCBUYXVudXMga25vdyB3aGVuIGl0JiMzOTtzIHJlYWR5PC9saT5cXG48L3VsPlxcbjxwPkxldCYjMzk7cyBnbyBpbnRvIGRldGFpbCBhYm91dCBlYWNoIG9mIHRoZXNlIHN0cmF0ZWdpZXMuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwidXNpbmctdGhlLWF1dG8tc3RyYXRlZ3lcXFwiPlVzaW5nIHRoZSA8Y29kZT5hdXRvPC9jb2RlPiBzdHJhdGVneTwvaDQ+XFxuPHA+VGhlIDxjb2RlPmF1dG88L2NvZGU+IHN0cmF0ZWd5IG1lYW5zIHRoYXQgVGF1bnVzIHdpbGwgbWFrZSB1c2Ugb2YgYW4gQUpBWCByZXF1ZXN0IHRvIG9idGFpbiB0aGUgdmlldyBtb2RlbC4gPGVtPllvdSBkb24mIzM5O3QgaGF2ZSB0byBkbyBhbnl0aGluZyBlbHNlPC9lbT4gYW5kIHRoaXMgaXMgdGhlIGRlZmF1bHQgc3RyYXRlZ3kuIFRoaXMgaXMgdGhlIDxzdHJvbmc+bW9zdCBjb252ZW5pZW50IHN0cmF0ZWd5LCBidXQgYWxzbyB0aGUgc2xvd2VzdDwvc3Ryb25nPiBvbmUuPC9wPlxcbjxwPkl0JiMzOTtzIHNsb3cgYmVjYXVzZSB0aGUgdmlldyBtb2RlbCB3b24mIzM5O3QgYmUgcmVxdWVzdGVkIHVudGlsIHRoZSBidWxrIG9mIHlvdXIgSmF2YVNjcmlwdCBjb2RlIGhhcyBiZWVuIGRvd25sb2FkZWQsIHBhcnNlZCwgZXhlY3V0ZWQsIGFuZCA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IGlzIGludm9rZWQuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwidXNpbmctdGhlLWlubGluZS1zdHJhdGVneVxcXCI+VXNpbmcgdGhlIDxjb2RlPmlubGluZTwvY29kZT4gc3RyYXRlZ3k8L2g0PlxcbjxwPlRoZSA8Y29kZT5pbmxpbmU8L2NvZGU+IHN0cmF0ZWd5IGV4cGVjdHMgeW91IHRvIGFkZCBhIDxjb2RlPmRhdGEtdGF1bnVzPC9jb2RlPiBhdHRyaWJ1dGUgb24gdGhlIDxjb2RlPmNvbnRhaW5lcjwvY29kZT4gZWxlbWVudC4gVGhpcyBhdHRyaWJ1dGUgbXVzdCBiZSBlcXVhbCB0byB0aGUgPGNvZGU+aWQ8L2NvZGU+IGF0dHJpYnV0ZSBvZiBhIDxjb2RlPiZsdDtzY3JpcHQmZ3Q7PC9jb2RlPiB0YWcgY29udGFpbmluZyB0aGUgc2VyaWFsaXplZCB2aWV3IG1vZGVsIGFsb25nc2lkZSB0aGUgdmVyc2lvbiBpbmZvcm1hdGlvbiBhdXRvbWF0aWNhbGx5IGluamVjdGVkIGJ5IFRhdW51cyBpbnRvIHRoZSBsYXlvdXQgdGVtcGxhdGUgZGF0YS48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qYWRlXFxcIj5kaXYoZGF0YS10YXVudXM9JiMzOTttb2RlbCYjMzk7KSE9cGFydGlhbFxcbnNjcmlwdCNtb2RlbCh0eXBlPSYjMzk7dGV4dC90YXVudXMmIzM5Oyk9SlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiB2ZXJzaW9uLCBtb2RlbDogbW9kZWwgfSlcXG48L2NvZGU+PC9wcmU+XFxuPHA+UGF5IHNwZWNpYWwgYXR0ZW50aW9uIHRvIHRoZSBmYWN0IHRoYXQgdGhlIG1vZGVsIGlzIG5vdCBvbmx5IG1hZGUgaW50byBhIEpTT04gc3RyaW5nLCA8ZW0+YnV0IGFsc28gSFRNTCBlbmNvZGVkIGJ5IEphZGU8L2VtPi4gV2hlbiBUYXVudXMgZXh0cmFjdHMgdGhlIG1vZGVsIGZyb20gdGhlIDxjb2RlPiZsdDtzY3JpcHQmZ3Q7PC9jb2RlPiB0YWcgaXQmIzM5O2xsIHVuZXNjYXBlIGl0LCBhbmQgdGhlbiBwYXJzZSBpdCBhcyBKU09OLjwvcD5cXG48cD5UaGlzIHN0cmF0ZWd5IGlzIGFsc28gZmFpcmx5IGNvbnZlbmllbnQgdG8gc2V0IHVwLCBidXQgaXQgaW52b2x2ZXMgYSBsaXR0bGUgbW9yZSB3b3JrLiBJdCBtaWdodCBiZSB3b3J0aHdoaWxlIHRvIHVzZSBpbiBjYXNlcyB3aGVyZSBtb2RlbHMgYXJlIHNtYWxsLCBidXQgaXQgd2lsbCBzbG93IGRvd24gc2VydmVyLXNpZGUgdmlldyByZW5kZXJpbmcsIGFzIHRoZSBtb2RlbCBpcyBpbmxpbmVkIGFsb25nc2lkZSB0aGUgSFRNTC48L3A+XFxuPHA+VGhhdCBtZWFucyB0aGF0IHRoZSBjb250ZW50IHlvdSBhcmUgc3VwcG9zZWQgdG8gYmUgcHJpb3JpdGl6aW5nIGlzIGdvaW5nIHRvIHRha2UgbG9uZ2VyIHRvIGdldCB0byB5b3VyIGh1bWFucywgYnV0IG9uY2UgdGhleSBnZXQgdGhlIEhUTUwsIHRoaXMgc3RyYXRlZ3kgd2lsbCBleGVjdXRlIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyIGFsbW9zdCBpbW1lZGlhdGVseS48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGg0IGlkPVxcXCJ1c2luZy10aGUtbWFudWFsLXN0cmF0ZWd5XFxcIj5Vc2luZyB0aGUgPGNvZGU+bWFudWFsPC9jb2RlPiBzdHJhdGVneTwvaDQ+XFxuPHA+VGhlIDxjb2RlPm1hbnVhbDwvY29kZT4gc3RyYXRlZ3kgaXMgdGhlIG1vc3QgaW52b2x2ZWQgb2YgdGhlIHRocmVlLCBidXQgYWxzbyB0aGUgbW9zdCBwZXJmb3JtYW50LiBJbiB0aGlzIHN0cmF0ZWd5IHlvdSYjMzk7cmUgc3VwcG9zZWQgdG8gYWRkIHRoZSBmb2xsb3dpbmcgPGVtPihzZWVtaW5nbHkgcG9pbnRsZXNzKTwvZW0+IHNuaXBwZXQgb2YgY29kZSBpbiBhIDxjb2RlPiZsdDtzY3JpcHQmZ3Q7PC9jb2RlPiBvdGhlciB0aGFuIHRoZSBvbmUgdGhhdCYjMzk7cyBwdWxsaW5nIGRvd24gVGF1bnVzLCBzbyB0aGF0IHRoZXkgYXJlIHB1bGxlZCBjb25jdXJyZW50bHkgcmF0aGVyIHRoYW4gc2VyaWFsbHkuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbndpbmRvdy50YXVudXNSZWFkeSA9IGZ1bmN0aW9uIChtb2RlbCkge1xcbiAgd2luZG93LnRhdW51c1JlYWR5ID0gbW9kZWw7XFxufTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+T25jZSB5b3Ugc29tZWhvdyBnZXQgeW91ciBoYW5kcyBvbiB0aGUgdmlldyBtb2RlbCwgeW91IHNob3VsZCBpbnZva2UgPGNvZGU+dGF1bnVzUmVhZHkobW9kZWwpPC9jb2RlPi4gQ29uc2lkZXJpbmcgeW91JiMzOTtsbCBiZSBwdWxsaW5nIGJvdGggdGhlIHZpZXcgbW9kZWwgYW5kIFRhdW51cyBhdCB0aGUgc2FtZSB0aW1lLCBhIG51bWJlciBvZiBkaWZmZXJlbnQgc2NlbmFyaW9zIG1heSBwbGF5IG91dC48L3A+XFxuPHVsPlxcbjxsaT5UaGUgdmlldyBtb2RlbCBpcyBsb2FkZWQgZmlyc3QsIHlvdSBjYWxsIDxjb2RlPnRhdW51c1JlYWR5KG1vZGVsKTwvY29kZT4gYW5kIHdhaXQgZm9yIFRhdW51cyB0byB0YWtlIHRoZSBtb2RlbCBvYmplY3QgYW5kIGJvb3QgdGhlIGFwcGxpY2F0aW9uIGFzIHNvb24gYXMgPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPiBpcyBleGVjdXRlZDwvbGk+XFxuPGxpPlRhdW51cyBsb2FkcyBmaXJzdCBhbmQgPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPiBpcyBjYWxsZWQgZmlyc3QuIEluIHRoaXMgY2FzZSwgVGF1bnVzIHdpbGwgcmVwbGFjZSA8Y29kZT53aW5kb3cudGF1bnVzUmVhZHk8L2NvZGU+IHdpdGggYSBzcGVjaWFsIDxjb2RlPmJvb3Q8L2NvZGU+IG1ldGhvZC4gV2hlbiB0aGUgdmlldyBtb2RlbCBmaW5pc2hlcyBsb2FkaW5nLCB5b3UgY2FsbCA8Y29kZT50YXVudXNSZWFkeShtb2RlbCk8L2NvZGU+IGFuZCB0aGUgYXBwbGljYXRpb24gZmluaXNoZXMgYm9vdGluZzwvbGk+XFxuPC91bD5cXG48YmxvY2txdW90ZT5cXG48cD5JZiB0aGlzIHNvdW5kcyBhIGxpdHRsZSBtaW5kLWJlbmRpbmcgaXQmIzM5O3MgYmVjYXVzZSBpdCBpcy4gSXQmIzM5O3Mgbm90IGRlc2lnbmVkIHRvIGJlIHByZXR0eSwgYnV0IG1lcmVseSB0byBiZSBwZXJmb3JtYW50LjwvcD5cXG48L2Jsb2NrcXVvdGU+XFxuPHA+Tm93IHRoYXQgd2UmIzM5O3ZlIGFkZHJlc3NlZCB0aGUgYXdrd2FyZCBiaXRzLCBsZXQmIzM5O3MgY292ZXIgdGhlIDxlbT4mcXVvdDtzb21laG93IGdldCB5b3VyIGhhbmRzIG9uIHRoZSB2aWV3IG1vZGVsJnF1b3Q7PC9lbT4gYXNwZWN0LiBNeSBwcmVmZXJyZWQgbWV0aG9kIGlzIHVzaW5nIEpTT05QLCBhcyBpdCYjMzk7cyBhYmxlIHRvIGRlbGl2ZXIgdGhlIHNtYWxsZXN0IHNuaXBwZXQgcG9zc2libGUsIGFuZCBpdCBjYW4gdGFrZSBhZHZhbnRhZ2Ugb2Ygc2VydmVyLXNpZGUgY2FjaGluZy4gQ29uc2lkZXJpbmcgeW91JiMzOTtsbCBwcm9iYWJseSB3YW50IHRoaXMgdG8gYmUgYW4gaW5saW5lIHNjcmlwdCwga2VlcGluZyBpdCBzbWFsbCBpcyBpbXBvcnRhbnQuPC9wPlxcbjxwPlRoZSBnb29kIG5ld3MgaXMgdGhhdCB0aGUgc2VydmVyLXNpZGUgc3VwcG9ydHMgSlNPTlAgb3V0IHRoZSBib3guIEhlcmUmIzM5O3MgYSBzbmlwcGV0IG9mIGNvZGUgeW91IGNvdWxkIHVzZSB0byBwdWxsIGRvd24gdGhlIHZpZXcgbW9kZWwgYW5kIGJvb3QgVGF1bnVzIHVwIGFzIHNvb24gYXMgYm90aCBvcGVyYXRpb25zIGFyZSByZWFkeS48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxuZnVuY3Rpb24gaW5qZWN0ICh1cmwpIHtcXG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCYjMzk7c2NyaXB0JiMzOTspO1xcbiAgc2NyaXB0LnNyYyA9IHVybDtcXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcXG59XFxuXFxuZnVuY3Rpb24gaW5qZWN0b3IgKCkge1xcbiAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaDtcXG4gIHZhciBzZWFyY2hRdWVyeSA9IHNlYXJjaCA/ICYjMzk7JmFtcDsmIzM5OyArIHNlYXJjaC5zdWJzdHIoMSkgOiAmIzM5OyYjMzk7O1xcbiAgdmFyIHNlYXJjaEpzb24gPSAmIzM5Oz9qc29uJmFtcDtjYWxsYmFjaz10YXVudXNSZWFkeSYjMzk7ICsgc2VhcmNoUXVlcnk7XFxuICBpbmplY3QobG9jYXRpb24ucGF0aG5hbWUgKyBzZWFyY2hKc29uKTtcXG59XFxuXFxud2luZG93LnRhdW51c1JlYWR5ID0gZnVuY3Rpb24gKG1vZGVsKSB7XFxuICB3aW5kb3cudGF1bnVzUmVhZHkgPSBtb2RlbDtcXG59O1xcblxcbmluamVjdG9yKCk7XFxuPC9jb2RlPjwvcHJlPlxcbjxwPkFzIG1lbnRpb25lZCBlYXJsaWVyLCB0aGlzIGFwcHJvYWNoIGludm9sdmVzIGdldHRpbmcgeW91ciBoYW5kcyBkaXJ0aWVyIGJ1dCBpdCBwYXlzIG9mZiBieSBiZWluZyB0aGUgZmFzdGVzdCBvZiB0aGUgdGhyZWUuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwiY2FjaGluZ1xcXCI+Q2FjaGluZzwvaDQ+XFxuPHA+VGhlIGNsaWVudC1zaWRlIGluIFRhdW51cyBzdXBwb3J0cyBjYWNoaW5nIGluLW1lbW9yeSBhbmQgdXNpbmcgdGhlIGVtYmVkZGVkIEluZGV4ZWREQiBzeXN0ZW0gYnkgbWVyZWx5IHR1cm5pbmcgb24gdGhlIDxjb2RlPmNhY2hlPC9jb2RlPiBmbGFnIGluIHRoZSBvcHRpb25zIHBhc3NlZCB0byA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IG9uIHRoZSBjbGllbnQtc2lkZS48L3A+XFxuPHA+SWYgeW91IHNldCA8Y29kZT5jYWNoZTwvY29kZT4gdG8gPGNvZGU+dHJ1ZTwvY29kZT4gdGhlbiBjYWNoZWQgaXRlbXMgd2lsbCBiZSBjb25zaWRlcmVkIDxlbT4mcXVvdDtmcmVzaCZxdW90OyAodmFsaWQgY29waWVzIG9mIHRoZSBvcmlnaW5hbCk8L2VtPiBmb3IgPHN0cm9uZz4xNSBzZWNvbmRzPC9zdHJvbmc+LiBZb3UgY2FuIGFsc28gc2V0IDxjb2RlPmNhY2hlPC9jb2RlPiB0byBhIG51bWJlciwgYW5kIHRoYXQgbnVtYmVyIG9mIHNlY29uZHMgd2lsbCBiZSB1c2VkIGFzIHRoZSBkZWZhdWx0IGluc3RlYWQuPC9wPlxcbjxwPkNhY2hpbmcgY2FuIGFsc28gYmUgdHdlYWtlZCBvbiBpbmRpdmlkdWFsIHJvdXRlcy4gRm9yIGluc3RhbmNlLCB5b3UgY291bGQgc2V0IDxjb2RlPnsgY2FjaGU6IHRydWUgfTwvY29kZT4gd2hlbiBtb3VudGluZyBUYXVudXMgYW5kIHRoZW4gaGF2ZSA8Y29kZT57IGNhY2hlOiAzNjAwIH08L2NvZGU+IG9uIGEgcm91dGUgdGhhdCB5b3Ugd2FudCB0byBjYWNoZSBmb3IgYSBsb25nZXIgcGVyaW9kIG9mIHRpbWUuPC9wPlxcbjxwPlRoZSBjYWNoaW5nIGxheWVyIGlzIDxlbT5zZWFtbGVzc2x5IGludGVncmF0ZWQ8L2VtPiBpbnRvIFRhdW51cywgbWVhbmluZyB0aGF0IGFueSB2aWV3cyByZW5kZXJlZCBieSBUYXVudXMgd2lsbCBiZSBjYWNoZWQgYWNjb3JkaW5nIHRvIHRoZXNlIGNhY2hpbmcgcnVsZXMuIEtlZXAgaW4gbWluZCwgaG93ZXZlciwgdGhhdCBwZXJzaXN0ZW5jZSBhdCB0aGUgY2xpZW50LXNpZGUgY2FjaGluZyBsYXllciB3aWxsIG9ubHkgYmUgcG9zc2libGUgaW4gPGEgaHJlZj1cXFwiaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWluZGV4ZWRkYlxcXCI+YnJvd3NlcnMgdGhhdCBzdXBwb3J0IEluZGV4ZWREQjwvYT4uIEluIHRoZSBjYXNlIG9mIGJyb3dzZXJzIHRoYXQgZG9uJiMzOTt0IHN1cHBvcnQgSW5kZXhlZERCLCBUYXVudXMgd2lsbCB1c2UgYW4gaW4tbWVtb3J5IGNhY2hlLCB3aGljaCB3aWxsIGJlIHdpcGVkIG91dCB3aGVuZXZlciB0aGUgaHVtYW4gZGVjaWRlcyB0byBjbG9zZSB0aGUgdGFiIGluIHRoZWlyIGJyb3dzZXIuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwicHJlZmV0Y2hpbmdcXFwiPlByZWZldGNoaW5nPC9oND5cXG48cD5JZiBjYWNoaW5nIGlzIGVuYWJsZWQsIHRoZSBuZXh0IGxvZ2ljYWwgc3RlcCBpcyBwcmVmZXRjaGluZy4gVGhpcyBpcyBlbmFibGVkIGp1c3QgYnkgYWRkaW5nIDxjb2RlPnByZWZldGNoOiB0cnVlPC9jb2RlPiB0byB0aGUgb3B0aW9ucyBwYXNzZWQgdG8gPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPi4gVGhlIHByZWZldGNoaW5nIGZlYXR1cmUgd2lsbCBmaXJlIGZvciBhbnkgYW5jaG9yIGxpbmsgdGhhdCYjMzk7cyB0cmlwcyBvdmVyIGEgPGNvZGU+bW91c2VvdmVyPC9jb2RlPiBvciBhIDxjb2RlPnRvdWNoc3RhcnQ8L2NvZGU+IGV2ZW50LiBJZiBhIHJvdXRlIG1hdGNoZXMgdGhlIFVSTCBpbiB0aGUgPGNvZGU+aHJlZjwvY29kZT4sIGFuIEFKQVggcmVxdWVzdCB3aWxsIHByZWZldGNoIHRoZSB2aWV3IGFuZCBjYWNoZSBpdHMgY29udGVudHMsIGltcHJvdmluZyBwZXJjZWl2ZWQgcGVyZm9ybWFuY2UuPC9wPlxcbjxwPldoZW4gbGlua3MgYXJlIGNsaWNrZWQgYmVmb3JlIHByZWZldGNoaW5nIGZpbmlzaGVzLCB0aGV5JiMzOTtsbCB3YWl0IG9uIHRoZSBwcmVmZXRjaGVyIHRvIGZpbmlzaCBiZWZvcmUgaW1tZWRpYXRlbHkgc3dpdGNoaW5nIHRvIHRoZSB2aWV3LCBlZmZlY3RpdmVseSBjdXR0aW5nIGRvd24gdGhlIHJlc3BvbnNlIHRpbWUuIElmIHRoZSBsaW5rIHdhcyBhbHJlYWR5IHByZWZldGNoZWQgb3Igb3RoZXJ3aXNlIGNhY2hlZCwgdGhlIHZpZXcgd2lsbCBiZSBsb2FkZWQgaW1tZWRpYXRlbHkuIElmIHRoZSBodW1hbiBob3ZlcnMgb3ZlciBhIGxpbmsgYW5kIGFub3RoZXIgb25lIHdhcyBhbHJlYWR5IGJlaW5nIHByZWZldGNoZWQsIHRoZW4gdGhhdCBvbmUgaXMgYWJvcnRlZC4gVGhpcyBwcmV2ZW50cyBwcmVmZXRjaGluZyBmcm9tIGRyYWluaW5nIHRoZSBiYW5kd2lkdGggb24gY2xpZW50cyB3aXRoIGxpbWl0ZWQgb3IgaW50ZXJtaXR0ZW50IGNvbm5lY3Rpdml0eS48L3A+XFxuPGg0IGlkPVxcXCJ2ZXJzaW9uaW5nXFxcIj5WZXJzaW9uaW5nPC9oND5cXG48cD5XaGVuIGVuYWJsZWQsIHZlcnNpb25pbmcgd2lsbCBsb29rIG91dCBmb3IgZGlzY3JlcGFuY2llcyBiZXR3ZWVuIHdoYXQmIzM5O3MgY3VycmVudGx5IG9uIHRoZSBjbGllbnQgYW5kIHdoYXQmIzM5O3Mgb24gdGhlIHNlcnZlciwgYW5kIHJlbG9hZCBldmVyeXRoaW5nIG5lY2Vzc2FyeSB0byBtYWtlIHdoYXQmIzM5O3Mgb24gdGhlIGNsaWVudCBtYXRjaCB3aGF0JiMzOTtzIG9uIHRoZSBzZXJ2ZXIuPC9wPlxcbjxwPkluIG9yZGVyIHRvIHR1cm4gaXQgb24sIHNldCB0aGUgPGNvZGU+dmVyc2lvbjwvY29kZT4gZmllbGQgaW4gdGhlIG9wdGlvbnMgd2hlbiBpbnZva2luZyA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IDxzdHJvbmc+b24gYm90aCB0aGUgc2VydmVyLXNpZGUgYW5kIHRoZSBjbGllbnQtc2lkZSwgdXNpbmcgdGhlIHNhbWUgdmFsdWU8L3N0cm9uZz4uIFRoZSBUYXVudXMgdmVyc2lvbiBzdHJpbmcgd2lsbCBiZSBhZGRlZCB0byB0aGUgb25lIHlvdSBwcm92aWRlZCwgc28gdGhhdCBUYXVudXMgd2lsbCBrbm93IHRvIHN0YXkgYWxlcnQgZm9yIGNoYW5nZXMgdG8gVGF1bnVzIGl0c2VsZiwgYXMgd2VsbC48L3A+XFxuPGJsb2NrcXVvdGU+XFxuPHA+VG8gbWFrZSBzdXJlIHlvdSBkb24mIzM5O3QgZm9yZ2V0IHRvIGNoYW5nZSB0aGUgdmVyc2lvbiBzdHJpbmcgaW4gb25lIG9mIHRoZSBtb3VudHBvaW50cywgcGxlYXNlIGNyZWF0ZSBhIEpTT04gZmlsZSB3aXRoIGp1c3QgdGhlIHZlcnNpb24gc3RyaW5nIGFuZCA8Y29kZT5yZXF1aXJlPC9jb2RlPiB0aGF0IGZpbGUgaW4gYm90aCBzaWRlcy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+ZWNobyAmIzM5OyZxdW90OzEuMC4wJnF1b3Q7JiMzOTsgJmd0OyB2ZXJzaW9uLmpzb25cXG48L2NvZGU+PC9wcmU+XFxuPC9ibG9ja3F1b3RlPlxcbjxwPlRoZSBkZWZhdWx0IHZlcnNpb24gc3RyaW5nIGlzIHNldCB0byA8Y29kZT4xPC9jb2RlPi4gVGhlIFRhdW51cyB2ZXJzaW9uIHdpbGwgYmUgcHJlcGVuZGVkIHRvIHlvdXJzLCByZXN1bHRpbmcgaW4gYSB2YWx1ZSBzdWNoIGFzIDxjb2RlPnQzLjAuMDt2MTwvY29kZT4gd2hlcmUgVGF1bnVzIGlzIHJ1bm5pbmcgdmVyc2lvbiA8Y29kZT4zLjAuMDwvY29kZT4gYW5kIHlvdXIgYXBwbGljYXRpb24gaXMgcnVubmluZyB2ZXJzaW9uIDxjb2RlPjE8L2NvZGU+LjwvcD5cXG48cD5SZWZlciB0byB0aGUgR2V0dGluZyBTdGFydGVkIGd1aWRlIGZvciBhIG1vcmUgZGV0YWlsZWQgPGEgaHJlZj1cXFwiL2dldHRpbmctc3RhcnRlZCN2ZXJzaW9uaW5nXFxcIj5hbmFseXNpcyBvZiB0aGUgdXNlcyBmb3IgdmVyc2lvbmluZzwvYT4uIFRoZXJlJiMzOTtzIHNvbWUgbW9yZSBudWdnZXRzIG9mIGluZm9ybWF0aW9uIGluIHRoZSA8YSBocmVmPVxcXCIvcGVyZm9ybWFuY2UjdXNlLXZlcnNpb25pbmctdG8tZW5zdXJlLWNhY2hlLXZhbGlkaXR5XFxcIj5QZXJmb3JtYW5jZSBPcHRpbWl6YXRpb248L2E+IGd1aWRlIGFzIHdlbGwuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwiLXRhdW51cy1vbi10eXBlLWZuLVxcXCI+PGNvZGU+dGF1bnVzLm9uKHR5cGUsIGZuKTwvY29kZT48L2gyPlxcbjxwPlRhdW51cyBlbWl0cyBhIHNlcmllcyBvZiBldmVudHMgZHVyaW5nIGl0cyBsaWZlY3ljbGUsIGFuZCA8Y29kZT50YXVudXMub248L2NvZGU+IGlzIHRoZSB3YXkgeW91IGNhbiB0dW5lIGluIGFuZCBsaXN0ZW4gZm9yIHRoZXNlIGV2ZW50cyB1c2luZyBhIHN1YnNjcmlwdGlvbiBmdW5jdGlvbiA8Y29kZT5mbjwvY29kZT4uPC9wPlxcbjx0YWJsZT5cXG48dGhlYWQ+XFxuPHRyPlxcbjx0aD5FdmVudDwvdGg+XFxuPHRoPkFyZ3VtZW50czwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtzdGFydCYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPmNvbnRhaW5lciwgbW9kZWwsIHJvdXRlPC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbiA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IGZpbmlzaGVkIHRoZSByb3V0ZSBzZXR1cCBhbmQgaXMgYWJvdXQgdG8gaW52b2tlIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyLiBTdWJzY3JpYmUgdG8gdGhpcyBldmVudCBiZWZvcmUgY2FsbGluZyA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+LjwvdGQ+XFxuPC90cj5cXG48dHI+XFxuPHRkPjxjb2RlPiYjMzk7cmVuZGVyJiMzOTs8L2NvZGU+PC90ZD5cXG48dGQ+PGNvZGU+Y29udGFpbmVyLCBtb2RlbCwgcm91dGU8L2NvZGU+PC90ZD5cXG48dGQ+QSB2aWV3IGhhcyBqdXN0IGJlZW4gcmVuZGVyZWQgYW5kIGl0cyBjbGllbnQtc2lkZSBjb250cm9sbGVyIGlzIGFib3V0IHRvIGJlIGludm9rZWQ8L3RkPlxcbjwvdHI+XFxuPHRyPlxcbjx0ZD48Y29kZT4mIzM5O2NoYW5nZSYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBtb2RlbDwvY29kZT48L3RkPlxcbjx0ZD5TYW1lIGFzIDxjb2RlPiYjMzk7cmVuZGVyJiMzOTs8L2NvZGU+LCBidXQgb25seSBpZiA8Y29kZT5jb250YWluZXI8L2NvZGU+IGlzIHRoZSBtb3VudHBvaW50IGFuZCB0aGUgcm91dGUgaGFzIGNoYW5nZWQuPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtmZXRjaC5zdGFydCYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0PC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3Qgc3RhcnRzLjwvdGQ+XFxuPC90cj5cXG48dHI+XFxuPHRkPjxjb2RlPiYjMzk7ZmV0Y2guZG9uZSYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0LCBkYXRhPC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3QgZW5kcyBzdWNjZXNzZnVsbHkuPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtmZXRjaC5hYm9ydCYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0PC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3QgaXMgcHVycG9zZWx5IGFib3J0ZWQuPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtmZXRjaC5lcnJvciYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0LCBlcnI8L2NvZGU+PC90ZD5cXG48dGQ+RW1pdHRlZCB3aGVuZXZlciBhbiBYSFIgcmVxdWVzdCByZXN1bHRzIGluIGFuIEhUVFAgZXJyb3IuPC90ZD5cXG48L3RyPlxcbjwvdGJvZHk+XFxuPC90YWJsZT5cXG48cD5Db25zaWRlciBmb3IgaW5zdGFuY2UgdGhhdCB5b3UmIzM5O2QgbGlrZSB0byBrZWVwIHRyYWNrIG9mIGV2ZXJ5IHZpZXcgdGhhdCBnZXRzIHJlbmRlcmVkLCBhbmQgd2hhdCBET00gZWxlbWVudCBpdCBnZXRzIHBsYWNlZCBpbnRvLiBUaGUgcGllY2Ugb2YgY29kZSBiZWxvdyB3b3VsZCBxdWlja2x5IGRvIHRoYXQgZm9yIHVzLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj50YXVudXMub24oJiMzOTtyZW5kZXImIzM5OywgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xcbiAgY29uc29sZS5sb2coJiMzOTtSZW5kZXJlZCBhIHZpZXcgb24mIzM5OywgY29udGFpbmVyKTtcXG59KTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLW9uY2UtdHlwZS1mbi1cXFwiPjxjb2RlPnRhdW51cy5vbmNlKHR5cGUsIGZuKTwvY29kZT48L2gyPlxcbjxwPlRoaXMgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8gPGEgaHJlZj1cXFwiIy10YXVudXMtb24tdHlwZS1mbi1cXFwiPjxjb2RlPnRhdW51cy5vbjwvY29kZT48L2E+LCBleGNlcHQgdGhlIGV2ZW50IGxpc3RlbmVycyB3aWxsIGJlIHVzZWQgb25jZSBhbmQgdGhlbiBpdCYjMzk7bGwgYmUgZGlzY2FyZGVkLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi10YXVudXMtb2ZmLXR5cGUtZm4tXFxcIj48Y29kZT50YXVudXMub2ZmKHR5cGUsIGZuKTwvY29kZT48L2gyPlxcbjxwPlVzaW5nIHRoaXMgbWV0aG9kIHlvdSBjYW4gcmVtb3ZlIGFueSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWRkZWQgdXNpbmcgPGNvZGU+Lm9uPC9jb2RlPiBvciA8Y29kZT4ub25jZTwvY29kZT4uIFlvdSBtdXN0IHByb3ZpZGUgdGhlIHR5cGUgb2YgZXZlbnQgeW91IHdhbnQgdG8gcmVtb3ZlIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24gdGhhdCB3YXMgb3JpZ2luYWxseSB1c2VkIHdoZW4gY2FsbGluZyA8Y29kZT4ub248L2NvZGU+IG9yIDxjb2RlPi5vbmNlPC9jb2RlPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLWludGVyY2VwdC1hY3Rpb24tZm4tXFxcIj48Y29kZT50YXVudXMuaW50ZXJjZXB0KGFjdGlvbj8sIGZuKTwvY29kZT48L2gyPlxcbjxwPlRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGFudGljaXBhdGUgbW9kZWwgcmVxdWVzdHMsIGJlZm9yZSB0aGV5IGV2ZXIgbWFrZSBpdCBpbnRvIFhIUiByZXF1ZXN0cy4gWW91IGNhbiBhZGQgaW50ZXJjZXB0b3JzIGZvciBzcGVjaWZpYyBhY3Rpb25zLCB3aGljaCB3b3VsZCBiZSB0cmlnZ2VyZWQgb25seSBpZiB0aGUgcmVxdWVzdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgPGNvZGU+YWN0aW9uPC9jb2RlPi4gWW91IGNhbiBhbHNvIGFkZCBnbG9iYWwgaW50ZXJjZXB0b3JzIGJ5IG9taXR0aW5nIHRoZSA8Y29kZT5hY3Rpb248L2NvZGU+IHBhcmFtZXRlciwgb3Igc2V0dGluZyBpdCB0byA8Y29kZT4qPC9jb2RlPi48L3A+XFxuPHA+QW4gaW50ZXJjZXB0b3IgZnVuY3Rpb24gd2lsbCByZWNlaXZlIGFuIDxjb2RlPmV2ZW50PC9jb2RlPiBwYXJhbWV0ZXIsIGNvbnRhaW5pbmcgYSBmZXcgZGlmZmVyZW50IHByb3BlcnRpZXMuPC9wPlxcbjx1bD5cXG48bGk+PGNvZGU+dXJsPC9jb2RlPiBjb250YWlucyB0aGUgVVJMIHRoYXQgbmVlZHMgYSB2aWV3IG1vZGVsPC9saT5cXG48bGk+PGNvZGU+cm91dGU8L2NvZGU+IGNvbnRhaW5zIHRoZSBmdWxsIHJvdXRlIG9iamVjdCBhcyB5b3UmIzM5O2QgZ2V0IGZyb20gPGEgaHJlZj1cXFwiIy10YXVudXMtcm91dGUtdXJsLVxcXCI+PGNvZGU+dGF1bnVzLnJvdXRlKHVybCk8L2NvZGU+PC9hPjwvbGk+XFxuPGxpPjxjb2RlPnBhcnRzPC9jb2RlPiBpcyBqdXN0IGEgc2hvcnRjdXQgZm9yIDxjb2RlPnJvdXRlLnBhcnRzPC9jb2RlPjwvbGk+XFxuPGxpPjxjb2RlPnByZXZlbnREZWZhdWx0KGRhdGEpPC9jb2RlPiBhbGxvd3MgeW91IHRvIHN1cHByZXNzIHRoZSBuZWVkIGZvciBhbiBBSkFYIHJlcXVlc3QsIGNvbW1hbmRpbmcgVGF1bnVzIHRvIHVzZSB0aGUgcmVzcG9uc2UgZGF0YSB5b3UmIzM5O3ZlIHByb3ZpZGVkIGluc3RlYWQ8L2xpPlxcbjxsaT48Y29kZT5kZWZhdWx0UHJldmVudGVkPC9jb2RlPiB0ZWxscyB5b3UgaWYgc29tZSBvdGhlciBoYW5kbGVyIGhhcyBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYmVoYXZpb3I8L2xpPlxcbjxsaT48Y29kZT5jYW5QcmV2ZW50RGVmYXVsdDwvY29kZT4gdGVsbHMgeW91IGlmIGludm9raW5nIDxjb2RlPmV2ZW50LnByZXZlbnREZWZhdWx0PC9jb2RlPiB3aWxsIGhhdmUgYW55IGVmZmVjdDwvbGk+XFxuPGxpPjxjb2RlPmRhdGE8L2NvZGU+IHN0YXJ0cyBhcyA8Y29kZT5udWxsPC9jb2RlPiwgYW5kIGl0IGNhbiBsYXRlciBiZWNvbWUgdGhlIGRhdGEgcGFzc2VkIHRvIDxjb2RlPnByZXZlbnREZWZhdWx0PC9jb2RlPjwvbGk+XFxuPC91bD5cXG48cD5JbnRlcmNlcHRvcnMgYXJlIGFzeW5jaHJvbm91cywgYnV0IGlmIGFuIGludGVyY2VwdG9yIHNwZW5kcyBsb25nZXIgdGhhbiA1MG1zIGl0JiMzOTtsbCBiZSBzaG9ydC1jaXJjdWl0ZWQgYW5kIGNhbGxpbmcgPGNvZGU+ZXZlbnQucHJldmVudERlZmF1bHQ8L2NvZGU+IHBhc3QgdGhhdCBwb2ludCB3b24mIzM5O3QgaGF2ZSBhbnkgZWZmZWN0LjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi10YXVudXMtcGFydGlhbC1jb250YWluZXItYWN0aW9uLW1vZGVsLVxcXCI+PGNvZGU+dGF1bnVzLnBhcnRpYWwoY29udGFpbmVyLCBhY3Rpb24sIG1vZGVsKTwvY29kZT48L2gyPlxcbjxwPlRoaXMgbWV0aG9kIHByb3ZpZGVzIHlvdSB3aXRoIGFjY2VzcyB0byB0aGUgdmlldy1yZW5kZXJpbmcgZW5naW5lIG9mIFRhdW51cy4gWW91IGNhbiB1c2UgaXQgdG8gcmVuZGVyIHRoZSA8Y29kZT5hY3Rpb248L2NvZGU+IHZpZXcgaW50byB0aGUgPGNvZGU+Y29udGFpbmVyPC9jb2RlPiBET00gZWxlbWVudCwgdXNpbmcgdGhlIHNwZWNpZmllZCA8Y29kZT5tb2RlbDwvY29kZT4uIE9uY2UgdGhlIHZpZXcgaXMgcmVuZGVyZWQsIHRoZSA8Y29kZT5yZW5kZXI8L2NvZGU+IGV2ZW50IHdpbGwgYmUgZmlyZWQgPGVtPih3aXRoIDxjb2RlPmNvbnRhaW5lciwgbW9kZWw8L2NvZGU+IGFzIGFyZ3VtZW50cyk8L2VtPiBhbmQgdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgZm9yIHRoYXQgdmlldyB3aWxsIGJlIGV4ZWN1dGVkLjwvcD5cXG48cD5Ob3RlIHRoYXQgdGhlIHBhcnRpYWwgbWF5IGJlIHJlbmRlcmVkIGFzeW5jaHJvbm91c2x5IGlmIHRoZSA8Y29kZT5hY3Rpb248L2NvZGU+IGlzIDxhIGhyZWY9XFxcIiMtZGVmZXItYWN0aW9ucy1cXFwiPmRlZmVycmVkPC9hPiBhbmQgaXRzIGNvbXBvbmVudHMgKHZpZXcgdGVtcGxhdGUsIGNvbnRyb2xsZXIpIGFyZW4mIzM5O3QgcmVhZGlseSBhdmFpbGFibGUgaW4gdGhlIGNsaWVudCB5ZXQuIFRoaXMgbWV0aG9kIHJldHVybnMgYW4gZXZlbnQgZW1pdHRlciwgd2hpY2ggeW91IGNhbiB1c2UgdG8gZ3VhcmFudGVlIHRoYXQgeW91IGNvbnRpbnVlIGV4ZWN0aW9uIGFmdGVyIHRoZSBwYXJ0aWFsIGhhcyBiZWVuIHJlbmRlcmVkLjwvcD5cXG48aDQgaWQ9XFxcImV4YW1wbGVcXFwiPkV4YW1wbGU8L2g0PlxcbjxwPkdpdmVuIGEgZGVmZXJyZWQgPGNvZGU+JiMzOTt0YWdzJiMzOTs8L2NvZGU+IHBhcnRpYWwgdmlldyBsaWtlIHRoaXMgZnVuY3Rpb246PC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPmZ1bmN0aW9uIChtb2RlbCkge1xcbiAgcmV0dXJuIG1vZGVsLmxlbmd0aCA/ICYjMzk7Jmx0O3VsJmd0OyZsdDtsaSZndDsmIzM5OyArIG1vZGVsLmpvaW4oJiMzOTsmbHQ7L2xpJmd0OyZsdDtsaSZndDsmIzM5OykgKyAmIzM5OyZsdDsvbGkmZ3Q7Jmx0Oy91bCZndDsmIzM5OyA6ICYjMzk7Jmx0O3VsJmd0OyZsdDsvdWwmZ3Q7JiMzOTs7XFxufVxcbjwvY29kZT48L3ByZT5cXG48cD5Zb3UgY291bGQgcmVuZGVyIHRoZSB2aWV3IGFuZCBjb250aW51ZSBleGVjdXRpb24gb25jZSB0aGUgdmlldyBoYXMgYmVlbiByZW5kZXJlZCBvbnRvIGEgPGNvZGU+ZGl2PC9jb2RlPiBieSBsaXN0ZW5pbmcgdG8gdGhlIDxjb2RlPiYjMzk7cmVuZGVyJiMzOTs8L2NvZGU+IGV2ZW50IGF0IHRoZSB2aWV3IGxldmVsLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj50YXVudXMucGFydGlhbChkaXYsICYjMzk7dGFncyYjMzk7LCBbJiMzOTthJiMzOTssICYjMzk7YiYjMzk7XSkub24oJiMzOTtyZW5kZXImIzM5OywgZnVuY3Rpb24gKGh0bWwpIHtcXG4gIGNvbnNvbGUubG9nKCYjMzk7SGVyZVxcXFwmIzM5O3MgdGhlIEhUTUwgdGhhdCB3YXMgcmVuZGVyZWQgb24gb3VyIGRpdlxcXFxuJiMzOTsgKyBodG1sKTtcXG59KTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLW5hdmlnYXRlLXVybC1vcHRpb25zLVxcXCI+PGNvZGU+dGF1bnVzLm5hdmlnYXRlKHVybCwgb3B0aW9ucyk8L2NvZGU+PC9oMj5cXG48cD5XaGVuZXZlciB5b3Ugd2FudCB0byBuYXZpZ2F0ZSB0byBhIFVSTCwgc2F5IHdoZW4gYW4gQUpBWCBjYWxsIGZpbmlzaGVzIGFmdGVyIGEgYnV0dG9uIGNsaWNrLCB5b3UgY2FuIHVzZSA8Y29kZT50YXVudXMubmF2aWdhdGU8L2NvZGU+IHBhc3NpbmcgaXQgYSBwbGFpbiBVUkwgb3IgYW55dGhpbmcgdGhhdCB3b3VsZCBjYXVzZSA8Y29kZT50YXVudXMucm91dGUodXJsKTwvY29kZT4gdG8gcmV0dXJuIGEgdmFsaWQgcm91dGUuPC9wPlxcbjxwPkJ5IGRlZmF1bHQsIGlmIDxjb2RlPnRhdW51cy5uYXZpZ2F0ZSh1cmwsIG9wdGlvbnMpPC9jb2RlPiBpcyBjYWxsZWQgd2l0aCBhbiA8Y29kZT51cmw8L2NvZGU+IHRoYXQgZG9lc24mIzM5O3QgbWF0Y2ggYW55IGNsaWVudC1zaWRlIHJvdXRlLCB0aGVuIHRoZSB1c2VyIHdpbGwgYmUgcmVkaXJlY3RlZCB2aWEgPGNvZGU+bG9jYXRpb24uaHJlZjwvY29kZT4uIEluIGNhc2VzIHdoZXJlIHRoZSBicm93c2VyIGRvZXNuJiMzOTt0IHN1cHBvcnQgdGhlIGhpc3RvcnkgQVBJLCA8Y29kZT5sb2NhdGlvbi5ocmVmPC9jb2RlPiB3aWxsIGJlIHVzZWQgYXMgd2VsbC48L3A+XFxuPHA+VGhlcmUmIzM5O3MgYSBmZXcgb3B0aW9ucyB5b3UgY2FuIHVzZSB0byB0d2VhayB0aGUgYmVoYXZpb3Igb2YgPGNvZGU+dGF1bnVzLm5hdmlnYXRlPC9jb2RlPi48L3A+XFxuPHRhYmxlPlxcbjx0aGVhZD5cXG48dHI+XFxuPHRoPk9wdGlvbjwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+Y29udGV4dDwvY29kZT48L3RkPlxcbjx0ZD5BIERPTSBlbGVtZW50IHRoYXQgY2F1c2VkIHRoZSBuYXZpZ2F0aW9uIGV2ZW50LCB1c2VkIHdoZW4gZW1pdHRpbmcgZXZlbnRzPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+c3RyaWN0PC9jb2RlPjwvdGQ+XFxuPHRkPklmIHNldCB0byA8Y29kZT50cnVlPC9jb2RlPiBhbmQgdGhlIFVSTCBkb2VzbiYjMzk7dCBtYXRjaCBhbnkgcm91dGUsIHRoZW4gdGhlIG5hdmlnYXRpb24gYXR0ZW1wdCBtdXN0IGJlIGlnbm9yZWQ8L3RkPlxcbjwvdHI+XFxuPHRyPlxcbjx0ZD48Y29kZT5zY3JvbGw8L2NvZGU+PC90ZD5cXG48dGQ+V2hlbiB0aGlzIGlzIHNldCB0byA8Y29kZT5mYWxzZTwvY29kZT4sIGVsZW1lbnRzIGFyZW4mIzM5O3Qgc2Nyb2xsZWQgaW50byB2aWV3IGFmdGVyIG5hdmlnYXRpb248L3RkPlxcbjwvdHI+XFxuPHRyPlxcbjx0ZD48Y29kZT5mb3JjZTwvY29kZT48L3RkPlxcbjx0ZD5Vbmxlc3MgdGhpcyBpcyBzZXQgdG8gPGNvZGU+dHJ1ZTwvY29kZT4sIG5hdmlnYXRpb24gd29uJiMzOTt0IDxlbT5mZXRjaCBhIG1vZGVsPC9lbT4gaWYgdGhlIHJvdXRlIG1hdGNoZXMgdGhlIGN1cnJlbnQgcm91dGUsIGFuZCA8Y29kZT5zdGF0ZS5tb2RlbDwvY29kZT4gd2lsbCBiZSByZXVzZWQgaW5zdGVhZDwvdGQ+XFxuPC90cj5cXG48dHI+XFxuPHRkPjxjb2RlPnJlcGxhY2VTdGF0ZTwvY29kZT48L3RkPlxcbjx0ZD5Vc2UgPGNvZGU+cmVwbGFjZVN0YXRlPC9jb2RlPiBpbnN0ZWFkIG9mIDxjb2RlPnB1c2hTdGF0ZTwvY29kZT4gd2hlbiBjaGFuZ2luZyBoaXN0b3J5PC90ZD5cXG48L3RyPlxcbjwvdGJvZHk+XFxuPC90YWJsZT5cXG48cD5Ob3RlIHRoYXQgdGhlIG5vdGlvbiBvZiA8ZW0+ZmV0Y2hpbmcgYSBtb2RlbDwvZW0+IG1pZ2h0IGJlIGRlY2VpdmluZyBhcyB0aGUgbW9kZWwgY291bGQgYmUgcHVsbGVkIGZyb20gdGhlIGNhY2hlIGV2ZW4gaWYgPGNvZGU+Zm9yY2U8L2NvZGU+IGlzIHNldCB0byA8Y29kZT50cnVlPC9jb2RlPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLXJvdXRlLXVybC1cXFwiPjxjb2RlPnRhdW51cy5yb3V0ZSh1cmwpPC9jb2RlPjwvaDI+XFxuPHA+VGhpcyBjb252ZW5pZW5jZSBtZXRob2QgYWxsb3dzIHlvdSB0byBicmVhayBkb3duIGEgVVJMIGludG8gaXRzIGluZGl2aWR1YWwgY29tcG9uZW50cy4gVGhlIG1ldGhvZCBhY2NlcHRzIGFueSBvZiB0aGUgZm9sbG93aW5nIFVSTCBwYXR0ZXJucywgYW5kIGl0IHJldHVybnMgYSBUYXVudXMgcm91dGUgb2JqZWN0LjwvcD5cXG48dWw+XFxuPGxpPkEgZnVsbHkgcXVhbGlmaWVkIFVSTCBvbiB0aGUgc2FtZSBvcmlnaW4sIGUuZyA8Y29kZT5odHRwOi8vdGF1bnVzLmlvL2FwaTwvY29kZT48L2xpPlxcbjxsaT5BbiBhYnNvbHV0ZSBVUkwgd2l0aG91dCBhbiBvcmlnaW4sIGUuZyA8Y29kZT4vYXBpPC9jb2RlPjwvbGk+XFxuPGxpPkp1c3QgYSBoYXNoLCBlLmcgPGNvZGU+I2ZvbzwvY29kZT4gPGVtPig8Y29kZT5sb2NhdGlvbi5ocmVmPC9jb2RlPiBpcyB1c2VkKTwvZW0+PC9saT5cXG48bGk+RmFsc3kgdmFsdWVzLCBlLmcgPGNvZGU+bnVsbDwvY29kZT4gPGVtPig8Y29kZT5sb2NhdGlvbi5ocmVmPC9jb2RlPiBpcyB1c2VkKTwvZW0+PC9saT5cXG48L3VsPlxcbjxwPlJlbGF0aXZlIFVSTHMgYXJlIG5vdCBzdXBwb3J0ZWQgPGVtPihhbnl0aGluZyB0aGF0IGRvZXNuJiMzOTt0IGhhdmUgYSBsZWFkaW5nIHNsYXNoKTwvZW0+LCBlLmcgPGNvZGU+ZmlsZXMvZGF0YS5qc29uPC9jb2RlPi4gQW55dGhpbmcgdGhhdCYjMzk7cyBub3Qgb24gdGhlIHNhbWUgb3JpZ2luIG9yIGRvZXNuJiMzOTt0IG1hdGNoIG9uZSBvZiB0aGUgcmVnaXN0ZXJlZCByb3V0ZXMgaXMgZ29pbmcgdG8geWllbGQgPGNvZGU+bnVsbDwvY29kZT4uPC9wPlxcbjxwPjxlbT5UaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIHdoZW4gZGVidWdnaW5nIHlvdXIgcm91dGluZyB0YWJsZXMsIGFzIGl0IGdpdmVzIHlvdSBkaXJlY3QgYWNjZXNzIHRvIHRoZSByb3V0ZXIgdXNlZCBpbnRlcm5hbGx5IGJ5IFRhdW51cy48L2VtPjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDQgaWQ9XFxcIi10YXVudXMtcm91dGUtZXF1YWxzLXJvdXRlLXJvdXRlLVxcXCI+PGNvZGU+dGF1bnVzLnJvdXRlLmVxdWFscyhyb3V0ZSwgcm91dGUpPC9jb2RlPjwvaDQ+XFxuPHA+Q29tcGFyZXMgdHdvIHJvdXRlcyBhbmQgcmV0dXJucyA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGV5IHdvdWxkIGZldGNoIHRoZSBzYW1lIG1vZGVsLiBOb3RlIHRoYXQgZGlmZmVyZW50IFVSTHMgbWF5IHN0aWxsIHJldHVybiA8Y29kZT50cnVlPC9jb2RlPi4gRm9yIGluc3RhbmNlLCA8Y29kZT4vZm9vPC9jb2RlPiBhbmQgPGNvZGU+L2ZvbyNiYXI8L2NvZGU+IHdvdWxkIGZldGNoIHRoZSBzYW1lIG1vZGVsIGV2ZW4gaWYgdGhleSYjMzk7cmUgZGlmZmVyZW50IFVSTHMuIFRoYXQmIzM5O3MgYmVjYXVzZSB0aGUgaGFzaCBwb3J0aW9uIG9mIGFuIFVSTCBpcyBuZXZlciBzZW50IHRvIHRoZSBzZXJ2ZXIuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwiLXRhdW51cy1yZWRpcmVjdC1vcHRpb25zLVxcXCI+PGNvZGU+dGF1bnVzLnJlZGlyZWN0KG9wdGlvbnMpPC9jb2RlPjwvaDI+XFxuPHA+UmVkaXJlY3RzIHRoZSB1c2VyIHRvIGEgZGlmZmVyZW50IFVSTC4gSWYgPGNvZGU+aGFyZDwvY29kZT4gaXMgc2V0IHRvIDxjb2RlPnRydWU8L2NvZGU+LCB0aGVuIHRoaXMgbWV0aG9kIGlzIGVmZmVjdGl2ZWx5IHRoZSBzYW1lIGFzIGRvaW5nIDxjb2RlPmxvY2F0aW9uLmhyZWYgPSBvcHRpb25zLmhyZWY8L2NvZGU+LiBJZiA8Y29kZT5oYXJkPC9jb2RlPiBpcyA8Y29kZT5mYWxzZTwvY29kZT4sIDxhIGhyZWY9XFxcIiMtdGF1bnVzLW5hdmlnYXRlLXVybC1vcHRpb25zLVxcXCI+dGF1bnVzLm5hdmlnYXRlPC9hPiB3aWxsIGJlIHVzZWQuPC9wPlxcbjxoNiBpZD1cXFwiZXhhbXBsZVxcXCI+RXhhbXBsZTwvaDY+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+dGF1bnVzLnJlZGlyZWN0KHsgaHJlZjogJiMzOTsvZm9vJiMzOTssIGhhcmQ6IHRydWUgfSk7XFxuPC9jb2RlPjwvcHJlPlxcbjxwPldoZW4gdGhlIDxjb2RlPmZvcmNlPC9jb2RlPiBvcHRpb24gaXMgc2V0IHRvIDxjb2RlPnRydWU8L2NvZGU+LCByZWRpcmVjdHMgd2lsbCBiZSBjYXJyaWVkIG91dCBldmVuIGlmIHRoZSB0YXJnZXQgVVJMIGlzIHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50IDxjb2RlPmxvY2F0aW9uPC9jb2RlPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgyIGlkPVxcXCItdGF1bnVzLXJlc29sdmUtb24tdGhlLWNsaWVudFxcXCI+PGNvZGU+dGF1bnVzLnJlc29sdmU8L2NvZGU+IG9uIHRoZSBjbGllbnQ8L2gyPlxcbjxwPlRoaXMgbWV0aG9kIGlzIGlkZW50aWNhbCB0byB0aGUgc2VydmVyLXNpZGUgZmxhdm9yIG9mIDxhIGhyZWY9XFxcIiMtdGF1bnVzLXJlc29sdmUtYWN0aW9uLWRhdGEtXFxcIj48Y29kZT50YXVudXMucmVzb2x2ZShhY3Rpb24sIGRhdGEpPC9jb2RlPjwvYT4sIGJ1dCBhdmFpbGFibGUgb24gdGhlIGNsaWVudC1zaWRlLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi10YXVudXMtc3RhdGUtXFxcIj48Y29kZT50YXVudXMuc3RhdGU8L2NvZGU+PC9oMj5cXG48cD5UaGlzIGlzIGFuIGludGVybmFsIHN0YXRlIHZhcmlhYmxlLCBhbmQgaXQgY29udGFpbnMgYSBsb3Qgb2YgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvbi48L3A+XFxuPHVsPlxcbjxsaT48Y29kZT5jb250YWluZXI8L2NvZGU+IGlzIHRoZSBET00gZWxlbWVudCBwYXNzZWQgdG8gPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPjwvbGk+XFxuPGxpPjxjb2RlPmNvbnRyb2xsZXJzPC9jb2RlPiBhcmUgYWxsIHRoZSBjb250cm9sbGVycywgYXMgZGVmaW5lZCBpbiB0aGUgd2lyaW5nIG1vZHVsZTwvbGk+XFxuPGxpPjxjb2RlPnRlbXBsYXRlczwvY29kZT4gYXJlIGFsbCB0aGUgdGVtcGxhdGVzLCBhcyBkZWZpbmVkIGluIHRoZSB3aXJpbmcgbW9kdWxlPC9saT5cXG48bGk+PGNvZGU+cm91dGVzPC9jb2RlPiBhcmUgYWxsIHRoZSByb3V0ZXMsIGFzIGRlZmluZWQgaW4gdGhlIHdpcmluZyBtb2R1bGU8L2xpPlxcbjxsaT48Y29kZT5yb3V0ZTwvY29kZT4gaXMgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm91dGU8L2xpPlxcbjxsaT48Y29kZT5tb2RlbDwvY29kZT4gaXMgYSByZWZlcmVuY2UgdG8gdGhlIG1vZGVsIHVzZWQgdG8gcmVuZGVyIHRoZSBjdXJyZW50IHZpZXc8L2xpPlxcbjxsaT48Y29kZT5wcmVmZXRjaDwvY29kZT4gZXhwb3NlcyB3aGV0aGVyIHByZWZldGNoaW5nIGlzIHR1cm5lZCBvbjwvbGk+XFxuPGxpPjxjb2RlPmNhY2hlPC9jb2RlPiBleHBvc2VzIHdoZXRoZXIgY2FjaGluZyBpcyBlbmFibGVkPC9saT5cXG48bGk+PGNvZGU+dmVyc2lvbjwvY29kZT4gZXhwb3NlcyB0aGUgdmVyc2lvbiBzdHJpbmcgdGhhdCYjMzk7cyBjdXJyZW50bHkgaW4gdXNlPC9saT5cXG48L3VsPlxcbjxwPlRoZXJlJiMzOTtzIGFsc28gYSA8Y29kZT5jbGVhcjwvY29kZT4gbWV0aG9kIGFjY2Vzc2libGUgdGhyb3VnaCA8Y29kZT50YXVudXMuc3RhdGUuY2xlYXI8L2NvZGU+LCB3aGljaCB3aWxsIGVtcHR5IHRoZSBjYWNoZSwgYXMgd2VsbCBhcyByZW1vdmUgZnJvbSB0aGUgPGNvZGU+c3RhdGU8L2NvZGU+IGFueSBjb250cm9sbGVycyBhbmQgdGVtcGxhdGVzIHRoYXQgd2VyZSBsYXp5IGxvYWRlZC48L3A+XFxuPHA+T2YgY291cnNlLCB5b3UmIzM5O3JlIG5vdCBzdXBwb3NlZCB0byBtZWRkbGUgd2l0aCBpdCwgc28gYmUgYSBnb29kIGNpdGl6ZW4gYW5kIGp1c3QgaW5zcGVjdCBpdHMgdmFsdWVzITwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDIgaWQ9XFxcIi10YXVudXMteGhyLXVybC1vcHRpb25zLWRvbmUtXFxcIj48Y29kZT50YXVudXMueGhyKHVybCwgb3B0aW9ucz8sIGRvbmUpPC9jb2RlPjwvaDI+XFxuPHA+VGhpcyBtZXRob2QgYWxsb3dzIHlvdSB0byBpc3N1ZSB5b3VyIG93biBBSkFYIHJlcXVlc3RzIHRocm91Z2ggdGhlIDxjb2RlPnhocjwvY29kZT4gbW9kdWxlLiBJdCBzZXRzIGEgZmV3IGNvbnZlbmllbnQgZGVmYXVsdHMsIDxlbT5saXN0ZWQgYmVsb3c8L2VtPiwgd2hlcmUgPGNvZGU+dXJsPC9jb2RlPiByZWZlcnMgdG8gdGhlIFVSTCBwYXNzZWQgYXMgdGhlIGZpcnN0IHBhcmFtZXRlci48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+e1xcbiAgdXJsOiB1cmwsXFxuICBqc29uOiB0cnVlLFxcbiAgaGVhZGVyczogeyBBY2NlcHQ6ICYjMzk7YXBwbGljYXRpb24vanNvbiYjMzk7IH1cXG59XFxuPC9jb2RlPjwvcHJlPlxcbjxwPlRoZSA8Y29kZT5kb25lKGVyciwgYm9keSwgcmVzKTwvY29kZT4gY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIHJlcXVlc3QgZmluaXNoZXMsIGFuZCBpdCYjMzk7bGwgYmUgcGFzc2VkIHRocmVlIHBhcmFtZXRlcnMsIGFuIG9wdGlvbmFsIGVycm9yIGlmIHNvbWV0aGluZyB3ZW50IHdyb25nIDxlbT4ocmVxdWVzdCBmYWlsZWQsIHdhcyBhYm9ydGVkLCBldGMuKTwvZW0+IGFuZCBhIDxjb2RlPmJvZHk8L2NvZGU+IHBhcmFtZXRlciBjb250YWluaW5nIHRoZSByZXNwb25zZSBib2R5LiBUaGUgcmF3IDxjb2RlPnJlczwvY29kZT4gb2JqZWN0IHRoYXQmIzM5O3MgdHlwaWNhbGx5IHByb3ZpZGVkIGJ5IDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9SYXlub3MveGhyXFxcIj48Y29kZT54aHI8L2NvZGU+PC9hPiBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyBwcm92aWRlZCBhcyB0aGUgdGhpcmQgcGFyYW1ldGVyIGluc3RlYWQuPC9wPlxcbjxwPkFzIGFuIGV4YW1wbGUsIGhlcmUgaXMgYSA8Y29kZT5HRVQ8L2NvZGU+IHJlcXVlc3QuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPnRhdW51cy54aHIoJiMzOTsvYXBpL3BsYWNlcyYjMzk7LCBmdW5jdGlvbiAoZXJyLCBib2R5KSB7XFxuICBjb25zb2xlLmxvZyhib2R5KTtcXG4gIC8vICZsdDstIHsgcGxhY2VzOiBbJiMzOTt1bmRlcndhdGVyIGZvcnRyZXNzJiMzOTssICYjMzk7aXNsYW5kIG1hbnNpb24mIzM5O10gfVxcbn0pO1xcbjwvY29kZT48L3ByZT5cXG48cD5BbHdheXMgcmVtZW1iZXIgdG8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIDxjb2RlPmVycjwvY29kZT4gaXMgc2V0ITwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDEgaWQ9XFxcInVzaW5nLXRhdW51cy1wcmVmZXRjaC11cmwtZWxlbWVudC1cXFwiPlVzaW5nIDxjb2RlPnRhdW51cy5wcmVmZXRjaCh1cmwsIGVsZW1lbnQpPC9jb2RlPjwvaDE+XFxuPHA+VGhlIHByZWZldGNoZXIgQVBJIGFsbG93cyB5b3UgdG8gc3RhcnQgZmV0Y2hpbmcgYW4gPGNvZGU+dXJsPC9jb2RlPiwgcHJvdmlkZWQgdGhhdCBpdCBtYXRjaGVzIGEga25vd24gVGF1bnVzIHZpZXcgcm91dGUgYW5kIHRoYXQgPGEgaHJlZj1cXFwiI2NhY2hpbmdcXFwiPnRoZSBjYWNoZTwvYT4gaXMgZW5hYmxlZC4gVGhlIDxjb2RlPmVsZW1lbnQ8L2NvZGU+IGlzIHVzZWQgbW9zdGx5IGFzIGNvbnRleHQgZHVyaW5nIGV2ZW50IGVtaXNzaW9uLCBhbmQgaXQgY2FuIGJlIHVzZWZ1bCBmb3IgZGVidWdnaW5nIGFzIHdlbGwuPC9wPlxcbjxwPlVzZSBjYXNlcyBmb3IgcHJlZmV0Y2hpbmcgYXJlIGZ1cnRoZXIgZGlzY3Vzc2VkIGluIHRoZSA8YSBocmVmPVxcXCIvcGVyZm9ybWFuY2UjZW5hYmxlLXByZWZldGNoaW5nLWZvci1wcmVkaWN0aXZlLWNhY2hlLWxvYWRpbmdcXFwiPlBlcmZvcm1hbmNlIE9wdGltaXphdGlvbjwvYT4gZ3VpZGUuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMiBpZD1cXFwiZGVidWdnaW5nLXRhdW51c1xcXCI+RGVidWdnaW5nIFRhdW51czwvaDI+XFxuPHA+T24gdGhlIGNsaWVudC1zaWRlLCB5b3Ugd2lsbCB0eXBpY2FsbHkgPGNvZGU+cmVxdWlyZTwvY29kZT4gVGF1bnVzIHVzaW5nIHRoZSBzdGF0ZW1lbnQgYmVsb3cuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPnZhciB0YXVudXMgPSByZXF1aXJlKCYjMzk7dGF1bnVzJiMzOTspO1xcbjwvY29kZT48L3ByZT5cXG48cD5Ib3dldmVyLCB5b3UgY291bGQgYWxzbyB0dXJuIG9uIHRoZSBpbnRlcm5hbCBkZWJ1ZyBsb2dnZXIgc2ltcGx5IGJ5IHVzaW5nIGFub3RoZXIgZW50cnkgcG9pbnQhPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPnZhciB0YXVudXMgPSByZXF1aXJlKCYjMzk7dGF1bnVzL2Jyb3dzZXIvZGVidWcmIzM5Oyk7XFxuPC9jb2RlPjwvcHJlPlxcbjxwPlRoZSBzY3JlZW5zaG90IGJlbG93IGNvbnRhaW5zIGFuIGV4YW1wbGUgb2YgdGhpcyBtZWNoYW5pc20sIHdoZXJlIHVzaW5nIDxhIGhyZWY9XFxcIiMtdGF1bnVzLXBhcnRpYWwtY29udGFpbmVyLWFjdGlvbi1tb2RlbC1cXFwiPjxjb2RlPnRhdW51cy5wYXJ0aWFsPC9jb2RlPjwvYT4gdHJpZ2dlcnMgYSBmbHVycnkgb2YgZGVidWcgbWVzc2FnZXMuPC9wPlxcbjxwPjxpbWcgc3JjPVxcXCJodHRwOi8vaS5pbWd1ci5jb20vQ2piSUh5MC5wbmdcXFwiIGFsdD1cXFwiZGVidWcucG5nXFxcIj48L3A+XFxuPHA+VGhpcyBpcyBwYXJ0aWN1bGFybHkgaGVscGZ1bCBkdXJpbmcgZGV2ZWxvcG1lbnQsIGJ1dCBhbHNvIHVzZWZ1bCBpZiB5b3UgZG9uJiMzOTt0IHVuZGVyc3RhbmQgZXhhY3RseSBob3cgVGF1bnVzIGlzIGRvaW5nIHNvbWV0aGluZywgYXMgdGhlIGxvZ2dlciBpcyBwcmV0dHkgdmVyYm9zZS48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgxIGlkPVxcXCJjbGllbnQtc2lkZS1jb250cm9sbGVyc1xcXCI+Q2xpZW50LVNpZGUgQ29udHJvbGxlcnM8L2gxPlxcbjxwPkNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFyZSBleGVjdXRlZCByaWdodCBhZnRlciBhIHZpZXcgaXMgcmVuZGVyZWQsIGV2ZW4gaW4gdGhlIGNhc2Ugb2YgPGEgaHJlZj1cXFwiIy10YXVudXMtcGFydGlhbC1jb250YWluZXItYWN0aW9uLW1vZGVsLVxcXCI+cGFydGlhbCB2aWV3czwvYT4uIFRoZXNlIGNvbnRyb2xsZXJzIGFyZSB1c2VkIHRvIHByb2dyZXNzaXZlbHkgYWRkIGJlaGF2aW9yIG9uIHRvcCBvZiB0aGUgSFRNTCBmb3IgdGhhdCB2aWV3LjwvcD5cXG48cD5WaWV3IGNvbnRyb2xsZXJzIHRha2UgdGhyZWUgcGFyYW1ldGVycy48L3A+XFxuPHRhYmxlPlxcbjx0aGVhZD5cXG48dHI+XFxuPHRoPlBhcmFtZXRlcjwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+bW9kZWw8L2NvZGU+PC90ZD5cXG48dGQ+TW9kZWwgdGhhdCB3YXMgdXNlZCB0byByZW5kZXIgdGhlIHZpZXc8L3RkPlxcbjwvdHI+XFxuPHRyPlxcbjx0ZD48Y29kZT5jb250YWluZXI8L2NvZGU+PC90ZD5cXG48dGQ+VGhlIERPTSBlbGVtZW50IHdoZXJlIHRoZSB2aWV3IHdhcyByZW5kZXJlZDwvdGQ+XFxuPC90cj5cXG48dHI+XFxuPHRkPjxjb2RlPnJvdXRlPzwvY29kZT48L3RkPlxcbjx0ZD5Sb3V0ZSB0aGF0IHRyaWdnZXJlZCB0aGUgcmVuZGVyaW5nIGVuZ2luZS4gTWF5IGJlIDxjb2RlPm51bGw8L2NvZGU+PC90ZD5cXG48L3RyPlxcbjwvdGJvZHk+XFxuPC90YWJsZT5cXG48cD5Ob3RlIHRoYXQgVGF1bnVzIHdpbGwgPGEgaHJlZj1cXFwiIy10YXVudXMtb24tdHlwZS1mbi1cXFwiPmVtaXQgYSA8Y29kZT5yZW5kZXI8L2NvZGU+IGV2ZW50PC9hPiByaWdodCBiZWZvcmUgdGhlIHZpZXcgY29udHJvbGxlciBnZXRzIGV4ZWN1dGVkLCBnaXZpbmcgeW91IGEgY2hhbmNlIHRvIHJlYWN0IHRvIHZpZXdzIGdldHRpbmcgcmVuZGVyZWQuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMSBpZD1cXFwidGhlLXRhdW51c3JjLW1hbmlmZXN0XFxcIj5UaGUgPGNvZGU+LnRhdW51c3JjPC9jb2RlPiBtYW5pZmVzdDwvaDE+XFxuPHA+SWYgeW91IHdhbnQgdG8gdXNlIHZhbHVlcyBvdGhlciB0aGFuIHRoZSBjb252ZW50aW9uYWwgZGVmYXVsdHMgc2hvd24gaW4gdGhlIHRhYmxlIGJlbG93LCB0aGVuIHlvdSBzaG91bGQgY3JlYXRlIGEgPGNvZGU+LnRhdW51c3JjPC9jb2RlPiBmaWxlLiBOb3RlIHRoYXQgdGhlIGRlZmF1bHRzIG5lZWQgdG8gYmUgb3ZlcndyaXR0ZW4gaW4gYSBjYXNlLWJ5LWNhc2UgYmFzaXMuIFRoZXNlIG9wdGlvbnMgY2FuIGFsc28gYmUgY29uZmlndXJlZCBpbiB5b3VyIDxjb2RlPnBhY2thZ2UuanNvbjwvY29kZT4sIHVuZGVyIHRoZSA8Y29kZT50YXVudXM8L2NvZGU+IHByb3BlcnR5LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzb25cXFwiPntcXG4gICZxdW90O3ZpZXdzJnF1b3Q7OiAmcXVvdDsuYmluL3ZpZXdzJnF1b3Q7LFxcbiAgJnF1b3Q7c2VydmVyX3JvdXRlcyZxdW90OzogJnF1b3Q7Y29udHJvbGxlcnMvcm91dGVzLmpzJnF1b3Q7LFxcbiAgJnF1b3Q7c2VydmVyX2NvbnRyb2xsZXJzJnF1b3Q7OiAmcXVvdDtjb250cm9sbGVycyZxdW90OyxcXG4gICZxdW90O2NsaWVudF9jb250cm9sbGVycyZxdW90OzogJnF1b3Q7Y2xpZW50L2pzL2NvbnRyb2xsZXJzJnF1b3Q7LFxcbiAgJnF1b3Q7Y2xpZW50X3dpcmluZyZxdW90OzogJnF1b3Q7LmJpbi93aXJpbmcuanMmcXVvdDtcXG59XFxuPC9jb2RlPjwvcHJlPlxcbjx1bD5cXG48bGk+VGhlIDxjb2RlPnZpZXdzPC9jb2RlPiBkaXJlY3RvcnkgaXMgd2hlcmUgeW91ciB2aWV3cyA8ZW0+KGFscmVhZHkgY29tcGlsZWQgaW50byBKYXZhU2NyaXB0KTwvZW0+IGFyZSBwbGFjZWQuIFRoZXNlIHZpZXdzIGFyZSB1c2VkIGRpcmVjdGx5IG9uIGJvdGggdGhlIHNlcnZlci1zaWRlIGFuZCB0aGUgY2xpZW50LXNpZGU8L2xpPlxcbjxsaT5UaGUgPGNvZGU+c2VydmVyX3JvdXRlczwvY29kZT4gZmlsZSBpcyB0aGUgbW9kdWxlIHdoZXJlIHlvdSBleHBvcnQgYSBjb2xsZWN0aW9uIG9mIHJvdXRlcy4gVGhlIENMSSB3aWxsIHB1bGwgdGhlc2Ugcm91dGVzIHdoZW4gY3JlYXRpbmcgdGhlIGNsaWVudC1zaWRlIHJvdXRlcyBmb3IgdGhlIHdpcmluZyBtb2R1bGU8L2xpPlxcbjxsaT5UaGUgPGNvZGU+c2VydmVyX2NvbnRyb2xsZXJzPC9jb2RlPiBkaXJlY3RvcnkgaXMgdGhlIHJvb3QgZGlyZWN0b3J5IHdoZXJlIHlvdXIgc2VydmVyLXNpZGUgY29udHJvbGxlcnMgbGl2ZS4gSXQmIzM5O3MgdXNlZCB3aGVuIHNldHRpbmcgdXAgdGhlIHNlcnZlci1zaWRlIHJvdXRlcjwvbGk+XFxuPGxpPlRoZSA8Y29kZT5jbGllbnRfY29udHJvbGxlcnM8L2NvZGU+IGRpcmVjdG9yeSBpcyB3aGVyZSB5b3VyIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgbW9kdWxlcyBsaXZlLiBUaGUgQ0xJIHdpbGwgPGNvZGU+cmVxdWlyZTwvY29kZT4gdGhlc2UgY29udHJvbGxlcnMgaW4gaXRzIHJlc3VsdGluZyB3aXJpbmcgbW9kdWxlPC9saT5cXG48bGk+VGhlIDxjb2RlPmNsaWVudF93aXJpbmc8L2NvZGU+IGZpbGUgaXMgd2hlcmUgeW91ciB3aXJpbmcgbW9kdWxlIHdpbGwgYmUgcGxhY2VkIGJ5IHRoZSBDTEkuIFlvdSYjMzk7bGwgdGhlbiBoYXZlIHRvIDxjb2RlPnJlcXVpcmU8L2NvZGU+IGl0IGluIHlvdXIgYXBwbGljYXRpb24gd2hlbiBib290aW5nIHVwIFRhdW51czwvbGk+XFxuPC91bD5cXG48cD5IZXJlIGlzIHdoZXJlIHRoaW5ncyBnZXQgPGEgaHJlZj1cXFwiaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db252ZW50aW9uX292ZXJfY29uZmlndXJhdGlvblxcXCI+YSBsaXR0bGUgY29udmVudGlvbmFsPC9hPi4gVmlld3MsIGFuZCBib3RoIHNlcnZlci1zaWRlIGFuZCBjbGllbnQtc2lkZSBjb250cm9sbGVycyBhcmUgZXhwZWN0ZWQgdG8gYmUgb3JnYW5pemVkIGJ5IGZvbGxvd2luZyB0aGUgPGNvZGU+e3Jvb3R9L3tjb250cm9sbGVyfS97YWN0aW9ufTwvY29kZT4gcGF0dGVybiwgYnV0IHlvdSBjb3VsZCBjaGFuZ2UgdGhhdCB1c2luZyA8Y29kZT5yZXNvbHZlcnM8L2NvZGU+IHdoZW4gaW52b2tpbmcgdGhlIENMSSBhbmQgdXNpbmcgdGhlIHNlcnZlci1zaWRlIEFQSS48L3A+XFxuPHA+Vmlld3MgYW5kIGNvbnRyb2xsZXJzIGFyZSBhbHNvIGV4cGVjdGVkIHRvIGJlIENvbW1vbkpTIG1vZHVsZXMgdGhhdCBleHBvcnQgYSBzaW5nbGUgbWV0aG9kLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvc2VjdGlvbj5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7O3JldHVybiBidWYuam9pbihcIlwiKTtcbn0gY2F0Y2ggKGVycikge1xuICBqYWRlLnJldGhyb3coZXJyLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lLCBqYWRlX2RlYnVnWzBdLmxpbmVubywgXCJzZWN0aW9uLmx5LXNlY3Rpb24ubWQtbWFya2Rvd25cXG4gIDp1bHRyYW1hcmtlZFxcbiAgICAjIEFQSSBEb2N1bWVudGF0aW9uXFxuXFxuICAgIEhlcmUncyB0aGUgQVBJIGRvY3VtZW50YXRpb24gZm9yIFRhdW51cy4gSWYgeW91J3ZlIG5ldmVyIHVzZWQgaXQgYmVmb3JlLCB3ZSByZWNvbW1lbmQgZ29pbmcgb3ZlciB0aGUgW0dldHRpbmcgU3RhcnRlZF1bMV0gZ3VpZGUgYmVmb3JlIGp1bXBpbmcgaW50byB0aGUgQVBJIGRvY3VtZW50YXRpb24uIFRoYXQgd2F5LCB5b3UnbGwgZ2V0IGEgYmV0dGVyIGlkZWEgb2Ygd2hhdCB0byBsb29rIGZvciBhbmQgaG93IHRvIHB1dCB0b2dldGhlciBzaW1wbGUgYXBwbGljYXRpb25zIHVzaW5nIFRhdW51cywgYmVmb3JlIGdvaW5nIHRocm91Z2ggZG9jdW1lbnRhdGlvbiBvbiBldmVyeSBwdWJsaWMgaW50ZXJmYWNlIHRvIFRhdW51cy5cXG5cXG4gICAgVGF1bnVzIGV4cG9zZXMgX3RocmVlIGRpZmZlcmVudCBwdWJsaWMgQVBJc18sIGFuZCB0aGVyZSdzIGFsc28gKipwbHVnaW5zIHRvIGludGVncmF0ZSBUYXVudXMgYW5kIGFuIEhUVFAgc2VydmVyKiouIFRoaXMgZG9jdW1lbnQgY292ZXJzIGFsbCB0aHJlZSBBUElzIGV4dGVuc2l2ZWx5LiBJZiB5b3UncmUgY29uY2VybmVkIGFib3V0IHRoZSBpbm5lciB3b3JraW5ncyBvZiBUYXVudXMsIHBsZWFzZSByZWZlciB0byB0aGUgW0dldHRpbmcgU3RhcnRlZF1bMV0gZ3VpZGUuIFRoaXMgZG9jdW1lbnQgYWltcyB0byBvbmx5IGNvdmVyIGhvdyB0aGUgcHVibGljIGludGVyZmFjZSBhZmZlY3RzIGFwcGxpY2F0aW9uIHN0YXRlLCBidXQgKipkb2Vzbid0IGRlbHZlIGludG8gaW1wbGVtZW50YXRpb24gZGV0YWlscyoqLlxcblxcbiAgICAjIFRhYmxlIG9mIENvbnRlbnRzXFxuXFxuICAgIC0gQSBbc2VydmVyLXNpZGUgQVBJXSgjc2VydmVyLXNpZGUtYXBpKSB0aGF0IGRlYWxzIHdpdGggc2VydmVyLXNpZGUgcmVuZGVyaW5nXFxuICAgICAgLSBUaGUgW2B0YXVudXMubW91bnRgXSgjLXRhdW51cy1tb3VudC1hZGRyb3V0ZS1vcHRpb25zLSkgbWV0aG9kXFxuICAgICAgICAtIEl0cyBbYG9wdGlvbnNgXSgjdGhlLW9wdGlvbnMtb2JqZWN0KSBhcmd1bWVudFxcbiAgICAgICAgICAtIFtgbGF5b3V0YF0oIy1vcHRpb25zLWxheW91dC0pXFxuICAgICAgICAgIC0gW2Byb3V0ZXNgXSgjLW9wdGlvbnMtcm91dGVzLSlcXG4gICAgICAgICAgLSBbYGdldERlZmF1bHRWaWV3TW9kZWxgXSgjLW9wdGlvbnMtZ2V0ZGVmYXVsdHZpZXdtb2RlbC0pXFxuICAgICAgICAgIC0gW2BwbGFpbnRleHRgXSgjLW9wdGlvbnMtcGxhaW50ZXh0LSlcXG4gICAgICAgICAgLSBbYHJlc29sdmVyc2BdKCMtb3B0aW9ucy1yZXNvbHZlcnMtKVxcbiAgICAgICAgICAtIFtgdmVyc2lvbmBdKCMtb3B0aW9ucy12ZXJzaW9uLSlcXG4gICAgICAgICAgLSBbYGRlZmVyTWluaWZpZWRgXSgjLW9wdGlvbnMtZGVmZXJtaW5pZmllZC0pXFxuICAgICAgICAtIEl0cyBbYGFkZFJvdXRlYF0oIy1hZGRyb3V0ZS1kZWZpbml0aW9uLSkgYXJndW1lbnRcXG4gICAgICAtIFRoZSBbYHRhdW51cy5yZW5kZXJgXSgjLXRhdW51cy1yZW5kZXItYWN0aW9uLXZpZXdtb2RlbC1yZXEtcmVzLW5leHQtKSBtZXRob2RcXG4gICAgICAtIFRoZSBbYHRhdW51cy5yZXNvbHZlYF0oIy10YXVudXMtcmVzb2x2ZS1hY3Rpb24tZGF0YS0pIG1ldGhvZFxcbiAgICAgIC0gVGhlIFtgdGF1bnVzLnJlZGlyZWN0YF0oIy10YXVudXMtcmVkaXJlY3QtcmVxLXJlcy11cmwtb3B0aW9ucy0pIG1ldGhvZFxcbiAgICAgIC0gVGhlIFtgdGF1bnVzLnJlYnVpbGREZWZhdWx0Vmlld01vZGVsYF0oIy10YXVudXMtcmVidWlsZGRlZmF1bHR2aWV3bW9kZWwtZG9uZS0pIG1ldGhvZFxcbiAgICAtIFtTZXJ2ZXItc2lkZSBjb250cm9sbGVyc10oI3NlcnZlci1zaWRlLWNvbnRyb2xsZXJzKVxcbiAgICAtIEEgW3N1aXRlIG9mIHBsdWdpbnNdKCNodHRwLWZyYW1ld29yay1wbHVnaW5zKSBjYW4gaW50ZWdyYXRlIFRhdW51cyBhbmQgYW4gSFRUUCBzZXJ2ZXJcXG4gICAgICAtIFVzaW5nIFtgdGF1bnVzLWV4cHJlc3NgXSgjdXNpbmctdGF1bnVzLWV4cHJlc3MtKSBmb3IgW0V4cHJlc3NdWzJdXFxuICAgICAgLSBVc2luZyBbYHRhdW51cy1oYXBpYF0oI3VzaW5nLXRhdW51cy1oYXBpLSkgZm9yIFtIYXBpXVszXVxcbiAgICAtIEEgW0NMSSB0aGF0IHByb2R1Y2VzIGEgd2lyaW5nIG1vZHVsZV0oI2NvbW1hbmQtbGluZS1pbnRlcmZhY2UpIGZvciB0aGUgY2xpZW50LXNpZGVcXG4gICAgICAtIFRoZSBbYC0tb3V0cHV0YF0oIy1vdXRwdXQtKSBmbGFnXFxuICAgICAgLSBUaGUgW2AtLXdhdGNoYF0oIy13YXRjaC0pIGZsYWdcXG4gICAgICAtIFRoZSBbYC0tdHJhbnNmb3JtIDxtb2R1bGU+YF0oIy10cmFuc2Zvcm0tbW9kdWxlLSkgZmxhZ1xcbiAgICAgIC0gVGhlIFtgLS1kZWZlcmBdKCMtZGVmZXItYWN0aW9ucy0pIGZsYWdcXG4gICAgICAtIFRoZSBbYC0tcmVzb2x2ZXJzIDxtb2R1bGU+YF0oIy1yZXNvbHZlcnMtbW9kdWxlLSkgZmxhZ1xcbiAgICAgIC0gVGhlIFtgLS1idW5kbGVgXSgjLWJ1bmRsZS0pIGZsYWdcXG4gICAgLSBBIFtjbGllbnQtc2lkZSBBUEldKCNjbGllbnQtc2lkZS1hcGkpIHRoYXQgZGVhbHMgd2l0aCBjbGllbnQtc2lkZSByZW5kZXJpbmdcXG4gICAgICAtIFRoZSBbYHRhdW51cy5tb3VudGBdKCMtdGF1bnVzLW1vdW50LWNvbnRhaW5lci13aXJpbmctb3B0aW9ucy0pIG1ldGhvZFxcbiAgICAgICAgLSBVc2luZyB0aGUgW2BhdXRvYF0oI3VzaW5nLXRoZS1hdXRvLXN0cmF0ZWd5KSBzdHJhdGVneVxcbiAgICAgICAgLSBVc2luZyB0aGUgW2BpbmxpbmVgXSgjdXNpbmctdGhlLWlubGluZS1zdHJhdGVneSkgc3RyYXRlZ3lcXG4gICAgICAgIC0gVXNpbmcgdGhlIFtgbWFudWFsYF0oI3VzaW5nLXRoZS1tYW51YWwtc3RyYXRlZ3kpIHN0cmF0ZWd5XFxuICAgICAgICAtIFtDYWNoaW5nXSgjY2FjaGluZylcXG4gICAgICAgIC0gW1ByZWZldGNoaW5nXSgjcHJlZmV0Y2hpbmcpXFxuICAgICAgICAtIFtWZXJzaW9uaW5nXSgjdmVyc2lvbmluZylcXG4gICAgICAtIFRoZSBbYHRhdW51cy5vbmBdKCMtdGF1bnVzLW9uLXR5cGUtZm4tKSBtZXRob2RcXG4gICAgICAtIFRoZSBbYHRhdW51cy5vbmNlYF0oIy10YXVudXMtb25jZS10eXBlLWZuLSkgbWV0aG9kXFxuICAgICAgLSBUaGUgW2B0YXVudXMub2ZmYF0oIy10YXVudXMtb2ZmLXR5cGUtZm4tKSBtZXRob2RcXG4gICAgICAtIFRoZSBbYHRhdW51cy5pbnRlcmNlcHRgXSgjLXRhdW51cy1pbnRlcmNlcHQtYWN0aW9uLWZuLSkgbWV0aG9kXFxuICAgICAgLSBUaGUgW2B0YXVudXMucGFydGlhbGBdKCMtdGF1bnVzLXBhcnRpYWwtY29udGFpbmVyLWFjdGlvbi1tb2RlbC0pIG1ldGhvZFxcbiAgICAgIC0gVGhlIFtgdGF1bnVzLm5hdmlnYXRlYF0oIy10YXVudXMtbmF2aWdhdGUtdXJsLW9wdGlvbnMtKSBtZXRob2RcXG4gICAgICAtIFRoZSBbYHRhdW51cy5yb3V0ZWBdKCMtdGF1bnVzLXJvdXRlLXVybC0pIG1ldGhvZFxcbiAgICAgICAgLSBUaGUgW2B0YXVudXMucm91dGUuZXF1YWxzYF0oIy10YXVudXMtcm91dGUtZXF1YWxzLXJvdXRlLXJvdXRlLSkgbWV0aG9kXFxuICAgICAgLSBUaGUgW2B0YXVudXMucmVkaXJlY3RgXSgjLXRhdW51cy1yZWRpcmVjdC1vcHRpb25zLSkgbWV0aG9kXFxuICAgICAgLSBUaGUgW2B0YXVudXMucmVzb2x2ZWBdKCMtdGF1bnVzLXJlc29sdmUtb24tdGhlLWNsaWVudCkgbWV0aG9kXFxuICAgICAgLSBUaGUgW2B0YXVudXMuc3RhdGVgXSgjLXRhdW51cy1zdGF0ZS0pIHByb3BlcnR5XFxuICAgICAgLSBUaGUgW2B0YXVudXMueGhyYF0oIy10YXVudXMteGhyLXVybC1vcHRpb25zLWRvbmUtKSBtZXRob2RcXG4gICAgICAtIFRoZSBbYHRhdW51cy5wcmVmZXRjaGBdKCN1c2luZy10YXVudXMtcHJlZmV0Y2gtdXJsLWVsZW1lbnQtKSBtZXRob2RcXG4gICAgICAtIFtEZWJ1Z2dpbmcgVGF1bnVzXSgjZGVidWdnaW5nLXRhdW51cylcXG4gICAgLSBbQ2xpZW50LXNpZGUgY29udHJvbGxlcnNdKCNjbGllbnQtc2lkZS1jb250cm9sbGVycylcXG4gICAgLSBUaGUgW2AudGF1bnVzcmNgXSgjdGhlLXRhdW51c3JjLW1hbmlmZXN0KSBtYW5pZmVzdFxcblxcbiAgICAjIFNlcnZlci1zaWRlIEFQSVxcblxcbiAgICBUaGUgc2VydmVyLXNpZGUgQVBJIGlzIHVzZWQgdG8gc2V0IHVwIHRoZSB2aWV3IHJvdXRlci4gSXQgdGhlbiBnZXRzIG91dCBvZiB0aGUgd2F5LCBhbGxvd2luZyB0aGUgY2xpZW50LXNpZGUgdG8gZXZlbnR1YWxseSB0YWtlIG92ZXIgYW5kIGFkZCBhbnkgZXh0cmEgc3VnYXIgb24gdG9wLCBfaW5jbHVkaW5nIGNsaWVudC1zaWRlIHJlbmRlcmluZ18uXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIGB0YXVudXMubW91bnQoYWRkUm91dGUsIG9wdGlvbnM/KWBcXG5cXG4gICAgTW91bnRzIFRhdW51cyBvbiB0b3Agb2YgYSBzZXJ2ZXItc2lkZSByb3V0ZXIsIGJ5IHJlZ2lzdGVyaW5nIGVhY2ggcm91dGUgaW4gYG9wdGlvbnMucm91dGVzYCB3aXRoIHRoZSBgYWRkUm91dGVgIG1ldGhvZC5cXG5cXG4gICAgPiBOb3RlIHRoYXQgbW9zdCBvZiB0aGUgdGltZSwgKip0aGlzIG1ldGhvZCBzaG91bGRuJ3QgYmUgaW52b2tlZCBkaXJlY3RseSoqLCBidXQgcmF0aGVyIHRocm91Z2ggb25lIG9mIHRoZSBbSFRUUCBmcmFtZXdvcmsgcGx1Z2luc10oI2h0dHAtZnJhbWV3b3JrLXBsdWdpbnMpIHByZXNlbnRlZCBiZWxvdy5cXG5cXG4gICAgSGVyZSdzIGFuIGluY29tcGxldGUgZXhhbXBsZSBvZiBob3cgdGhpcyBtZXRob2QgbWF5IGJlIHVzZWQuIEl0IGlzIGluY29tcGxldGUgYmVjYXVzZSByb3V0ZSBkZWZpbml0aW9ucyBoYXZlIG1vcmUgb3B0aW9ucyBiZXlvbmQgdGhlIGByb3V0ZWAgYW5kIGBhY3Rpb25gIHByb3BlcnRpZXMuXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgdGF1bnVzLm1vdW50KGFkZFJvdXRlLCB7XFxuICAgICAgcm91dGVzOiBbeyByb3V0ZTogJy8nLCBhY3Rpb246ICdob21lL2luZGV4JyB9XVxcbiAgICB9KTtcXG5cXG4gICAgZnVuY3Rpb24gYWRkUm91dGUgKGRlZmluaXRpb24pIHtcXG4gICAgICBhcHAuZ2V0KGRlZmluaXRpb24ucm91dGUsIGRlZmluaXRpb24uYWN0aW9uKTtcXG4gICAgfVxcbiAgICBgYGBcXG5cXG4gICAgTGV0J3MgZ28gb3ZlciB0aGUgb3B0aW9ucyB5b3UgY2FuIHBhc3MgdG8gYHRhdW51cy5tb3VudGAgZmlyc3QuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMgVGhlIGBvcHRpb25zP2Agb2JqZWN0XFxuXFxuICAgIFRoZXJlJ3MgYSBmZXcgb3B0aW9ucyB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gdGhlIHNlcnZlci1zaWRlIG1vdW50cG9pbnQuIFlvdSdyZSBwcm9iYWJseSBnb2luZyB0byBiZSBwYXNzaW5nIHRoZXNlIHRvIHlvdXIgW0hUVFAgZnJhbWV3b3JrIHBsdWdpbl0oI2h0dHAtZnJhbWV3b3JrLXBsdWdpbnMpLCByYXRoZXIgdGhhbiB1c2luZyBgdGF1bnVzLm1vdW50YCBkaXJlY3RseS5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyMjIGBvcHRpb25zLmxheW91dD9gXFxuXFxuICAgIFRoZSBgbGF5b3V0YCBwcm9wZXJ0eSBpcyBleHBlY3RlZCB0byBoYXZlIHRoZSBgZnVuY3Rpb24oZGF0YSlgIHNpZ25hdHVyZS4gSXQnbGwgYmUgaW52b2tlZCB3aGVuZXZlciBhIGZ1bGwgSFRNTCBkb2N1bWVudCBuZWVkcyB0byBiZSByZW5kZXJlZCwgYW5kIGEgYGRhdGFgIG9iamVjdCB3aWxsIGJlIHBhc3NlZCB0byBpdC4gVGhhdCBvYmplY3Qgd2lsbCBjb250YWluIGV2ZXJ5dGhpbmcgeW91J3ZlIHNldCBhcyB0aGUgdmlldyBtb2RlbCwgcGx1cyBhIGBwYXJ0aWFsYCBwcm9wZXJ0eSBjb250YWluaW5nIHRoZSByYXcgSFRNTCBvZiB0aGUgcmVuZGVyZWQgcGFydGlhbCB2aWV3LiBZb3VyIGBsYXlvdXRgIG1ldGhvZCB3aWxsIHR5cGljYWxseSB3cmFwIHRoZSByYXcgSFRNTCBmb3IgdGhlIHBhcnRpYWwgd2l0aCB0aGUgYmFyZSBib25lcyBvZiBhbiBIVE1MIGRvY3VtZW50LiBDaGVjayBvdXQgW3RoZSBgbGF5b3V0LmphZGVgIHVzZWQgaW4gUG9ueSBGb29dWzRdIGFzIGFuIGV4YW1wbGUuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMjIyBgb3B0aW9ucy5yb3V0ZXNgXFxuXFxuICAgIFRoZSBvdGhlciBiaWcgb3B0aW9uIGlzIGByb3V0ZXNgLCB3aGljaCBleHBlY3RzIGEgY29sbGVjdGlvbiBvZiByb3V0ZSBkZWZpbml0aW9ucy4gUm91dGUgZGVmaW5pdGlvbnMgdXNlIGEgbnVtYmVyIG9mIHByb3BlcnRpZXMgdG8gZGV0ZXJtaW5lIGhvdyB0aGUgcm91dGUgaXMgZ29pbmcgdG8gYmVoYXZlLlxcblxcbiAgICBIZXJlJ3MgYW4gZXhhbXBsZSByb3V0ZSB0aGF0IHVzZXMgdGhlIFtFeHByZXNzXVsyXSByb3V0aW5nIHNjaGVtZS5cXG5cXG4gICAgYGBganNcXG4gICAge1xcbiAgICAgIHJvdXRlOiAnL2FydGljbGVzLzpzbHVnJyxcXG4gICAgICBhY3Rpb246ICdhcnRpY2xlcy9hcnRpY2xlJyxcXG4gICAgICBpZ25vcmU6IGZhbHNlLFxcbiAgICAgIGNhY2hlOiA8aW5oZXJpdD5cXG4gICAgfVxcbiAgICBgYGBcXG5cXG4gICAgLSBgcm91dGVgIGlzIGEgcm91dGUgaW4gdGhlIGZvcm1hdCB5b3VyIEhUVFAgZnJhbWV3b3JrIG9mIGNob2ljZSB1bmRlcnN0YW5kc1xcbiAgICAtIGBhY3Rpb25gIGlzIHRoZSBuYW1lIG9mIHlvdXIgY29udHJvbGxlciBhY3Rpb24uIEl0J2xsIGJlIHVzZWQgdG8gZmluZCB0aGUgc2VydmVyLXNpZGUgY29udHJvbGxlciwgdGhlIGRlZmF1bHQgdmlldyB0aGF0IHNob3VsZCBiZSB1c2VkIHdpdGggdGhpcyByb3V0ZSwgYW5kIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyXFxuICAgIC0gYGNhY2hlYCBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGNsaWVudC1zaWRlIGNhY2hpbmcgYmVoYXZpb3IgaW4gdGhpcyBhcHBsaWNhdGlvbiBwYXRoLCBhbmQgaXQnbGwgZGVmYXVsdCB0byBpbmhlcml0aW5nIGZyb20gdGhlIG9wdGlvbnMgcGFzc2VkIHRvIGB0YXVudXMubW91bnRgIF9vbiB0aGUgY2xpZW50LXNpZGVfXFxuICAgIC0gYGlnbm9yZWAgaXMgdXNlZCBpbiB0aG9zZSBjYXNlcyB3aGVyZSB5b3Ugd2FudCBhIFVSTCB0byBiZSBpZ25vcmVkIGJ5IHRoZSBjbGllbnQtc2lkZSByb3V0ZXIgZXZlbiBpZiB0aGVyZSdzIGEgY2F0Y2gtYWxsIHJvdXRlIHRoYXQgd291bGQgbWF0Y2ggdGhhdCBVUkxcXG5cXG4gICAgQXMgYW4gZXhhbXBsZSBvZiB0aGUgYGlnbm9yZWAgdXNlIGNhc2UsIGNvbnNpZGVyIHRoZSByb3V0aW5nIHRhYmxlIHNob3duIGJlbG93LiBUaGUgY2xpZW50LXNpZGUgcm91dGVyIGRvZXNuJ3Qga25vdyBfKGFuZCBjYW4ndCBrbm93IHVubGVzcyB5b3UgcG9pbnQgaXQgb3V0KV8gd2hhdCByb3V0ZXMgYXJlIHNlcnZlci1zaWRlIG9ubHksIGFuZCBpdCdzIHVwIHRvIHlvdSB0byBwb2ludCB0aG9zZSBvdXQuXFxuXFxuICAgIGBgYGpzXFxuICAgIFtcXG4gICAgICB7IHJvdXRlOiAnLycsIGFjdGlvbjogJy9ob21lL2luZGV4JyB9LFxcbiAgICAgIHsgcm91dGU6ICcvZmVlZCcsIGlnbm9yZTogdHJ1ZSB9LFxcbiAgICAgIHsgcm91dGU6ICcvKicsIGFjdGlvbjogJ2Vycm9yL25vdC1mb3VuZCcgfVxcbiAgICBdXFxuICAgIGBgYFxcblxcbiAgICBUaGlzIHN0ZXAgaXMgbmVjZXNzYXJ5IHdoZW5ldmVyIHlvdSBoYXZlIGFuIGFuY2hvciBsaW5rIHBvaW50ZWQgYXQgc29tZXRoaW5nIGxpa2UgYW4gUlNTIGZlZWQuIFRoZSBgaWdub3JlYCBwcm9wZXJ0eSBpcyBlZmZlY3RpdmVseSB0ZWxsaW5nIHRoZSBjbGllbnQtc2lkZSBfXFxcImRvbid0IGhpamFjayBsaW5rcyBjb250YWluaW5nIHRoaXMgVVJMXFxcIl8uXFxuXFxuICAgIFBsZWFzZSBub3RlIHRoYXQgZXh0ZXJuYWwgbGlua3MgYXJlIG5ldmVyIGhpamFja2VkLiBPbmx5IHNhbWUtb3JpZ2luIGxpbmtzIGNvbnRhaW5pbmcgYSBVUkwgdGhhdCBtYXRjaGVzIG9uZSBvZiB0aGUgcm91dGVzIHdpbGwgYmUgaGlqYWNrZWQgYnkgVGF1bnVzLiBFeHRlcm5hbCBsaW5rcyBkb24ndCBuZWVkIHRvIGJlIGBpZ25vcmVgZC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyMjIGBvcHRpb25zLmdldERlZmF1bHRWaWV3TW9kZWw/YFxcblxcbiAgICBUaGUgYGdldERlZmF1bHRWaWV3TW9kZWwoZG9uZSlgIHByb3BlcnR5IGNhbiBiZSBhIG1ldGhvZCB0aGF0IHB1dHMgdG9nZXRoZXIgdGhlIGJhc2UgdmlldyBtb2RlbCwgd2hpY2ggd2lsbCB0aGVuIGJlIGV4dGVuZGVkIG9uIGFuIGFjdGlvbi1ieS1hY3Rpb24gYmFzaXMuIFdoZW4geW91J3JlIGRvbmUgY3JlYXRpbmcgYSB2aWV3IG1vZGVsLCB5b3UgY2FuIGludm9rZSBgZG9uZShudWxsLCBtb2RlbClgLiBJZiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgYnVpbGRpbmcgdGhlIHZpZXcgbW9kZWwsIHlvdSBzaG91bGQgY2FsbCBgZG9uZShlcnIpYCBpbnN0ZWFkLlxcblxcbiAgICBUYXVudXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiBgZG9uZWAgaXMgaW52b2tlZCB3aXRoIGFuIGVycm9yLCBzbyB5b3UgbWlnaHQgd2FudCB0byBwdXQgc2FmZWd1YXJkcyBpbiBwbGFjZSBhcyB0byBhdm9pZCB0aGF0IGZyb20gaGFwcGVubmluZy4gVGhlIHJlYXNvbiB0aGlzIG1ldGhvZCBpcyBhc3luY2hyb25vdXMgaXMgYmVjYXVzZSB5b3UgbWF5IG5lZWQgZGF0YWJhc2UgYWNjZXNzIG9yIHNvbWVzdWNoIHdoZW4gcHV0dGluZyB0b2dldGhlciB0aGUgZGVmYXVsdHMuIFRoZSByZWFzb24gdGhpcyBpcyBhIG1ldGhvZCBhbmQgbm90IGp1c3QgYW4gb2JqZWN0IGlzIHRoYXQgdGhlIGRlZmF1bHRzIG1heSBjaGFuZ2UgZHVlIHRvIGh1bWFuIGludGVyYWN0aW9uIHdpdGggdGhlIGFwcGxpY2F0aW9uLCBhbmQgaW4gdGhvc2UgY2FzZXMgW3RoZSBkZWZhdWx0cyBjYW4gYmUgcmVidWlsdF0oI3RhdW51cy1yZWJ1aWxkZGVmYXVsdHZpZXdtb2RlbCkuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMjIyBgb3B0aW9ucy5wbGFpbnRleHQ/YFxcblxcbiAgICBUaGUgYHBsYWludGV4dGAgb3B0aW9ucyBvYmplY3QgaXMgcGFzc2VkIGRpcmVjdGx5IHRvIFtoZ2V0XVs1XSwgYW5kIGl0J3MgdXNlZCB0byBbdHdlYWsgdGhlIHBsYWludGV4dCB2ZXJzaW9uXVs2XSBvZiB5b3VyIHNpdGUuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMjIyBgb3B0aW9ucy5yZXNvbHZlcnM/YFxcblxcbiAgICBSZXNvbHZlcnMgYXJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBsb2NhdGlvbiBvZiBzb21lIG9mIHRoZSBkaWZmZXJlbnQgcGllY2VzIG9mIHlvdXIgYXBwbGljYXRpb24uIFR5cGljYWxseSB5b3Ugd29uJ3QgaGF2ZSB0byB0b3VjaCB0aGVzZSBpbiB0aGUgc2xpZ2h0ZXN0LlxcblxcbiAgICBTaWduYXR1cmUgICAgICAgICAgICAgICAgICAgICB8IERlc2NyaXB0aW9uXFxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG4gICAgYGdldFNlcnZlckNvbnRyb2xsZXIoYWN0aW9uKWAgfCBSZXR1cm4gcGF0aCB0byBzZXJ2ZXItc2lkZSBjb250cm9sbGVyIGFjdGlvbiBoYW5kbGVyIG1vZHVsZVxcbiAgICBgZ2V0VmlldyhhY3Rpb24pYCAgICAgICAgICAgICB8IFJldHVybiBwYXRoIHRvIHZpZXcgdGVtcGxhdGUgbW9kdWxlXFxuXFxuICAgIFRoZSBgYWRkUm91dGVgIG1ldGhvZCBwYXNzZWQgdG8gYHRhdW51cy5tb3VudGAgb24gdGhlIHNlcnZlci1zaWRlIGlzIG1vc3RseSBnb2luZyB0byBiZSB1c2VkIGludGVybmFsbHkgYnkgdGhlIEhUVFAgZnJhbWV3b3JrIHBsdWdpbnMsIHNvIGZlZWwgZnJlZSB0byBza2lwIG92ZXIgdGhlIGZvbGxvd2luZyBzZWN0aW9uLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIyMgYG9wdGlvbnMudmVyc2lvbj9gXFxuXFxuICAgIFJlZmVyIHRvIHRoZSBbVmVyc2lvbmluZ10oI3ZlcnNpb25pbmcpIHNlY3Rpb24uXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMjIyBgb3B0aW9ucy5nZXRQYXJ0aWFsP2BcXG5cXG4gICAgQnkgZGVmYXVsdCwgVGF1bnVzIHdpbGwgcmVuZGVyIHBhcnRpYWxzIG9uIHRoZSBzZXJ2ZXItc2lkZSBieSBsb29raW5nIHVwIHRoZSBtb2R1bGUgZm9yIGFuIGFjdGlvbiBtZXRob2QsIGFuZCBjYWxsaW5nIHRoYXQgYWN0aW9uIHBhc3NpbmcgaW4gYSBtb2RlbC5cXG5cXG4gICAgWW91IGNhbiBvdmVycmlkZSB0aGUgZGVmYXVsdCBiZWhhdmlvciBieSBzZXR0aW5nIGBvcHRpb25zLmdldFBhcnRpYWxgIHRvIGEgZnVuY3Rpb24uIFRoaXMgbWV0aG9kIHRha2VzIHRocmVlIHBhcmFtZXRlcnMuXFxuXFxuICAgIC0gYGFjdGlvbmAgaXMgdGhlIGFjdGlvbiB0aGF0IG5lZWRzIHRvIGJlIHJlbmRlcmVkXFxuICAgIC0gYG1vZGVsYCBpcyB0aGUgbW9kZWwgeW91IGNhbiB1c2UgdG8gcmVuZGVyIHRoZSB2aWV3IGZvciB0aGF0IGFjdGlvblxcbiAgICAtIGBkb25lKGVyciwgaHRtbClgIGlzIGNhbGxlZCB3aGVuIHlvdSdyZSBkb25lLCBwYXNzaW5nIGluIHRoZSByZXN1bHRpbmcgYGh0bWxgIGZvciB0aGUgcGFydGlhbFxcblxcbiAgICBOb3RlIHRoYXQgaWYgeW91IGRvbid0IHNldCBgZ2V0UGFydGlhbGAsIFRhdW51cyB3aWxsIGp1c3QgcmVxdWlyZSB5b3VyIGNvbnRyb2xsZXIgYWN0aW9uIG1ldGhvZCBhbmQgaW52b2tlIHRoYXQgaW5zdGVhZC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyMjIGBvcHRpb25zLmRlZmVyTWluaWZpZWQ/YFxcblxcbiAgICBXaGVuIHZpZXdzIGFuZCBjb250cm9sbGVycyBhcmUgbGF6aWx5IGxvYWRlZCwgdGhleSBhcmUgY29tcGlsZWQgYW5kIGJ1bmRsZWQgdXNpbmcgQnJvd3NlcmlmeS4gVGF1bnVzIHdpbGwgZXZlbiBwcm9kdWNlIGEgc291cmNlIG1hcC4gVG8gYXZvaWQgdGhlIHNvdXJjZSBtYXAsIGFuZCBtaW5pZnkgdGhlIGJ1bmRsZSBpbnN0ZWFkLCBzZXQgYGRlZmVyTWluaWZpZWRgIHRvIGB0cnVlYC5cXG5cXG4gICAgWW91J2xsIHByb2JhYmx5IHdhbnQgdG8gc2V0IGBkZWZlck1pbmlmaWVkYCB0byB3aGV0aGVyIHRoZSBhcHBsaWNhdGlvbiBpcyBydW5uaW5nIG9uIHRoZSBwcm9kdWN0aW9uIGVudmlyb25tZW50LlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIGBhZGRSb3V0ZShkZWZpbml0aW9uKWBcXG5cXG4gICAgVGhlIGBhZGRSb3V0ZShkZWZpbml0aW9uKWAgbWV0aG9kIHdpbGwgYmUgcGFzc2VkIGEgcm91dGUgZGVmaW5pdGlvbiwgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMuIFRoaXMgbWV0aG9kIGlzIGV4cGVjdGVkIHRvIHJlZ2lzdGVyIGEgcm91dGUgaW4geW91ciBIVFRQIGZyYW1ld29yaydzIHJvdXRlci5cXG5cXG4gICAgLSBgcm91dGVgIGlzIHRoZSByb3V0ZSB0aGF0IHlvdSBzZXQgYXMgYGRlZmluaXRpb24ucm91dGVgXFxuICAgIC0gYGFjdGlvbmAgaXMgdGhlIGFjdGlvbiBhcyBwYXNzZWQgdG8gdGhlIHJvdXRlIGRlZmluaXRpb25cXG4gICAgLSBgYWN0aW9uRm5gIHdpbGwgYmUgdGhlIGNvbnRyb2xsZXIgZm9yIHRoaXMgYWN0aW9uIG1ldGhvZFxcbiAgICAtIGBtaWRkbGV3YXJlYCB3aWxsIGJlIGFuIGFycmF5IG9mIG1ldGhvZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGBhY3Rpb25GbmBcXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYHRhdW51cy5yZW5kZXIoYWN0aW9uLCB2aWV3TW9kZWwsIHJlcSwgcmVzLCBuZXh0KWBcXG5cXG4gICAgVGhpcyBtZXRob2QgaXMgYWxtb3N0IGFuIGltcGxlbWVudGF0aW9uIGRldGFpbCBhcyB5b3Ugc2hvdWxkIGJlIHVzaW5nIFRhdW51cyB0aHJvdWdoIG9uZSBvZiB0aGUgcGx1Z2lucyBhbnl3YXlzLCBzbyB3ZSB3b24ndCBnbyB2ZXJ5IGRlZXAgaW50byBpdC5cXG5cXG4gICAgVGhlIHJlbmRlciBtZXRob2QgaXMgd2hhdCBUYXVudXMgdXNlcyB0byByZW5kZXIgdmlld3MgYnkgY29uc3RydWN0aW5nIEhUTUwsIEpTT04sIG9yIHBsYWludGV4dCByZXNwb25zZXMuIFRoZSBgYWN0aW9uYCBwcm9wZXJ0eSBkZXRlcm1pbmVzIHRoZSBkZWZhdWx0IHZpZXcgdGhhdCB3aWxsIGJlIHJlbmRlcmVkLiBUaGUgYHZpZXdNb2RlbGAgd2lsbCBiZSBleHRlbmRlZCBieSBbdGhlIGRlZmF1bHQgdmlldyBtb2RlbF0oIy1vcHRpb25zLWdldGRlZmF1bHR2aWV3bW9kZWwtKSwgYW5kIGl0IG1heSBhbHNvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGBhY3Rpb25gIGJ5IHNldHRpbmcgYHZpZXdNb2RlbC5tb2RlbC5hY3Rpb25gLlxcblxcbiAgICBUaGUgYHJlcWAsIGByZXNgLCBhbmQgYG5leHRgIGFyZ3VtZW50cyBhcmUgZXhwZWN0ZWQgdG8gYmUgdGhlIEV4cHJlc3Mgcm91dGluZyBhcmd1bWVudHMsIGJ1dCB0aGV5IGNhbiBhbHNvIGJlIG1vY2tlZCBfKHdoaWNoIGlzIGluIGZhY3Qgd2hhdCB0aGUgSGFwaSBwbHVnaW4gZG9lcylfLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLnJlYnVpbGREZWZhdWx0Vmlld01vZGVsKGRvbmU/KWBcXG5cXG4gICAgT25jZSBUYXVudXMgaGFzIGJlZW4gbW91bnRlZCwgY2FsbGluZyB0aGlzIG1ldGhvZCB3aWxsIHJlYnVpbGQgdGhlIHZpZXcgbW9kZWwgZGVmYXVsdHMgdXNpbmcgdGhlIGBnZXREZWZhdWx0Vmlld01vZGVsYCB0aGF0IHdhcyBwYXNzZWQgdG8gYHRhdW51cy5tb3VudGAgaW4gdGhlIG9wdGlvbnMuIEFuIG9wdGlvbmFsIGBkb25lYCBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgbW9kZWwgaXMgcmVidWlsdC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYHRhdW51cy5yZXNvbHZlKGFjdGlvbiwgZGF0YT8pYFxcblxcbiAgICBSZXR1cm5zIHRoZSBmaXJzdCByb3V0ZSB0aGF0IG1hdGNoZXMgYW4gYGFjdGlvbmAsIHJlcGxhY2luZyBuYW1lZCBwYXJhbWV0ZXJzIHdpdGggZGF0YSBmcm9tIHRoZSBgZGF0YWAgb2JqZWN0LiBJZiBhIG1hdGNoaW5nIHJvdXRlIGlzIG5vdCBmb3VuZCwgYG51bGxgIGlzIHJldHVybmVkLlxcblxcbiAgICA+IElmIGEgcm91dGUgaXMgbWF0Y2hlZCBidXQgYSByZXF1aXJlZCBuYW1lZCBwYXJhbWV0ZXIgaXNuJ3QgaW4gYGRhdGFgLCAqKmFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bioqLlxcblxcbiAgICBUaGlzIG1ldGhvZCBpcyBtb3N0IHVzZWZ1bCB3aGVuIGNvbXBvc2luZyB0aGUgVVJMIGZvciBhIHJlZGlyZWN0IG9yIGFuIGFjdGlvbiBsaW5rIHdpdGhpbiBhIHRlbXBsYXRlLCBhcyBhIG1lYW5zIHRvIGtlZXAgdGhlIHJvdXRlIGRlY2xhcmF0aW9uIGlzb2xhdGVkIGZyb20gdGhlIHJvdXRlIGl0c2VsZi4gSWYgdGhlIHJvdXRlIGNoYW5nZXMsIHRoZSBtZXRob2Qgd2lsbCByZWZsZWN0IHRoZSBuZXdlciByb3V0ZSBhcyBsb25nIGFzIHRoZSBwYXJhbWV0ZXJzIHN0YXkgdGhlIHNhbWUsIHJlc3VsdGluZyBpbiBpbmNyZWFzZWQgbWFpbnRhaW5hYmlsaXR5LiBfVGhlIG1ldGhvZCBpcyBhdmFpbGFibGUgaW4gYm90aCBsYXlvdXQgdGVtcGxhdGVzIGFuZCBwYXJ0aWFsIHZpZXcgdGVtcGxhdGVzLl9cXG5cXG4gICAgIyMjIyMjIEV4YW1wbGVcXG5cXG4gICAgYGBganNcXG4gICAgdGF1bnVzLnJlc29sdmUoJ3Byb2plY3RzL3Byb2plY3QnLCB7XFxuICAgICAgbmFtZTogJ3B1cHBpZXMnLCBvcmdhbml6YXRpb246ICdjYW5pdXNlJ1xcbiAgICB9KTtcXG4gICAgLy8gPC0gL3AvY2FuaXVzZS9wdXBwaWVzXFxuICAgIGBgYFxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLnJlZGlyZWN0KHJlcSwgcmVzLCB1cmwsIG9wdGlvbnM/KWBcXG5cXG4gICAgUmVkaXJlY3RzIHRoZSByZXNwb25zZSB0byBhIGRpZmZlcmVudCBVUkwuIElmIHRoZSByZXF1ZXN0IGFjY2VwdHMgSFRNTCwgdGhpcyBtZXRob2QgaXMgZXF1aXZhbGVudCB0byBgcmVzLnJlZGlyZWN0KHVybClgLiBJZiB0aGUgcmVxdWVzdCBhY2NlcHRzIEpTT04sIGEgc3BlY2lhbGx5IGNyYWZ0ZWQgSlNPTiByZXNwb25zZSB3aWxsIHRyaWdnZXIgYSBjbGllbnQtc2lkZSByZWRpcmVjdCB1c2luZyBbdGF1bnVzLm5hdmlnYXRlXSgjLXRhdW51cy1uYXZpZ2F0ZS11cmwtb3B0aW9ucy0pLlxcblxcbiAgICBPcHRpb24gIHwgRGVzY3JpcHRpb25cXG4gICAgLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG4gICAgYGhhcmRgICB8IFVzZXMgYSBmdWxsIHBhZ2UgcmVkaXJlY3Qgd2hlbiBgdHJ1ZWBcXG4gICAgYGZvcmNlYCB8IENsaWVudC1zaWRlIHJlZGlyZWN0cyB3aWxsIGJlIGNhcnJpZWQgb3V0IGV2ZW4gaWYgdGhlIHRhcmdldCBVUkwgaXMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgYGxvY2F0aW9uYFxcblxcbiAgICAjIyMjIyMgRXhhbXBsZVxcblxcbiAgICBgYGBqc1xcbiAgICB0YXVudXMucmVkaXJlY3QocmVxLCByZXMsICcvbG9naW4nKTtcXG4gICAgYGBgXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMgU2VydmVyLVNpZGUgQ29udHJvbGxlcnNcXG5cXG4gICAgT24gdGhlIHNlcnZlci1zaWRlLCBjb250cm9sbGVycyBhcmUgbW9kdWxlcyB0aGF0IGV4cG9ydCBhIHNpbmdsZSBmdW5jdGlvbi4gVGhlIHBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZXNlIGNvbnRyb2xsZXJzIGRlcGVuZCBvbiB0aGUgc2VydmVyLXNpZGUgSFRUUCBmcmFtZXdvcmsgdGhhdCdzIGJlaW5nIHVzZWQuXFxuXFxuICAgIEZvciBleGFtcGxlLCBFeHByZXNzIGdpdmVzIHVzIHRocmVlIHBhcmFtZXRlcnM6IGByZXFgLCBgcmVzYCBhbmQgYG5leHRgLiBIYXBpIGdpdmVzIHVzIHR3byBpbnN0ZWFkOiBgcmVxdWVzdGAgYW5kIGByZXBseWAuXFxuXFxuICAgIEhlcmUncyBhIHNhbXBsZSBjb250cm9sbGVyIHVzaW5nIGB0YXVudXMtZXhwcmVzc2AsIGFzIFtkZXRhaWxlZCBiZWxvd10oI3VzaW5nLXRhdW51cy1leHByZXNzLSkuIFRoaXMgaXMgYSB2ZXJ5IHNpbXBsZSBjb250cm9sbGVyIHdoZXJlIHdlIGFyZSBzZXR0aW5nIHRoZSBzcGVjaWFsIGB2aWV3TW9kZWxgIHByb3BlcnR5IG9uIHRoZSByZXNwb25zZSwgYW5kIGNhbGxpbmcgYG5leHRgLiBTdXBwb3NlIHRoaXMgY29udHJvbGxlciBpcyB0aGUgYHByb2R1Y3QvaG9tZWAgYWN0aW9uIGhhbmRsZXIuXFxuXFxuICAgIGBgYGpzXFxuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XFxuICAgICAgcmVzLnZpZXdNb2RlbCA9IHtcXG4gICAgICAgIG1vZGVsOiB7XFxuICAgICAgICAgIHRpdGxlOiAndmlldyB0aXRsZSdcXG4gICAgICAgIH1cXG4gICAgICB9O1xcbiAgICAgIG5leHQoKTtcXG4gICAgfTtcXG4gICAgYGBgXFxuXFxuICAgIEFzIHlvdSBjYW4gc2VlLCBUYXVudXMgd29uJ3QgYWx0ZXIgdGhlIEFQSSBwcm92aWRlZCBieSBFeHByZXNzLiBJbnN0ZWFkLCBpdCBidWlsZHMgdXBvbiB0aGUgbm90aW9uIG9mIHVzaW5nIG1pZGRsZXdhcmUuIE9uY2UgdGhlIGBwcm9kdWN0L2hvbWVgIHZpZXcgaXMgcmVuZGVyZWQgYW5kIEphdmFTY3JpcHQgbG9hZHMsIHRoZSBgcHJvZHVjdC9ob21lYCB2aWV3IGNvbnRyb2xsZXIgaXMgZXhlY3V0ZWQgb24gdGhlIGNsaWVudC1zaWRlLlxcblxcbiAgICBZb3UgY291bGQgY2hhbmdlIHRoZSB2aWV3IHRvIGJlIHJlbmRlcmVkIGJ5IHNldHRpbmcgdGhlIGBhY3Rpb25gIHByb3BlcnR5IG9uIHRoZSBgbW9kZWxgLiBJbiB0aGUgZXhhbXBsZSBzaG93biBiZWxvdyB0aGlzIHdvdWxkIG1lYW4gdGhhdCB0aGUgYGVycm9yL29mZmxpbmVgIHZpZXcgd291bGQgYmUgcmVuZGVyZWQuIFRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyIHdpbGwgYmUgdGhhdCBvZiBgZXJyb3Ivb2ZmbGluZWAsIGFzIHdlbGwuIFZpZXcgY29udHJvbGxlcnMgYXJlIHRpZWQgdG8gdGhlIHZpZXcgdGhhdCBnZXRzIHJlbmRlcmVkLlxcblxcbiAgICBgYGBqc1xcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xcbiAgICAgIHJlcy52aWV3TW9kZWwgPSB7XFxuICAgICAgICBtb2RlbDoge1xcbiAgICAgICAgICB0aXRsZTogJ3ZpZXcgdGl0bGUnXFxuICAgICAgICB9XFxuICAgICAgfTtcXG4gICAgICBpZiAob2ZmbGluZSkge1xcbiAgICAgICAgcmVzLnZpZXdNb2RlbC5tb2RlbC5hY3Rpb24gPSAnZXJyb3Ivb2ZmbGluZSc7XFxuICAgICAgfVxcbiAgICAgIG5leHQoKTtcXG4gICAgfTtcXG4gICAgYGBgXFxuXFxuICAgIEhhdmluZyBhIGRlZmF1bHQgYWN0aW9uIGFuZCB0aGUgYWJpbGl0eSB0byByZWRpcmVjdCB0byBhbm90aGVyIGdpdmVzIHVzIGEgbG90IG9mIGZsZXhpYmlsaXR5IHdoZW4gZGV0ZXJtaW5pbmcgaG93IHRvIHJlc3BvbmQgdG8gYSByZXF1ZXN0LlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIEhUVFAgRnJhbWV3b3JrIFBsdWdpbnNcXG5cXG4gICAgVGhlcmUncyBjdXJyZW50bHkgdHdvIGRpZmZlcmVudCBIVFRQIGZyYW1ld29ya3MgXyhbRXhwcmVzc11bMl0gYW5kIFtIYXBpXVszXSlfIHRoYXQgeW91IGNhbiByZWFkaWx5IHVzZSB3aXRoIFRhdW51cyB3aXRob3V0IGhhdmluZyB0byBkZWFsIHdpdGggYW55IG9mIHRoZSByb3V0ZSBwbHVtYmluZyB5b3Vyc2VsZi5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgVXNpbmcgYHRhdW51cy1leHByZXNzYFxcblxcbiAgICBUaGUgYHRhdW51cy1leHByZXNzYCBwbHVnaW4gaXMgcHJvYmFibHkgdGhlIGVhc2llc3QgdG8gdXNlLCBhcyBUYXVudXMgd2FzIG9yaWdpbmFsbHkgZGV2ZWxvcGVkIHdpdGgganVzdCBbRXhwcmVzc11bMl0gaW4gbWluZC4gSW4gYWRkaXRpb24gdG8gdGhlIG9wdGlvbnMgYWxyZWFkeSBvdXRsaW5lZCBmb3IgW3RhdW51cy5tb3VudF0oIy10YXVudXMtbW91bnQtYWRkcm91dGUtb3B0aW9ucy0pLCB5b3UgY2FuIGFkZCBtaWRkbGV3YXJlIGZvciBhbnkgcm91dGUgaW5kaXZpZHVhbGx5LlxcblxcbiAgICAtIGBtaWRkbGV3YXJlYCBhcmUgYW55IG1ldGhvZHMgeW91IHdhbnQgVGF1bnVzIHRvIGV4ZWN1dGUgYXMgbWlkZGxld2FyZSBpbiBFeHByZXNzIGFwcGxpY2F0aW9uc1xcblxcbiAgICBUbyBnZXQgYHRhdW51cy1leHByZXNzYCBnb2luZyB5b3UgY2FuIHVzZSB0aGUgZm9sbG93aW5nIHBpZWNlIG9mIGNvZGUsIHByb3ZpZGVkIHRoYXQgeW91IGNvbWUgdXAgd2l0aCBhbiBgb3B0aW9uc2Agb2JqZWN0LlxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIHZhciB0YXVudXMgPSByZXF1aXJlKCd0YXVudXMnKTtcXG4gICAgdmFyIHRhdW51c0V4cHJlc3MgPSByZXF1aXJlKCd0YXVudXMtZXhwcmVzcycpO1xcbiAgICB2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcXG4gICAgdmFyIGFwcCA9IGV4cHJlc3MoKTtcXG4gICAgdmFyIG9wdGlvbnMgPSB7XFxuICAgICAgLy8gLi4uXFxuICAgIH07XFxuXFxuICAgIHRhdW51c0V4cHJlc3ModGF1bnVzLCBhcHAsIG9wdGlvbnMpO1xcbiAgICBgYGBcXG5cXG4gICAgVGhlIGB0YXVudXNFeHByZXNzYCBtZXRob2Qgd2lsbCBtZXJlbHkgc2V0IHVwIFRhdW51cyBhbmQgYWRkIHRoZSByZWxldmFudCByb3V0ZXMgdG8geW91ciBFeHByZXNzIGFwcGxpY2F0aW9uIGJ5IGNhbGxpbmcgYGFwcC5nZXRgIGEgYnVuY2ggb2YgdGltZXMuIFlvdSBjYW4gW2ZpbmQgdGF1bnVzLWV4cHJlc3Mgb24gR2l0SHViXVs3XS5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgVXNpbmcgYHRhdW51cy1oYXBpYFxcblxcbiAgICBUaGUgYHRhdW51cy1oYXBpYCBwbHVnaW4gaXMgYSBiaXQgbW9yZSBpbnZvbHZlZCwgYW5kIHlvdSdsbCBoYXZlIHRvIGNyZWF0ZSBhIFBhY2sgaW4gb3JkZXIgdG8gdXNlIGl0LiBJbiBhZGRpdGlvbiB0byBbdGhlIG9wdGlvbnMgd2UndmUgYWxyZWFkeSBjb3ZlcmVkXSgjLXRhdW51cy1tb3VudC1hZGRyb3V0ZS1vcHRpb25zLSksIHlvdSBjYW4gYWRkIGBjb25maWdgIG9uIGFueSByb3V0ZS5cXG5cXG4gICAgLSBgY29uZmlnYCBpcyBwYXNzZWQgZGlyZWN0bHkgaW50byB0aGUgcm91dGUgcmVnaXN0ZXJlZCB3aXRoIEhhcGksIGdpdmluZyB5b3UgdGhlIG1vc3QgZmxleGliaWxpdHlcXG5cXG4gICAgVG8gZ2V0IGB0YXVudXMtaGFwaWAgZ29pbmcgeW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyBwaWVjZSBvZiBjb2RlLCBhbmQgeW91IGNhbiBicmluZyB5b3VyIG93biBgb3B0aW9uc2Agb2JqZWN0LlxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIHZhciBIYXBpID0gcmVxdWlyZSgnaGFwaScpO1xcbiAgICB2YXIgdGF1bnVzID0gcmVxdWlyZSgndGF1bnVzJyk7XFxuICAgIHZhciB0YXVudXNIYXBpID0gcmVxdWlyZSgndGF1bnVzLWhhcGknKSh0YXVudXMpO1xcbiAgICB2YXIgcGFjayA9IG5ldyBIYXBpLlBhY2soKTtcXG5cXG4gICAgcGFjay5yZWdpc3Rlcih7XFxuICAgICAgcGx1Z2luOiB0YXVudXNIYXBpLFxcbiAgICAgIG9wdGlvbnM6IHtcXG4gICAgICAgIC8vIC4uLlxcbiAgICAgIH1cXG4gICAgfSk7XFxuICAgIGBgYFxcblxcbiAgICBUaGUgYHRhdW51c0hhcGlgIHBsdWdpbiB3aWxsIG1vdW50IFRhdW51cyBhbmQgcmVnaXN0ZXIgYWxsIG9mIHRoZSBuZWNlc3Nhcnkgcm91dGVzLiBZb3UgY2FuIFtmaW5kIHRhdW51cy1oYXBpIG9uIEdpdEh1Yl1bOF0uXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMgQ29tbWFuZC1MaW5lIEludGVyZmFjZVxcblxcbiAgICBPbmNlIHlvdSd2ZSBzZXQgdXAgdGhlIHNlcnZlci1zaWRlIHRvIHJlbmRlciB5b3VyIHZpZXdzIHVzaW5nIFRhdW51cywgaXQncyBvbmx5IGxvZ2ljYWwgdGhhdCB5b3UnbGwgd2FudCB0byByZW5kZXIgdGhlIHZpZXdzIGluIHRoZSBjbGllbnQtc2lkZSBhcyB3ZWxsLCBlZmZlY3RpdmVseSBjb252ZXJ0aW5nIHlvdXIgYXBwbGljYXRpb24gaW50byBhIHNpbmdsZS1wYWdlIGFwcGxpY2F0aW9uIGFmdGVyIHRoZSBmaXJzdCB2aWV3IGhhcyBiZWVuIHJlbmRlcmVkIG9uIHRoZSBzZXJ2ZXItc2lkZS5cXG5cXG4gICAgVGhlIFRhdW51cyBDTEkgaXMgYW4gdXNlZnVsIGludGVybWVkaWFyeSBpbiB0aGUgcHJvY2VzcyBvZiBnZXR0aW5nIHRoZSBjb25maWd1cmF0aW9uIHlvdSB3cm90ZSBzbyBmYXIgZm9yIHRoZSBzZXJ2ZXItc2lkZSB0byBhbHNvIHdvcmsgd2VsbCBpbiB0aGUgY2xpZW50LXNpZGUuXFxuXFxuICAgIEluc3RhbGwgaXQgZ2xvYmFsbHkgZm9yIGRldmVsb3BtZW50LCBidXQgcmVtZW1iZXIgdG8gdXNlIGxvY2FsIGNvcGllcyBmb3IgcHJvZHVjdGlvbi1ncmFkZSB1c2VzLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICBucG0gaW5zdGFsbCAtZyB0YXVudXNcXG4gICAgYGBgXFxuXFxuICAgIFdoZW4gaW52b2tlZCB3aXRob3V0IGFueSBhcmd1bWVudHMsIHRoZSBDTEkgd2lsbCBzaW1wbHkgZm9sbG93IHRoZSBkZWZhdWx0IGNvbnZlbnRpb25zIHRvIGZpbmQgeW91ciByb3V0ZSBkZWZpbml0aW9ucywgdmlld3MsIGFuZCBjbGllbnQtc2lkZSBjb250cm9sbGVycy5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgdGF1bnVzXFxuICAgIGBgYFxcblxcbiAgICBCeSBkZWZhdWx0LCB0aGUgb3V0cHV0IHdpbGwgYmUgcHJpbnRlZCB0byB0aGUgc3RhbmRhcmQgb3V0cHV0LCBtYWtpbmcgZm9yIGEgZmFzdCBkZWJ1Z2dpbmcgZXhwZXJpZW5jZS4gSGVyZSdzIHRoZSBvdXRwdXQgaWYgeW91IGp1c3QgaGFkIGEgc2luZ2xlIGBob21lL2luZGV4YCByb3V0ZSwgYW5kIHRoZSBtYXRjaGluZyB2aWV3IGFuZCBjbGllbnQtc2lkZSBjb250cm9sbGVyIGV4aXN0ZWQuXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgdmFyIHRlbXBsYXRlcyA9IHtcXG4gICAgICAnaG9tZS9pbmRleCc6IHJlcXVpcmUoJy4vdmlld3MvaG9tZS9pbmRleC5qcycpXFxuICAgIH07XFxuXFxuICAgIHZhciBjb250cm9sbGVycyA9IHtcXG4gICAgICAnaG9tZS9pbmRleCc6IHJlcXVpcmUoJy4uL2NsaWVudC9qcy9jb250cm9sbGVycy9ob21lL2luZGV4LmpzJylcXG4gICAgfTtcXG5cXG4gICAgdmFyIHJvdXRlcyA9IFtcXG4gICAgICB7XFxuICAgICAgICByb3V0ZTogJy8nLFxcbiAgICAgICAgYWN0aW9uOiAnaG9tZS9pbmRleCdcXG4gICAgICB9XFxuICAgIF07XFxuXFxuICAgIG1vZHVsZS5leHBvcnRzID0ge1xcbiAgICAgIHRlbXBsYXRlczogdGVtcGxhdGVzLFxcbiAgICAgIGNvbnRyb2xsZXJzOiBjb250cm9sbGVycyxcXG4gICAgICByb3V0ZXM6IHJvdXRlc1xcbiAgICB9O1xcbiAgICBgYGBcXG5cXG4gICAgWW91IGNhbiB1c2UgYSBmZXcgb3B0aW9ucyB0byBhbHRlciB0aGUgb3V0Y29tZSBvZiBpbnZva2luZyBgdGF1bnVzYC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYC0tb3V0cHV0YFxcblxcbiAgICA8c3ViPnRoZSBgLW9gIGFsaWFzIGlzIGF2YWlsYWJsZTwvc3ViPlxcblxcbiAgICBPdXRwdXQgaXMgd3JpdHRlbiB0byBhIGZpbGUgaW5zdGVhZCBvZiB0byBzdGFuZGFyZCBvdXRwdXQuIFRoZSBmaWxlIHBhdGggdXNlZCB3aWxsIGJlIHRoZSBgY2xpZW50X3dpcmluZ2Agb3B0aW9uIGluIFtgLnRhdW51c3JjYF0oI3RoZS10YXVudXNyYy1tYW5pZmVzdCksIHdoaWNoIGRlZmF1bHRzIHRvIGAnLmJpbi93aXJpbmcuanMnYC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYC0td2F0Y2hgXFxuXFxuICAgIDxzdWI+dGhlIGAtd2AgYWxpYXMgaXMgYXZhaWxhYmxlPC9zdWI+XFxuXFxuICAgIFdoZW5ldmVyIGEgc2VydmVyLXNpZGUgcm91dGUgZGVmaW5pdGlvbiBjaGFuZ2VzLCB0aGUgb3V0cHV0IGlzIHByaW50ZWQgYWdhaW4gdG8gZWl0aGVyIHN0YW5kYXJkIG91dHB1dCBvciBhIGZpbGUsIGRlcGVuZGluZyBvbiB3aGV0aGVyIGAtLW91dHB1dGAgd2FzIHVzZWQuXFxuXFxuICAgIFRoZSBwcm9ncmFtIHdvbid0IGV4aXQuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIGAtLXRyYW5zZm9ybSA8bW9kdWxlPmBcXG5cXG4gICAgPHN1Yj50aGUgYC10YCBhbGlhcyBpcyBhdmFpbGFibGU8L3N1Yj5cXG5cXG4gICAgVGhpcyBmbGFnIGFsbG93cyB5b3UgdG8gdHJhbnNmb3JtIHNlcnZlci1zaWRlIHJvdXRlcyBpbnRvIHNvbWV0aGluZyB0aGUgY2xpZW50LXNpZGUgdW5kZXJzdGFuZHMuIEV4cHJlc3Mgcm91dGVzIGFyZSBjb21wbGV0ZWx5IGNvbXBhdGlibGUgd2l0aCB0aGUgY2xpZW50LXNpZGUgcm91dGVyLCBidXQgSGFwaSByb3V0ZXMgbmVlZCB0byBiZSB0cmFuc2Zvcm1lZCB1c2luZyB0aGUgW2BoYXBpaWZ5YF1bOV0gbW9kdWxlLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICBucG0gaW5zdGFsbCBoYXBpaWZ5XFxuICAgIHRhdW51cyAtdCBoYXBpaWZ5XFxuICAgIGBgYFxcblxcbiAgICBVc2luZyB0aGlzIHRyYW5zZm9ybSByZWxpZXZlcyB5b3UgZnJvbSBoYXZpbmcgdG8gZGVmaW5lIHRoZSBzYW1lIHJvdXRlcyB0d2ljZSB1c2luZyBzbGlnaHRseSBkaWZmZXJlbnQgZm9ybWF0cyB0aGF0IGNvbnZleSB0aGUgc2FtZSBtZWFuaW5nLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgLS1kZWZlciBbYWN0aW9uc11gXFxuXFxuICAgIDxzdWI+dGhlIGAtZGAgYWxpYXMgaXMgYXZhaWxhYmxlPC9zdWI+XFxuXFxuICAgIEhlcmUgaXMgd2hlcmUgdGhpbmdzIGdldCBpbnRlcmVzdGluZy4gVGhlIGAtLWRlZmVyYCBmbGFnIGFsbG93cyB5b3UgdG8gZGVmZXIgbG9hZGluZyBmb3IgemVybyBvciBtb3JlIGFjdGlvbnMuIEV4Y2x1ZGluZyB0aGUgY29udHJvbGxlciBhbmQgdmlldyB0ZW1wbGF0ZXMgZm9yIGFueSBkZWZlcnJlZCBhY3Rpb24gY2FuIHNpZ25pZmljYW50bHkgcmVkdWNlIHRoZSBmaW5nZXJwcmludCBvZiB5b3VyIGFwcGxpY2F0aW9uLlxcblxcbiAgICBUaGUgYFthY3Rpb25zXWAgYXJndW1lbnQgZGV0ZXJtaW5lcyB3aGF0IGFjdGlvbnMgZ2V0IGRlZmVycmVkLCBhbmQgd2hpY2ggZG9uJ3QuIEl0IGV4cGVjdHMgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBhY3Rpb25zLCB3aGVyZSB5b3UgY2FuIHBhc3MgaW4gZWl0aGVyIHRoZSBjb250cm9sbGVyIG5hbWUsIG9yIGJvdGggdGhlIGNvbnRyb2xsZXIgbmFtZSBhbmQgdGhlIGFjdGlvbiBuYW1lLiBVc2luZyBgP2AgYWN0cyBhcyBhIHdpbGRjYXJkLlxcblxcbiAgICBGb3IgZXhhbXBsZSwgdXNpbmcgYGFkbWluYCBfKGVxdWl2YWxlbnQgdG8gdXNpbmcgYGFkbWluLz9gKV8gd2lsbCBkZWZlciBldmVyeSBhY3Rpb24gdW5kZXIgdGhlIGBhZG1pbmAgY29udHJvbGxlci4gVXNpbmcgYGFkbWluL251a2VgIHdpbGwgb25seSBkZWZlciB0aGUgYGFkbWluL251a2VgIGFjdGlvbi4gSWYgeW91IG9taXQgdGhlIGBbYWN0aW9uc11gIHBhcmFtZXRlciBlbnRpcmVseSwgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYCc/J2Agd2lsbCBiZSB1c2VkIGFuZCBldmVyeXRoaW5nIHdpbGwgYmUgZGVmZXJyZWQuXFxuXFxuICAgIFdoZW4gY29tcG9uZW50cyBnZXQgZGVmZXJyZWQsIHRoZXknbGwgYmUgbG9hZGVkIGFzIHNvb24gYXMgVGF1bnVzIGRldGVjdHMgdGhhdCB0aGV5J3JlIG5lZWRlZC4gVGhpcyBjYW4gaGFwcGVuIGluIGEgZmV3IHBsYWNlcy5cXG5cXG4gICAgLSBUaGUgdXNlciBuYXZpZ2F0ZXMgdG8gKG9yIFtfcHJlZmV0Y2hlc19dKCNwcmVmZXRjaGluZykpIHRoZSBgL2FkbWluYCByb3V0ZSwgYW5kIGBhZG1pbi9pbmRleGAgd2FzIGRlZmVycmVkLCBhbmQgaXRzIGNvbXBvbmVudHMgYXJlbid0IGNhY2hlZCBvbiB0aGUgY2xpZW50LXNpZGUgeWV0XFxuICAgIC0gQSBjb250cm9sbGVyIHVzZXMgYHRhdW51cy5wYXJ0aWFsYCB0byByZW5kZXIgYW4gYWN0aW9uIHRoYXQgd2FzIGRlZmVycmVkLCBhbmQgaXRzIGNvbXBvbmVudHMgYXJlbid0IGNhY2hlZCBvbiB0aGUgY2xpZW50LXNpZGUgeWV0XFxuICAgIC0gVGhlIHVzZXIgbmF2aWdhdGVzIHRvIHRoZSBgL2FkbWluYCByb3V0ZSwgYW5kIGl0cyBtYXRjaGluZyBgYWRtaW4vaW5kZXhgIHJvdXRlIHdhc24ndCBkZWZlcnJlZCwgYnV0IHRoZSBzZXJ2ZXItc2lkZSBjb250cm9sbGVyIGRlY2lkZXMgdG8gY2hhbmdlIHRoZSBhY3Rpb24gdG8gYGFkbWluL3N1cGVyYWRtaW5gLiBXaGVuIHRoZSByZXNwb25zZSBnZXRzIHRvIHRoZSBjbGllbnQsIGl0J2xsIG5lZWQgdG8gYXNrIHRoZSBzZXJ2ZXIgZm9yIHRoZSBgYWRtaW4vc3VwZXJhZG1pbmAgdGVtcGxhdGUgaWYgdGhlIGNsaWVudCBkb2Vzbid0IGFscmVhZHkgaGF2ZSBpdFxcblxcbiAgICBZb3UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCB0aG9zZSBkaWZmZXJlbnQgc2NlbmFyaW9zLCB0aG91Z2gsIGFzIFRhdW51cyBoYW5kbGVzIHRoZW0gYWxsIGZvciB5b3UgdHJhbnNwYXJlbnRseS4gWW91IHNob3VsZCBbbGVhcm4gbW9yZSBhYm91dCBkZWZlcnJlZCBsb2FkaW5nIG9uIHRoZSBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb24gZ3VpZGVdWzIwXS5cXG5cXG4gICAgPiBBIHBvc3NpYmxlIGNvbmNlcm4gd2l0aCBkZWZlcnJlZCBleGVjdXRpb24gaXMgdGhhdCBwYXJ0aWFsIHZpZXdzIG1heSBub3QgYmUgcmVuZGVyZWQgaW1tZWRpYXRlbHksIGFzIGEgcmVxdWVzdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIGZldGNoIHRoZSBjb250cm9sbGVyIG9yIHRlbXBsYXRlIGZvciB0aGUgcGFydGlhbC5cXG5cXG4gICAgU29tZSBvdGhlciBjb25zaWRlcmF0aW9ucywgcmVnYXJkaW5nIGhvdyBkZWZlcnJlZCBjb21wb25lbnRzIGdldCBidW5kbGVkLCBhcmUgbGlzdGVkIGluIHRoZSBbUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXVsyMF0gZ3VpZGUuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIGAtLXJlc29sdmVycyA8bW9kdWxlPmBcXG5cXG4gICAgPHN1Yj50aGUgYC1yYCBhbGlhcyBpcyBhdmFpbGFibGU8L3N1Yj5cXG5cXG4gICAgU2ltaWxhcmx5IHRvIHRoZSBbYHJlc29sdmVyc2BdKCMtb3B0aW9ucy1yZXNvbHZlcnMtKSBvcHRpb24gdGhhdCB5b3UgY2FuIHBhc3MgdG8gW2B0YXVudXMubW91bnRgXSgjLXRhdW51cy1tb3VudC1hZGRyb3V0ZS1vcHRpb25zLSksIHRoZXNlIHJlc29sdmVycyBjYW4gY2hhbmdlIHRoZSB3YXkgaW4gd2hpY2ggZmlsZSBwYXRocyBhcmUgcmVzb2x2ZWQuXFxuXFxuICAgIFNpZ25hdHVyZSAgICAgICAgICAgICAgICAgICAgIHwgRGVzY3JpcHRpb25cXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcbiAgICBgZ2V0Q2xpZW50Q29udHJvbGxlcihhY3Rpb24pYCB8IFJldHVybiBwYXRoIHRvIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgYWN0aW9uIGhhbmRsZXIgbW9kdWxlXFxuICAgIGBnZXRWaWV3KGFjdGlvbilgICAgICAgICAgICAgIHwgUmV0dXJuIHBhdGggdG8gdmlldyB0ZW1wbGF0ZSBtb2R1bGVcXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYC0tYnVuZGxlYFxcblxcbiAgICA8c3ViPnRoZSBgLWJgIGFsaWFzIGlzIGF2YWlsYWJsZTwvc3ViPlxcblxcbiAgICBVbmRlciB0aGlzIGV4cGVyaW1lbnRhbCBmbGFnLCB0aGUgQ0xJIHdpbGwgdXNlIEJyb3dzZXJpZnkgdG8gY29tcGlsZSBhIHN0YW5kYWxvbmUgbW9kdWxlIHRoYXQgaW5jbHVkZXMgdGhlIHdpcmluZyBub3JtYWxseSBleHBvcnRlZCBieSB0aGUgQ0xJIHBsdXMgYWxsIG9mIFRhdW51cyBbYXMgYSBVTUQgbW9kdWxlXVsxMF0uXFxuXFxuICAgIFRoaXMgYWxsb3dzIHlvdSB0byB1c2UgVGF1bnVzIG9uIHRoZSBjbGllbnQtc2lkZSBldmVuIGlmIHlvdSBkb24ndCB3YW50IHRvIHVzZSBbQnJvd3NlcmlmeV1bMTFdIGRpcmVjdGx5LlxcblxcbiAgICBGZWVkYmFjayBhbmQgc3VnZ2VzdGlvbnMgYWJvdXQgdGhpcyBmbGFnLCBfYW5kIHBvc3NpYmxlIGFsdGVybmF0aXZlcyB0aGF0IHdvdWxkIG1ha2UgVGF1bnVzIGVhc2llciB0byB1c2VfLCBhcmUgd2VsY29tZS5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyBDbGllbnQtc2lkZSBBUElcXG5cXG4gICAgSnVzdCBsaWtlIHRoZSBzZXJ2ZXItc2lkZSwgZXZlcnl0aGluZyBpbiB0aGUgY2xpZW50LXNpZGUgYmVnaW5zIGF0IHRoZSBtb3VudHBvaW50LiBPbmNlIHRoZSBhcHBsaWNhdGlvbiBpcyBtb3VudGVkLCBhbmNob3IgbGlua3Mgd2lsbCBiZSBoaWphY2tlZCBhbmQgdGhlIGNsaWVudC1zaWRlIHJvdXRlciB3aWxsIHRha2Ugb3ZlciB2aWV3IHJlbmRlcmluZy4gQ2xpZW50LXNpZGUgY29udHJvbGxlcnMgYXJlIGV4ZWN1dGVkIHdoZW5ldmVyIGEgdmlldyBpcyByZW5kZXJlZC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYHRhdW51cy5tb3VudChjb250YWluZXIsIHdpcmluZywgb3B0aW9ucz8pYFxcblxcbiAgICBUaGUgbW91bnRwb2ludCB0YWtlcyBhIHJvb3QgY29udGFpbmVyLCB0aGUgd2lyaW5nIG1vZHVsZSwgYW5kIGFuIG9wdGlvbnMgcGFyYW1ldGVyLiBUaGUgYGNvbnRhaW5lcmAgaXMgd2hlcmUgY2xpZW50LXNpZGUtcmVuZGVyZWQgdmlld3Mgd2lsbCBiZSBwbGFjZWQsIGJ5IHJlcGxhY2luZyB3aGF0ZXZlciBIVE1MIGNvbnRlbnRzIGFscmVhZHkgZXhpc3QuIFlvdSBjYW4gcGFzcyBpbiB0aGUgYHdpcmluZ2AgbW9kdWxlIGV4YWN0bHkgYXMgYnVpbHQgYnkgdGhlIENMSSwgYW5kIG5vIGZ1cnRoZXIgY29uZmlndXJhdGlvbiBpcyBuZWNlc3NhcnkuXFxuXFxuICAgIFdoZW4gdGhlIG1vdW50cG9pbnQgZXhlY3V0ZXMsIFRhdW51cyB3aWxsIGNvbmZpZ3VyZSBpdHMgaW50ZXJuYWwgc3RhdGUsIF9zZXQgdXAgdGhlIGNsaWVudC1zaWRlIHJvdXRlcl8sIHJ1biB0aGUgY2xpZW50LXNpZGUgY29udHJvbGxlciBmb3IgdGhlIHNlcnZlci1zaWRlIHJlbmRlcmVkIHZpZXcsIGFuZCBzdGFydCBoaWphY2tpbmcgbGlua3MuXFxuXFxuICAgIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIGEgYnJvd3NlciBtYWtlcyBhIGBHRVRgIHJlcXVlc3QgZm9yIGAvYXJ0aWNsZXMvdGhlLWZveGAgZm9yIHRoZSBmaXJzdCB0aW1lLiBPbmNlIGB0YXVudXMubW91bnQoY29udGFpbmVyLCB3aXJpbmcpYCBpcyBpbnZva2VkIG9uIHRoZSBjbGllbnQtc2lkZSwgc2V2ZXJhbCB0aGluZ3Mgd291bGQgaGFwcGVuIGluIHRoZSBvcmRlciBsaXN0ZWQgYmVsb3cuXFxuXFxuICAgIC0gVGF1bnVzIHNldHMgdXAgdGhlIGNsaWVudC1zaWRlIHZpZXcgcm91dGluZyBlbmdpbmVcXG4gICAgLSBJZiBlbmFibGVkIF8odmlhIGBvcHRpb25zYClfLCB0aGUgY2FjaGluZyBlbmdpbmUgaXMgY29uZmlndXJlZFxcbiAgICAtIFRhdW51cyBvYnRhaW5zIHRoZSB2aWV3IG1vZGVsIF8obW9yZSBvbiB0aGlzIGxhdGVyKV9cXG4gICAgLSBXaGVuIGEgdmlldyBtb2RlbCBpcyBvYnRhaW5lZCwgdGhlIGAnc3RhcnQnYCBldmVudCBpcyBlbWl0dGVkXFxuICAgIC0gQW5jaG9yIGxpbmtzIHN0YXJ0IGJlaW5nIG1vbml0b3JlZCBmb3IgY2xpY2tzIF8oYXQgdGhpcyBwb2ludCB5b3VyIGFwcGxpY2F0aW9uIGJlY29tZXMgYSBbU1BBXVsxM10pX1xcbiAgICAtIFRoZSBgYXJ0aWNsZXMvYXJ0aWNsZWAgY2xpZW50LXNpZGUgY29udHJvbGxlciBpcyBleGVjdXRlZFxcblxcbiAgICBUaGF0J3MgcXVpdGUgYSBiaXQgb2YgZnVuY3Rpb25hbGl0eSwgYnV0IGlmIHlvdSB0aGluayBhYm91dCBpdCwgbW9zdCBvdGhlciBmcmFtZXdvcmtzIGFsc28gcmVuZGVyIHRoZSB2aWV3IGF0IHRoaXMgcG9pbnQsIF9yYXRoZXIgdGhhbiBvbiB0aGUgc2VydmVyLXNpZGUhX1xcblxcbiAgICBJbiBvcmRlciB0byBiZXR0ZXIgdW5kZXJzdGFuZCB0aGUgcHJvY2VzcywgSSdsbCB3YWxrIHlvdSB0aHJvdWdoIHRoZSBgb3B0aW9uc2AgcGFyYW1ldGVyLlxcblxcbiAgICBGaXJzdCBvZmYsIHRoZSBgYm9vdHN0cmFwYCBvcHRpb24gZGV0ZXJtaW5lcyB0aGUgc3RyYXRlZ3kgdXNlZCB0byBwdWxsIHRoZSB2aWV3IG1vZGVsIG9mIHRoZSBzZXJ2ZXItc2lkZSByZW5kZXJlZCB2aWV3IGludG8gdGhlIGNsaWVudC1zaWRlLiBUaGVyZSBhcmUgdGhyZWUgcG9zc2libGUgc3RyYXRlZ2llcyBhdmFpbGFibGU6IGBhdXRvYCBfKHRoZSBkZWZhdWx0IHN0cmF0ZWd5KV8sIGBpbmxpbmVgLCBvciBgbWFudWFsYC4gVGhlIGBhdXRvYCBzdHJhdGVneSBpbnZvbHZlcyB0aGUgbGVhc3Qgd29yaywgd2hpY2ggaXMgd2h5IGl0J3MgdGhlIGRlZmF1bHQuXFxuXFxuICAgIC0gYGF1dG9gIHdpbGwgbWFrZSBhbiBBSkFYIHJlcXVlc3QgZm9yIHRoZSB2aWV3IG1vZGVsXFxuICAgIC0gYGlubGluZWAgZXhwZWN0cyB5b3UgdG8gcGxhY2UgdGhlIG1vZGVsIGludG8gYSBgPHNjcmlwdCB0eXBlPSd0ZXh0L3RhdW51cyc+YCB0YWdcXG4gICAgLSBgbWFudWFsYCBleHBlY3RzIHlvdSB0byBnZXQgdGhlIHZpZXcgbW9kZWwgaG93ZXZlciB5b3Ugd2FudCB0bywgYW5kIHRoZW4gbGV0IFRhdW51cyBrbm93IHdoZW4gaXQncyByZWFkeVxcblxcbiAgICBMZXQncyBnbyBpbnRvIGRldGFpbCBhYm91dCBlYWNoIG9mIHRoZXNlIHN0cmF0ZWdpZXMuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMgVXNpbmcgdGhlIGBhdXRvYCBzdHJhdGVneVxcblxcbiAgICBUaGUgYGF1dG9gIHN0cmF0ZWd5IG1lYW5zIHRoYXQgVGF1bnVzIHdpbGwgbWFrZSB1c2Ugb2YgYW4gQUpBWCByZXF1ZXN0IHRvIG9idGFpbiB0aGUgdmlldyBtb2RlbC4gX1lvdSBkb24ndCBoYXZlIHRvIGRvIGFueXRoaW5nIGVsc2VfIGFuZCB0aGlzIGlzIHRoZSBkZWZhdWx0IHN0cmF0ZWd5LiBUaGlzIGlzIHRoZSAqKm1vc3QgY29udmVuaWVudCBzdHJhdGVneSwgYnV0IGFsc28gdGhlIHNsb3dlc3QqKiBvbmUuXFxuXFxuICAgIEl0J3Mgc2xvdyBiZWNhdXNlIHRoZSB2aWV3IG1vZGVsIHdvbid0IGJlIHJlcXVlc3RlZCB1bnRpbCB0aGUgYnVsayBvZiB5b3VyIEphdmFTY3JpcHQgY29kZSBoYXMgYmVlbiBkb3dubG9hZGVkLCBwYXJzZWQsIGV4ZWN1dGVkLCBhbmQgYHRhdW51cy5tb3VudGAgaXMgaW52b2tlZC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyBVc2luZyB0aGUgYGlubGluZWAgc3RyYXRlZ3lcXG5cXG4gICAgVGhlIGBpbmxpbmVgIHN0cmF0ZWd5IGV4cGVjdHMgeW91IHRvIGFkZCBhIGBkYXRhLXRhdW51c2AgYXR0cmlidXRlIG9uIHRoZSBgY29udGFpbmVyYCBlbGVtZW50LiBUaGlzIGF0dHJpYnV0ZSBtdXN0IGJlIGVxdWFsIHRvIHRoZSBgaWRgIGF0dHJpYnV0ZSBvZiBhIGA8c2NyaXB0PmAgdGFnIGNvbnRhaW5pbmcgdGhlIHNlcmlhbGl6ZWQgdmlldyBtb2RlbCBhbG9uZ3NpZGUgdGhlIHZlcnNpb24gaW5mb3JtYXRpb24gYXV0b21hdGljYWxseSBpbmplY3RlZCBieSBUYXVudXMgaW50byB0aGUgbGF5b3V0IHRlbXBsYXRlIGRhdGEuXFxuXFxuICAgIGBgYGphZGVcXG4gICAgZGl2KGRhdGEtdGF1bnVzPSdtb2RlbCcpIT1wYXJ0aWFsXFxuICAgIHNjcmlwdCNtb2RlbCh0eXBlPSd0ZXh0L3RhdW51cycpPUpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogdmVyc2lvbiwgbW9kZWw6IG1vZGVsIH0pXFxuICAgIGBgYFxcblxcbiAgICBQYXkgc3BlY2lhbCBhdHRlbnRpb24gdG8gdGhlIGZhY3QgdGhhdCB0aGUgbW9kZWwgaXMgbm90IG9ubHkgbWFkZSBpbnRvIGEgSlNPTiBzdHJpbmcsIF9idXQgYWxzbyBIVE1MIGVuY29kZWQgYnkgSmFkZV8uIFdoZW4gVGF1bnVzIGV4dHJhY3RzIHRoZSBtb2RlbCBmcm9tIHRoZSBgPHNjcmlwdD5gIHRhZyBpdCdsbCB1bmVzY2FwZSBpdCwgYW5kIHRoZW4gcGFyc2UgaXQgYXMgSlNPTi5cXG5cXG4gICAgVGhpcyBzdHJhdGVneSBpcyBhbHNvIGZhaXJseSBjb252ZW5pZW50IHRvIHNldCB1cCwgYnV0IGl0IGludm9sdmVzIGEgbGl0dGxlIG1vcmUgd29yay4gSXQgbWlnaHQgYmUgd29ydGh3aGlsZSB0byB1c2UgaW4gY2FzZXMgd2hlcmUgbW9kZWxzIGFyZSBzbWFsbCwgYnV0IGl0IHdpbGwgc2xvdyBkb3duIHNlcnZlci1zaWRlIHZpZXcgcmVuZGVyaW5nLCBhcyB0aGUgbW9kZWwgaXMgaW5saW5lZCBhbG9uZ3NpZGUgdGhlIEhUTUwuXFxuXFxuICAgIFRoYXQgbWVhbnMgdGhhdCB0aGUgY29udGVudCB5b3UgYXJlIHN1cHBvc2VkIHRvIGJlIHByaW9yaXRpemluZyBpcyBnb2luZyB0byB0YWtlIGxvbmdlciB0byBnZXQgdG8geW91ciBodW1hbnMsIGJ1dCBvbmNlIHRoZXkgZ2V0IHRoZSBIVE1MLCB0aGlzIHN0cmF0ZWd5IHdpbGwgZXhlY3V0ZSB0aGUgY2xpZW50LXNpZGUgY29udHJvbGxlciBhbG1vc3QgaW1tZWRpYXRlbHkuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMgVXNpbmcgdGhlIGBtYW51YWxgIHN0cmF0ZWd5XFxuXFxuICAgIFRoZSBgbWFudWFsYCBzdHJhdGVneSBpcyB0aGUgbW9zdCBpbnZvbHZlZCBvZiB0aGUgdGhyZWUsIGJ1dCBhbHNvIHRoZSBtb3N0IHBlcmZvcm1hbnQuIEluIHRoaXMgc3RyYXRlZ3kgeW91J3JlIHN1cHBvc2VkIHRvIGFkZCB0aGUgZm9sbG93aW5nIF8oc2VlbWluZ2x5IHBvaW50bGVzcylfIHNuaXBwZXQgb2YgY29kZSBpbiBhIGA8c2NyaXB0PmAgb3RoZXIgdGhhbiB0aGUgb25lIHRoYXQncyBwdWxsaW5nIGRvd24gVGF1bnVzLCBzbyB0aGF0IHRoZXkgYXJlIHB1bGxlZCBjb25jdXJyZW50bHkgcmF0aGVyIHRoYW4gc2VyaWFsbHkuXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgd2luZG93LnRhdW51c1JlYWR5ID0gZnVuY3Rpb24gKG1vZGVsKSB7XFxuICAgICAgd2luZG93LnRhdW51c1JlYWR5ID0gbW9kZWw7XFxuICAgIH07XFxuICAgIGBgYFxcblxcbiAgICBPbmNlIHlvdSBzb21laG93IGdldCB5b3VyIGhhbmRzIG9uIHRoZSB2aWV3IG1vZGVsLCB5b3Ugc2hvdWxkIGludm9rZSBgdGF1bnVzUmVhZHkobW9kZWwpYC4gQ29uc2lkZXJpbmcgeW91J2xsIGJlIHB1bGxpbmcgYm90aCB0aGUgdmlldyBtb2RlbCBhbmQgVGF1bnVzIGF0IHRoZSBzYW1lIHRpbWUsIGEgbnVtYmVyIG9mIGRpZmZlcmVudCBzY2VuYXJpb3MgbWF5IHBsYXkgb3V0LlxcblxcbiAgICAtIFRoZSB2aWV3IG1vZGVsIGlzIGxvYWRlZCBmaXJzdCwgeW91IGNhbGwgYHRhdW51c1JlYWR5KG1vZGVsKWAgYW5kIHdhaXQgZm9yIFRhdW51cyB0byB0YWtlIHRoZSBtb2RlbCBvYmplY3QgYW5kIGJvb3QgdGhlIGFwcGxpY2F0aW9uIGFzIHNvb24gYXMgYHRhdW51cy5tb3VudGAgaXMgZXhlY3V0ZWRcXG4gICAgLSBUYXVudXMgbG9hZHMgZmlyc3QgYW5kIGB0YXVudXMubW91bnRgIGlzIGNhbGxlZCBmaXJzdC4gSW4gdGhpcyBjYXNlLCBUYXVudXMgd2lsbCByZXBsYWNlIGB3aW5kb3cudGF1bnVzUmVhZHlgIHdpdGggYSBzcGVjaWFsIGBib290YCBtZXRob2QuIFdoZW4gdGhlIHZpZXcgbW9kZWwgZmluaXNoZXMgbG9hZGluZywgeW91IGNhbGwgYHRhdW51c1JlYWR5KG1vZGVsKWAgYW5kIHRoZSBhcHBsaWNhdGlvbiBmaW5pc2hlcyBib290aW5nXFxuXFxuICAgID4gSWYgdGhpcyBzb3VuZHMgYSBsaXR0bGUgbWluZC1iZW5kaW5nIGl0J3MgYmVjYXVzZSBpdCBpcy4gSXQncyBub3QgZGVzaWduZWQgdG8gYmUgcHJldHR5LCBidXQgbWVyZWx5IHRvIGJlIHBlcmZvcm1hbnQuXFxuXFxuICAgIE5vdyB0aGF0IHdlJ3ZlIGFkZHJlc3NlZCB0aGUgYXdrd2FyZCBiaXRzLCBsZXQncyBjb3ZlciB0aGUgX1xcXCJzb21laG93IGdldCB5b3VyIGhhbmRzIG9uIHRoZSB2aWV3IG1vZGVsXFxcIl8gYXNwZWN0LiBNeSBwcmVmZXJyZWQgbWV0aG9kIGlzIHVzaW5nIEpTT05QLCBhcyBpdCdzIGFibGUgdG8gZGVsaXZlciB0aGUgc21hbGxlc3Qgc25pcHBldCBwb3NzaWJsZSwgYW5kIGl0IGNhbiB0YWtlIGFkdmFudGFnZSBvZiBzZXJ2ZXItc2lkZSBjYWNoaW5nLiBDb25zaWRlcmluZyB5b3UnbGwgcHJvYmFibHkgd2FudCB0aGlzIHRvIGJlIGFuIGlubGluZSBzY3JpcHQsIGtlZXBpbmcgaXQgc21hbGwgaXMgaW1wb3J0YW50LlxcblxcbiAgICBUaGUgZ29vZCBuZXdzIGlzIHRoYXQgdGhlIHNlcnZlci1zaWRlIHN1cHBvcnRzIEpTT05QIG91dCB0aGUgYm94LiBIZXJlJ3MgYSBzbmlwcGV0IG9mIGNvZGUgeW91IGNvdWxkIHVzZSB0byBwdWxsIGRvd24gdGhlIHZpZXcgbW9kZWwgYW5kIGJvb3QgVGF1bnVzIHVwIGFzIHNvb24gYXMgYm90aCBvcGVyYXRpb25zIGFyZSByZWFkeS5cXG5cXG4gICAgYGBganNcXG4gICAgJ3VzZSBzdHJpY3QnO1xcblxcbiAgICBmdW5jdGlvbiBpbmplY3QgKHVybCkge1xcbiAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcXG4gICAgICBzY3JpcHQuc3JjID0gdXJsO1xcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiBpbmplY3RvciAoKSB7XFxuICAgICAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uLnNlYXJjaDtcXG4gICAgICB2YXIgc2VhcmNoUXVlcnkgPSBzZWFyY2ggPyAnJicgKyBzZWFyY2guc3Vic3RyKDEpIDogJyc7XFxuICAgICAgdmFyIHNlYXJjaEpzb24gPSAnP2pzb24mY2FsbGJhY2s9dGF1bnVzUmVhZHknICsgc2VhcmNoUXVlcnk7XFxuICAgICAgaW5qZWN0KGxvY2F0aW9uLnBhdGhuYW1lICsgc2VhcmNoSnNvbik7XFxuICAgIH1cXG5cXG4gICAgd2luZG93LnRhdW51c1JlYWR5ID0gZnVuY3Rpb24gKG1vZGVsKSB7XFxuICAgICAgd2luZG93LnRhdW51c1JlYWR5ID0gbW9kZWw7XFxuICAgIH07XFxuXFxuICAgIGluamVjdG9yKCk7XFxuICAgIGBgYFxcblxcbiAgICBBcyBtZW50aW9uZWQgZWFybGllciwgdGhpcyBhcHByb2FjaCBpbnZvbHZlcyBnZXR0aW5nIHlvdXIgaGFuZHMgZGlydGllciBidXQgaXQgcGF5cyBvZmYgYnkgYmVpbmcgdGhlIGZhc3Rlc3Qgb2YgdGhlIHRocmVlLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIENhY2hpbmdcXG5cXG4gICAgVGhlIGNsaWVudC1zaWRlIGluIFRhdW51cyBzdXBwb3J0cyBjYWNoaW5nIGluLW1lbW9yeSBhbmQgdXNpbmcgdGhlIGVtYmVkZGVkIEluZGV4ZWREQiBzeXN0ZW0gYnkgbWVyZWx5IHR1cm5pbmcgb24gdGhlIGBjYWNoZWAgZmxhZyBpbiB0aGUgb3B0aW9ucyBwYXNzZWQgdG8gYHRhdW51cy5tb3VudGAgb24gdGhlIGNsaWVudC1zaWRlLlxcblxcbiAgICBJZiB5b3Ugc2V0IGBjYWNoZWAgdG8gYHRydWVgIHRoZW4gY2FjaGVkIGl0ZW1zIHdpbGwgYmUgY29uc2lkZXJlZCBfXFxcImZyZXNoXFxcIiAodmFsaWQgY29waWVzIG9mIHRoZSBvcmlnaW5hbClfIGZvciAqKjE1IHNlY29uZHMqKi4gWW91IGNhbiBhbHNvIHNldCBgY2FjaGVgIHRvIGEgbnVtYmVyLCBhbmQgdGhhdCBudW1iZXIgb2Ygc2Vjb25kcyB3aWxsIGJlIHVzZWQgYXMgdGhlIGRlZmF1bHQgaW5zdGVhZC5cXG5cXG4gICAgQ2FjaGluZyBjYW4gYWxzbyBiZSB0d2Vha2VkIG9uIGluZGl2aWR1YWwgcm91dGVzLiBGb3IgaW5zdGFuY2UsIHlvdSBjb3VsZCBzZXQgYHsgY2FjaGU6IHRydWUgfWAgd2hlbiBtb3VudGluZyBUYXVudXMgYW5kIHRoZW4gaGF2ZSBgeyBjYWNoZTogMzYwMCB9YCBvbiBhIHJvdXRlIHRoYXQgeW91IHdhbnQgdG8gY2FjaGUgZm9yIGEgbG9uZ2VyIHBlcmlvZCBvZiB0aW1lLlxcblxcbiAgICBUaGUgY2FjaGluZyBsYXllciBpcyBfc2VhbWxlc3NseSBpbnRlZ3JhdGVkXyBpbnRvIFRhdW51cywgbWVhbmluZyB0aGF0IGFueSB2aWV3cyByZW5kZXJlZCBieSBUYXVudXMgd2lsbCBiZSBjYWNoZWQgYWNjb3JkaW5nIHRvIHRoZXNlIGNhY2hpbmcgcnVsZXMuIEtlZXAgaW4gbWluZCwgaG93ZXZlciwgdGhhdCBwZXJzaXN0ZW5jZSBhdCB0aGUgY2xpZW50LXNpZGUgY2FjaGluZyBsYXllciB3aWxsIG9ubHkgYmUgcG9zc2libGUgaW4gW2Jyb3dzZXJzIHRoYXQgc3VwcG9ydCBJbmRleGVkREJdWzE0XS4gSW4gdGhlIGNhc2Ugb2YgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IEluZGV4ZWREQiwgVGF1bnVzIHdpbGwgdXNlIGFuIGluLW1lbW9yeSBjYWNoZSwgd2hpY2ggd2lsbCBiZSB3aXBlZCBvdXQgd2hlbmV2ZXIgdGhlIGh1bWFuIGRlY2lkZXMgdG8gY2xvc2UgdGhlIHRhYiBpbiB0aGVpciBicm93c2VyLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIFByZWZldGNoaW5nXFxuXFxuICAgIElmIGNhY2hpbmcgaXMgZW5hYmxlZCwgdGhlIG5leHQgbG9naWNhbCBzdGVwIGlzIHByZWZldGNoaW5nLiBUaGlzIGlzIGVuYWJsZWQganVzdCBieSBhZGRpbmcgYHByZWZldGNoOiB0cnVlYCB0byB0aGUgb3B0aW9ucyBwYXNzZWQgdG8gYHRhdW51cy5tb3VudGAuIFRoZSBwcmVmZXRjaGluZyBmZWF0dXJlIHdpbGwgZmlyZSBmb3IgYW55IGFuY2hvciBsaW5rIHRoYXQncyB0cmlwcyBvdmVyIGEgYG1vdXNlb3ZlcmAgb3IgYSBgdG91Y2hzdGFydGAgZXZlbnQuIElmIGEgcm91dGUgbWF0Y2hlcyB0aGUgVVJMIGluIHRoZSBgaHJlZmAsIGFuIEFKQVggcmVxdWVzdCB3aWxsIHByZWZldGNoIHRoZSB2aWV3IGFuZCBjYWNoZSBpdHMgY29udGVudHMsIGltcHJvdmluZyBwZXJjZWl2ZWQgcGVyZm9ybWFuY2UuXFxuXFxuICAgIFdoZW4gbGlua3MgYXJlIGNsaWNrZWQgYmVmb3JlIHByZWZldGNoaW5nIGZpbmlzaGVzLCB0aGV5J2xsIHdhaXQgb24gdGhlIHByZWZldGNoZXIgdG8gZmluaXNoIGJlZm9yZSBpbW1lZGlhdGVseSBzd2l0Y2hpbmcgdG8gdGhlIHZpZXcsIGVmZmVjdGl2ZWx5IGN1dHRpbmcgZG93biB0aGUgcmVzcG9uc2UgdGltZS4gSWYgdGhlIGxpbmsgd2FzIGFscmVhZHkgcHJlZmV0Y2hlZCBvciBvdGhlcndpc2UgY2FjaGVkLCB0aGUgdmlldyB3aWxsIGJlIGxvYWRlZCBpbW1lZGlhdGVseS4gSWYgdGhlIGh1bWFuIGhvdmVycyBvdmVyIGEgbGluayBhbmQgYW5vdGhlciBvbmUgd2FzIGFscmVhZHkgYmVpbmcgcHJlZmV0Y2hlZCwgdGhlbiB0aGF0IG9uZSBpcyBhYm9ydGVkLiBUaGlzIHByZXZlbnRzIHByZWZldGNoaW5nIGZyb20gZHJhaW5pbmcgdGhlIGJhbmR3aWR0aCBvbiBjbGllbnRzIHdpdGggbGltaXRlZCBvciBpbnRlcm1pdHRlbnQgY29ubmVjdGl2aXR5LlxcblxcbiAgICAjIyMjIFZlcnNpb25pbmdcXG5cXG4gICAgV2hlbiBlbmFibGVkLCB2ZXJzaW9uaW5nIHdpbGwgbG9vayBvdXQgZm9yIGRpc2NyZXBhbmNpZXMgYmV0d2VlbiB3aGF0J3MgY3VycmVudGx5IG9uIHRoZSBjbGllbnQgYW5kIHdoYXQncyBvbiB0aGUgc2VydmVyLCBhbmQgcmVsb2FkIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IHRvIG1ha2Ugd2hhdCdzIG9uIHRoZSBjbGllbnQgbWF0Y2ggd2hhdCdzIG9uIHRoZSBzZXJ2ZXIuXFxuXFxuICAgIEluIG9yZGVyIHRvIHR1cm4gaXQgb24sIHNldCB0aGUgYHZlcnNpb25gIGZpZWxkIGluIHRoZSBvcHRpb25zIHdoZW4gaW52b2tpbmcgYHRhdW51cy5tb3VudGAgKipvbiBib3RoIHRoZSBzZXJ2ZXItc2lkZSBhbmQgdGhlIGNsaWVudC1zaWRlLCB1c2luZyB0aGUgc2FtZSB2YWx1ZSoqLiBUaGUgVGF1bnVzIHZlcnNpb24gc3RyaW5nIHdpbGwgYmUgYWRkZWQgdG8gdGhlIG9uZSB5b3UgcHJvdmlkZWQsIHNvIHRoYXQgVGF1bnVzIHdpbGwga25vdyB0byBzdGF5IGFsZXJ0IGZvciBjaGFuZ2VzIHRvIFRhdW51cyBpdHNlbGYsIGFzIHdlbGwuXFxuXFxuICAgID4gVG8gbWFrZSBzdXJlIHlvdSBkb24ndCBmb3JnZXQgdG8gY2hhbmdlIHRoZSB2ZXJzaW9uIHN0cmluZyBpbiBvbmUgb2YgdGhlIG1vdW50cG9pbnRzLCBwbGVhc2UgY3JlYXRlIGEgSlNPTiBmaWxlIHdpdGgganVzdCB0aGUgdmVyc2lvbiBzdHJpbmcgYW5kIGByZXF1aXJlYCB0aGF0IGZpbGUgaW4gYm90aCBzaWRlcy5cXG4gICAgPlxcbiAgICA+IGBgYHNoZWxsXFxuICAgID4gZWNobyAnXFxcIjEuMC4wXFxcIicgPiB2ZXJzaW9uLmpzb25cXG4gICAgPiBgYGBcXG5cXG4gICAgVGhlIGRlZmF1bHQgdmVyc2lvbiBzdHJpbmcgaXMgc2V0IHRvIGAxYC4gVGhlIFRhdW51cyB2ZXJzaW9uIHdpbGwgYmUgcHJlcGVuZGVkIHRvIHlvdXJzLCByZXN1bHRpbmcgaW4gYSB2YWx1ZSBzdWNoIGFzIGB0My4wLjA7djFgIHdoZXJlIFRhdW51cyBpcyBydW5uaW5nIHZlcnNpb24gYDMuMC4wYCBhbmQgeW91ciBhcHBsaWNhdGlvbiBpcyBydW5uaW5nIHZlcnNpb24gYDFgLlxcblxcbiAgICBSZWZlciB0byB0aGUgR2V0dGluZyBTdGFydGVkIGd1aWRlIGZvciBhIG1vcmUgZGV0YWlsZWQgW2FuYWx5c2lzIG9mIHRoZSB1c2VzIGZvciB2ZXJzaW9uaW5nXVsxNV0uIFRoZXJlJ3Mgc29tZSBtb3JlIG51Z2dldHMgb2YgaW5mb3JtYXRpb24gaW4gdGhlIFtQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25dWzE4XSBndWlkZSBhcyB3ZWxsLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLm9uKHR5cGUsIGZuKWBcXG5cXG4gICAgVGF1bnVzIGVtaXRzIGEgc2VyaWVzIG9mIGV2ZW50cyBkdXJpbmcgaXRzIGxpZmVjeWNsZSwgYW5kIGB0YXVudXMub25gIGlzIHRoZSB3YXkgeW91IGNhbiB0dW5lIGluIGFuZCBsaXN0ZW4gZm9yIHRoZXNlIGV2ZW50cyB1c2luZyBhIHN1YnNjcmlwdGlvbiBmdW5jdGlvbiBgZm5gLlxcblxcbiAgICBFdmVudCAgICAgICAgICAgIHwgQXJndW1lbnRzICAgICAgICAgICAgICAgICB8IERlc2NyaXB0aW9uXFxuICAgIC0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cXG4gICAgYCdzdGFydCdgICAgICAgICB8IGBjb250YWluZXIsIG1vZGVsLCByb3V0ZWAgfCBFbWl0dGVkIHdoZW4gYHRhdW51cy5tb3VudGAgZmluaXNoZWQgdGhlIHJvdXRlIHNldHVwIGFuZCBpcyBhYm91dCB0byBpbnZva2UgdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIuIFN1YnNjcmliZSB0byB0aGlzIGV2ZW50IGJlZm9yZSBjYWxsaW5nIGB0YXVudXMubW91bnRgLlxcbiAgICBgJ3JlbmRlcidgICAgICAgIHwgYGNvbnRhaW5lciwgbW9kZWwsIHJvdXRlYCB8IEEgdmlldyBoYXMganVzdCBiZWVuIHJlbmRlcmVkIGFuZCBpdHMgY2xpZW50LXNpZGUgY29udHJvbGxlciBpcyBhYm91dCB0byBiZSBpbnZva2VkXFxuICAgIGAnY2hhbmdlJ2AgICAgICAgfCBgcm91dGUsIG1vZGVsYCAgICAgICAgICAgIHwgU2FtZSBhcyBgJ3JlbmRlcidgLCBidXQgb25seSBpZiBgY29udGFpbmVyYCBpcyB0aGUgbW91bnRwb2ludCBhbmQgdGhlIHJvdXRlIGhhcyBjaGFuZ2VkLlxcbiAgICBgJ2ZldGNoLnN0YXJ0J2AgIHwgIGByb3V0ZSwgY29udGV4dGAgICAgICAgICB8IEVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3Qgc3RhcnRzLlxcbiAgICBgJ2ZldGNoLmRvbmUnYCAgIHwgIGByb3V0ZSwgY29udGV4dCwgZGF0YWAgICB8IEVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3QgZW5kcyBzdWNjZXNzZnVsbHkuXFxuICAgIGAnZmV0Y2guYWJvcnQnYCAgfCAgYHJvdXRlLCBjb250ZXh0YCAgICAgICAgIHwgRW1pdHRlZCB3aGVuZXZlciBhbiBYSFIgcmVxdWVzdCBpcyBwdXJwb3NlbHkgYWJvcnRlZC5cXG4gICAgYCdmZXRjaC5lcnJvcidgICB8ICBgcm91dGUsIGNvbnRleHQsIGVycmAgICAgfCBFbWl0dGVkIHdoZW5ldmVyIGFuIFhIUiByZXF1ZXN0IHJlc3VsdHMgaW4gYW4gSFRUUCBlcnJvci5cXG5cXG4gICAgQ29uc2lkZXIgZm9yIGluc3RhbmNlIHRoYXQgeW91J2QgbGlrZSB0byBrZWVwIHRyYWNrIG9mIGV2ZXJ5IHZpZXcgdGhhdCBnZXRzIHJlbmRlcmVkLCBhbmQgd2hhdCBET00gZWxlbWVudCBpdCBnZXRzIHBsYWNlZCBpbnRvLiBUaGUgcGllY2Ugb2YgY29kZSBiZWxvdyB3b3VsZCBxdWlja2x5IGRvIHRoYXQgZm9yIHVzLlxcblxcbiAgICBgYGBqc1xcbiAgICB0YXVudXMub24oJ3JlbmRlcicsIGZ1bmN0aW9uIChjb250YWluZXIpIHtcXG4gICAgICBjb25zb2xlLmxvZygnUmVuZGVyZWQgYSB2aWV3IG9uJywgY29udGFpbmVyKTtcXG4gICAgfSk7XFxuICAgIGBgYFxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLm9uY2UodHlwZSwgZm4pYFxcblxcbiAgICBUaGlzIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvIFtgdGF1bnVzLm9uYF0oIy10YXVudXMtb24tdHlwZS1mbi0pLCBleGNlcHQgdGhlIGV2ZW50IGxpc3RlbmVycyB3aWxsIGJlIHVzZWQgb25jZSBhbmQgdGhlbiBpdCdsbCBiZSBkaXNjYXJkZWQuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIGB0YXVudXMub2ZmKHR5cGUsIGZuKWBcXG5cXG4gICAgVXNpbmcgdGhpcyBtZXRob2QgeW91IGNhbiByZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZGRlZCB1c2luZyBgLm9uYCBvciBgLm9uY2VgLiBZb3UgbXVzdCBwcm92aWRlIHRoZSB0eXBlIG9mIGV2ZW50IHlvdSB3YW50IHRvIHJlbW92ZSBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHRoYXQgd2FzIG9yaWdpbmFsbHkgdXNlZCB3aGVuIGNhbGxpbmcgYC5vbmAgb3IgYC5vbmNlYC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYHRhdW51cy5pbnRlcmNlcHQoYWN0aW9uPywgZm4pYFxcblxcbiAgICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBhbnRpY2lwYXRlIG1vZGVsIHJlcXVlc3RzLCBiZWZvcmUgdGhleSBldmVyIG1ha2UgaXQgaW50byBYSFIgcmVxdWVzdHMuIFlvdSBjYW4gYWRkIGludGVyY2VwdG9ycyBmb3Igc3BlY2lmaWMgYWN0aW9ucywgd2hpY2ggd291bGQgYmUgdHJpZ2dlcmVkIG9ubHkgaWYgdGhlIHJlcXVlc3QgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGBhY3Rpb25gLiBZb3UgY2FuIGFsc28gYWRkIGdsb2JhbCBpbnRlcmNlcHRvcnMgYnkgb21pdHRpbmcgdGhlIGBhY3Rpb25gIHBhcmFtZXRlciwgb3Igc2V0dGluZyBpdCB0byBgKmAuXFxuXFxuICAgIEFuIGludGVyY2VwdG9yIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSBhbiBgZXZlbnRgIHBhcmFtZXRlciwgY29udGFpbmluZyBhIGZldyBkaWZmZXJlbnQgcHJvcGVydGllcy5cXG5cXG4gICAgLSBgdXJsYCBjb250YWlucyB0aGUgVVJMIHRoYXQgbmVlZHMgYSB2aWV3IG1vZGVsXFxuICAgIC0gYHJvdXRlYCBjb250YWlucyB0aGUgZnVsbCByb3V0ZSBvYmplY3QgYXMgeW91J2QgZ2V0IGZyb20gW2B0YXVudXMucm91dGUodXJsKWBdKCMtdGF1bnVzLXJvdXRlLXVybC0pXFxuICAgIC0gYHBhcnRzYCBpcyBqdXN0IGEgc2hvcnRjdXQgZm9yIGByb3V0ZS5wYXJ0c2BcXG4gICAgLSBgcHJldmVudERlZmF1bHQoZGF0YSlgIGFsbG93cyB5b3UgdG8gc3VwcHJlc3MgdGhlIG5lZWQgZm9yIGFuIEFKQVggcmVxdWVzdCwgY29tbWFuZGluZyBUYXVudXMgdG8gdXNlIHRoZSByZXNwb25zZSBkYXRhIHlvdSd2ZSBwcm92aWRlZCBpbnN0ZWFkXFxuICAgIC0gYGRlZmF1bHRQcmV2ZW50ZWRgIHRlbGxzIHlvdSBpZiBzb21lIG90aGVyIGhhbmRsZXIgaGFzIHByZXZlbnRlZCB0aGUgZGVmYXVsdCBiZWhhdmlvclxcbiAgICAtIGBjYW5QcmV2ZW50RGVmYXVsdGAgdGVsbHMgeW91IGlmIGludm9raW5nIGBldmVudC5wcmV2ZW50RGVmYXVsdGAgd2lsbCBoYXZlIGFueSBlZmZlY3RcXG4gICAgLSBgZGF0YWAgc3RhcnRzIGFzIGBudWxsYCwgYW5kIGl0IGNhbiBsYXRlciBiZWNvbWUgdGhlIGRhdGEgcGFzc2VkIHRvIGBwcmV2ZW50RGVmYXVsdGBcXG5cXG4gICAgSW50ZXJjZXB0b3JzIGFyZSBhc3luY2hyb25vdXMsIGJ1dCBpZiBhbiBpbnRlcmNlcHRvciBzcGVuZHMgbG9uZ2VyIHRoYW4gNTBtcyBpdCdsbCBiZSBzaG9ydC1jaXJjdWl0ZWQgYW5kIGNhbGxpbmcgYGV2ZW50LnByZXZlbnREZWZhdWx0YCBwYXN0IHRoYXQgcG9pbnQgd29uJ3QgaGF2ZSBhbnkgZWZmZWN0LlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLnBhcnRpYWwoY29udGFpbmVyLCBhY3Rpb24sIG1vZGVsKWBcXG5cXG4gICAgVGhpcyBtZXRob2QgcHJvdmlkZXMgeW91IHdpdGggYWNjZXNzIHRvIHRoZSB2aWV3LXJlbmRlcmluZyBlbmdpbmUgb2YgVGF1bnVzLiBZb3UgY2FuIHVzZSBpdCB0byByZW5kZXIgdGhlIGBhY3Rpb25gIHZpZXcgaW50byB0aGUgYGNvbnRhaW5lcmAgRE9NIGVsZW1lbnQsIHVzaW5nIHRoZSBzcGVjaWZpZWQgYG1vZGVsYC4gT25jZSB0aGUgdmlldyBpcyByZW5kZXJlZCwgdGhlIGByZW5kZXJgIGV2ZW50IHdpbGwgYmUgZmlyZWQgXyh3aXRoIGBjb250YWluZXIsIG1vZGVsYCBhcyBhcmd1bWVudHMpXyBhbmQgdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgZm9yIHRoYXQgdmlldyB3aWxsIGJlIGV4ZWN1dGVkLlxcblxcbiAgICBOb3RlIHRoYXQgdGhlIHBhcnRpYWwgbWF5IGJlIHJlbmRlcmVkIGFzeW5jaHJvbm91c2x5IGlmIHRoZSBgYWN0aW9uYCBpcyBbZGVmZXJyZWRdKCMtZGVmZXItYWN0aW9ucy0pIGFuZCBpdHMgY29tcG9uZW50cyAodmlldyB0ZW1wbGF0ZSwgY29udHJvbGxlcikgYXJlbid0IHJlYWRpbHkgYXZhaWxhYmxlIGluIHRoZSBjbGllbnQgeWV0LiBUaGlzIG1ldGhvZCByZXR1cm5zIGFuIGV2ZW50IGVtaXR0ZXIsIHdoaWNoIHlvdSBjYW4gdXNlIHRvIGd1YXJhbnRlZSB0aGF0IHlvdSBjb250aW51ZSBleGVjdGlvbiBhZnRlciB0aGUgcGFydGlhbCBoYXMgYmVlbiByZW5kZXJlZC5cXG5cXG4gICAgIyMjIyBFeGFtcGxlXFxuXFxuICAgIEdpdmVuIGEgZGVmZXJyZWQgYCd0YWdzJ2AgcGFydGlhbCB2aWV3IGxpa2UgdGhpcyBmdW5jdGlvbjpcXG5cXG4gICAgYGBganNcXG4gICAgZnVuY3Rpb24gKG1vZGVsKSB7XFxuICAgICAgcmV0dXJuIG1vZGVsLmxlbmd0aCA/ICc8dWw+PGxpPicgKyBtb2RlbC5qb2luKCc8L2xpPjxsaT4nKSArICc8L2xpPjwvdWw+JyA6ICc8dWw+PC91bD4nO1xcbiAgICB9XFxuICAgIGBgYFxcblxcbiAgICBZb3UgY291bGQgcmVuZGVyIHRoZSB2aWV3IGFuZCBjb250aW51ZSBleGVjdXRpb24gb25jZSB0aGUgdmlldyBoYXMgYmVlbiByZW5kZXJlZCBvbnRvIGEgYGRpdmAgYnkgbGlzdGVuaW5nIHRvIHRoZSBgJ3JlbmRlcidgIGV2ZW50IGF0IHRoZSB2aWV3IGxldmVsLlxcblxcbiAgICBgYGBqc1xcbiAgICB0YXVudXMucGFydGlhbChkaXYsICd0YWdzJywgWydhJywgJ2InXSkub24oJ3JlbmRlcicsIGZ1bmN0aW9uIChodG1sKSB7XFxuICAgICAgY29uc29sZS5sb2coJ0hlcmVcXFxcJ3MgdGhlIEhUTUwgdGhhdCB3YXMgcmVuZGVyZWQgb24gb3VyIGRpdlxcXFxuJyArIGh0bWwpO1xcbiAgICB9KTtcXG4gICAgYGBgXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIGB0YXVudXMubmF2aWdhdGUodXJsLCBvcHRpb25zKWBcXG5cXG4gICAgV2hlbmV2ZXIgeW91IHdhbnQgdG8gbmF2aWdhdGUgdG8gYSBVUkwsIHNheSB3aGVuIGFuIEFKQVggY2FsbCBmaW5pc2hlcyBhZnRlciBhIGJ1dHRvbiBjbGljaywgeW91IGNhbiB1c2UgYHRhdW51cy5uYXZpZ2F0ZWAgcGFzc2luZyBpdCBhIHBsYWluIFVSTCBvciBhbnl0aGluZyB0aGF0IHdvdWxkIGNhdXNlIGB0YXVudXMucm91dGUodXJsKWAgdG8gcmV0dXJuIGEgdmFsaWQgcm91dGUuXFxuXFxuICAgIEJ5IGRlZmF1bHQsIGlmIGB0YXVudXMubmF2aWdhdGUodXJsLCBvcHRpb25zKWAgaXMgY2FsbGVkIHdpdGggYW4gYHVybGAgdGhhdCBkb2Vzbid0IG1hdGNoIGFueSBjbGllbnQtc2lkZSByb3V0ZSwgdGhlbiB0aGUgdXNlciB3aWxsIGJlIHJlZGlyZWN0ZWQgdmlhIGBsb2NhdGlvbi5ocmVmYC4gSW4gY2FzZXMgd2hlcmUgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoZSBoaXN0b3J5IEFQSSwgYGxvY2F0aW9uLmhyZWZgIHdpbGwgYmUgdXNlZCBhcyB3ZWxsLlxcblxcbiAgICBUaGVyZSdzIGEgZmV3IG9wdGlvbnMgeW91IGNhbiB1c2UgdG8gdHdlYWsgdGhlIGJlaGF2aW9yIG9mIGB0YXVudXMubmF2aWdhdGVgLlxcblxcbiAgICBPcHRpb24gICAgICAgICAgIHwgRGVzY3JpcHRpb25cXG4gICAgLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcbiAgICBgY29udGV4dGAgICAgICAgIHwgQSBET00gZWxlbWVudCB0aGF0IGNhdXNlZCB0aGUgbmF2aWdhdGlvbiBldmVudCwgdXNlZCB3aGVuIGVtaXR0aW5nIGV2ZW50c1xcbiAgICBgc3RyaWN0YCAgICAgICAgIHwgSWYgc2V0IHRvIGB0cnVlYCBhbmQgdGhlIFVSTCBkb2Vzbid0IG1hdGNoIGFueSByb3V0ZSwgdGhlbiB0aGUgbmF2aWdhdGlvbiBhdHRlbXB0IG11c3QgYmUgaWdub3JlZFxcbiAgICBgc2Nyb2xsYCAgICAgICAgIHwgV2hlbiB0aGlzIGlzIHNldCB0byBgZmFsc2VgLCBlbGVtZW50cyBhcmVuJ3Qgc2Nyb2xsZWQgaW50byB2aWV3IGFmdGVyIG5hdmlnYXRpb25cXG4gICAgYGZvcmNlYCAgICAgICAgICB8IFVubGVzcyB0aGlzIGlzIHNldCB0byBgdHJ1ZWAsIG5hdmlnYXRpb24gd29uJ3QgX2ZldGNoIGEgbW9kZWxfIGlmIHRoZSByb3V0ZSBtYXRjaGVzIHRoZSBjdXJyZW50IHJvdXRlLCBhbmQgYHN0YXRlLm1vZGVsYCB3aWxsIGJlIHJldXNlZCBpbnN0ZWFkXFxuICAgIGByZXBsYWNlU3RhdGVgICAgfCBVc2UgYHJlcGxhY2VTdGF0ZWAgaW5zdGVhZCBvZiBgcHVzaFN0YXRlYCB3aGVuIGNoYW5naW5nIGhpc3RvcnlcXG5cXG4gICAgTm90ZSB0aGF0IHRoZSBub3Rpb24gb2YgX2ZldGNoaW5nIGEgbW9kZWxfIG1pZ2h0IGJlIGRlY2VpdmluZyBhcyB0aGUgbW9kZWwgY291bGQgYmUgcHVsbGVkIGZyb20gdGhlIGNhY2hlIGV2ZW4gaWYgYGZvcmNlYCBpcyBzZXQgdG8gYHRydWVgLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLnJvdXRlKHVybClgXFxuXFxuICAgIFRoaXMgY29udmVuaWVuY2UgbWV0aG9kIGFsbG93cyB5b3UgdG8gYnJlYWsgZG93biBhIFVSTCBpbnRvIGl0cyBpbmRpdmlkdWFsIGNvbXBvbmVudHMuIFRoZSBtZXRob2QgYWNjZXB0cyBhbnkgb2YgdGhlIGZvbGxvd2luZyBVUkwgcGF0dGVybnMsIGFuZCBpdCByZXR1cm5zIGEgVGF1bnVzIHJvdXRlIG9iamVjdC5cXG5cXG4gICAgLSBBIGZ1bGx5IHF1YWxpZmllZCBVUkwgb24gdGhlIHNhbWUgb3JpZ2luLCBlLmcgYGh0dHA6Ly90YXVudXMuaW8vYXBpYFxcbiAgICAtIEFuIGFic29sdXRlIFVSTCB3aXRob3V0IGFuIG9yaWdpbiwgZS5nIGAvYXBpYFxcbiAgICAtIEp1c3QgYSBoYXNoLCBlLmcgYCNmb29gIF8oYGxvY2F0aW9uLmhyZWZgIGlzIHVzZWQpX1xcbiAgICAtIEZhbHN5IHZhbHVlcywgZS5nIGBudWxsYCBfKGBsb2NhdGlvbi5ocmVmYCBpcyB1c2VkKV9cXG5cXG4gICAgUmVsYXRpdmUgVVJMcyBhcmUgbm90IHN1cHBvcnRlZCBfKGFueXRoaW5nIHRoYXQgZG9lc24ndCBoYXZlIGEgbGVhZGluZyBzbGFzaClfLCBlLmcgYGZpbGVzL2RhdGEuanNvbmAuIEFueXRoaW5nIHRoYXQncyBub3Qgb24gdGhlIHNhbWUgb3JpZ2luIG9yIGRvZXNuJ3QgbWF0Y2ggb25lIG9mIHRoZSByZWdpc3RlcmVkIHJvdXRlcyBpcyBnb2luZyB0byB5aWVsZCBgbnVsbGAuXFxuXFxuICAgIF9UaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIHdoZW4gZGVidWdnaW5nIHlvdXIgcm91dGluZyB0YWJsZXMsIGFzIGl0IGdpdmVzIHlvdSBkaXJlY3QgYWNjZXNzIHRvIHRoZSByb3V0ZXIgdXNlZCBpbnRlcm5hbGx5IGJ5IFRhdW51cy5fXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMgYHRhdW51cy5yb3V0ZS5lcXVhbHMocm91dGUsIHJvdXRlKWBcXG5cXG4gICAgQ29tcGFyZXMgdHdvIHJvdXRlcyBhbmQgcmV0dXJucyBgdHJ1ZWAgaWYgdGhleSB3b3VsZCBmZXRjaCB0aGUgc2FtZSBtb2RlbC4gTm90ZSB0aGF0IGRpZmZlcmVudCBVUkxzIG1heSBzdGlsbCByZXR1cm4gYHRydWVgLiBGb3IgaW5zdGFuY2UsIGAvZm9vYCBhbmQgYC9mb28jYmFyYCB3b3VsZCBmZXRjaCB0aGUgc2FtZSBtb2RlbCBldmVuIGlmIHRoZXkncmUgZGlmZmVyZW50IFVSTHMuIFRoYXQncyBiZWNhdXNlIHRoZSBoYXNoIHBvcnRpb24gb2YgYW4gVVJMIGlzIG5ldmVyIHNlbnQgdG8gdGhlIHNlcnZlci5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYHRhdW51cy5yZWRpcmVjdChvcHRpb25zKWBcXG5cXG4gICAgUmVkaXJlY3RzIHRoZSB1c2VyIHRvIGEgZGlmZmVyZW50IFVSTC4gSWYgYGhhcmRgIGlzIHNldCB0byBgdHJ1ZWAsIHRoZW4gdGhpcyBtZXRob2QgaXMgZWZmZWN0aXZlbHkgdGhlIHNhbWUgYXMgZG9pbmcgYGxvY2F0aW9uLmhyZWYgPSBvcHRpb25zLmhyZWZgLiBJZiBgaGFyZGAgaXMgYGZhbHNlYCwgW3RhdW51cy5uYXZpZ2F0ZV0oIy10YXVudXMtbmF2aWdhdGUtdXJsLW9wdGlvbnMtKSB3aWxsIGJlIHVzZWQuXFxuXFxuICAgICMjIyMjIyBFeGFtcGxlXFxuXFxuICAgIGBgYGpzXFxuICAgIHRhdW51cy5yZWRpcmVjdCh7IGhyZWY6ICcvZm9vJywgaGFyZDogdHJ1ZSB9KTtcXG4gICAgYGBgXFxuXFxuICAgIFdoZW4gdGhlIGBmb3JjZWAgb3B0aW9uIGlzIHNldCB0byBgdHJ1ZWAsIHJlZGlyZWN0cyB3aWxsIGJlIGNhcnJpZWQgb3V0IGV2ZW4gaWYgdGhlIHRhcmdldCBVUkwgaXMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgYGxvY2F0aW9uYC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMgYHRhdW51cy5yZXNvbHZlYCBvbiB0aGUgY2xpZW50XFxuXFxuICAgIFRoaXMgbWV0aG9kIGlzIGlkZW50aWNhbCB0byB0aGUgc2VydmVyLXNpZGUgZmxhdm9yIG9mIFtgdGF1bnVzLnJlc29sdmUoYWN0aW9uLCBkYXRhKWBdKCMtdGF1bnVzLXJlc29sdmUtYWN0aW9uLWRhdGEtKSwgYnV0IGF2YWlsYWJsZSBvbiB0aGUgY2xpZW50LXNpZGUuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIGB0YXVudXMuc3RhdGVgXFxuXFxuICAgIFRoaXMgaXMgYW4gaW50ZXJuYWwgc3RhdGUgdmFyaWFibGUsIGFuZCBpdCBjb250YWlucyBhIGxvdCBvZiB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uLlxcblxcbiAgICAtIGBjb250YWluZXJgIGlzIHRoZSBET00gZWxlbWVudCBwYXNzZWQgdG8gYHRhdW51cy5tb3VudGBcXG4gICAgLSBgY29udHJvbGxlcnNgIGFyZSBhbGwgdGhlIGNvbnRyb2xsZXJzLCBhcyBkZWZpbmVkIGluIHRoZSB3aXJpbmcgbW9kdWxlXFxuICAgIC0gYHRlbXBsYXRlc2AgYXJlIGFsbCB0aGUgdGVtcGxhdGVzLCBhcyBkZWZpbmVkIGluIHRoZSB3aXJpbmcgbW9kdWxlXFxuICAgIC0gYHJvdXRlc2AgYXJlIGFsbCB0aGUgcm91dGVzLCBhcyBkZWZpbmVkIGluIHRoZSB3aXJpbmcgbW9kdWxlXFxuICAgIC0gYHJvdXRlYCBpcyBhIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCByb3V0ZVxcbiAgICAtIGBtb2RlbGAgaXMgYSByZWZlcmVuY2UgdG8gdGhlIG1vZGVsIHVzZWQgdG8gcmVuZGVyIHRoZSBjdXJyZW50IHZpZXdcXG4gICAgLSBgcHJlZmV0Y2hgIGV4cG9zZXMgd2hldGhlciBwcmVmZXRjaGluZyBpcyB0dXJuZWQgb25cXG4gICAgLSBgY2FjaGVgIGV4cG9zZXMgd2hldGhlciBjYWNoaW5nIGlzIGVuYWJsZWRcXG4gICAgLSBgdmVyc2lvbmAgZXhwb3NlcyB0aGUgdmVyc2lvbiBzdHJpbmcgdGhhdCdzIGN1cnJlbnRseSBpbiB1c2VcXG5cXG4gICAgVGhlcmUncyBhbHNvIGEgYGNsZWFyYCBtZXRob2QgYWNjZXNzaWJsZSB0aHJvdWdoIGB0YXVudXMuc3RhdGUuY2xlYXJgLCB3aGljaCB3aWxsIGVtcHR5IHRoZSBjYWNoZSwgYXMgd2VsbCBhcyByZW1vdmUgZnJvbSB0aGUgYHN0YXRlYCBhbnkgY29udHJvbGxlcnMgYW5kIHRlbXBsYXRlcyB0aGF0IHdlcmUgbGF6eSBsb2FkZWQuXFxuXFxuICAgIE9mIGNvdXJzZSwgeW91J3JlIG5vdCBzdXBwb3NlZCB0byBtZWRkbGUgd2l0aCBpdCwgc28gYmUgYSBnb29kIGNpdGl6ZW4gYW5kIGp1c3QgaW5zcGVjdCBpdHMgdmFsdWVzIVxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyBgdGF1bnVzLnhocih1cmwsIG9wdGlvbnM/LCBkb25lKWBcXG5cXG4gICAgVGhpcyBtZXRob2QgYWxsb3dzIHlvdSB0byBpc3N1ZSB5b3VyIG93biBBSkFYIHJlcXVlc3RzIHRocm91Z2ggdGhlIGB4aHJgIG1vZHVsZS4gSXQgc2V0cyBhIGZldyBjb252ZW5pZW50IGRlZmF1bHRzLCBfbGlzdGVkIGJlbG93Xywgd2hlcmUgYHVybGAgcmVmZXJzIHRvIHRoZSBVUkwgcGFzc2VkIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIuXFxuXFxuICAgIGBgYGpzXFxuICAgIHtcXG4gICAgICB1cmw6IHVybCxcXG4gICAgICBqc29uOiB0cnVlLFxcbiAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfVxcbiAgICB9XFxuICAgIGBgYFxcblxcbiAgICBUaGUgYGRvbmUoZXJyLCBib2R5LCByZXMpYCBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgcmVxdWVzdCBmaW5pc2hlcywgYW5kIGl0J2xsIGJlIHBhc3NlZCB0aHJlZSBwYXJhbWV0ZXJzLCBhbiBvcHRpb25hbCBlcnJvciBpZiBzb21ldGhpbmcgd2VudCB3cm9uZyBfKHJlcXVlc3QgZmFpbGVkLCB3YXMgYWJvcnRlZCwgZXRjLilfIGFuZCBhIGBib2R5YCBwYXJhbWV0ZXIgY29udGFpbmluZyB0aGUgcmVzcG9uc2UgYm9keS4gVGhlIHJhdyBgcmVzYCBvYmplY3QgdGhhdCdzIHR5cGljYWxseSBwcm92aWRlZCBieSBbYHhocmBdWzE2XSBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyBwcm92aWRlZCBhcyB0aGUgdGhpcmQgcGFyYW1ldGVyIGluc3RlYWQuXFxuXFxuICAgIEFzIGFuIGV4YW1wbGUsIGhlcmUgaXMgYSBgR0VUYCByZXF1ZXN0LlxcblxcbiAgICBgYGBqc1xcbiAgICB0YXVudXMueGhyKCcvYXBpL3BsYWNlcycsIGZ1bmN0aW9uIChlcnIsIGJvZHkpIHtcXG4gICAgICBjb25zb2xlLmxvZyhib2R5KTtcXG4gICAgICAvLyA8LSB7IHBsYWNlczogWyd1bmRlcndhdGVyIGZvcnRyZXNzJywgJ2lzbGFuZCBtYW5zaW9uJ10gfVxcbiAgICB9KTtcXG4gICAgYGBgXFxuXFxuICAgIEFsd2F5cyByZW1lbWJlciB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgYGVycmAgaXMgc2V0IVxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIFVzaW5nIGB0YXVudXMucHJlZmV0Y2godXJsLCBlbGVtZW50KWBcXG5cXG4gICAgVGhlIHByZWZldGNoZXIgQVBJIGFsbG93cyB5b3UgdG8gc3RhcnQgZmV0Y2hpbmcgYW4gYHVybGAsIHByb3ZpZGVkIHRoYXQgaXQgbWF0Y2hlcyBhIGtub3duIFRhdW51cyB2aWV3IHJvdXRlIGFuZCB0aGF0IFt0aGUgY2FjaGVdKCNjYWNoaW5nKSBpcyBlbmFibGVkLiBUaGUgYGVsZW1lbnRgIGlzIHVzZWQgbW9zdGx5IGFzIGNvbnRleHQgZHVyaW5nIGV2ZW50IGVtaXNzaW9uLCBhbmQgaXQgY2FuIGJlIHVzZWZ1bCBmb3IgZGVidWdnaW5nIGFzIHdlbGwuXFxuXFxuICAgIFVzZSBjYXNlcyBmb3IgcHJlZmV0Y2hpbmcgYXJlIGZ1cnRoZXIgZGlzY3Vzc2VkIGluIHRoZSBbUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXVsxOV0gZ3VpZGUuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIERlYnVnZ2luZyBUYXVudXNcXG5cXG4gICAgT24gdGhlIGNsaWVudC1zaWRlLCB5b3Ugd2lsbCB0eXBpY2FsbHkgYHJlcXVpcmVgIFRhdW51cyB1c2luZyB0aGUgc3RhdGVtZW50IGJlbG93LlxcblxcbiAgICBgYGBqc1xcbiAgICB2YXIgdGF1bnVzID0gcmVxdWlyZSgndGF1bnVzJyk7XFxuICAgIGBgYFxcblxcbiAgICBIb3dldmVyLCB5b3UgY291bGQgYWxzbyB0dXJuIG9uIHRoZSBpbnRlcm5hbCBkZWJ1ZyBsb2dnZXIgc2ltcGx5IGJ5IHVzaW5nIGFub3RoZXIgZW50cnkgcG9pbnQhXFxuXFxuICAgIGBgYGpzXFxuICAgIHZhciB0YXVudXMgPSByZXF1aXJlKCd0YXVudXMvYnJvd3Nlci9kZWJ1ZycpO1xcbiAgICBgYGBcXG5cXG4gICAgVGhlIHNjcmVlbnNob3QgYmVsb3cgY29udGFpbnMgYW4gZXhhbXBsZSBvZiB0aGlzIG1lY2hhbmlzbSwgd2hlcmUgdXNpbmcgW2B0YXVudXMucGFydGlhbGBdKCMtdGF1bnVzLXBhcnRpYWwtY29udGFpbmVyLWFjdGlvbi1tb2RlbC0pIHRyaWdnZXJzIGEgZmx1cnJ5IG9mIGRlYnVnIG1lc3NhZ2VzLlxcblxcbiAgICAhW2RlYnVnLnBuZ11bMTddXFxuXFxuICAgIFRoaXMgaXMgcGFydGljdWxhcmx5IGhlbHBmdWwgZHVyaW5nIGRldmVsb3BtZW50LCBidXQgYWxzbyB1c2VmdWwgaWYgeW91IGRvbid0IHVuZGVyc3RhbmQgZXhhY3RseSBob3cgVGF1bnVzIGlzIGRvaW5nIHNvbWV0aGluZywgYXMgdGhlIGxvZ2dlciBpcyBwcmV0dHkgdmVyYm9zZS5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyBDbGllbnQtU2lkZSBDb250cm9sbGVyc1xcblxcbiAgICBDbGllbnQtc2lkZSBjb250cm9sbGVycyBhcmUgZXhlY3V0ZWQgcmlnaHQgYWZ0ZXIgYSB2aWV3IGlzIHJlbmRlcmVkLCBldmVuIGluIHRoZSBjYXNlIG9mIFtwYXJ0aWFsIHZpZXdzXSgjLXRhdW51cy1wYXJ0aWFsLWNvbnRhaW5lci1hY3Rpb24tbW9kZWwtKS4gVGhlc2UgY29udHJvbGxlcnMgYXJlIHVzZWQgdG8gcHJvZ3Jlc3NpdmVseSBhZGQgYmVoYXZpb3Igb24gdG9wIG9mIHRoZSBIVE1MIGZvciB0aGF0IHZpZXcuXFxuXFxuICAgIFZpZXcgY29udHJvbGxlcnMgdGFrZSB0aHJlZSBwYXJhbWV0ZXJzLlxcblxcbiAgICBQYXJhbWV0ZXIgICB8IERlc2NyaXB0aW9uXFxuICAgIC0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcbiAgICBgbW9kZWxgICAgICB8IE1vZGVsIHRoYXQgd2FzIHVzZWQgdG8gcmVuZGVyIHRoZSB2aWV3XFxuICAgIGBjb250YWluZXJgIHwgVGhlIERPTSBlbGVtZW50IHdoZXJlIHRoZSB2aWV3IHdhcyByZW5kZXJlZFxcbiAgICBgcm91dGU/YCAgICB8IFJvdXRlIHRoYXQgdHJpZ2dlcmVkIHRoZSByZW5kZXJpbmcgZW5naW5lLiBNYXkgYmUgYG51bGxgXFxuXFxuICAgIE5vdGUgdGhhdCBUYXVudXMgd2lsbCBbZW1pdCBhIGByZW5kZXJgIGV2ZW50XSgjLXRhdW51cy1vbi10eXBlLWZuLSkgcmlnaHQgYmVmb3JlIHRoZSB2aWV3IGNvbnRyb2xsZXIgZ2V0cyBleGVjdXRlZCwgZ2l2aW5nIHlvdSBhIGNoYW5jZSB0byByZWFjdCB0byB2aWV3cyBnZXR0aW5nIHJlbmRlcmVkLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIFRoZSBgLnRhdW51c3JjYCBtYW5pZmVzdFxcblxcbiAgICBJZiB5b3Ugd2FudCB0byB1c2UgdmFsdWVzIG90aGVyIHRoYW4gdGhlIGNvbnZlbnRpb25hbCBkZWZhdWx0cyBzaG93biBpbiB0aGUgdGFibGUgYmVsb3csIHRoZW4geW91IHNob3VsZCBjcmVhdGUgYSBgLnRhdW51c3JjYCBmaWxlLiBOb3RlIHRoYXQgdGhlIGRlZmF1bHRzIG5lZWQgdG8gYmUgb3ZlcndyaXR0ZW4gaW4gYSBjYXNlLWJ5LWNhc2UgYmFzaXMuIFRoZXNlIG9wdGlvbnMgY2FuIGFsc28gYmUgY29uZmlndXJlZCBpbiB5b3VyIGBwYWNrYWdlLmpzb25gLCB1bmRlciB0aGUgYHRhdW51c2AgcHJvcGVydHkuXFxuXFxuICAgIGBgYGpzb25cXG4gICAge1xcbiAgICAgIFxcXCJ2aWV3c1xcXCI6IFxcXCIuYmluL3ZpZXdzXFxcIixcXG4gICAgICBcXFwic2VydmVyX3JvdXRlc1xcXCI6IFxcXCJjb250cm9sbGVycy9yb3V0ZXMuanNcXFwiLFxcbiAgICAgIFxcXCJzZXJ2ZXJfY29udHJvbGxlcnNcXFwiOiBcXFwiY29udHJvbGxlcnNcXFwiLFxcbiAgICAgIFxcXCJjbGllbnRfY29udHJvbGxlcnNcXFwiOiBcXFwiY2xpZW50L2pzL2NvbnRyb2xsZXJzXFxcIixcXG4gICAgICBcXFwiY2xpZW50X3dpcmluZ1xcXCI6IFxcXCIuYmluL3dpcmluZy5qc1xcXCJcXG4gICAgfVxcbiAgICBgYGBcXG5cXG4gICAgLSBUaGUgYHZpZXdzYCBkaXJlY3RvcnkgaXMgd2hlcmUgeW91ciB2aWV3cyBfKGFscmVhZHkgY29tcGlsZWQgaW50byBKYXZhU2NyaXB0KV8gYXJlIHBsYWNlZC4gVGhlc2Ugdmlld3MgYXJlIHVzZWQgZGlyZWN0bHkgb24gYm90aCB0aGUgc2VydmVyLXNpZGUgYW5kIHRoZSBjbGllbnQtc2lkZVxcbiAgICAtIFRoZSBgc2VydmVyX3JvdXRlc2AgZmlsZSBpcyB0aGUgbW9kdWxlIHdoZXJlIHlvdSBleHBvcnQgYSBjb2xsZWN0aW9uIG9mIHJvdXRlcy4gVGhlIENMSSB3aWxsIHB1bGwgdGhlc2Ugcm91dGVzIHdoZW4gY3JlYXRpbmcgdGhlIGNsaWVudC1zaWRlIHJvdXRlcyBmb3IgdGhlIHdpcmluZyBtb2R1bGVcXG4gICAgLSBUaGUgYHNlcnZlcl9jb250cm9sbGVyc2AgZGlyZWN0b3J5IGlzIHRoZSByb290IGRpcmVjdG9yeSB3aGVyZSB5b3VyIHNlcnZlci1zaWRlIGNvbnRyb2xsZXJzIGxpdmUuIEl0J3MgdXNlZCB3aGVuIHNldHRpbmcgdXAgdGhlIHNlcnZlci1zaWRlIHJvdXRlclxcbiAgICAtIFRoZSBgY2xpZW50X2NvbnRyb2xsZXJzYCBkaXJlY3RvcnkgaXMgd2hlcmUgeW91ciBjbGllbnQtc2lkZSBjb250cm9sbGVyIG1vZHVsZXMgbGl2ZS4gVGhlIENMSSB3aWxsIGByZXF1aXJlYCB0aGVzZSBjb250cm9sbGVycyBpbiBpdHMgcmVzdWx0aW5nIHdpcmluZyBtb2R1bGVcXG4gICAgLSBUaGUgYGNsaWVudF93aXJpbmdgIGZpbGUgaXMgd2hlcmUgeW91ciB3aXJpbmcgbW9kdWxlIHdpbGwgYmUgcGxhY2VkIGJ5IHRoZSBDTEkuIFlvdSdsbCB0aGVuIGhhdmUgdG8gYHJlcXVpcmVgIGl0IGluIHlvdXIgYXBwbGljYXRpb24gd2hlbiBib290aW5nIHVwIFRhdW51c1xcblxcbiAgICBIZXJlIGlzIHdoZXJlIHRoaW5ncyBnZXQgW2EgbGl0dGxlIGNvbnZlbnRpb25hbF1bMTJdLiBWaWV3cywgYW5kIGJvdGggc2VydmVyLXNpZGUgYW5kIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFyZSBleHBlY3RlZCB0byBiZSBvcmdhbml6ZWQgYnkgZm9sbG93aW5nIHRoZSBge3Jvb3R9L3tjb250cm9sbGVyfS97YWN0aW9ufWAgcGF0dGVybiwgYnV0IHlvdSBjb3VsZCBjaGFuZ2UgdGhhdCB1c2luZyBgcmVzb2x2ZXJzYCB3aGVuIGludm9raW5nIHRoZSBDTEkgYW5kIHVzaW5nIHRoZSBzZXJ2ZXItc2lkZSBBUEkuXFxuXFxuICAgIFZpZXdzIGFuZCBjb250cm9sbGVycyBhcmUgYWxzbyBleHBlY3RlZCB0byBiZSBDb21tb25KUyBtb2R1bGVzIHRoYXQgZXhwb3J0IGEgc2luZ2xlIG1ldGhvZC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgWzFdOiAvZ2V0dGluZy1zdGFydGVkXFxuICAgIFsyXTogaHR0cDovL2V4cHJlc3Nqcy5jb21cXG4gICAgWzNdOiBodHRwOi8vaGFwaWpzLmNvbVxcbiAgICBbNF06IGh0dHBzOi8vZ2l0aHViLmNvbS9wb255Zm9vL3Bvbnlmb28vYmxvYi8zMzI3MTc1MTMxMmRiNmU5MjA1OWQ5ODI5M2QwYTdhYzZlOWU4ZTViL3ZpZXdzL3NlcnZlci9sYXlvdXQvbGF5b3V0LmphZGVcXG4gICAgWzVdOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvaGdldFxcbiAgICBbNl06IGh0dHBzOi8vZ2l0aHViLmNvbS9wb255Zm9vL3Bvbnlmb28vYmxvYi9mNmQ2YjUwNjhmZjAzYTM4N2Y1MDM5MDAxNjBkOWZkYzFlNzQ5NzUwL2NvbnRyb2xsZXJzL3JvdXRpbmcuanMjTDcwLUw3MlxcbiAgICBbN106IGh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvdGF1bnVzLWV4cHJlc3NcXG4gICAgWzhdOiBodHRwczovL2dpdGh1Yi5jb20vdGF1bnVzL3RhdW51cy1oYXBpXFxuICAgIFs5XTogaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy9oYXBpaWZ5XFxuICAgIFsxMF06IGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWRcXG4gICAgWzExXTogaHR0cDovL2Jyb3dzZXJpZnkub3JnXFxuICAgIFsxMl06IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udmVudGlvbl9vdmVyX2NvbmZpZ3VyYXRpb25cXG4gICAgWzEzXTogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaW5nbGUtcGFnZV9hcHBsaWNhdGlvblxcbiAgICBbMTRdOiBodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9aW5kZXhlZGRiXFxuICAgIFsxNV06IC9nZXR0aW5nLXN0YXJ0ZWQjdmVyc2lvbmluZ1xcbiAgICBbMTZdOiBodHRwczovL2dpdGh1Yi5jb20vUmF5bm9zL3hoclxcbiAgICBbMTddOiBodHRwOi8vaS5pbWd1ci5jb20vQ2piSUh5MC5wbmdcXG4gICAgWzE4XTogL3BlcmZvcm1hbmNlI3VzZS12ZXJzaW9uaW5nLXRvLWVuc3VyZS1jYWNoZS12YWxpZGl0eVxcbiAgICBbMTldOiAvcGVyZm9ybWFuY2UjZW5hYmxlLXByZWZldGNoaW5nLWZvci1wcmVkaWN0aXZlLWNhY2hlLWxvYWRpbmdcXG4gICAgWzIwXTogL3BlcmZvcm1hbmNlI3NlbmQtdmlld3MtYW5kLWNvbnRyb2xsZXJzLXRvLXRoZS1jbGllbnQtc2VsZWN0aXZlbHlcXG5cIik7XG59XG59IiwidmFyIGphZGUgPSByZXF1aXJlKFwiamFkdW0vcnVudGltZVwiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tcGxlbWVudHMobG9jYWxzKSB7XG52YXIgamFkZV9kZWJ1ZyA9IFsgbmV3IGphZGUuRGVidWdJdGVtKCAxLCBcInZpZXdzL2RvY3VtZW50YXRpb24vY29tcGxlbWVudHMuamFkZVwiICkgXTtcbnRyeSB7XG52YXIgYnVmID0gW107XG52YXIgamFkZV9taXhpbnMgPSB7fTtcbnZhciBqYWRlX2ludGVycDtcblxuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMCwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2NvbXBsZW1lbnRzLmphZGVcIiApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvZG9jdW1lbnRhdGlvbi9jb21wbGVtZW50cy5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxzZWN0aW9uIGNsYXNzPVxcXCJseS1zZWN0aW9uIG1kLW1hcmtkb3duXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCA4MiwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2NvbXBsZW1lbnRzLmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxIGlkPVxcXCJjb21wbGVtZW50YXJ5LW1vZHVsZXNcXFwiPkNvbXBsZW1lbnRhcnkgTW9kdWxlczwvaDE+XFxuPHA+VGF1bnVzIGlzIGEgc21hbGwgbGlicmFyeSBieSBNVkMgZnJhbWV3b3JrIHN0YW5kYXJkcywgc2l0dGluZyA8c3Ryb25nPmJlbG93IDE1a0IgbWluaWZpZWQgYW5kIGd6aXBwZWQ8L3N0cm9uZz4uIEl0IGlzIGRlc2lnbmVkIHRvIGJlIHNtYWxsLiBJdCBpcyBhbHNvIGRlc2lnbmVkIHRvIGRvIG9uZSB0aGluZyB3ZWxsLCBhbmQgdGhhdCYjMzk7cyA8ZW0+YmVpbmcgYSBzaGFyZWQtcmVuZGVyaW5nIE1WQyBlbmdpbmU8L2VtPi48L3A+XFxuPHA+VGF1bnVzIGNhbiBiZSB1c2VkIGZvciByb3V0aW5nLCBwdXR0aW5nIHRvZ2V0aGVyIGNvbnRyb2xsZXJzLCBtb2RlbHMgYW5kIHZpZXdzIHRvIGhhbmRsZSBodW1hbiBpbnRlcmFjdGlvbi4gSWYgeW91IDxhIGhyZWY9XFxcIi9hcGlcXFwiPmhlYWQgb3ZlciB0byB0aGUgQVBJIGRvY3VtZW50YXRpb248L2E+LCB5b3UmIzM5O2xsIG5vdGljZSB0aGF0IHRoZSBzZXJ2ZXItc2lkZSBBUEksIHRoZSBjb21tYW5kLWxpbmUgaW50ZXJmYWNlLCBhbmQgdGhlIDxjb2RlPi50YXVudXNyYzwvY29kZT4gbWFuaWZlc3QgYXJlIG9ubHkgY29uY2VybmVkIHdpdGggcHJvdmlkaW5nIGEgY29udmVudGlvbmFsIHNoYXJlZC1yZW5kZXJpbmcgTVZDIGVuZ2luZS48L3A+XFxuPHA+SW4gdGhlIHNlcnZlci1zaWRlIHlvdSBtaWdodCBuZWVkIHRvIGRvIG90aGVyIHRoaW5ncyBiZXNpZGVzIHJvdXRpbmcgYW5kIHJlbmRlcmluZyB2aWV3cywgYW5kIG90aGVyIG1vZHVsZXMgY2FuIHRha2UgY2FyZSBvZiB0aGF0LiBIb3dldmVyLCB5b3UmIzM5O3JlIHVzZWQgdG8gaGF2aW5nIGRhdGFiYXNlIGFjY2Vzcywgc2VhcmNoLCBsb2dnaW5nLCBhbmQgYSB2YXJpZXR5IG9mIHNlcnZpY2VzIGhhbmRsZWQgYnkgc2VwYXJhdGUgbGlicmFyaWVzLCBpbnN0ZWFkIG9mIGEgc2luZ2xlIGJlaGVtb3RoIHRoYXQgdHJpZXMgdG8gZG8gZXZlcnl0aGluZy48L3A+XFxuPGJsb2NrcXVvdGU+XFxuPHA+SW4gdGhlIGNsaWVudC1zaWRlLCB5b3UgbWlnaHQgYmUgdXNlZCB0byB5b3VyIE1WQyBmcmFtZXdvcmsgb2YgY2hvaWNlIHJlc29sdmluZyBldmVyeXRoaW5nIG9uIHlvdXIgYmVoYWxmLCBmcm9tIERPTSBtYW5pcHVsYXRpb24gYW5kIGRhdGEtYmluZGluZyB0byBob29raW5nIHVwIHdpdGggYSBSRVNUIEFQSSwgYW5kIGV2ZXJ5d2hlcmUgaW4gYmV0d2Vlbi48L3A+XFxuPC9ibG9ja3F1b3RlPlxcbjxwPlRhdW51cyBhdHRlbXB0cyB0byBicmluZyB0aGUgc2VydmVyLXNpZGUgbWVudGFsaXR5IG9mIDxlbT4mcXVvdDtub3QgZG9pbmcgZXZlcnl0aGluZyBpcyBva2F5JnF1b3Q7PC9lbT4gaW50byB0aGUgd29ybGQgb2YgY2xpZW50LXNpZGUgd2ViIGFwcGxpY2F0aW9uIGRldmVsb3BtZW50IGFzIHdlbGwuIFRvIHRoYXQgZW5kLCBUYXVudXMgcmVjb21tZW5kcyB0aGF0IHlvdSBnaXZlIGEgc2hvdCB0byBsaWJyYXJpZXMgdGhhdCBhbHNvIGRvIDxzdHJvbmc+b25lIHRoaW5nIHdlbGw8L3N0cm9uZz4uPC9wPlxcbjxwPkluIHRoaXMgYnJpZWYgYXJ0aWNsZSB3ZSYjMzk7bGwgcmVjb21tZW5kIGEgY291cGxlIGRpZmZlcmVudCBsaWJyYXJpZXMgdGhhdCBwbGF5IHdlbGwgd2l0aCBUYXVudXMsIGFuZCB5b3UmIzM5O2xsIGFsc28gbGVhcm4gaG93IHRvIHNlYXJjaCBmb3IgbW9kdWxlcyB0aGF0IGNhbiBnaXZlIHlvdSBhY2Nlc3MgdG8gb3RoZXIgZnVuY3Rpb25hbGl0eSB5b3UgbWF5IGJlIGludGVyZXN0ZWQgaW4uPC9wPlxcbjxoMSBpZD1cXFwidXNpbmctZG9taW51cy1mb3ItZG9tLXF1ZXJ5aW5nXFxcIj5Vc2luZyA8Y29kZT5kb21pbnVzPC9jb2RlPiBmb3IgRE9NIHF1ZXJ5aW5nPC9oMT5cXG48cD48YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZG9taW51c1xcXCI+RG9taW51czwvYT4gaXMgYW4gZXh0cmEtc21hbGwgRE9NIHF1ZXJ5aW5nIGxpYnJhcnksIGN1cnJlbnRseSBjbG9ja2luZyBhcm91bmQgPHN0cm9uZz40a0IgbWluaWZpZWQgYW5kIGd6aXBwZWQ8L3N0cm9uZz4sIGFsbW9zdCA8ZW0+dGVuIHRpbWVzIHNtYWxsZXI8L2VtPiB0aGFuIGl0JiMzOTtzIGNvbXBldGl0aW9uLiBVbmxpa2UgalF1ZXJ5IGFuZCBwb3B1bGFyIGZyaWVuZHMsIERvbWludXMgZG9lc24mIzM5O3QgcHJvdmlkZSBBSkFYIGZlYXR1cmVzLCBsYXlvdXQgbWF0aCwgPGNvZGU+Jmx0O2Zvcm0mZ3Q7PC9jb2RlPiBtYW5pcHVsYXRpb24sIHByb21pc2VzLCB0ZW5zIG9mIGV2ZW50IGJpbmRpbmcgbWV0aG9kcywgYSBzZWxlY3RvciBlbmdpbmUgd3JpdHRlbiBpbiBwbGFpbiBKYXZhU2NyaXB0LCBub3IgYSBteXJpYWQgb2YgdXRpbGl0eSBmdW5jdGlvbnMuIEluc3RlYWQsIERvbWludXMgZm9jdXNlcyBzb2xlbHkgb24gcHJvdmlkaW5nIGEgcmljaCBET00gcXVlcnlpbmcgYW5kIG1hbmlwdWxhdGlvbiBBUEkgdGhhdCBnZXRzIHJpZCBvZiBpbmNvbnNpc3RlbmNpZXMgYWNyb3NzIGJyb3dzZXJzLjwvcD5cXG48cD5XaGlsZSB0aGUgQVBJIGlzbiYjMzk7dCBleGFjdGx5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnksIGl0IGlzIGRlZmluaXRlbHkgZmFtaWxpYXIgdG8gdGhlIGpRdWVyeSBhZGVwdC4gQ2hhaW5pbmcsIHZlcnNhdGlsaXR5LCBleHByZXNzaXZlbmVzcywgYW5kIHJhdyBwb3dlciBhcmUgYWxsIGNvcmUgY29uY2VybnMgZm9yIERvbWludXMuIFlvdSYjMzk7bGwgZmluZCB0aGF0IERvbWludXMgaGFzIG1vcmUgY29uc2lzdGVudGx5IG5hbWVkIG1ldGhvZHMsIGdpdmVuIHRoYXQgaXQgd2FzIGJ1aWx0IHdpdGggYSBjb25jaXNlIEFQSSBpbiBtaW5kLjwvcD5cXG48cD5UaGVyZSYjMzk7cyBhIGZldyBkaWZmZXJlbmNlcyBpbiBzZW1hbnRpY3MsIGFuZCBJIGJlbGlldmUgdGhhdCYjMzk7cyBhIGdvb2QgdGhpbmcuIEZvciBpbnN0YW5jZSwgaWYgeW91IGRvIDxjb2RlPi52YWx1ZTwvY29kZT4gb24gYSBjaGVja2JveCBvciByYWRpbyBidXR0b24geW91JiMzOTtsbCBnZXQgYmFjayB3aGV0aGVyIHRoZSBpbnB1dCBpcyBjaGVja2VkLiBTaW1pbGFybHksIGlmIHlvdSBjYWxsIDxjb2RlPi50ZXh0PC9jb2RlPiBvbiB0aGUgaW5wdXQgeW91JiMzOTtsbCBnZXQgdGhlIHRleHQgYmFjaywgd2hpY2ggaXMgbW9zdCBvZnRlbiB3aGF0IHlvdSB3YW50ZWQgdG8gZ2V0LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj52YXIgYSA9IHJlcXVpcmUoJiMzOTtkb21pbnVzJiMzOTspO1xcbnZhciBiID0galF1ZXJ5O1xcblxcbmEoJiMzOTsmbHQ7aW5wdXQmZ3Q7JiMzOTspLmF0dHIoeyB0eXBlOiAmIzM5O3JhZGlvJiMzOTssIHZhbHVlOiAmIzM5O0ZvbyYjMzk7IH0pLnRleHQoKTtcXG4vLyAmbHQ7LSAmIzM5O0ZvbyYjMzk7XFxuXFxuYSgmIzM5OyZsdDtpbnB1dCZndDsmIzM5OykuYXR0cih7IHR5cGU6ICYjMzk7cmFkaW8mIzM5OywgY2hlY2tlZDogdHJ1ZSB9KS52YWx1ZSgpO1xcbi8vICZsdDstIHRydWVcXG5cXG5iKCYjMzk7Jmx0O2lucHV0Jmd0OyYjMzk7KS5hdHRyKHsgdHlwZTogJiMzOTtyYWRpbyYjMzk7LCB2YWx1ZTogJiMzOTtGb28mIzM5OyB9KS50ZXh0KCk7XFxuLy8gJmx0Oy0gJiMzOTsmIzM5O1xcblxcbmIoJiMzOTsmbHQ7aW5wdXQmZ3Q7JiMzOTspLmF0dHIoeyB0eXBlOiAmIzM5O3JhZGlvJiMzOTssIGNoZWNrZWQ6IHRydWUgfSkudmFsKCk7XFxuLy8gJmx0Oy0gJiMzOTtGb28mIzM5O1xcbjwvY29kZT48L3ByZT5cXG48cD5PbmUgb2YgdGhlIGJlc3QgYXNwZWN0cyBvZiBEb21pbnVzLCA8ZW0+YmVzaWRlcyBpdHMgc21hbGwgc2l6ZTwvZW0+LCBpcyB0aGUgZmFjdCB0aGF0IGl0IGV4dGVuZHMgbmF0aXZlIEphdmFTY3JpcHQgYXJyYXlzIDxlbT4odXNpbmcgPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL3Bvc2VyXFxcIj48Y29kZT5wb3NlcjwvY29kZT48L2E+KTwvZW0+LiBUaGF0IG1lYW5zIHlvdSBoYXZlIGFjY2VzcyB0byBhbGwgb2YgdGhlIDxjb2RlPkFycmF5PC9jb2RlPiBmdW5jdGlvbmFsIG1ldGhvZHMgb24gYW55IDxjb2RlPkRvbWludXM8L2NvZGU+IGNvbGxlY3Rpb25zLCBzdWNoIGFzIDxjb2RlPi5mb3JFYWNoPC9jb2RlPiwgPGNvZGU+Lm1hcDwvY29kZT4sIDxjb2RlPi5maWx0ZXI8L2NvZGU+LCA8Y29kZT4uc29ydDwvY29kZT4gYW5kIHNvIG9uLjwvcD5cXG48cD5UYXVudXMgZG9lc24mIzM5O3QgbWFrZSBhbnkgZXh0ZW5zaXZlIERPTSBtYW5pcHVsYXRpb24gPGVtPihub3IgcXVlcnlpbmcpPC9lbT4gYW5kIGRvZXNuJiMzOTt0IG5lZWQgdG8gdXNlIERvbWludXMsIGJ1dCBpdCBtYXkgZmluZCBhIGhvbWUgaW4geW91ciBhcHBsaWNhdGlvbi48L3A+XFxuPHA+WW91IGNhbiBjaGVjayBvdXQgdGhlIDxlbT5jb21wbGV0ZSBBUEkgZG9jdW1lbnRhdGlvbjwvZW0+IGZvciA8Y29kZT5kb21pbnVzPC9jb2RlPiBvbiA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZG9taW51c1xcXCI+aXRzIEdpdEh1YiByZXBvc2l0b3J5PC9hPi48L3A+XFxuPGgxIGlkPVxcXCJ1c2luZy14aHItdG8tbWFrZS1hamF4LXJlcXVlc3RzXFxcIj5Vc2luZyA8Y29kZT54aHI8L2NvZGU+IHRvIG1ha2UgQUpBWCByZXF1ZXN0czwvaDE+XFxuPHA+QSBzbWFsbCBwcm9ncmFtIGNhbGxlZCA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vUmF5bm9zL3hoclxcXCI+PGNvZGU+eGhyPC9jb2RlPjwvYT4gY2FuIGJlIHVzZWQgdG8gbWFrZSBBSkFYIHJlcXVlc3RzIGFuZCBpdCYjMzk7cyBidW5kbGVkIHdpdGggVGF1bnVzLCBiZWNhdXNlIGl0IG5lZWRzIGl0IGludGVybmFsbHkgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgc2VydmVyLiBBcyBzdWNoLCBpdCB3YXMgdHJpdmlhbCBmb3IgVGF1bnVzIHRvIGV4cG9zZSB0aGlzIGVuZ2luZSBhbmQgZ2l2ZSB5b3UgdGhlIGFiaWxpdHkgdG8gbWFrZSBBSkFYIGNhbGxzIG9mIHlvdXIgb3duIHVzaW5nIGl0IGFzIHdlbGwuPC9wPlxcbjxwPllvdSBjYW4gY2hlY2sgb3V0IDxhIGhyZWY9XFxcIi9hcGkjLXRhdW51cy14aHItdXJsLW9wdGlvbnMtZG9uZS1cXFwiPnRoZSBBUEkgZG9jdW1lbnRhdGlvbjwvYT4gZm9yIGFuIGV4cGxhbmF0aW9uIG9mIGhvdyBvdXIgaW50ZXJmYWNlIHRvIDxjb2RlPnhocjwvY29kZT4gd29ya3MsIG9yIHlvdSBjb3VsZCBhbHNvIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9SYXlub3MveGhyXFxcIj5zZWUgdGhlaXIgQVBJIGRvY3VtZW50YXRpb248L2E+IGFuZCB1c2UgdGhhdCBkaXJlY3RseSBpbnN0ZWFkLjwvcD5cXG48aDEgaWQ9XFxcImNvbXBsZW1lbnRpbmcteW91ci1jb2RlLXdpdGgtc21hbGwtbW9kdWxlc1xcXCI+Q29tcGxlbWVudGluZyB5b3VyIGNvZGUgd2l0aCBzbWFsbCBtb2R1bGVzPC9oMT5cXG48cD5UaGVyZSYjMzk7cyBhbiBpbmZpbml0ZSBudW1iZXIgb2YgbW9kdWxlcyB0aGF0IGRvIGp1c3Qgb25lIHRoaW5nIHdlbGwgYW5kIGFyZSBlYWdlciB0byBiZSBwYXJ0IG9mIHlvdXIgYXBwbGljYXRpb25zLiBMZXZlcmFnZSB0aGUgSW50ZXJuZXQgdG8gZmluZCB3aGF0IHlvdSBuZWVkLiBTbWFsbCBsaWJyYXJpZXMgdGVuZCB0byBiZSBiZXR0ZXIgZG9jdW1lbnRlZCwgY29uY2lzZSB0byB1c2UsIGFuZCBzaW1wbGVyLjwvcD5cXG48cD5IZXJlJiMzOTtzIGEgZmV3IGV4YW1wbGVzIG9mIG1vZHVsZXMgeW91IGNvdWxkIGNvbnNpZGVyLjwvcD5cXG48dWw+XFxuPGxpPjxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS95eXg5OTA4MDMvdnVlXFxcIj48Y29kZT52dWU8L2NvZGU+PC9hPiBnaXZlcyB5b3UgTVZWTSBjYXBhYmlsaXRpZXM8L2xpPlxcbjxsaT48YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vcG9seW1lci9vYnNlcnZlLWpzXFxcIj48Y29kZT5vYnNlcnZlLWpzPC9jb2RlPjwvYT4gdG8gZ2V0IGRhdGEtYmluZGluZzwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0LUVzY2gvdmlydHVhbC1kb21cXFwiPjxjb2RlPnZpcnR1YWwtZG9tPC9jb2RlPjwvYT4gdG8gdXNlIGEgdmlydHVhbCBET00gZGlmZmluZyBhbGdvcml0aG0gYSBsYSA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3RcXFwiPkZhY2Vib29rIFJlYWN0PC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9oaW50XFxcIj48Y29kZT5oaW50PC9jb2RlPjwvYT4gcHJvZ3Jlc3NpdmVseSBlbmhhbmNlcyB5b3VyIEhUTUwgZ2l2aW5nIHlvdSBtb3JlIGNvbG9yZnVsIHRvb2x0aXBzPC9saT5cXG48bGk+PGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL3JvbWVcXFwiPjxjb2RlPnJvbWU8L2NvZGU+PC9hPiBpcyBhIHNtYWxsIGNhbGVuZGFyIGNvbXBvbmVudDwvbGk+XFxuPC91bD5cXG48cD5Zb3UgY2FuIGxvb2sgZm9yIHJlbGV2YW50IG1vZHVsZXMgdXNpbmcgPGEgaHJlZj1cXFwiaHR0cDovL2Jyb3dzZXJpZnlzZWFyY2gub3JnL1xcXCI+QnJvd3NlcmlmeVNlYXJjaC5vcmc8L2E+LCB0aGUgPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cubnBtanMub3JnL1xcXCI+PGNvZGU+bnBtPC9jb2RlPiBzZWFyY2g8L2E+LCBhc2tpbmcgYXJvdW5kIG9uIFR3aXR0ZXIsIG9yIGp1c3QgYnkgR29vZ2xpbmchPC9wPlxcblwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9zZWN0aW9uPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufSBjYXRjaCAoZXJyKSB7XG4gIGphZGUucmV0aHJvdyhlcnIsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUsIGphZGVfZGVidWdbMF0ubGluZW5vLCBcInNlY3Rpb24ubHktc2VjdGlvbi5tZC1tYXJrZG93blxcbiAgOnVsdHJhbWFya2VkXFxuICAgICMgQ29tcGxlbWVudGFyeSBNb2R1bGVzXFxuXFxuICAgIFRhdW51cyBpcyBhIHNtYWxsIGxpYnJhcnkgYnkgTVZDIGZyYW1ld29yayBzdGFuZGFyZHMsIHNpdHRpbmcgKipiZWxvdyAxNWtCIG1pbmlmaWVkIGFuZCBnemlwcGVkKiouIEl0IGlzIGRlc2lnbmVkIHRvIGJlIHNtYWxsLiBJdCBpcyBhbHNvIGRlc2lnbmVkIHRvIGRvIG9uZSB0aGluZyB3ZWxsLCBhbmQgdGhhdCdzIF9iZWluZyBhIHNoYXJlZC1yZW5kZXJpbmcgTVZDIGVuZ2luZV8uXFxuXFxuICAgIFRhdW51cyBjYW4gYmUgdXNlZCBmb3Igcm91dGluZywgcHV0dGluZyB0b2dldGhlciBjb250cm9sbGVycywgbW9kZWxzIGFuZCB2aWV3cyB0byBoYW5kbGUgaHVtYW4gaW50ZXJhY3Rpb24uIElmIHlvdSBbaGVhZCBvdmVyIHRvIHRoZSBBUEkgZG9jdW1lbnRhdGlvbl1bMV0sIHlvdSdsbCBub3RpY2UgdGhhdCB0aGUgc2VydmVyLXNpZGUgQVBJLCB0aGUgY29tbWFuZC1saW5lIGludGVyZmFjZSwgYW5kIHRoZSBgLnRhdW51c3JjYCBtYW5pZmVzdCBhcmUgb25seSBjb25jZXJuZWQgd2l0aCBwcm92aWRpbmcgYSBjb252ZW50aW9uYWwgc2hhcmVkLXJlbmRlcmluZyBNVkMgZW5naW5lLlxcblxcbiAgICBJbiB0aGUgc2VydmVyLXNpZGUgeW91IG1pZ2h0IG5lZWQgdG8gZG8gb3RoZXIgdGhpbmdzIGJlc2lkZXMgcm91dGluZyBhbmQgcmVuZGVyaW5nIHZpZXdzLCBhbmQgb3RoZXIgbW9kdWxlcyBjYW4gdGFrZSBjYXJlIG9mIHRoYXQuIEhvd2V2ZXIsIHlvdSdyZSB1c2VkIHRvIGhhdmluZyBkYXRhYmFzZSBhY2Nlc3MsIHNlYXJjaCwgbG9nZ2luZywgYW5kIGEgdmFyaWV0eSBvZiBzZXJ2aWNlcyBoYW5kbGVkIGJ5IHNlcGFyYXRlIGxpYnJhcmllcywgaW5zdGVhZCBvZiBhIHNpbmdsZSBiZWhlbW90aCB0aGF0IHRyaWVzIHRvIGRvIGV2ZXJ5dGhpbmcuXFxuXFxuICAgID4gSW4gdGhlIGNsaWVudC1zaWRlLCB5b3UgbWlnaHQgYmUgdXNlZCB0byB5b3VyIE1WQyBmcmFtZXdvcmsgb2YgY2hvaWNlIHJlc29sdmluZyBldmVyeXRoaW5nIG9uIHlvdXIgYmVoYWxmLCBmcm9tIERPTSBtYW5pcHVsYXRpb24gYW5kIGRhdGEtYmluZGluZyB0byBob29raW5nIHVwIHdpdGggYSBSRVNUIEFQSSwgYW5kIGV2ZXJ5d2hlcmUgaW4gYmV0d2Vlbi5cXG5cXG4gICAgVGF1bnVzIGF0dGVtcHRzIHRvIGJyaW5nIHRoZSBzZXJ2ZXItc2lkZSBtZW50YWxpdHkgb2YgX1xcXCJub3QgZG9pbmcgZXZlcnl0aGluZyBpcyBva2F5XFxcIl8gaW50byB0aGUgd29ybGQgb2YgY2xpZW50LXNpZGUgd2ViIGFwcGxpY2F0aW9uIGRldmVsb3BtZW50IGFzIHdlbGwuIFRvIHRoYXQgZW5kLCBUYXVudXMgcmVjb21tZW5kcyB0aGF0IHlvdSBnaXZlIGEgc2hvdCB0byBsaWJyYXJpZXMgdGhhdCBhbHNvIGRvICoqb25lIHRoaW5nIHdlbGwqKi5cXG5cXG4gICAgSW4gdGhpcyBicmllZiBhcnRpY2xlIHdlJ2xsIHJlY29tbWVuZCBhIGNvdXBsZSBkaWZmZXJlbnQgbGlicmFyaWVzIHRoYXQgcGxheSB3ZWxsIHdpdGggVGF1bnVzLCBhbmQgeW91J2xsIGFsc28gbGVhcm4gaG93IHRvIHNlYXJjaCBmb3IgbW9kdWxlcyB0aGF0IGNhbiBnaXZlIHlvdSBhY2Nlc3MgdG8gb3RoZXIgZnVuY3Rpb25hbGl0eSB5b3UgbWF5IGJlIGludGVyZXN0ZWQgaW4uXFxuXFxuICAgICMgVXNpbmcgYGRvbWludXNgIGZvciBET00gcXVlcnlpbmdcXG5cXG4gICAgW0RvbWludXNdWzJdIGlzIGFuIGV4dHJhLXNtYWxsIERPTSBxdWVyeWluZyBsaWJyYXJ5LCBjdXJyZW50bHkgY2xvY2tpbmcgYXJvdW5kICoqNGtCIG1pbmlmaWVkIGFuZCBnemlwcGVkKiosIGFsbW9zdCBfdGVuIHRpbWVzIHNtYWxsZXJfIHRoYW4gaXQncyBjb21wZXRpdGlvbi4gVW5saWtlIGpRdWVyeSBhbmQgcG9wdWxhciBmcmllbmRzLCBEb21pbnVzIGRvZXNuJ3QgcHJvdmlkZSBBSkFYIGZlYXR1cmVzLCBsYXlvdXQgbWF0aCwgYDxmb3JtPmAgbWFuaXB1bGF0aW9uLCBwcm9taXNlcywgdGVucyBvZiBldmVudCBiaW5kaW5nIG1ldGhvZHMsIGEgc2VsZWN0b3IgZW5naW5lIHdyaXR0ZW4gaW4gcGxhaW4gSmF2YVNjcmlwdCwgbm9yIGEgbXlyaWFkIG9mIHV0aWxpdHkgZnVuY3Rpb25zLiBJbnN0ZWFkLCBEb21pbnVzIGZvY3VzZXMgc29sZWx5IG9uIHByb3ZpZGluZyBhIHJpY2ggRE9NIHF1ZXJ5aW5nIGFuZCBtYW5pcHVsYXRpb24gQVBJIHRoYXQgZ2V0cyByaWQgb2YgaW5jb25zaXN0ZW5jaWVzIGFjcm9zcyBicm93c2Vycy5cXG5cXG4gICAgV2hpbGUgdGhlIEFQSSBpc24ndCBleGFjdGx5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnksIGl0IGlzIGRlZmluaXRlbHkgZmFtaWxpYXIgdG8gdGhlIGpRdWVyeSBhZGVwdC4gQ2hhaW5pbmcsIHZlcnNhdGlsaXR5LCBleHByZXNzaXZlbmVzcywgYW5kIHJhdyBwb3dlciBhcmUgYWxsIGNvcmUgY29uY2VybnMgZm9yIERvbWludXMuIFlvdSdsbCBmaW5kIHRoYXQgRG9taW51cyBoYXMgbW9yZSBjb25zaXN0ZW50bHkgbmFtZWQgbWV0aG9kcywgZ2l2ZW4gdGhhdCBpdCB3YXMgYnVpbHQgd2l0aCBhIGNvbmNpc2UgQVBJIGluIG1pbmQuXFxuXFxuICAgIFRoZXJlJ3MgYSBmZXcgZGlmZmVyZW5jZXMgaW4gc2VtYW50aWNzLCBhbmQgSSBiZWxpZXZlIHRoYXQncyBhIGdvb2QgdGhpbmcuIEZvciBpbnN0YW5jZSwgaWYgeW91IGRvIGAudmFsdWVgIG9uIGEgY2hlY2tib3ggb3IgcmFkaW8gYnV0dG9uIHlvdSdsbCBnZXQgYmFjayB3aGV0aGVyIHRoZSBpbnB1dCBpcyBjaGVja2VkLiBTaW1pbGFybHksIGlmIHlvdSBjYWxsIGAudGV4dGAgb24gdGhlIGlucHV0IHlvdSdsbCBnZXQgdGhlIHRleHQgYmFjaywgd2hpY2ggaXMgbW9zdCBvZnRlbiB3aGF0IHlvdSB3YW50ZWQgdG8gZ2V0LlxcblxcbiAgICBgYGBqc1xcbiAgICB2YXIgYSA9IHJlcXVpcmUoJ2RvbWludXMnKTtcXG4gICAgdmFyIGIgPSBqUXVlcnk7XFxuXFxuICAgIGEoJzxpbnB1dD4nKS5hdHRyKHsgdHlwZTogJ3JhZGlvJywgdmFsdWU6ICdGb28nIH0pLnRleHQoKTtcXG4gICAgLy8gPC0gJ0ZvbydcXG5cXG4gICAgYSgnPGlucHV0PicpLmF0dHIoeyB0eXBlOiAncmFkaW8nLCBjaGVja2VkOiB0cnVlIH0pLnZhbHVlKCk7XFxuICAgIC8vIDwtIHRydWVcXG5cXG4gICAgYignPGlucHV0PicpLmF0dHIoeyB0eXBlOiAncmFkaW8nLCB2YWx1ZTogJ0ZvbycgfSkudGV4dCgpO1xcbiAgICAvLyA8LSAnJ1xcblxcbiAgICBiKCc8aW5wdXQ+JykuYXR0cih7IHR5cGU6ICdyYWRpbycsIGNoZWNrZWQ6IHRydWUgfSkudmFsKCk7XFxuICAgIC8vIDwtICdGb28nXFxuICAgIGBgYFxcblxcbiAgICBPbmUgb2YgdGhlIGJlc3QgYXNwZWN0cyBvZiBEb21pbnVzLCBfYmVzaWRlcyBpdHMgc21hbGwgc2l6ZV8sIGlzIHRoZSBmYWN0IHRoYXQgaXQgZXh0ZW5kcyBuYXRpdmUgSmF2YVNjcmlwdCBhcnJheXMgXyh1c2luZyBbYHBvc2VyYF1bNV0pXy4gVGhhdCBtZWFucyB5b3UgaGF2ZSBhY2Nlc3MgdG8gYWxsIG9mIHRoZSBgQXJyYXlgIGZ1bmN0aW9uYWwgbWV0aG9kcyBvbiBhbnkgYERvbWludXNgIGNvbGxlY3Rpb25zLCBzdWNoIGFzIGAuZm9yRWFjaGAsIGAubWFwYCwgYC5maWx0ZXJgLCBgLnNvcnRgIGFuZCBzbyBvbi5cXG5cXG4gICAgVGF1bnVzIGRvZXNuJ3QgbWFrZSBhbnkgZXh0ZW5zaXZlIERPTSBtYW5pcHVsYXRpb24gXyhub3IgcXVlcnlpbmcpXyBhbmQgZG9lc24ndCBuZWVkIHRvIHVzZSBEb21pbnVzLCBidXQgaXQgbWF5IGZpbmQgYSBob21lIGluIHlvdXIgYXBwbGljYXRpb24uXFxuXFxuICAgIFlvdSBjYW4gY2hlY2sgb3V0IHRoZSBfY29tcGxldGUgQVBJIGRvY3VtZW50YXRpb25fIGZvciBgZG9taW51c2Agb24gW2l0cyBHaXRIdWIgcmVwb3NpdG9yeV1bMl0uXFxuXFxuICAgICMgVXNpbmcgYHhocmAgdG8gbWFrZSBBSkFYIHJlcXVlc3RzXFxuXFxuICAgIEEgc21hbGwgcHJvZ3JhbSBjYWxsZWQgW2B4aHJgXVs0XSBjYW4gYmUgdXNlZCB0byBtYWtlIEFKQVggcmVxdWVzdHMgYW5kIGl0J3MgYnVuZGxlZCB3aXRoIFRhdW51cywgYmVjYXVzZSBpdCBuZWVkcyBpdCBpbnRlcm5hbGx5IHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZlci4gQXMgc3VjaCwgaXQgd2FzIHRyaXZpYWwgZm9yIFRhdW51cyB0byBleHBvc2UgdGhpcyBlbmdpbmUgYW5kIGdpdmUgeW91IHRoZSBhYmlsaXR5IHRvIG1ha2UgQUpBWCBjYWxscyBvZiB5b3VyIG93biB1c2luZyBpdCBhcyB3ZWxsLlxcblxcbiAgICBZb3UgY2FuIGNoZWNrIG91dCBbdGhlIEFQSSBkb2N1bWVudGF0aW9uXVs2XSBmb3IgYW4gZXhwbGFuYXRpb24gb2YgaG93IG91ciBpbnRlcmZhY2UgdG8gYHhocmAgd29ya3MsIG9yIHlvdSBjb3VsZCBhbHNvIFtzZWUgdGhlaXIgQVBJIGRvY3VtZW50YXRpb25dWzRdIGFuZCB1c2UgdGhhdCBkaXJlY3RseSBpbnN0ZWFkLlxcblxcbiAgICAjIENvbXBsZW1lbnRpbmcgeW91ciBjb2RlIHdpdGggc21hbGwgbW9kdWxlc1xcblxcbiAgICBUaGVyZSdzIGFuIGluZmluaXRlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgZG8ganVzdCBvbmUgdGhpbmcgd2VsbCBhbmQgYXJlIGVhZ2VyIHRvIGJlIHBhcnQgb2YgeW91ciBhcHBsaWNhdGlvbnMuIExldmVyYWdlIHRoZSBJbnRlcm5ldCB0byBmaW5kIHdoYXQgeW91IG5lZWQuIFNtYWxsIGxpYnJhcmllcyB0ZW5kIHRvIGJlIGJldHRlciBkb2N1bWVudGVkLCBjb25jaXNlIHRvIHVzZSwgYW5kIHNpbXBsZXIuXFxuXFxuICAgIEhlcmUncyBhIGZldyBleGFtcGxlcyBvZiBtb2R1bGVzIHlvdSBjb3VsZCBjb25zaWRlci5cXG5cXG4gICAgLSBbYHZ1ZWBdWzE1XSBnaXZlcyB5b3UgTVZWTSBjYXBhYmlsaXRpZXNcXG4gICAgLSBbYG9ic2VydmUtanNgXVs3XSB0byBnZXQgZGF0YS1iaW5kaW5nXFxuICAgIC0gW2B2aXJ0dWFsLWRvbWBdWzhdIHRvIHVzZSBhIHZpcnR1YWwgRE9NIGRpZmZpbmcgYWxnb3JpdGhtIGEgbGEgW0ZhY2Vib29rIFJlYWN0XVs5XVxcbiAgICAtIFtgaGludGBdWzEwXSBwcm9ncmVzc2l2ZWx5IGVuaGFuY2VzIHlvdXIgSFRNTCBnaXZpbmcgeW91IG1vcmUgY29sb3JmdWwgdG9vbHRpcHNcXG4gICAgLSBbYHJvbWVgXVsxMV0gaXMgYSBzbWFsbCBjYWxlbmRhciBjb21wb25lbnRcXG5cXG4gICAgWW91IGNhbiBsb29rIGZvciByZWxldmFudCBtb2R1bGVzIHVzaW5nIFtCcm93c2VyaWZ5U2VhcmNoLm9yZ11bMTNdLCB0aGUgW2BucG1gIHNlYXJjaF1bMTRdLCBhc2tpbmcgYXJvdW5kIG9uIFR3aXR0ZXIsIG9yIGp1c3QgYnkgR29vZ2xpbmchXFxuXFxuICAgIFsxXTogL2FwaVxcbiAgICBbMl06IGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kb21pbnVzXFxuICAgIFs0XTogaHR0cHM6Ly9naXRodWIuY29tL1JheW5vcy94aHJcXG4gICAgWzVdOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvcG9zZXJcXG4gICAgWzZdOiAvYXBpIy10YXVudXMteGhyLXVybC1vcHRpb25zLWRvbmUtXFxuICAgIFs3XTogaHR0cHM6Ly9naXRodWIuY29tL3BvbHltZXIvb2JzZXJ2ZS1qc1xcbiAgICBbOF06IGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0LUVzY2gvdmlydHVhbC1kb21cXG4gICAgWzldOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3RcXG4gICAgWzEwXTogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2hpbnRcXG4gICAgWzExXTogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL3JvbWVcXG4gICAgWzEyXTogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2hpbnRcXG4gICAgWzEzXTogaHR0cDovL2Jyb3dzZXJpZnlzZWFyY2gub3JnL1xcbiAgICBbMTRdOiBodHRwczovL3d3dy5ucG1qcy5vcmcvXFxuICAgIFsxNV06IGh0dHBzOi8vZ2l0aHViLmNvbS95eXg5OTA4MDMvdnVlXFxuXCIpO1xufVxufSIsInZhciBqYWRlID0gcmVxdWlyZShcImphZHVtL3J1bnRpbWVcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldHRpbmdTdGFydGVkKGxvY2Fscykge1xudmFyIGphZGVfZGVidWcgPSBbIG5ldyBqYWRlLkRlYnVnSXRlbSggMSwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL2dldHRpbmctc3RhcnRlZC5qYWRlXCIgKSBdO1xudHJ5IHtcbnZhciBidWYgPSBbXTtcbnZhciBqYWRlX21peGlucyA9IHt9O1xudmFyIGphZGVfaW50ZXJwO1xuXG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAwLCBcInZpZXdzL2RvY3VtZW50YXRpb24vZ2V0dGluZy1zdGFydGVkLmphZGVcIiApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvZG9jdW1lbnRhdGlvbi9nZXR0aW5nLXN0YXJ0ZWQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8c2VjdGlvbiBjbGFzcz1cXFwibHktc2VjdGlvbiBtZC1tYXJrZG93blxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggNzAyLCBcInZpZXdzL2RvY3VtZW50YXRpb24vZ2V0dGluZy1zdGFydGVkLmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxIGlkPVxcXCJnZXR0aW5nLXN0YXJ0ZWRcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDE+XFxuPHA+VGF1bnVzIGlzIGEgc2hhcmVkLXJlbmRlcmluZyBNVkMgZW5naW5lIGZvciBOb2RlLmpzLCBhbmQgaXQmIzM5O3MgPGVtPnVwIHRvIHlvdSBob3cgdG8gdXNlIGl0PC9lbT4uIEluIGZhY3QsIGl0IG1pZ2h0IGJlIGEgZ29vZCBpZGVhIGZvciB5b3UgdG8gPHN0cm9uZz5zZXQgdXAganVzdCB0aGUgc2VydmVyLXNpZGUgYXNwZWN0IGZpcnN0PC9zdHJvbmc+LCBhcyB0aGF0JiMzOTtsbCB0ZWFjaCB5b3UgaG93IGl0IHdvcmtzIGV2ZW4gd2hlbiBKYXZhU2NyaXB0IG5ldmVyIGdldHMgdG8gdGhlIGNsaWVudC48L3A+XFxuPGgxIGlkPVxcXCJ0YWJsZS1vZi1jb250ZW50c1xcXCI+VGFibGUgb2YgQ29udGVudHM8L2gxPlxcbjx1bD5cXG48bGk+PGEgaHJlZj1cXFwiI2hvdy1pdC13b3Jrc1xcXCI+SG93IGl0IHdvcmtzPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNpbnN0YWxsaW5nLXRhdW51c1xcXCI+SW5zdGFsbGluZyBUYXVudXM8L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiI3NldHRpbmctdXAtdGhlLXNlcnZlci1zaWRlXFxcIj5TZXR0aW5nIHVwIHRoZSBzZXJ2ZXItc2lkZTwvYT48dWw+XFxuPGxpPjxhIGhyZWY9XFxcIiN5b3VyLWZpcnN0LXJvdXRlXFxcIj5Zb3VyIGZpcnN0IHJvdXRlPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNjcmVhdGluZy1hLWxheW91dFxcXCI+Q3JlYXRpbmcgYSBsYXlvdXQ8L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiI3VzaW5nLWphZGUtYXMteW91ci12aWV3LWVuZ2luZVxcXCI+VXNpbmcgSmFkZSBhcyB5b3VyIHZpZXcgZW5naW5lPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiN0aHJvd2luZy1pbi1hLWNvbnRyb2xsZXJcXFwiPlRocm93aW5nIGluIGEgY29udHJvbGxlcjwvYT48L2xpPlxcbjwvdWw+XFxuPC9saT5cXG48bGk+PGEgaHJlZj1cXFwiI3RhdW51cy1pbi10aGUtY2xpZW50XFxcIj5UYXVudXMgaW4gdGhlIGNsaWVudDwvYT48dWw+XFxuPGxpPjxhIGhyZWY9XFxcIiN1c2luZy10aGUtdGF1bnVzLWNsaVxcXCI+VXNpbmcgdGhlIFRhdW51cyBDTEk8L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiI2Jvb3RpbmctdXAtdGhlLWNsaWVudC1zaWRlLXJvdXRlclxcXCI+Qm9vdGluZyB1cCB0aGUgY2xpZW50LXNpZGUgcm91dGVyPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNhZGRpbmctZnVuY3Rpb25hbGl0eS1pbi1hLWNsaWVudC1zaWRlLWNvbnRyb2xsZXJcXFwiPkFkZGluZyBmdW5jdGlvbmFsaXR5IGluIGEgY2xpZW50LXNpZGUgY29udHJvbGxlcjwvYT48L2xpPlxcbjxsaT48YSBocmVmPVxcXCIjY29tcGlsaW5nLXlvdXItY2xpZW50LXNpZGUtamF2YXNjcmlwdFxcXCI+Q29tcGlsaW5nIHlvdXIgY2xpZW50LXNpZGUgSmF2YVNjcmlwdDwvYT48L2xpPlxcbjxsaT48YSBocmVmPVxcXCIjdXNpbmctdGhlLWNsaWVudC1zaWRlLXRhdW51cy1hcGlcXFwiPlVzaW5nIHRoZSBjbGllbnQtc2lkZSBUYXVudXMgQVBJPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNjYWNoaW5nLWFuZC1wcmVmZXRjaGluZ1xcXCI+Q2FjaGluZyBhbmQgUHJlZmV0Y2hpbmc8L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiI3ZlcnNpb25pbmdcXFwiPlZlcnNpb25pbmc8L2E+PC9saT5cXG48L3VsPlxcbjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiN0aGUtc2t5LWlzLXRoZS1saW1pdC1cXFwiPlRoZSBza3kgaXMgdGhlIGxpbWl0ITwvYT48L2xpPlxcbjwvdWw+XFxuPGgxIGlkPVxcXCJob3ctaXQtd29ya3NcXFwiPkhvdyBpdCB3b3JrczwvaDE+XFxuPHA+VGF1bnVzIGZvbGxvd3MgYSBzaW1wbGUgYnV0IDxzdHJvbmc+cHJvdmVuPC9zdHJvbmc+IHNldCBvZiBydWxlcy48L3A+XFxuPHVsPlxcbjxsaT5EZWZpbmUgYSA8Y29kZT5mdW5jdGlvbihtb2RlbCk8L2NvZGU+IGZvciBlYWNoIHlvdXIgdmlld3M8L2xpPlxcbjxsaT5QdXQgdGhlc2Ugdmlld3MgaW4gYm90aCB0aGUgc2VydmVyIGFuZCB0aGUgY2xpZW50PC9saT5cXG48bGk+RGVmaW5lIHJvdXRlcyBmb3IgeW91ciBhcHBsaWNhdGlvbjwvbGk+XFxuPGxpPlB1dCB0aG9zZSByb3V0ZXMgaW4gYm90aCB0aGUgc2VydmVyIGFuZCB0aGUgY2xpZW50PC9saT5cXG48bGk+RW5zdXJlIHJvdXRlIG1hdGNoZXMgd29yayB0aGUgc2FtZSB3YXkgb24gYm90aCBlbmRzPC9saT5cXG48bGk+Q3JlYXRlIHNlcnZlci1zaWRlIGNvbnRyb2xsZXJzIHRoYXQgeWllbGQgdGhlIG1vZGVsIGZvciB5b3VyIHZpZXdzPC9saT5cXG48bGk+Q3JlYXRlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGlmIHlvdSBuZWVkIHRvIGFkZCBjbGllbnQtc2lkZSBmdW5jdGlvbmFsaXR5IHRvIGEgcGFydGljdWxhciB2aWV3PC9saT5cXG48bGk+Rm9yIHRoZSBmaXJzdCByZXF1ZXN0LCBhbHdheXMgcmVuZGVyIHZpZXdzIG9uIHRoZSBzZXJ2ZXItc2lkZTwvbGk+XFxuPGxpPldoZW4gcmVuZGVyaW5nIGEgdmlldyBvbiB0aGUgc2VydmVyLXNpZGUsIGluY2x1ZGUgdGhlIGZ1bGwgbGF5b3V0IGFzIHdlbGwhPC9saT5cXG48bGk+T25jZSB0aGUgY2xpZW50LXNpZGUgY29kZSBraWNrcyBpbiwgPHN0cm9uZz5oaWphY2sgbGluayBjbGlja3M8L3N0cm9uZz4gYW5kIG1ha2UgQUpBWCByZXF1ZXN0cyBpbnN0ZWFkPC9saT5cXG48bGk+V2hlbiB5b3UgZ2V0IHRoZSBKU09OIG1vZGVsIGJhY2ssIHJlbmRlciB2aWV3cyBvbiB0aGUgY2xpZW50LXNpZGU8L2xpPlxcbjxsaT5JZiB0aGUgPGNvZGU+aGlzdG9yeTwvY29kZT4gQVBJIGlzIHVuYXZhaWxhYmxlLCBmYWxsIGJhY2sgdG8gZ29vZCBvbGQgcmVxdWVzdC1yZXNwb25zZS4gPHN0cm9uZz5Eb24mIzM5O3QgY29uZnVzZSB5b3VyIGh1bWFucyB3aXRoIG9ic2N1cmUgaGFzaCByb3V0ZXJzITwvc3Ryb25nPjwvbGk+XFxuPC91bD5cXG48cD5JJiMzOTtsbCBzdGVwIHlvdSB0aHJvdWdoIHRoZXNlLCBidXQgcmF0aGVyIHRoYW4gbG9va2luZyBhdCBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLCBJJiMzOTtsbCB3YWxrIHlvdSB0aHJvdWdoIHRoZSBzdGVwcyB5b3UgbmVlZCB0byB0YWtlIGluIG9yZGVyIHRvIG1ha2UgdGhpcyBmbG93IGhhcHBlbi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgxIGlkPVxcXCJpbnN0YWxsaW5nLXRhdW51c1xcXCI+SW5zdGFsbGluZyBUYXVudXM8L2gxPlxcbjxwPkZpcnN0IG9mZiwgeW91JiMzOTtsbCBuZWVkIHRvIGNob29zZSBhIEhUVFAgc2VydmVyIGZyYW1ld29yayBmb3IgeW91ciBhcHBsaWNhdGlvbi4gQXQgdGhlIG1vbWVudCBUYXVudXMgc3VwcG9ydHMgb25seSBhIGNvdXBsZSBvZiBIVFRQIGZyYW1ld29ya3MsIGJ1dCBtb3JlIG1heSBiZSBhZGRlZCBpZiB0aGV5IGFyZSBwb3B1bGFyIGVub3VnaC48L3A+XFxuPHVsPlxcbjxsaT48YSBocmVmPVxcXCJodHRwOi8vZXhwcmVzc2pzLmNvbVxcXCI+RXhwcmVzczwvYT4sIHRocm91Z2ggPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy90YXVudXMtZXhwcmVzc1xcXCI+dGF1bnVzLWV4cHJlc3M8L2E+PC9saT5cXG48bGk+PGEgaHJlZj1cXFwiaHR0cDovL2hhcGlqcy5jb21cXFwiPkhhcGk8L2E+LCB0aHJvdWdoIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvdGF1bnVzLWhhcGlcXFwiPnRhdW51cy1oYXBpPC9hPiBhbmQgdGhlIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvaGFwaWlmeVxcXCI+aGFwaWlmeTwvYT4gdHJhbnNmb3JtPC9saT5cXG48L3VsPlxcbjxibG9ja3F1b3RlPlxcbjxwPklmIHlvdSYjMzk7cmUgbW9yZSBvZiBhIDxlbT4mcXVvdDtydW1tYWdlIHRocm91Z2ggc29tZW9uZSBlbHNlJiMzOTtzIGNvZGUmcXVvdDs8L2VtPiB0eXBlIG9mIGRldmVsb3BlciwgeW91IG1heSBmZWVsIGNvbWZvcnRhYmxlIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvdGF1bnVzLmlvXFxcIj5nb2luZyB0aHJvdWdoIHRoaXMgd2Vic2l0ZSYjMzk7cyBzb3VyY2UgY29kZTwvYT4sIHdoaWNoIHVzZXMgdGhlIDxhIGhyZWY9XFxcImh0dHA6Ly9oYXBpanMuY29tXFxcIj5IYXBpPC9hPiBmbGF2b3Igb2YgVGF1bnVzLiBBbHRlcm5hdGl2ZWx5IHlvdSBjYW4gbG9vayBhdCB0aGUgc291cmNlIGNvZGUgZm9yIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9wb255Zm9vL3Bvbnlmb29cXFwiPnBvbnlmb28uY29tPC9hPiwgd2hpY2ggaXMgPHN0cm9uZz5hIG1vcmUgYWR2YW5jZWQgdXNlLWNhc2U8L3N0cm9uZz4gdW5kZXIgdGhlIDxhIGhyZWY9XFxcImh0dHA6Ly9leHByZXNzanMuY29tXFxcIj5FeHByZXNzPC9hPiBmbGF2b3IuIE9yLCB5b3UgY291bGQganVzdCBrZWVwIG9uIHJlYWRpbmcgdGhpcyBwYWdlLCB0aGF0JiMzOTtzIG9rYXkgdG9vLjwvcD5cXG48cD5UaGVyZSYjMzk7cyBhbHNvIDxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvZ2VuZXJhdG9yLXRhdW51c1xcXCI+YSBZZW9tYW4gZ2VuZXJhdG9yIG5hbWVkIDxjb2RlPmdlbmVyYXRvci10YXVudXM8L2NvZGU+PC9hPiB5b3UgY291bGQgdXNlIHRvIGdldCBzdGFydGVkLCBpbnN0ZWFkLjwvcD5cXG48L2Jsb2NrcXVvdGU+XFxuPHA+T25jZSB5b3UmIzM5O3ZlIHNldHRsZWQgZm9yIGVpdGhlciA8YSBocmVmPVxcXCJodHRwOi8vZXhwcmVzc2pzLmNvbVxcXCI+RXhwcmVzczwvYT4gb3IgPGEgaHJlZj1cXFwiaHR0cDovL2hhcGlqcy5jb21cXFwiPkhhcGk8L2E+IHlvdSYjMzk7bGwgYmUgYWJsZSB0byBwcm9jZWVkLiBGb3IgdGhlIHB1cnBvc2VzIG9mIHRoaXMgZ3VpZGUsIHdlJiMzOTtsbCB1c2UgPGEgaHJlZj1cXFwiaHR0cDovL2V4cHJlc3Nqcy5jb21cXFwiPkV4cHJlc3M8L2E+LiBTd2l0Y2hpbmcgYmV0d2VlbiBvbmUgb2YgdGhlIGRpZmZlcmVudCBIVFRQIGZsYXZvcnMgaXMgc3RyaWtpbmdseSBlYXN5LCB0aG91Z2guPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwic2V0dGluZy11cC10aGUtc2VydmVyLXNpZGVcXFwiPlNldHRpbmcgdXAgdGhlIHNlcnZlci1zaWRlPC9oND5cXG48cD5OYXR1cmFsbHksIHlvdSYjMzk7bGwgbmVlZCB0byBpbnN0YWxsIGFsbCBvZiB0aGUgZm9sbG93aW5nIG1vZHVsZXMgZnJvbSA8Y29kZT5ucG08L2NvZGU+IHRvIGdldCBzdGFydGVkLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5ta2RpciBnZXR0aW5nLXN0YXJ0ZWRcXG5jZCBnZXR0aW5nLXN0YXJ0ZWRcXG5ucG0gaW5pdFxcbm5wbSBpbnN0YWxsIC0tc2F2ZSB0YXVudXMgdGF1bnVzLWV4cHJlc3MgZXhwcmVzc1xcbjwvY29kZT48L3ByZT5cXG48cD48aW1nIHNyYz1cXFwiaHR0cDovL2kuaW1ndXIuY29tLzRQOHZOZTkucG5nXFxcIiBhbHQ9XFxcIlNjcmVlbnNob3Qgd2l0aCBgbnBtIGluaXRgIG91dHB1dFxcXCI+PC9wPlxcbjxwPkxldCYjMzk7cyBidWlsZCBvdXIgYXBwbGljYXRpb24gc3RlcC1ieS1zdGVwLCBhbmQgSSYjMzk7bGwgd2FsayB5b3UgdGhyb3VnaCB0aGVtIGFzIHdlIGdvIGFsb25nLiBGaXJzdCBvZiBhbGwsIHlvdSYjMzk7bGwgbmVlZCB0aGUgZmFtb3VzIDxjb2RlPmFwcC5qczwvY29kZT4gZmlsZS48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+dG91Y2ggYXBwLmpzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPkl0JiMzOTtzIHByb2JhYmx5IGEgZ29vZCBpZGVhIHRvIHB1dCBzb21ldGhpbmcgaW4geW91ciA8Y29kZT5hcHAuanM8L2NvZGU+IGZpbGUsIGxldCYjMzk7cyBkbyB0aGF0IG5vdy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxudmFyIHRhdW51cyA9IHJlcXVpcmUoJiMzOTt0YXVudXMmIzM5Oyk7XFxudmFyIHRhdW51c0V4cHJlc3MgPSByZXF1aXJlKCYjMzk7dGF1bnVzLWV4cHJlc3MmIzM5Oyk7XFxudmFyIGV4cHJlc3MgPSByZXF1aXJlKCYjMzk7ZXhwcmVzcyYjMzk7KTtcXG52YXIgYXBwID0gZXhwcmVzcygpO1xcbnZhciBvcHRpb25zID0ge307XFxuXFxudGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuYXBwLmxpc3RlbigzMDAwKTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+QWxsIDxjb2RlPnRhdW51cy1leHByZXNzPC9jb2RlPiByZWFsbHkgZG9lcyBpcyBhZGQgYSBidW5jaCBvZiByb3V0ZXMgdG8geW91ciBFeHByZXNzIDxjb2RlPmFwcDwvY29kZT4uIFlvdSBzaG91bGQgbm90ZSB0aGF0IGFueSBtaWRkbGV3YXJlIGFuZCBBUEkgcm91dGVzIHNob3VsZCBwcm9iYWJseSBjb21lIGJlZm9yZSB0aGUgPGNvZGU+dGF1bnVzRXhwcmVzczwvY29kZT4gaW52b2NhdGlvbi4gWW91JiMzOTtsbCBwcm9iYWJseSBiZSB1c2luZyBhIGNhdGNoLWFsbCB2aWV3IHJvdXRlIHRoYXQgcmVuZGVycyBhIDxlbT4mcXVvdDtOb3QgRm91bmQmcXVvdDs8L2VtPiB2aWV3LCBibG9ja2luZyBhbnkgcm91dGluZyBiZXlvbmQgdGhhdCByb3V0ZS48L3A+XFxuPHA+SWYgeW91IHdlcmUgdG8gcnVuIHRoZSBhcHBsaWNhdGlvbiBub3cgeW91IHdvdWxkIGdldCBhIGZyaWVuZGx5IHJlbWluZGVyIGZyb20gVGF1bnVzIGxldHRpbmcgeW91IGtub3cgdGhhdCB5b3UgZm9yZ290IHRvIGRlY2xhcmUgYW55IHZpZXcgcm91dGVzLiBTaWxseSB5b3UhPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPm5vZGUgYXBwXFxuPC9jb2RlPjwvcHJlPlxcbjxwPjxpbWcgc3JjPVxcXCJodHRwOi8vaS5pbWd1ci5jb20vbjhtSDRtTi5wbmdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgb3V0cHV0XFxcIj48L3A+XFxuPHA+VGhlIDxjb2RlPm9wdGlvbnM8L2NvZGU+IG9iamVjdCBwYXNzZWQgdG8gPGNvZGU+dGF1bnVzRXhwcmVzczwvY29kZT4gbGV0JiMzOTtzIHlvdSBjb25maWd1cmUgVGF1bnVzLiBJbnN0ZWFkIG9mIGRpc2N1c3NpbmcgZXZlcnkgc2luZ2xlIGNvbmZpZ3VyYXRpb24gb3B0aW9uIHlvdSBjb3VsZCBzZXQgaGVyZSwgbGV0JiMzOTtzIGRpc2N1c3Mgd2hhdCBtYXR0ZXJzOiB0aGUgPGVtPnJlcXVpcmVkIGNvbmZpZ3VyYXRpb248L2VtPi4gVGhlcmUmIzM5O3MgdHdvIG9wdGlvbnMgdGhhdCB5b3UgbXVzdCBzZXQgaWYgeW91IHdhbnQgeW91ciBUYXVudXMgYXBwbGljYXRpb24gdG8gbWFrZSBhbnkgc2Vuc2UuPC9wPlxcbjx1bD5cXG48bGk+PGNvZGU+cm91dGVzPC9jb2RlPiBzaG91bGQgYmUgYW4gYXJyYXkgb2YgdmlldyByb3V0ZXM8L2xpPlxcbjxsaT48Y29kZT5sYXlvdXQ8L2NvZGU+IHNob3VsZCBiZSBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBzaW5nbGUgPGNvZGU+bW9kZWw8L2NvZGU+IGFyZ3VtZW50IGFuZCByZXR1cm5zIGFuIGVudGlyZSBIVE1MIGRvY3VtZW50PC9saT5cXG48L3VsPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwieW91ci1maXJzdC1yb3V0ZVxcXCI+WW91ciBmaXJzdCByb3V0ZTwvaDQ+XFxuPHA+Um91dGVzIG5lZWQgdG8gYmUgcGxhY2VkIGluIGl0cyBvd24gZGVkaWNhdGVkIG1vZHVsZSwgc28gdGhhdCB5b3UgY2FuIHJldXNlIGl0IGxhdGVyIG9uIDxzdHJvbmc+d2hlbiBzZXR0aW5nIHVwIGNsaWVudC1zaWRlIHJvdXRpbmc8L3N0cm9uZz4uIExldCYjMzk7cyBjcmVhdGUgdGhhdCBtb2R1bGUgYW5kIGFkZCBhIHJvdXRlIHRvIGl0LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj50b3VjaCByb3V0ZXMuanNcXG48L2NvZGU+PC9wcmU+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBbXFxuICB7IHJvdXRlOiAmIzM5Oy8mIzM5OywgYWN0aW9uOiAmIzM5O2hvbWUvaW5kZXgmIzM5OyB9XFxuXTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+RWFjaCBpdGVtIGluIHRoZSBleHBvcnRlZCBhcnJheSBpcyBhIHJvdXRlLiBJbiB0aGlzIGNhc2UsIHdlIG9ubHkgaGF2ZSB0aGUgPGNvZGU+LzwvY29kZT4gcm91dGUgd2l0aCB0aGUgPGNvZGU+aG9tZS9pbmRleDwvY29kZT4gYWN0aW9uLiBUYXVudXMgZm9sbG93cyB0aGUgd2VsbCBrbm93biA8YSBocmVmPVxcXCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbnZlbnRpb25fb3Zlcl9jb25maWd1cmF0aW9uXFxcIj5jb252ZW50aW9uIG92ZXIgY29uZmlndXJhdGlvbiBwYXR0ZXJuPC9hPiwgd2hpY2ggbWFkZSA8YSBocmVmPVxcXCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1J1Ynlfb25fUmFpbHNcXFwiPlJ1Ynkgb24gUmFpbHM8L2E+IGZhbW91cy4gPGVtPk1heWJlIG9uZSBkYXkgVGF1bnVzIHdpbGwgYmUgZmFtb3VzIHRvbyE8L2VtPiBCeSBjb252ZW50aW9uLCBUYXVudXMgd2lsbCBhc3N1bWUgdGhhdCB0aGUgPGNvZGU+aG9tZS9pbmRleDwvY29kZT4gYWN0aW9uIHVzZXMgdGhlIDxjb2RlPmhvbWUvaW5kZXg8L2NvZGU+IGNvbnRyb2xsZXIgYW5kIHJlbmRlcnMgdGhlIDxjb2RlPmhvbWUvaW5kZXg8L2NvZGU+IHZpZXcuIE9mIGNvdXJzZSwgPGVtPmFsbCBvZiB0aGF0IGNhbiBiZSBjaGFuZ2VkIHVzaW5nIGNvbmZpZ3VyYXRpb248L2VtPi48L3A+XFxuPHA+VGltZSB0byBnbyBiYWNrIHRvIDxjb2RlPmFwcC5qczwvY29kZT4gYW5kIHVwZGF0ZSB0aGUgPGNvZGU+b3B0aW9uczwvY29kZT4gb2JqZWN0LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj4mIzM5O3VzZSBzdHJpY3QmIzM5OztcXG5cXG52YXIgdGF1bnVzID0gcmVxdWlyZSgmIzM5O3RhdW51cyYjMzk7KTtcXG52YXIgdGF1bnVzRXhwcmVzcyA9IHJlcXVpcmUoJiMzOTt0YXVudXMtZXhwcmVzcyYjMzk7KTtcXG52YXIgZXhwcmVzcyA9IHJlcXVpcmUoJiMzOTtleHByZXNzJiMzOTspO1xcbnZhciBhcHAgPSBleHByZXNzKCk7XFxudmFyIG9wdGlvbnMgPSB7XFxuICByb3V0ZXM6IHJlcXVpcmUoJiMzOTsuL3JvdXRlcyYjMzk7KVxcbn07XFxuXFxudGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuYXBwLmxpc3RlbigzMDAwKTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+SXQmIzM5O3MgaW1wb3J0YW50IHRvIGtub3cgdGhhdCBpZiB5b3Ugb21pdCB0aGUgY3JlYXRpb24gb2YgYSBjb250cm9sbGVyIHRoZW4gVGF1bnVzIHdpbGwgc2tpcCB0aGF0IHN0ZXAsIGFuZCByZW5kZXIgdGhlIHZpZXcgcGFzc2luZyBpdCB3aGF0ZXZlciB0aGUgZGVmYXVsdCBtb2RlbCBpcyA8ZW0+KG1vcmUgb24gdGhhdCA8YSBocmVmPVxcXCIvYXBpXFxcIj5pbiB0aGUgQVBJIGRvY3VtZW50YXRpb248L2E+LCBidXQgaXQgZGVmYXVsdHMgdG8gPGNvZGU+e308L2NvZGU+KTwvZW0+LjwvcD5cXG48cD5IZXJlJiMzOTtzIHdoYXQgeW91JiMzOTtkIGdldCBpZiB5b3UgYXR0ZW1wdGVkIHRvIHJ1biB0aGUgYXBwbGljYXRpb24gYXQgdGhpcyBwb2ludC48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bm9kZSBhcHAgJmFtcDtcXG5jdXJsIGxvY2FsaG9zdDozMDAwXFxuPC9jb2RlPjwvcHJlPlxcbjxwPjxpbWcgc3JjPVxcXCJodHRwOi8vaS5pbWd1ci5jb20vMDhsbkNlYy5wbmdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgcmVzdWx0c1xcXCI+PC9wPlxcbjxwPlR1cm5zIG91dCB5b3UmIzM5O3JlIG1pc3NpbmcgYSBsb3Qgb2YgdGhpbmdzISBUYXVudXMgaXMgcXVpdGUgbGVuaWVudCBhbmQgaXQmIzM5O2xsIHRyeSBpdHMgYmVzdCB0byBsZXQgeW91IGtub3cgd2hhdCB5b3UgbWlnaHQgYmUgbWlzc2luZywgdGhvdWdoLiBBcHBhcmVudGx5IHlvdSBkb24mIzM5O3QgaGF2ZSBhIGxheW91dCwgYSBzZXJ2ZXItc2lkZSBjb250cm9sbGVyLCBvciBldmVuIGEgdmlldyEgPGVtPlRoYXQmIzM5O3Mgcm91Z2guPC9lbT48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGg0IGlkPVxcXCJjcmVhdGluZy1hLWxheW91dFxcXCI+Q3JlYXRpbmcgYSBsYXlvdXQ8L2g0PlxcbjxwPkxldCYjMzk7cyBhbHNvIGNyZWF0ZSBhIGxheW91dC4gRm9yIHRoZSBwdXJwb3NlcyBvZiBtYWtpbmcgb3VyIHdheSB0aHJvdWdoIHRoaXMgZ3VpZGUsIGl0JiMzOTtsbCBqdXN0IGJlIGEgcGxhaW4gSmF2YVNjcmlwdCBmdW5jdGlvbi48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+dG91Y2ggbGF5b3V0LmpzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPk5vdGUgdGhhdCB0aGUgPGNvZGU+cGFydGlhbDwvY29kZT4gcHJvcGVydHkgaW4gdGhlIDxjb2RlPm1vZGVsPC9jb2RlPiA8ZW0+KGFzIHNlZW4gYmVsb3cpPC9lbT4gaXMgY3JlYXRlZCBvbiB0aGUgZmx5IGFmdGVyIHJlbmRlcmluZyBwYXJ0aWFsIHZpZXdzLiBUaGUgbGF5b3V0IGZ1bmN0aW9uIHdlJiMzOTtsbCBiZSB1c2luZyBoZXJlIGVmZmVjdGl2ZWx5IG1lYW5zIDxlbT4mcXVvdDt1c2UgdGhlIGZvbGxvd2luZyBjb21iaW5hdGlvbiBvZiBwbGFpbiB0ZXh0IGFuZCB0aGUgPHN0cm9uZz4obWF5YmUgSFRNTCk8L3N0cm9uZz4gcGFydGlhbCB2aWV3JnF1b3Q7PC9lbT4uPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1vZGVsKSB7XFxuICByZXR1cm4gJiMzOTtUaGlzIGlzIHRoZSBwYXJ0aWFsOiAmcXVvdDsmIzM5OyArIG1vZGVsLnBhcnRpYWwgKyAmIzM5OyZxdW90OyYjMzk7O1xcbn07XFxuPC9jb2RlPjwvcHJlPlxcbjxwPk9mIGNvdXJzZSwgaWYgeW91IHdlcmUgZGV2ZWxvcGluZyBhIHJlYWwgYXBwbGljYXRpb24sIHRoZW4geW91IHByb2JhYmx5IHdvdWxkbiYjMzk7dCB3YW50IHRvIHdyaXRlIHZpZXdzIGFzIEphdmFTY3JpcHQgZnVuY3Rpb25zIGFzIHRoYXQmIzM5O3MgdW5wcm9kdWN0aXZlLCBjb25mdXNpbmcsIGFuZCBoYXJkIHRvIG1haW50YWluLiBXaGF0IHlvdSBjb3VsZCBkbyBpbnN0ZWFkLCBpcyB1c2UgYSB2aWV3LXJlbmRlcmluZyBlbmdpbmUgdGhhdCBhbGxvd3MgeW91IHRvIGNvbXBpbGUgeW91ciB2aWV3IHRlbXBsYXRlcyBpbnRvIEphdmFTY3JpcHQgZnVuY3Rpb25zLjwvcD5cXG48dWw+XFxuPGxpPjxhIGhyZWY9XFxcImh0dHBzOi8vZ2l0aHViLmNvbS9qYW5sL211c3RhY2hlLmpzXFxcIj5NdXN0YWNoZTwvYT4gaXMgYSB0ZW1wbGF0aW5nIGVuZ2luZSB0aGF0IGNhbiBjb21waWxlIHlvdXIgdmlld3MgaW50byBwbGFpbiBmdW5jdGlvbnMsIHVzaW5nIGEgc3ludGF4IHRoYXQmIzM5O3MgbWluaW1hbGx5IGRpZmZlcmVudCBmcm9tIEhUTUw8L2xpPlxcbjxsaT48YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vamFkZWpzL2phZGVcXFwiPkphZGU8L2E+IGlzIGFub3RoZXIgb3B0aW9uLCBhbmQgaXQgaGFzIGEgdGVyc2Ugc3ludGF4IHdoZXJlIHNwYWNpbmcgbWF0dGVycyBidXQgdGhlcmUmIzM5O3Mgbm8gY2xvc2luZyB0YWdzPC9saT5cXG48bGk+VGhlcmUmIzM5O3MgbWFueSBtb3JlIGFsdGVybmF0aXZlcyBsaWtlIDxhIGhyZWY9XFxcImh0dHA6Ly9tb3ppbGxhLmdpdGh1Yi5pby9udW5qdWNrcy9cXFwiPk1vemlsbGEmIzM5O3MgTnVuanVja3M8L2E+LCA8YSBocmVmPVxcXCJodHRwOi8vaGFuZGxlYmFyc2pzLmNvbS9cXFwiPkhhbmRsZWJhcnM8L2E+LCBhbmQgPGEgaHJlZj1cXFwiaHR0cDovL3d3dy5lbWJlZGRlZGpzLmNvbS9cXFwiPkVKUzwvYT4uPC9saT5cXG48L3VsPlxcbjxwPlJlbWVtYmVyIHRvIGFkZCB0aGUgPGNvZGU+bGF5b3V0PC9jb2RlPiB1bmRlciB0aGUgPGNvZGU+b3B0aW9uczwvY29kZT4gb2JqZWN0IHBhc3NlZCB0byA8Y29kZT50YXVudXNFeHByZXNzPC9jb2RlPiE8L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxudmFyIHRhdW51cyA9IHJlcXVpcmUoJiMzOTt0YXVudXMmIzM5Oyk7XFxudmFyIHRhdW51c0V4cHJlc3MgPSByZXF1aXJlKCYjMzk7dGF1bnVzLWV4cHJlc3MmIzM5Oyk7XFxudmFyIGV4cHJlc3MgPSByZXF1aXJlKCYjMzk7ZXhwcmVzcyYjMzk7KTtcXG52YXIgYXBwID0gZXhwcmVzcygpO1xcbnZhciBvcHRpb25zID0ge1xcbiAgcm91dGVzOiByZXF1aXJlKCYjMzk7Li9yb3V0ZXMmIzM5OyksXFxuICBsYXlvdXQ6IHJlcXVpcmUoJiMzOTsuL2xheW91dCYjMzk7KVxcbn07XFxuXFxudGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuYXBwLmxpc3RlbigzMDAwKTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+SGVyZSYjMzk7cyB3aGF0IHlvdSYjMzk7ZCBnZXQgaWYgeW91IHJhbiB0aGUgYXBwbGljYXRpb24gYXQgdGhpcyBwb2ludC48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bm9kZSBhcHAgJmFtcDtcXG5jdXJsIGxvY2FsaG9zdDozMDAwXFxuPC9jb2RlPjwvcHJlPlxcbjxwPjxpbWcgc3JjPVxcXCJodHRwOi8vaS5pbWd1ci5jb20vd1VibkN5ay5wbmdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgb3V0cHV0XFxcIj48L3A+XFxuPHA+QXQgdGhpcyBwb2ludCB3ZSBoYXZlIGEgbGF5b3V0LCBidXQgd2UmIzM5O3JlIHN0aWxsIG1pc3NpbmcgdGhlIHBhcnRpYWwgdmlldyBhbmQgdGhlIHNlcnZlci1zaWRlIGNvbnRyb2xsZXIuIFdlIGNhbiBkbyB3aXRob3V0IHRoZSBjb250cm9sbGVyLCBidXQgaGF2aW5nIG5vIHZpZXdzIGlzIGtpbmQgb2YgcG9pbnRsZXNzIHdoZW4geW91JiMzOTtyZSB0cnlpbmcgdG8gZ2V0IGFuIE1WQyBlbmdpbmUgdXAgYW5kIHJ1bm5pbmcsIHJpZ2h0PzwvcD5cXG48cD5Zb3UmIzM5O2xsIGZpbmQgdG9vbHMgcmVsYXRlZCB0byB2aWV3IHRlbXBsYXRpbmcgaW4gdGhlIDxhIGhyZWY9XFxcIi9jb21wbGVtZW50c1xcXCI+Y29tcGxlbWVudGFyeSBtb2R1bGVzIHNlY3Rpb248L2E+LiBJZiB5b3UgZG9uJiMzOTt0IHByb3ZpZGUgYSA8Y29kZT5sYXlvdXQ8L2NvZGU+IHByb3BlcnR5IGF0IGFsbCwgVGF1bnVzIHdpbGwgcmVuZGVyIHlvdXIgbW9kZWwgaW4gYSByZXNwb25zZSBieSB3cmFwcGluZyBpdCBpbiA8Y29kZT4mbHQ7cHJlJmd0OzwvY29kZT4gYW5kIDxjb2RlPiZsdDtjb2RlJmd0OzwvY29kZT4gdGFncywgd2hpY2ggbWF5IGFpZCB5b3Ugd2hlbiBnZXR0aW5nIHN0YXJ0ZWQuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwidXNpbmctamFkZS1hcy15b3VyLXZpZXctZW5naW5lXFxcIj5Vc2luZyBKYWRlIGFzIHlvdXIgdmlldyBlbmdpbmU8L2g0PlxcbjxwPkxldCYjMzk7cyBnbyBhaGVhZCBhbmQgdXNlIEphZGUgYXMgdGhlIHZpZXctcmVuZGVyaW5nIGVuZ2luZSBvZiBjaG9pY2UgZm9yIG91ciB2aWV3cy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bWtkaXIgLXAgdmlld3MvaG9tZVxcbnRvdWNoIHZpZXdzL2hvbWUvaW5kZXguamFkZVxcbjwvY29kZT48L3ByZT5cXG48cD5TaW5jZSB3ZSYjMzk7cmUganVzdCBnZXR0aW5nIHN0YXJ0ZWQsIHRoZSB2aWV3IHdpbGwganVzdCBoYXZlIHNvbWUgYmFzaWMgc3RhdGljIGNvbnRlbnQsIGFuZCB0aGF0JiMzOTtzIGl0LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWphZGVcXFwiPnAgSGVsbG8gVGF1bnVzIVxcbjwvY29kZT48L3ByZT5cXG48cD5OZXh0IHlvdSYjMzk7bGwgd2FudCB0byBjb21waWxlIHRoZSB2aWV3IGludG8gYSBmdW5jdGlvbi4gVG8gZG8gdGhhdCB5b3UgY2FuIHVzZSA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvamFkdW1cXFwiPmphZHVtPC9hPiwgYSBzcGVjaWFsaXplZCBKYWRlIGNvbXBpbGVyIHRoYXQgcGxheXMgd2VsbCB3aXRoIFRhdW51cyBieSBiZWluZyBhd2FyZSBvZiA8Y29kZT5yZXF1aXJlPC9jb2RlPiBzdGF0ZW1lbnRzLCBhbmQgdGh1cyBzYXZpbmcgYnl0ZXMgd2hlbiBpdCBjb21lcyB0byBjbGllbnQtc2lkZSByZW5kZXJpbmcuIExldCYjMzk7cyBpbnN0YWxsIGl0IGdsb2JhbGx5LCBmb3IgdGhlIHNha2Ugb2YgdGhpcyBleGVyY2lzZSA8ZW0+KHlvdSBzaG91bGQgaW5zdGFsbCBpdCBsb2NhbGx5IHdoZW4geW91JiMzOTtyZSBkZXZlbG9waW5nIGEgcmVhbCBhcHBsaWNhdGlvbik8L2VtPi48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bnBtIGluc3RhbGwgLS1nbG9iYWwgamFkdW1cXG48L2NvZGU+PC9wcmU+XFxuPHA+VG8gY29tcGlsZSBldmVyeSB2aWV3IGluIHRoZSA8Y29kZT52aWV3czwvY29kZT4gZGlyZWN0b3J5IGludG8gZnVuY3Rpb25zIHRoYXQgd29yayB3ZWxsIHdpdGggVGF1bnVzLCB5b3UgY2FuIHVzZSB0aGUgY29tbWFuZCBiZWxvdy4gVGhlIDxjb2RlPi0tb3V0cHV0PC9jb2RlPiBmbGFnIGluZGljYXRlcyB3aGVyZSB5b3Ugd2FudCB0aGUgdmlld3MgdG8gYmUgcGxhY2VkLiBXZSBjaG9zZSB0byB1c2UgPGNvZGU+LmJpbjwvY29kZT4gYmVjYXVzZSB0aGF0JiMzOTtzIHdoZXJlIFRhdW51cyBleHBlY3RzIHlvdXIgY29tcGlsZWQgdmlld3MgdG8gYmUgYnkgZGVmYXVsdC4gQnV0IHNpbmNlIFRhdW51cyBmb2xsb3dzIHRoZSA8YSBocmVmPVxcXCJodHRwOi8vcG9ueWZvby5jb20vc3RvcC1icmVha2luZy10aGUtd2ViXFxcIj5jb252ZW50aW9uIG92ZXIgY29uZmlndXJhdGlvbjwvYT4gYXBwcm9hY2gsIHlvdSBjb3VsZCBjaGFuZ2UgdGhhdCBpZiB5b3Ugd2FudGVkIHRvLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5qYWR1bSB2aWV3cy8qKiAtLW91dHB1dCAuYmluXFxuPC9jb2RlPjwvcHJlPlxcbjxwPkNvbmdyYXR1bGF0aW9ucyEgWW91ciBmaXJzdCB2aWV3IGlzIG5vdyBvcGVyYXRpb25hbCBhbmQgYnVpbHQgdXNpbmcgYSBmdWxsLWZsZWRnZWQgdGVtcGxhdGluZyBlbmdpbmUhIEFsbCB0aGF0JiMzOTtzIGxlZnQgaXMgZm9yIHlvdSB0byBydW4gdGhlIGFwcGxpY2F0aW9uIGFuZCB2aXNpdCBpdCBvbiBwb3J0IDxjb2RlPjMwMDA8L2NvZGU+LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5ub2RlIGFwcCAmYW1wO1xcbm9wZW4gaHR0cDovL2xvY2FsaG9zdDozMDAwXFxuPC9jb2RlPjwvcHJlPlxcbjxwPjxpbWcgc3JjPVxcXCJodHRwOi8vaS5pbWd1ci5jb20vemphSllDcS5wbmdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgb3V0cHV0XFxcIj48L3A+XFxuPHA+R3JhbnRlZCwgeW91IHNob3VsZCA8ZW0+cHJvYmFibHk8L2VtPiBtb3ZlIHRoZSBsYXlvdXQgaW50byBhIEphZGUgPGVtPihhbnkgdmlldyBlbmdpbmUgd2lsbCBkbyk8L2VtPiB0ZW1wbGF0ZSBhcyB3ZWxsLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDQgaWQ9XFxcInRocm93aW5nLWluLWEtY29udHJvbGxlclxcXCI+VGhyb3dpbmcgaW4gYSBjb250cm9sbGVyPC9oND5cXG48cD5Db250cm9sbGVycyBhcmUgaW5kZWVkIG9wdGlvbmFsLCBidXQgYW4gYXBwbGljYXRpb24gdGhhdCByZW5kZXJzIGV2ZXJ5IHZpZXcgdXNpbmcgdGhlIHNhbWUgbW9kZWwgd29uJiMzOTt0IGdldCB5b3UgdmVyeSBmYXIuIENvbnRyb2xsZXJzIGFsbG93IHlvdSB0byBoYW5kbGUgdGhlIHJlcXVlc3QgYW5kIHB1dCB0b2dldGhlciB0aGUgbW9kZWwgdG8gYmUgdXNlZCB3aGVuIHNlbmRpbmcgYSByZXNwb25zZS4gQ29udHJhcnkgdG8gd2hhdCBtb3N0IGZyYW1ld29ya3MgcHJvcG9zZSwgVGF1bnVzIGV4cGVjdHMgZXZlcnkgYWN0aW9uIHRvIGhhdmUgaXRzIG93biBpbmRpdmlkdWFsIGNvbnRyb2xsZXIuIFNpbmNlIE5vZGUuanMgbWFrZXMgaXQgZWFzeSB0byBpbXBvcnQgY29tcG9uZW50cywgdGhpcyBzZXR1cCBoZWxwcyB5b3Uga2VlcCB5b3VyIGNvZGUgbW9kdWxhciB3aGlsZSBzdGlsbCBiZWluZyBhYmxlIHRvIHJldXNlIGxvZ2ljIGJ5IHNoYXJpbmcgbW9kdWxlcyBhY3Jvc3MgZGlmZmVyZW50IGNvbnRyb2xsZXJzLiBMZXQmIzM5O3MgY3JlYXRlIGEgY29udHJvbGxlciBmb3IgdGhlIDxjb2RlPmhvbWUvdmlldzwvY29kZT4gYWN0aW9uLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5ta2RpciAtcCBjb250cm9sbGVycy9ob21lXFxudG91Y2ggY29udHJvbGxlcnMvaG9tZS9pbmRleC5qc1xcbjwvY29kZT48L3ByZT5cXG48cD5UaGUgY29udHJvbGxlciBtb2R1bGUgc2hvdWxkIG1lcmVseSBleHBvcnQgYSBmdW5jdGlvbi4gPGVtPlN0YXJ0ZWQgbm90aWNpbmcgdGhlIHBhdHRlcm4/PC9lbT4gVGhlIHNpZ25hdHVyZSBmb3IgdGhlIGNvbnRyb2xsZXIgaXMgdGhlIHNhbWUgc2lnbmF0dXJlIGFzIHRoYXQgb2YgYW55IG90aGVyIG1pZGRsZXdhcmUgcGFzc2VkIHRvIDxhIGhyZWY9XFxcImh0dHA6Ly9leHByZXNzanMuY29tXFxcIj5FeHByZXNzPC9hPiA8ZW0+KG9yIGFueSByb3V0ZSBoYW5kbGVyIHBhc3NlZCB0byA8YSBocmVmPVxcXCJodHRwOi8vaGFwaWpzLmNvbVxcXCI+SGFwaTwvYT4gaW4gdGhlIGNhc2Ugb2YgPGNvZGU+dGF1bnVzLWhhcGk8L2NvZGU+KTwvZW0+LjwvcD5cXG48cD5BcyB5b3UgbWF5IGhhdmUgbm90aWNlZCBpbiB0aGUgZXhhbXBsZXMgc28gZmFyLCB5b3UgaGF2ZW4mIzM5O3QgZXZlbiBzZXQgYSBkb2N1bWVudCB0aXRsZSBmb3IgeW91ciBIVE1MIHBhZ2VzISBUdXJucyBvdXQsIHRoZXJlJiMzOTtzIGEgZmV3IG1vZGVsIHByb3BlcnRpZXMgPGVtPih2ZXJ5IGZldyk8L2VtPiB0aGF0IFRhdW51cyBpcyBhd2FyZSBvZi4gT25lIG9mIHRob3NlIGlzIHRoZSA8Y29kZT50aXRsZTwvY29kZT4gcHJvcGVydHksIGFuZCBpdCYjMzk7bGwgYmUgdXNlZCB0byBjaGFuZ2UgdGhlIDxjb2RlPmRvY3VtZW50LnRpdGxlPC9jb2RlPiBpbiB5b3VyIHBhZ2VzIHdoZW4gbmF2aWdhdGluZyB0aHJvdWdoIHRoZSBjbGllbnQtc2lkZS4gS2VlcCBpbiBtaW5kIHRoYXQgYW55dGhpbmcgdGhhdCYjMzk7cyBub3QgaW4gdGhlIDxjb2RlPm1vZGVsPC9jb2RlPiBwcm9wZXJ0eSB3b24mIzM5O3QgYmUgdHJhc21pdHRlZCB0byB0aGUgY2xpZW50LCBhbmQgd2lsbCBqdXN0IGJlIGFjY2Vzc2libGUgdG8gdGhlIGxheW91dC48L3A+XFxuPHA+SGVyZSBpcyBvdXIgbmV3ZmFuZ2xlZCA8Y29kZT5ob21lL2luZGV4PC9jb2RlPiBjb250cm9sbGVyLiBBcyB5b3UmIzM5O2xsIG5vdGljZSwgaXQgZG9lc24mIzM5O3QgZGlzcnVwdCBhbnkgb2YgdGhlIHR5cGljYWwgRXhwcmVzcyBleHBlcmllbmNlLCBidXQgbWVyZWx5IGJ1aWxkcyB1cG9uIGl0LiBXaGVuIDxjb2RlPm5leHQ8L2NvZGU+IGlzIGNhbGxlZCwgdGhlIFRhdW51cyB2aWV3LXJlbmRlcmluZyBoYW5kbGVyIHdpbGwga2ljayBpbiwgYW5kIHJlbmRlciB0aGUgdmlldyB1c2luZyB0aGUgaW5mb3JtYXRpb24gdGhhdCB3YXMgYXNzaWduZWQgdG8gPGNvZGU+cmVzLnZpZXdNb2RlbDwvY29kZT4uPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XFxuICByZXMudmlld01vZGVsID0ge1xcbiAgICBtb2RlbDoge1xcbiAgICAgIHRpdGxlOiAmIzM5O1dlbGNvbWUgSG9tZSwgVGF1bnVzISYjMzk7XFxuICAgIH1cXG4gIH07XFxuICBuZXh0KCk7XFxufTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+T2YgY291cnNlLCByZWx5aW5nIG9uIHRoZSBjbGllbnQtc2lkZSBjaGFuZ2VzIHRvIHlvdXIgcGFnZSBpbiBvcmRlciB0byBzZXQgdGhlIHZpZXcgdGl0bGUgPGVtPndvdWxkbiYjMzk7dCBiZSBwcm9ncmVzc2l2ZTwvZW0+LCBhbmQgdGh1cyA8YSBocmVmPVxcXCJodHRwOi8vcG9ueWZvby5jb20vc3RvcC1icmVha2luZy10aGUtd2ViXFxcIj5pdCB3b3VsZCBiZSByZWFsbHksIDxlbT5yZWFsbHk8L2VtPiBiYWQ8L2E+LiBXZSBzaG91bGQgdXBkYXRlIHRoZSBsYXlvdXQgdG8gdXNlIHdoYXRldmVyIDxjb2RlPnRpdGxlPC9jb2RlPiBoYXMgYmVlbiBwYXNzZWQgdG8gdGhlIG1vZGVsLiBJbiBmYWN0LCBsZXQmIzM5O3MgZ28gYmFjayB0byB0aGUgZHJhd2luZyBib2FyZCBhbmQgbWFrZSB0aGUgbGF5b3V0IGludG8gYSBKYWRlIHRlbXBsYXRlITwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5ybSBsYXlvdXQuanNcXG50b3VjaCB2aWV3cy9sYXlvdXQuamFkZVxcbmphZHVtIHZpZXdzLyoqIC0tb3V0cHV0IC5iaW5cXG48L2NvZGU+PC9wcmU+XFxuPHA+WW91IHNob3VsZCBhbHNvIHJlbWVtYmVyIHRvIHVwZGF0ZSB0aGUgPGNvZGU+YXBwLmpzPC9jb2RlPiBtb2R1bGUgb25jZSBhZ2FpbiE8L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxudmFyIHRhdW51cyA9IHJlcXVpcmUoJiMzOTt0YXVudXMmIzM5Oyk7XFxudmFyIHRhdW51c0V4cHJlc3MgPSByZXF1aXJlKCYjMzk7dGF1bnVzLWV4cHJlc3MmIzM5Oyk7XFxudmFyIGV4cHJlc3MgPSByZXF1aXJlKCYjMzk7ZXhwcmVzcyYjMzk7KTtcXG52YXIgYXBwID0gZXhwcmVzcygpO1xcbnZhciBvcHRpb25zID0ge1xcbiAgcm91dGVzOiByZXF1aXJlKCYjMzk7Li9yb3V0ZXMmIzM5OyksXFxuICBsYXlvdXQ6IHJlcXVpcmUoJiMzOTsuLy5iaW4vdmlld3MvbGF5b3V0JiMzOTspXFxufTtcXG5cXG50YXVudXNFeHByZXNzKHRhdW51cywgYXBwLCBvcHRpb25zKTtcXG5hcHAubGlzdGVuKDMwMDApO1xcbjwvY29kZT48L3ByZT5cXG48cD5UaGUgPGNvZGU+IT08L2NvZGU+IHN5bnRheCBiZWxvdyBtZWFucyB0aGF0IHdoYXRldmVyIGlzIGluIHRoZSB2YWx1ZSBhc3NpZ25lZCB0byB0aGUgZWxlbWVudCB3b24mIzM5O3QgYmUgZXNjYXBlZC4gVGhhdCYjMzk7cyBva2F5IGJlY2F1c2UgPGNvZGU+cGFydGlhbDwvY29kZT4gaXMgYSB2aWV3IHdoZXJlIEphZGUgZXNjYXBlZCBhbnl0aGluZyB0aGF0IG5lZWRlZCBlc2NhcGluZywgYnV0IHdlIHdvdWxkbiYjMzk7dCB3YW50IEhUTUwgdGFncyB0byBiZSBlc2NhcGVkITwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWphZGVcXFwiPnRpdGxlPW1vZGVsLnRpdGxlXFxubWFpbiE9cGFydGlhbFxcbjwvY29kZT48L3ByZT5cXG48cD5CeSB0aGUgd2F5LCBkaWQgeW91IGtub3cgdGhhdCA8Y29kZT4mbHQ7aHRtbCZndDs8L2NvZGU+LCA8Y29kZT4mbHQ7aGVhZCZndDs8L2NvZGU+LCBhbmQgPGNvZGU+Jmx0O2JvZHkmZ3Q7PC9jb2RlPiBhcmUgYWxsIG9wdGlvbmFsIGluIEhUTUwgNSwgYW5kIHRoYXQgeW91IGNhbiBzYWZlbHkgb21pdCB0aGVtIGluIHlvdXIgSFRNTD8gT2YgY291cnNlLCByZW5kZXJpbmcgZW5naW5lcyB3aWxsIHN0aWxsIGluc2VydCB0aG9zZSBlbGVtZW50cyBhdXRvbWF0aWNhbGx5IGludG8gdGhlIERPTSBmb3IgeW91ISA8ZW0+SG93IGNvb2wgaXMgdGhhdD88L2VtPjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5ub2RlIGFwcFxcbjwvY29kZT48L3ByZT5cXG48cD48aW1nIHNyYz1cXFwiaHR0cDovL2kuaW1ndXIuY29tL052RVd4OXoucG5nXFxcIiBhbHQ9XFxcIlNjcmVlbnNob3Qgd2l0aCBgbm9kZSBhcHBgIG91dHB1dFxcXCI+PC9wPlxcbjxwPllvdSBjYW4gbm93IHZpc2l0IDxjb2RlPmxvY2FsaG9zdDozMDAwPC9jb2RlPiB3aXRoIHlvdXIgZmF2b3JpdGUgd2ViIGJyb3dzZXIgYW5kIHlvdSYjMzk7bGwgbm90aWNlIHRoYXQgdGhlIHZpZXcgcmVuZGVycyBhcyB5b3UmIzM5O2QgZXhwZWN0LiBUaGUgdGl0bGUgd2lsbCBiZSBwcm9wZXJseSBzZXQsIGFuZCBhIDxjb2RlPiZsdDttYWluJmd0OzwvY29kZT4gZWxlbWVudCB3aWxsIGhhdmUgdGhlIGNvbnRlbnRzIG9mIHlvdXIgdmlldy48L3A+XFxuPHA+PGltZyBzcmM9XFxcImh0dHA6Ly9pLmltZ3VyLmNvbS9MZ1pSRm41LnBuZ1xcXCIgYWx0PVxcXCJTY3JlZW5zaG90IHdpdGggYXBwbGljYXRpb24gcnVubmluZyBvbiBHb29nbGUgQ2hyb21lXFxcIj48L3A+XFxuPHA+VGhhdCYjMzk7cyBpdCwgbm93IHlvdXIgdmlldyBoYXMgYSB0aXRsZS4gT2YgY291cnNlLCB0aGVyZSYjMzk7cyBub3RoaW5nIHN0b3BwaW5nIHlvdSBmcm9tIGFkZGluZyBkYXRhYmFzZSBjYWxscyB0byBmZXRjaCBiaXRzIGFuZCBwaWVjZXMgb2YgdGhlIG1vZGVsIGJlZm9yZSBpbnZva2luZyA8Y29kZT5uZXh0PC9jb2RlPiB0byByZW5kZXIgdGhlIHZpZXcuPC9wPlxcbjxwPlRoZW4gdGhlcmUmIzM5O3MgYWxzbyB0aGUgY2xpZW50LXNpZGUgYXNwZWN0IG9mIHNldHRpbmcgdXAgVGF1bnVzLiBMZXQmIzM5O3Mgc2V0IGl0IHVwIGFuZCBzZWUgaG93IGl0IG9wZW5zIHVwIG91ciBwb3NzaWJpbGl0aWVzLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDEgaWQ9XFxcInRhdW51cy1pbi10aGUtY2xpZW50XFxcIj5UYXVudXMgaW4gdGhlIGNsaWVudDwvaDE+XFxuPHA+WW91IGFscmVhZHkga25vdyBob3cgdG8gc2V0IHVwIHRoZSBiYXNpY3MgZm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZywgYW5kIHlvdSBrbm93IHRoYXQgeW91IHNob3VsZCA8YSBocmVmPVxcXCIvYXBpXFxcIj5jaGVjayBvdXQgdGhlIEFQSSBkb2N1bWVudGF0aW9uPC9hPiB0byBnZXQgYSBtb3JlIHRob3JvdWdoIHVuZGVyc3RhbmRpbmcgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2Ugb24gVGF1bnVzLCBhbmQgd2hhdCBpdCBlbmFibGVzIHlvdSB0byBkby48L3A+XFxuPHA+VGhlIHdheSBUYXVudXMgd29ya3Mgb24gdGhlIGNsaWVudC1zaWRlIGlzIHNvIHRoYXQgb25jZSB5b3Ugc2V0IGl0IHVwLCBpdCB3aWxsIGhpamFjayBsaW5rIGNsaWNrcyBhbmQgdXNlIEFKQVggdG8gZmV0Y2ggbW9kZWxzIGFuZCByZW5kZXIgdGhvc2Ugdmlld3MgaW4gdGhlIGNsaWVudC4gSWYgdGhlIEphdmFTY3JpcHQgY29kZSBmYWlscyB0byBsb2FkLCA8ZW0+b3IgaWYgaXQgaGFzbiYjMzk7dCBsb2FkZWQgeWV0IGR1ZSB0byBhIHNsb3cgY29ubmVjdGlvbiBzdWNoIGFzIHRob3NlIGluIHVuc3RhYmxlIG1vYmlsZSBuZXR3b3JrczwvZW0+LCB0aGUgcmVndWxhciBsaW5rIHdvdWxkIGJlIGZvbGxvd2VkIGluc3RlYWQgYW5kIG5vIGhhcm0gd291bGQgYmUgdW5sZWFzaGVkIHVwb24gdGhlIGh1bWFuLCBleGNlcHQgdGhleSB3b3VsZCBnZXQgYSBzbGlnaHRseSBsZXNzIGZhbmN5IGV4cGVyaWVuY2UuPC9wPlxcbjxwPlNldHRpbmcgdXAgdGhlIGNsaWVudC1zaWRlIGludm9sdmVzIGEgZmV3IGRpZmZlcmVudCBzdGVwcy4gRmlyc3RseSwgd2UmIzM5O2xsIGhhdmUgdG8gY29tcGlsZSB0aGUgYXBwbGljYXRpb24mIzM5O3Mgd2lyaW5nIDxlbT4odGhlIHJvdXRlcyBhbmQgSmF2YVNjcmlwdCB2aWV3IGZ1bmN0aW9ucyk8L2VtPiBpbnRvIHNvbWV0aGluZyB0aGUgYnJvd3NlciB1bmRlcnN0YW5kcy4gVGhlbiwgeW91JiMzOTtsbCBoYXZlIHRvIG1vdW50IFRhdW51cyBvbiB0aGUgY2xpZW50LXNpZGUsIHBhc3NpbmcgdGhlIHdpcmluZyBzbyB0aGF0IGl0IGtub3dzIHdoaWNoIHJvdXRlcyBpdCBzaG91bGQgcmVzcG9uZCB0bywgYW5kIHdoaWNoIG90aGVycyBpdCBzaG91bGQgbWVyZWx5IGlnbm9yZS4gT25jZSB0aGF0JiMzOTtzIG91dCBvZiB0aGUgd2F5LCBjbGllbnQtc2lkZSByb3V0aW5nIHdvdWxkIGJlIHNldCB1cC48L3A+XFxuPHA+QXMgc3VnYXIgY29hdGluZyBvbiB0b3Agb2YgdGhhdCwgeW91IG1heSBhZGQgY2xpZW50LXNpZGUgZnVuY3Rpb25hbGl0eSB1c2luZyBjb250cm9sbGVycy4gVGhlc2UgY29udHJvbGxlcnMgd291bGQgYmUgZXhlY3V0ZWQgZXZlbiBpZiB0aGUgdmlldyB3YXMgcmVuZGVyZWQgb24gdGhlIHNlcnZlci1zaWRlLiBUaGV5IGNhbiBhY2Nlc3MgdGhlIFRhdW51cyBBUEkgZGlyZWN0bHksIGluIGNhc2UgeW91IG5lZWQgdG8gbmF2aWdhdGUgdG8gYW5vdGhlciB2aWV3IGluIHNvbWUgd2F5IG90aGVyIHRoYW4gYnkgaGF2aW5nIGh1bWFucyBjbGljayBvbiBhbmNob3IgdGFncy4gVGhlIEFQSSwgYXMgeW91JiMzOTtsbCBsZWFybiwgd2lsbCBhbHNvIGxldCB5b3UgcmVuZGVyIHBhcnRpYWwgdmlld3MgdXNpbmcgdGhlIHBvd2VyZnVsIFRhdW51cyBlbmdpbmUsIGxpc3RlbiBmb3IgZXZlbnRzIHRoYXQgbWF5IG9jY3VyIGF0IGtleSBzdGFnZXMgb2YgdGhlIHZpZXctcmVuZGVyaW5nIHByb2Nlc3MsIGFuZCBldmVuIGludGVyY2VwdCBBSkFYIHJlcXVlc3RzIGJsb2NraW5nIHRoZW0gYmVmb3JlIHRoZXkgZXZlciBoYXBwZW4uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwidXNpbmctdGhlLXRhdW51cy1jbGlcXFwiPlVzaW5nIHRoZSBUYXVudXMgQ0xJPC9oND5cXG48cD5UYXVudXMgY29tZXMgd2l0aCBhIENMSSB0aGF0IGNhbiBiZSB1c2VkIHRvIHdpcmUgeW91ciBOb2RlLmpzIHJvdXRlcyBhbmQgdmlld3MgaW50byB0aGUgY2xpZW50LXNpZGUuIFRoZSBzYW1lIENMSSBjYW4gYmUgdXNlZCB0byB3aXJlIHVwIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVycyBhcyB3ZWxsLiBUaGUgbWFpbiByZWFzb24gd2h5IHRoZSBUYXVudXMgQ0xJIGV4aXN0cyBpcyBzbyB0aGF0IHlvdSBkb24mIzM5O3QgaGF2ZSB0byA8Y29kZT5yZXF1aXJlPC9jb2RlPiBldmVyeSBzaW5nbGUgdmlldyBhbmQgY29udHJvbGxlciwgdW5kb2luZyBhIGxvdCBvZiB0aGUgd29yayB0aGF0IHdhcyBwdXQgaW50byBjb2RlIHJldXNlLiBKdXN0IGxpa2Ugd2UgZGlkIHdpdGggPGNvZGU+amFkdW08L2NvZGU+IGVhcmxpZXIsIHdlJiMzOTtsbCBpbnN0YWxsIHRoZSA8Y29kZT50YXVudXM8L2NvZGU+IENMSSBnbG9iYWxseSBmb3IgdGhlIHNha2Ugb2YgZXhlcmNpc2luZywgYnV0IHdlIHVuZGVyc3RhbmQgdGhhdCByZWx5aW5nIG9uIGdsb2JhbGx5IGluc3RhbGxlZCBtb2R1bGVzIGlzIGluc3VmZmljaWVudCBmb3IgcHJvZHVjdGlvbi1ncmFkZSBhcHBsaWNhdGlvbnMuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPm5wbSBpbnN0YWxsIC0tZ2xvYmFsIHRhdW51c1xcbjwvY29kZT48L3ByZT5cXG48cD5CZWZvcmUgeW91IGNhbiB1c2UgdGhlIENMSSwgeW91IHNob3VsZCBtb3ZlIHRoZSByb3V0ZSBkZWZpbml0aW9ucyB0byA8Y29kZT5jb250cm9sbGVycy9yb3V0ZXMuanM8L2NvZGU+LiBUaGF0JiMzOTtzIHdoZXJlIFRhdW51cyBleHBlY3RzIHRoZW0gdG8gYmUuIElmIHlvdSB3YW50IHRvIHBsYWNlIHRoZW0gc29tZXRoaW5nIGVsc2UsIDxhIGhyZWY9XFxcIi9hcGlcXFwiPnRoZSBBUEkgZG9jdW1lbnRhdGlvbiBjYW4gaGVscCB5b3U8L2E+LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5tdiByb3V0ZXMuanMgY29udHJvbGxlcnMvcm91dGVzLmpzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPlNpbmNlIHlvdSBtb3ZlZCB0aGUgcm91dGVzIHlvdSBzaG91bGQgYWxzbyB1cGRhdGUgdGhlIDxjb2RlPnJlcXVpcmU8L2NvZGU+IHN0YXRlbWVudCBpbiB0aGUgPGNvZGU+YXBwLmpzPC9jb2RlPiBtb2R1bGUuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbnZhciB0YXVudXMgPSByZXF1aXJlKCYjMzk7dGF1bnVzJiMzOTspO1xcbnZhciB0YXVudXNFeHByZXNzID0gcmVxdWlyZSgmIzM5O3RhdW51cy1leHByZXNzJiMzOTspO1xcbnZhciBleHByZXNzID0gcmVxdWlyZSgmIzM5O2V4cHJlc3MmIzM5Oyk7XFxudmFyIGFwcCA9IGV4cHJlc3MoKTtcXG52YXIgb3B0aW9ucyA9IHtcXG4gIHJvdXRlczogcmVxdWlyZSgmIzM5Oy4vY29udHJvbGxlcnMvcm91dGVzJiMzOTspLFxcbiAgbGF5b3V0OiByZXF1aXJlKCYjMzk7Li8uYmluL3ZpZXdzL2xheW91dCYjMzk7KVxcbn07XFxuXFxudGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuYXBwLmxpc3RlbigzMDAwKTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+VGhlIENMSSBpcyB0ZXJzZSBpbiBib3RoIGl0cyBpbnB1dHMgYW5kIGl0cyBvdXRwdXRzLiBJZiB5b3UgcnVuIGl0IHdpdGhvdXQgYW55IGFyZ3VtZW50cyBpdCYjMzk7bGwgcHJpbnQgb3V0IHRoZSB3aXJpbmcgbW9kdWxlLCBhbmQgaWYgeW91IHdhbnQgdG8gcGVyc2lzdCBpdCB5b3Ugc2hvdWxkIHByb3ZpZGUgdGhlIDxjb2RlPi0tb3V0cHV0PC9jb2RlPiBmbGFnLiBJbiB0eXBpY2FsIDxhIGhyZWY9XFxcImh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udmVudGlvbl9vdmVyX2NvbmZpZ3VyYXRpb25cXFwiPmNvbnZlbnRpb24tb3Zlci1jb25maWd1cmF0aW9uPC9hPiBmYXNoaW9uLCB0aGUgQ0xJIHdpbGwgZGVmYXVsdCB0byBpbmZlcnJpbmcgeW91ciB2aWV3cyBhcmUgbG9jYXRlZCBpbiA8Y29kZT4uYmluL3ZpZXdzPC9jb2RlPiBhbmQgdGhhdCB5b3Ugd2FudCB0aGUgd2lyaW5nIG1vZHVsZSB0byBiZSBwbGFjZWQgaW4gPGNvZGU+LmJpbi93aXJpbmcuanM8L2NvZGU+LCBidXQgeW91JiMzOTtsbCBiZSBhYmxlIHRvIGNoYW5nZSB0aGF0IGlmIGl0IGRvZXNuJiMzOTt0IG1lZXQgeW91ciBuZWVkcy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+dGF1bnVzIC0tb3V0cHV0XFxuPC9jb2RlPjwvcHJlPlxcbjxwPkF0IHRoaXMgcG9pbnQgaW4gb3VyIGV4YW1wbGUsIHRoZSBDTEkgc2hvdWxkIGNyZWF0ZSBhIDxjb2RlPi5iaW4vd2lyaW5nLmpzPC9jb2RlPiBmaWxlIHdpdGggdGhlIGNvbnRlbnRzIGRldGFpbGVkIGJlbG93LiBBcyB5b3UgY2FuIHNlZSwgZXZlbiBpZiA8Y29kZT50YXVudXM8L2NvZGU+IGlzIGFuIGF1dG9tYXRlZCBjb2RlLWdlbmVyYXRpb24gdG9vbCwgaXQmIzM5O3Mgb3V0cHV0IGlzIGFzIGh1bWFuIHJlYWRhYmxlIGFzIGFueSBvdGhlciBtb2R1bGUuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctanNcXFwiPiYjMzk7dXNlIHN0cmljdCYjMzk7O1xcblxcbnZhciB0ZW1wbGF0ZXMgPSB7XFxuICAmIzM5O2hvbWUvaW5kZXgmIzM5OzogcmVxdWlyZSgmIzM5Oy4vdmlld3MvaG9tZS9pbmRleC5qcyYjMzk7KSxcXG4gICYjMzk7bGF5b3V0JiMzOTs6IHJlcXVpcmUoJiMzOTsuL3ZpZXdzL2xheW91dC5qcyYjMzk7KVxcbn07XFxuXFxudmFyIGNvbnRyb2xsZXJzID0ge1xcbn07XFxuXFxudmFyIHJvdXRlcyA9IFtcXG4gIHtcXG4gICAgcm91dGU6ICYjMzk7LyYjMzk7LFxcbiAgICBhY3Rpb246ICYjMzk7aG9tZS9pbmRleCYjMzk7XFxuICB9XFxuXTtcXG5cXG5tb2R1bGUuZXhwb3J0cyA9IHtcXG4gIHRlbXBsYXRlczogdGVtcGxhdGVzLFxcbiAgY29udHJvbGxlcnM6IGNvbnRyb2xsZXJzLFxcbiAgcm91dGVzOiByb3V0ZXNcXG59O1xcbjwvY29kZT48L3ByZT5cXG48cD48aW1nIHNyYz1cXFwiaHR0cDovL2kuaW1ndXIuY29tL2ZJRWU1VG0ucG5nXFxcIiBhbHQ9XFxcIlNjcmVlbnNob3Qgd2l0aCBgdGF1bnVzYCBvdXRwdXRcXFwiPjwvcD5cXG48cD5Ob3RlIHRoYXQgdGhlIDxjb2RlPmNvbnRyb2xsZXJzPC9jb2RlPiBvYmplY3QgaXMgZW1wdHkgYmVjYXVzZSB5b3UgaGF2ZW4mIzM5O3QgY3JlYXRlZCBhbnkgPGVtPmNsaWVudC1zaWRlIGNvbnRyb2xsZXJzPC9lbT4geWV0LiBXZSBjcmVhdGVkIHNlcnZlci1zaWRlIGNvbnRyb2xsZXJzIGJ1dCB0aG9zZSBkb24mIzM5O3QgaGF2ZSBhbnkgZWZmZWN0IGluIHRoZSBjbGllbnQtc2lkZSwgYmVzaWRlcyBkZXRlcm1pbmluZyB3aGF0IGdldHMgc2VudCB0byB0aGUgY2xpZW50LjwvcD5cXG48YmxvY2txdW90ZT5cXG48cD48c3Ryb25nPlRoZSBDTEkgY2FuIGJlIGVudGlyZWx5IGlnbm9yZWQ8L3N0cm9uZz4uIFlvdSBjb3VsZCB3cml0ZSB0aGVzZSBkZWZpbml0aW9ucyBieSB5b3Vyc2VsZiwgYnV0IHlvdSB3b3VsZCBoYXZlIHRvIHJlbWVtYmVyIHRvIHVwZGF0ZSB0aGUgd2lyaW5nIG1vZHVsZSB3aGVuZXZlciB5b3UgYWRkLCBjaGFuZ2UsIG9yIHJlbW92ZSBhIHZpZXcsIGEgY2xpZW50LXNpZGUgY29udHJvbGxlciwgb3IgYSByb3V0ZS4gRG9pbmcgdGhhdCB3b3VsZCBiZSBjdW1iZXJzb21lLCBhbmQgdGhlIENMSSBzb2x2ZXMgdGhhdCBwcm9ibGVtIGZvciB1cyBhdCB0aGUgZXhwZW5zZSBvZiBvbmUgYWRkaXRpb25hbCBidWlsZCBzdGVwLjwvcD5cXG48L2Jsb2NrcXVvdGU+XFxuPHA+RHVyaW5nIGRldmVsb3BtZW50LCB5b3UgY2FuIGFsc28gYWRkIHRoZSA8Y29kZT4tLXdhdGNoPC9jb2RlPiBmbGFnLCB3aGljaCB3aWxsIHJlYnVpbGQgdGhlIHdpcmluZyBtb2R1bGUgaWYgYSByZWxldmFudCBmaWxlIGNoYW5nZXMuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPnRhdW51cyAtLW91dHB1dCAtLXdhdGNoXFxuPC9jb2RlPjwvcHJlPlxcbjxwPklmIHlvdSYjMzk7cmUgdXNpbmcgSGFwaSBpbnN0ZWFkIG9mIEV4cHJlc3MsIHlvdSYjMzk7bGwgYWxzbyBuZWVkIHRvIHBhc3MgaW4gdGhlIDxjb2RlPmhhcGlpZnk8L2NvZGU+IHRyYW5zZm9ybSBzbyB0aGF0IHJvdXRlcyBnZXQgY29udmVydGVkIGludG8gc29tZXRoaW5nIHRoZSBjbGllbnQtc2lkZSByb3V0aW5nIG1vZHVsZSB1bmRlcnN0YW5kLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj50YXVudXMgLS1vdXRwdXQgLS10cmFuc2Zvcm0gaGFwaWlmeVxcbjwvY29kZT48L3ByZT5cXG48cD5Ob3cgdGhhdCB5b3UgdW5kZXJzdGFuZCBob3cgdG8gdXNlIHRoZSBDTEkgb3IgYnVpbGQgdGhlIHdpcmluZyBtb2R1bGUgb24geW91ciBvd24sIGJvb3RpbmcgdXAgVGF1bnVzIG9uIHRoZSBjbGllbnQtc2lkZSB3aWxsIGJlIGFuIGVhc3kgdGhpbmcgdG8gZG8hPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwiYm9vdGluZy11cC10aGUtY2xpZW50LXNpZGUtcm91dGVyXFxcIj5Cb290aW5nIHVwIHRoZSBjbGllbnQtc2lkZSByb3V0ZXI8L2g0PlxcbjxwPk9uY2Ugd2UgaGF2ZSB0aGUgd2lyaW5nIG1vZHVsZSwgYm9vdGluZyB1cCB0aGUgY2xpZW50LXNpZGUgZW5naW5lIGlzIHByZXR0eSBlYXN5LiBUYXVudXMgc3VnZ2VzdHMgeW91IHVzZSA8Y29kZT5jbGllbnQvanM8L2NvZGU+IHRvIGtlZXAgYWxsIG9mIHlvdXIgY2xpZW50LXNpZGUgSmF2YVNjcmlwdCBsb2dpYywgYnV0IHRoYXQgaXMgdXAgdG8geW91IHRvby4gRm9yIHRoZSBzYWtlIG9mIHRoaXMgZ3VpZGUsIGxldCYjMzk7cyBzdGljayB0byB0aGUgY29udmVudGlvbnMuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPm1rZGlyIC1wIGNsaWVudC9qc1xcbnRvdWNoIGNsaWVudC9qcy9tYWluLmpzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPlRoZSA8Y29kZT5tYWluPC9jb2RlPiBtb2R1bGUgd2lsbCBiZSB1c2VkIGFzIHRoZSA8ZW0+ZW50cnkgcG9pbnQ8L2VtPiBvZiB5b3VyIGFwcGxpY2F0aW9uIG9uIHRoZSBjbGllbnQtc2lkZS4gSGVyZSB5b3UmIzM5O2xsIG5lZWQgdG8gaW1wb3J0IDxjb2RlPnRhdW51czwvY29kZT4sIHRoZSB3aXJpbmcgbW9kdWxlIHdlJiMzOTt2ZSBqdXN0IGJ1aWx0LCBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIERPTSBlbGVtZW50IHdoZXJlIHlvdSBhcmUgcmVuZGVyaW5nIHlvdXIgcGFydGlhbCB2aWV3cy4gT25jZSB5b3UgaGF2ZSBhbGwgdGhhdCwgeW91IGNhbiBpbnZva2UgPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPi48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxudmFyIHRhdW51cyA9IHJlcXVpcmUoJiMzOTt0YXVudXMmIzM5Oyk7XFxudmFyIHdpcmluZyA9IHJlcXVpcmUoJiMzOTsuLi8uLi8uYmluL3dpcmluZyYjMzk7KTtcXG52YXIgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCYjMzk7bWFpbiYjMzk7KVswXTtcXG5cXG50YXVudXMubW91bnQobWFpbiwgd2lyaW5nKTtcXG48L2NvZGU+PC9wcmU+XFxuPHA+VGhlIG1vdW50cG9pbnQgd2lsbCBzZXQgdXAgdGhlIGNsaWVudC1zaWRlIFRhdW51cyByb3V0ZXIgYW5kIGZpcmUgdGhlIGNsaWVudC1zaWRlIHZpZXcgY29udHJvbGxlciBmb3IgdGhlIHZpZXcgdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBpbiB0aGUgc2VydmVyLXNpZGUuIFdoZW5ldmVyIGFuIGFuY2hvciBsaW5rIGlzIGNsaWNrZWQsIFRhdW51cyB3aWxsIGJlIGFibGUgdG8gaGlqYWNrIHRoYXQgY2xpY2sgYW5kIHJlcXVlc3QgdGhlIG1vZGVsIHVzaW5nIEFKQVgsIGJ1dCBvbmx5IGlmIGl0IG1hdGNoZXMgYSB2aWV3IHJvdXRlLiBPdGhlcndpc2UgdGhlIGxpbmsgd2lsbCBiZWhhdmUganVzdCBsaWtlIGFueSBub3JtYWwgbGluayB3b3VsZC48L3A+XFxuPHA+QnkgZGVmYXVsdCwgdGhlIG1vdW50cG9pbnQgd2lsbCBpc3N1ZSBhbiBBSkFYIHJlcXVlc3QgZm9yIHRoZSB2aWV3IG1vZGVsIG9mIHRoZSBzZXJ2ZXItc2lkZSByZW5kZXJlZCB2aWV3LiBUaGlzIGlzIGFraW4gdG8gd2hhdCBkZWRpY2F0ZWQgY2xpZW50LXNpZGUgcmVuZGVyaW5nIGZyYW1ld29ya3Mgc3VjaCBhcyBBbmd1bGFySlMgZG8sIHdoZXJlIHZpZXdzIGFyZSBvbmx5IHJlbmRlcmVkIGFmdGVyIGFsbCB0aGUgSmF2YVNjcmlwdCBoYXMgYmVlbiBkb3dubG9hZGVkLCBwYXJzZWQsIGFuZCBleGVjdXRlZC4gRXhjZXB0IFRhdW51cyBwcm92aWRlcyBodW1hbi1yZWFkYWJsZSBjb250ZW50IGZhc3RlciwgYmVmb3JlIHRoZSBKYXZhU2NyaXB0IGV2ZW4gYmVnaW5zIGRvd25sb2FkaW5nLCBhbHRob3VnaCBpdCB3b24mIzM5O3QgYmUgZnVuY3Rpb25hbCB1bnRpbCB0aGUgY2xpZW50LXNpZGUgY29udHJvbGxlciBydW5zLjwvcD5cXG48cD5BbiBhbHRlcm5hdGl2ZSBpcyB0byBpbmxpbmUgdGhlIHZpZXcgbW9kZWwgYWxvbmdzaWRlIHRoZSB2aWV3cyBpbiBhIDxjb2RlPiZsdDtzY3JpcHQgdHlwZT0mIzM5O3RleHQvdGF1bnVzJiMzOTsmZ3Q7PC9jb2RlPiB0YWcsIGJ1dCB0aGlzIHRlbmRzIHRvIHNsb3cgZG93biB0aGUgaW5pdGlhbCByZXNwb25zZSAobW9kZWxzIGFyZSA8ZW0+dHlwaWNhbGx5IGxhcmdlcjwvZW0+IHRoYW4gdGhlIHJlc3VsdGluZyB2aWV3cykuPC9wPlxcbjxwPkEgdGhpcmQgc3RyYXRlZ3kgaXMgdGhhdCB5b3UgcmVxdWVzdCB0aGUgbW9kZWwgYXN5bmNocm9ub3VzbHkgb3V0c2lkZSBvZiBUYXVudXMsIGFsbG93aW5nIHlvdSB0byBmZXRjaCBib3RoIHRoZSB2aWV3IG1vZGVsIGFuZCBUYXVudXMgaXRzZWxmIGNvbmN1cnJlbnRseSwgYnV0IHRoYXQmIzM5O3MgaGFyZGVyIHRvIHNldCB1cC48L3A+XFxuPHA+VGhlIHRocmVlIGJvb3Rpbmcgc3RyYXRlZ2llcyBhcmUgZXhwbGFpbmVkIGluIDxhIGhyZWY9XFxcIi9hcGlcXFwiPnRoZSBBUEkgZG9jdW1lbnRhdGlvbjwvYT4gYW5kIGZ1cnRoZXIgZGlzY3Vzc2VkIGluIDxhIGhyZWY9XFxcIi9wZXJmb3JtYW5jZVxcXCI+dGhlIG9wdGltaXphdGlvbiBndWlkZTwvYT4uIEZvciBub3csIHRoZSBkZWZhdWx0IHN0cmF0ZWd5IDxlbT4oPGNvZGU+JiMzOTthdXRvJiMzOTs8L2NvZGU+KTwvZW0+IHNob3VsZCBzdWZmaWNlLiBJdCBmZXRjaGVzIHRoZSB2aWV3IG1vZGVsIHVzaW5nIGFuIEFKQVggcmVxdWVzdCByaWdodCBhZnRlciBUYXVudXMgbG9hZHMuPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwiYWRkaW5nLWZ1bmN0aW9uYWxpdHktaW4tYS1jbGllbnQtc2lkZS1jb250cm9sbGVyXFxcIj5BZGRpbmcgZnVuY3Rpb25hbGl0eSBpbiBhIGNsaWVudC1zaWRlIGNvbnRyb2xsZXI8L2g0PlxcbjxwPkNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIHJ1biB3aGVuZXZlciBhIHZpZXcgaXMgcmVuZGVyZWQsIGV2ZW4gaWYgaXQmIzM5O3MgYSBwYXJ0aWFsLiBUaGUgY29udHJvbGxlciBpcyBwYXNzZWQgdGhlIDxjb2RlPm1vZGVsPC9jb2RlPiwgY29udGFpbmluZyB0aGUgbW9kZWwgdGhhdCB3YXMgdXNlZCB0byByZW5kZXIgdGhlIHZpZXc7IHRoZSA8Y29kZT5yb3V0ZTwvY29kZT4sIGJyb2tlbiBkb3duIGludG8gaXRzIGNvbXBvbmVudHM7IGFuZCB0aGUgPGNvZGU+Y29udGFpbmVyPC9jb2RlPiwgd2hpY2ggaXMgd2hhdGV2ZXIgRE9NIGVsZW1lbnQgdGhlIHZpZXcgd2FzIHJlbmRlcmVkIGludG8uPC9wPlxcbjxwPlRoZXNlIGNvbnRyb2xsZXJzIGFyZSBlbnRpcmVseSBvcHRpb25hbCwgd2hpY2ggbWFrZXMgc2Vuc2Ugc2luY2Ugd2UmIzM5O3JlIHByb2dyZXNzaXZlbHkgZW5oYW5jaW5nIHRoZSBhcHBsaWNhdGlvbjogaXQgbWlnaHQgbm90IGV2ZW4gYmUgbmVjZXNzYXJ5ISBMZXQmIzM5O3MgYWRkIHNvbWUgY2xpZW50LXNpZGUgZnVuY3Rpb25hbGl0eSB0byB0aGUgZXhhbXBsZSB3ZSYjMzk7dmUgYmVlbiBidWlsZGluZy48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bWtkaXIgLXAgY2xpZW50L2pzL2NvbnRyb2xsZXJzL2hvbWVcXG50b3VjaCBjbGllbnQvanMvY29udHJvbGxlcnMvaG9tZS9pbmRleC5qc1xcbjwvY29kZT48L3ByZT5cXG48cD5HdWVzcyB3aGF0PyBUaGUgY29udHJvbGxlciBzaG91bGQgYmUgYSBtb2R1bGUgd2hpY2ggZXhwb3J0cyBhIGZ1bmN0aW9uLiBUaGF0IGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyIHRoZSB2aWV3IGlzIHJlbmRlcmVkLiBGb3IgdGhlIHNha2Ugb2Ygc2ltcGxpY2l0eSB3ZSYjMzk7bGwganVzdCBwcmludCB0aGUgYWN0aW9uIGFuZCB0aGUgbW9kZWwgdG8gdGhlIGNvbnNvbGUuIElmIHRoZXJlJiMzOTtzIG9uZSBwbGFjZSB3aGVyZSB5b3UmIzM5O2Qgd2FudCB0byBlbmhhbmNlIHRoZSBleHBlcmllbmNlLCBjbGllbnQtc2lkZSBjb250cm9sbGVycyBhcmUgd2hlcmUgeW91IHdhbnQgdG8gcHV0IHlvdXIgY29kZS48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1qc1xcXCI+JiMzOTt1c2Ugc3RyaWN0JiMzOTs7XFxuXFxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobW9kZWwsIGNvbnRhaW5lciwgcm91dGUpIHtcXG4gIGNvbnNvbGUubG9nKCYjMzk7UmVuZGVyZWQgdmlldyAlcyB1c2luZyBtb2RlbDpcXFxcbiVzJiMzOTssIHJvdXRlLmFjdGlvbiwgSlNPTi5zdHJpbmdpZnkobW9kZWwsIG51bGwsIDIpKTtcXG59O1xcbjwvY29kZT48L3ByZT5cXG48cD5TaW5jZSB3ZSB3ZXJlbiYjMzk7dCB1c2luZyB0aGUgPGNvZGU+LS13YXRjaDwvY29kZT4gZmxhZyBmcm9tIHRoZSBUYXVudXMgQ0xJLCB5b3UmIzM5O2xsIGhhdmUgdG8gcmVjb21waWxlIHRoZSB3aXJpbmcgYXQgdGhpcyBwb2ludCwgc28gdGhhdCB0aGUgY29udHJvbGxlciBnZXRzIGFkZGVkIHRvIHRoYXQgbWFuaWZlc3QuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPnRhdW51cyAtLW91dHB1dFxcbjwvY29kZT48L3ByZT5cXG48cD5PZiBjb3Vyc2UsIHlvdSYjMzk7bGwgbm93IGhhdmUgdG8gd2lyZSB1cCB0aGUgY2xpZW50LXNpZGUgSmF2YVNjcmlwdCB1c2luZyA8YSBocmVmPVxcXCJodHRwOi8vYnJvd3NlcmlmeS5vcmcvXFxcIj5Ccm93c2VyaWZ5PC9hPiE8L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGg0IGlkPVxcXCJjb21waWxpbmcteW91ci1jbGllbnQtc2lkZS1qYXZhc2NyaXB0XFxcIj5Db21waWxpbmcgeW91ciBjbGllbnQtc2lkZSBKYXZhU2NyaXB0PC9oND5cXG48cD5Zb3UmIzM5O2xsIG5lZWQgdG8gY29tcGlsZSB0aGUgPGNvZGU+Y2xpZW50L2pzL21haW4uanM8L2NvZGU+IG1vZHVsZSwgb3VyIGNsaWVudC1zaWRlIGFwcGxpY2F0aW9uJiMzOTtzIGVudHJ5IHBvaW50LCB1c2luZyBCcm93c2VyaWZ5IHNpbmNlIHRoZSBjb2RlIGlzIHdyaXR0ZW4gdXNpbmcgQ29tbW9uSlMuIEluIHRoaXMgZXhhbXBsZSB5b3UmIzM5O2xsIGluc3RhbGwgPGNvZGU+YnJvd3NlcmlmeTwvY29kZT4gZ2xvYmFsbHkgdG8gY29tcGlsZSB0aGUgY29kZSwgYnV0IG5hdHVyYWxseSB5b3UmIzM5O2xsIGluc3RhbGwgaXQgbG9jYWxseSB3aGVuIHdvcmtpbmcgb24gYSByZWFsLXdvcmxkIGFwcGxpY2F0aW9uLjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLXNoZWxsXFxcIj5ucG0gaW5zdGFsbCAtLWdsb2JhbCBicm93c2VyaWZ5XFxuPC9jb2RlPjwvcHJlPlxcbjxwPk9uY2UgeW91IGhhdmUgdGhlIEJyb3dzZXJpZnkgQ0xJLCB5b3UmIzM5O2xsIGJlIGFibGUgdG8gY29tcGlsZSB0aGUgY29kZSByaWdodCBmcm9tIHlvdXIgY29tbWFuZCBsaW5lLiBUaGUgPGNvZGU+LWQ8L2NvZGU+IGZsYWcgdGVsbHMgQnJvd3NlcmlmeSB0byBhZGQgYW4gaW5saW5lIHNvdXJjZSBtYXAgaW50byB0aGUgY29tcGlsZWQgYnVuZGxlLCBtYWtpbmcgZGVidWdnaW5nIGVhc2llciBmb3IgdXMuIFRoZSA8Y29kZT4tbzwvY29kZT4gZmxhZyByZWRpcmVjdHMgb3V0cHV0IHRvIHRoZSBpbmRpY2F0ZWQgZmlsZSwgd2hlcmVhcyB0aGUgb3V0cHV0IGlzIHByaW50ZWQgdG8gc3RhbmRhcmQgb3V0cHV0IGJ5IGRlZmF1bHQuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPm1rZGlyIC1wIC5iaW4vcHVibGljL2pzXFxuYnJvd3NlcmlmeSBjbGllbnQvanMvbWFpbi5qcyAtZG8gLmJpbi9wdWJsaWMvanMvYWxsLmpzXFxuPC9jb2RlPjwvcHJlPlxcbjxwPldlIGhhdmVuJiMzOTt0IGRvbmUgbXVjaCBvZiBhbnl0aGluZyB3aXRoIHRoZSBFeHByZXNzIGFwcGxpY2F0aW9uLCBzbyB5b3UmIzM5O2xsIG5lZWQgdG8gYWRqdXN0IHRoZSA8Y29kZT5hcHAuanM8L2NvZGU+IG1vZHVsZSB0byBzZXJ2ZSBzdGF0aWMgYXNzZXRzLiBJZiB5b3UmIzM5O3JlIHVzZWQgdG8gRXhwcmVzcywgeW91JiMzOTtsbCBub3RpY2UgdGhlcmUmIzM5O3Mgbm90aGluZyBzcGVjaWFsIGFib3V0IGhvdyB3ZSYjMzk7cmUgdXNpbmcgPGNvZGU+c2VydmUtc3RhdGljPC9jb2RlPi48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+bnBtIGluc3RhbGwgLS1zYXZlIHNlcnZlLXN0YXRpY1xcbjwvY29kZT48L3ByZT5cXG48cD5MZXQmIzM5O3MgY29uZmlndXJlIHRoZSBhcHBsaWNhdGlvbiB0byBzZXJ2ZSBzdGF0aWMgYXNzZXRzIGZyb20gPGNvZGU+LmJpbi9wdWJsaWM8L2NvZGU+LjwvcD5cXG48cHJlPjxjb2RlIGNsYXNzPVxcXCJsYW5nLWpzXFxcIj4mIzM5O3VzZSBzdHJpY3QmIzM5OztcXG5cXG52YXIgdGF1bnVzID0gcmVxdWlyZSgmIzM5O3RhdW51cyYjMzk7KTtcXG52YXIgdGF1bnVzRXhwcmVzcyA9IHJlcXVpcmUoJiMzOTt0YXVudXMtZXhwcmVzcyYjMzk7KTtcXG52YXIgZXhwcmVzcyA9IHJlcXVpcmUoJiMzOTtleHByZXNzJiMzOTspO1xcbnZhciBzZXJ2ZVN0YXRpYyA9IHJlcXVpcmUoJiMzOTtzZXJ2ZS1zdGF0aWMmIzM5Oyk7XFxudmFyIGFwcCA9IGV4cHJlc3MoKTtcXG52YXIgb3B0aW9ucyA9IHtcXG4gIHJvdXRlczogcmVxdWlyZSgmIzM5Oy4vY29udHJvbGxlcnMvcm91dGVzJiMzOTspLFxcbiAgbGF5b3V0OiByZXF1aXJlKCYjMzk7Li8uYmluL3ZpZXdzL2xheW91dCYjMzk7KVxcbn07XFxuXFxuYXBwLnVzZShzZXJ2ZVN0YXRpYygmIzM5Oy5iaW4vcHVibGljJiMzOTspKTtcXG50YXVudXNFeHByZXNzKHRhdW51cywgYXBwLCBvcHRpb25zKTtcXG5hcHAubGlzdGVuKDMwMDApO1xcbjwvY29kZT48L3ByZT5cXG48cD5OZXh0IHVwLCB5b3UmIzM5O2xsIGhhdmUgdG8gZWRpdCB0aGUgbGF5b3V0IHRvIGluY2x1ZGUgdGhlIGNvbXBpbGVkIEphdmFTY3JpcHQgYnVuZGxlIGZpbGUuPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctamFkZVxcXCI+dGl0bGU9bW9kZWwudGl0bGVcXG5tYWluIT1wYXJ0aWFsXFxuc2NyaXB0KHNyYz0mIzM5Oy9qcy9hbGwuanMmIzM5OylcXG48L2NvZGU+PC9wcmU+XFxuPHA+RG9uJiMzOTt0IGZvcmdldCB0byBjb21waWxlIDxjb2RlPmxheW91dC5qYWRlPC9jb2RlPiBhZ2Fpbi48L3A+XFxuPHByZT48Y29kZSBjbGFzcz1cXFwibGFuZy1zaGVsbFxcXCI+amFkdW0gdmlld3MvKiogLS1vdXRwdXQgLmJpblxcbjwvY29kZT48L3ByZT5cXG48cD5MYXN0bHksIHlvdSBjYW4gZXhlY3V0ZSB0aGUgYXBwbGljYXRpb24gYW5kIHNlZSBpdCBpbiBhY3Rpb24hPC9wPlxcbjxwcmU+PGNvZGUgY2xhc3M9XFxcImxhbmctc2hlbGxcXFwiPm5vZGUgYXBwXFxuPC9jb2RlPjwvcHJlPlxcbjxwPjxpbWcgc3JjPVxcXCJodHRwOi8vaS5pbWd1ci5jb20vNjhPODR3WC5wbmdcXFwiIGFsdD1cXFwiU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgb3V0cHV0XFxcIj48L3A+XFxuPHA+SWYgeW91IG9wZW4gdGhlIGFwcGxpY2F0aW9uIG9uIGEgd2ViIGJyb3dzZXIsIHlvdSYjMzk7bGwgbm90aWNlIHRoYXQgdGhlIGFwcHJvcHJpYXRlIGluZm9ybWF0aW9uIHdpbGwgYmUgbG9nZ2VkIGludG8gdGhlIGRldmVsb3BlciA8Y29kZT5jb25zb2xlPC9jb2RlPi48L3A+XFxuPHA+PGltZyBzcmM9XFxcImh0dHA6Ly9pLmltZ3VyLmNvbS9aVUY2TkZsLnBuZ1xcXCIgYWx0PVxcXCJTY3JlZW5zaG90IHdpdGggdGhlIGFwcGxpY2F0aW9uIHJ1bm5pbmcgdW5kZXIgR29vZ2xlIENocm9tZVxcXCI+PC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwidXNpbmctdGhlLWNsaWVudC1zaWRlLXRhdW51cy1hcGlcXFwiPlVzaW5nIHRoZSBjbGllbnQtc2lkZSBUYXVudXMgQVBJPC9oND5cXG48cD5UYXVudXMgZG9lcyBwcm92aWRlIDxhIGhyZWY9XFxcIi9hcGlcXFwiPmEgdGhpbiBBUEk8L2E+IGluIHRoZSBjbGllbnQtc2lkZS4gVXNhZ2Ugb2YgdGhhdCBBUEkgYmVsb25ncyBtb3N0bHkgaW5zaWRlIHRoZSBib2R5IG9mIGNsaWVudC1zaWRlIHZpZXcgY29udHJvbGxlcnMsIGJ1dCB0aGVyZSYjMzk7cyBhIGZldyBtZXRob2RzIHlvdSBjYW4gdGFrZSBhZHZhbnRhZ2Ugb2Ygb24gYSBnbG9iYWwgc2NhbGUgYXMgd2VsbC48L3A+XFxuPHA+VGF1bnVzIGNhbiBub3RpZnkgeW91IHdoZW5ldmVyIGltcG9ydGFudCBldmVudHMgb2NjdXIuPC9wPlxcbjx0YWJsZT5cXG48dGhlYWQ+XFxuPHRyPlxcbjx0aD5FdmVudDwvdGg+XFxuPHRoPkFyZ3VtZW50czwvdGg+XFxuPHRoPkRlc2NyaXB0aW9uPC90aD5cXG48L3RyPlxcbjwvdGhlYWQ+XFxuPHRib2R5Plxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtzdGFydCYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPmNvbnRhaW5lciwgbW9kZWwsIHJvdXRlPC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbiA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+IGZpbmlzaGVkIHRoZSByb3V0ZSBzZXR1cCBhbmQgaXMgYWJvdXQgdG8gaW52b2tlIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyLiBTdWJzY3JpYmUgdG8gdGhpcyBldmVudCBiZWZvcmUgY2FsbGluZyA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+LjwvdGQ+XFxuPC90cj5cXG48dHI+XFxuPHRkPjxjb2RlPiYjMzk7cmVuZGVyJiMzOTs8L2NvZGU+PC90ZD5cXG48dGQ+PGNvZGU+Y29udGFpbmVyLCBtb2RlbCwgcm91dGU8L2NvZGU+PC90ZD5cXG48dGQ+QSB2aWV3IGhhcyBqdXN0IGJlZW4gcmVuZGVyZWQgYW5kIGl0cyBjbGllbnQtc2lkZSBjb250cm9sbGVyIGlzIGFib3V0IHRvIGJlIGludm9rZWQ8L3RkPlxcbjwvdHI+XFxuPHRyPlxcbjx0ZD48Y29kZT4mIzM5O2NoYW5nZSYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBtb2RlbDwvY29kZT48L3RkPlxcbjx0ZD5TYW1lIGFzIDxjb2RlPiYjMzk7cmVuZGVyJiMzOTs8L2NvZGU+LCBidXQgb25seSBpZiA8Y29kZT5jb250YWluZXI8L2NvZGU+IGlzIHRoZSBtb3VudHBvaW50IGFuZCB0aGUgcm91dGUgaGFzIGNoYW5nZWQuPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtmZXRjaC5zdGFydCYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0PC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3Qgc3RhcnRzLjwvdGQ+XFxuPC90cj5cXG48dHI+XFxuPHRkPjxjb2RlPiYjMzk7ZmV0Y2guZG9uZSYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0LCBkYXRhPC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3QgZW5kcyBzdWNjZXNzZnVsbHkuPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtmZXRjaC5hYm9ydCYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0PC9jb2RlPjwvdGQ+XFxuPHRkPkVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3QgaXMgcHVycG9zZWx5IGFib3J0ZWQuPC90ZD5cXG48L3RyPlxcbjx0cj5cXG48dGQ+PGNvZGU+JiMzOTtmZXRjaC5lcnJvciYjMzk7PC9jb2RlPjwvdGQ+XFxuPHRkPjxjb2RlPnJvdXRlLCBjb250ZXh0LCBlcnI8L2NvZGU+PC90ZD5cXG48dGQ+RW1pdHRlZCB3aGVuZXZlciBhbiBYSFIgcmVxdWVzdCByZXN1bHRzIGluIGFuIEhUVFAgZXJyb3IuPC90ZD5cXG48L3RyPlxcbjwvdGJvZHk+XFxuPC90YWJsZT5cXG48cD5CZXNpZGVzIGV2ZW50cywgdGhlcmUmIzM5O3MgYSBjb3VwbGUgbW9yZSBtZXRob2RzIHlvdSBjYW4gdXNlLiBUaGUgPGNvZGU+dGF1bnVzLm5hdmlnYXRlPC9jb2RlPiBtZXRob2QgYWxsb3dzIHlvdSB0byBuYXZpZ2F0ZSB0byBhIFVSTCB3aXRob3V0IHRoZSBuZWVkIGZvciBhIGh1bWFuIHRvIGNsaWNrIG9uIGFuIGFuY2hvciBsaW5rLiBUaGVuIHRoZXJlJiMzOTtzIDxjb2RlPnRhdW51cy5wYXJ0aWFsPC9jb2RlPiwgYW5kIHRoYXQgYWxsb3dzIHlvdSB0byByZW5kZXIgYW55IHBhcnRpYWwgdmlldyBvbiBhIERPTSBlbGVtZW50IG9mIHlvdXIgY2hvb3NpbmcsIGFuZCBpdCYjMzk7bGwgdGhlbiBpbnZva2UgaXRzIGNvbnRyb2xsZXIuIFlvdSYjMzk7bGwgbmVlZCB0byBjb21lIHVwIHdpdGggdGhlIG1vZGVsIHlvdXJzZWxmLCB0aG91Z2guPC9wPlxcbjxwPkFzdG9uaXNoaW5nbHksIHRoZSBBUEkgaXMgZnVydGhlciBkb2N1bWVudGVkIGluIDxhIGhyZWY9XFxcIi9hcGlcXFwiPnRoZSBBUEkgZG9jdW1lbnRhdGlvbjwvYT4uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI3RhYmxlLW9mLWNvbnRlbnRzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoNCBpZD1cXFwiY2FjaGluZy1hbmQtcHJlZmV0Y2hpbmdcXFwiPkNhY2hpbmcgYW5kIFByZWZldGNoaW5nPC9oND5cXG48cD48YSBocmVmPVxcXCIvcGVyZm9ybWFuY2VcXFwiPlBlcmZvcm1hbmNlPC9hPiBwbGF5cyBhbiBpbXBvcnRhbnQgcm9sZSBpbiBUYXVudXMuIFRoYXQmIzM5O3Mgd2h5IHRoZSB5b3UgY2FuIHBlcmZvcm0gY2FjaGluZyBhbmQgcHJlZmV0Y2hpbmcgb24gdGhlIGNsaWVudC1zaWRlIGp1c3QgYnkgdHVybmluZyBvbiBhIHBhaXIgb2YgZmxhZ3MuIEJ1dCB3aGF0IGRvIHRoZXNlIGZsYWdzIGRvIGV4YWN0bHk/PC9wPlxcbjxwPldoZW4gdHVybmVkIG9uLCBieSBwYXNzaW5nIDxjb2RlPnsgY2FjaGU6IHRydWUgfTwvY29kZT4gYXMgdGhlIHRoaXJkIHBhcmFtZXRlciBmb3IgPGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPiwgdGhlIGNhY2hpbmcgbGF5ZXIgd2lsbCBtYWtlIHN1cmUgdGhhdCByZXNwb25zZXMgYXJlIGtlcHQgYXJvdW5kIGZvciA8Y29kZT4xNTwvY29kZT4gc2Vjb25kcy4gV2hlbmV2ZXIgYSByb3V0ZSBuZWVkcyBhIG1vZGVsIGluIG9yZGVyIHRvIHJlbmRlciBhIHZpZXcsIGl0JiMzOTtsbCBmaXJzdCBhc2sgdGhlIGNhY2hpbmcgbGF5ZXIgZm9yIGEgZnJlc2ggY29weS4gSWYgdGhlIGNhY2hpbmcgbGF5ZXIgZG9lc24mIzM5O3QgaGF2ZSBhIGNvcHksIG9yIGlmIHRoYXQgY29weSBpcyBzdGFsZSA8ZW0+KGluIHRoaXMgY2FzZSwgb2xkZXIgdGhhbiA8Y29kZT4xNTwvY29kZT4gc2Vjb25kcyk8L2VtPiwgdGhlbiBhbiBBSkFYIHJlcXVlc3Qgd2lsbCBiZSBpc3N1ZWQgdG8gdGhlIHNlcnZlci4gT2YgY291cnNlLCB0aGUgZHVyYXRpb24gaXMgY29uZmlndXJhYmxlLiBJZiB5b3Ugd2FudCB0byB1c2UgYSB2YWx1ZSBvdGhlciB0aGFuIHRoZSBkZWZhdWx0LCB5b3Ugc2hvdWxkIHNldCA8Y29kZT5jYWNoZTwvY29kZT4gdG8gYSBudW1iZXIgaW4gc2Vjb25kcyBpbnN0ZWFkIG9mIGp1c3QgPGNvZGU+dHJ1ZTwvY29kZT4uPC9wPlxcbjxwPlNpbmNlIFRhdW51cyB1bmRlcnN0YW5kcyB0aGF0IG5vdCBldmVyeSB2aWV3IG9wZXJhdGVzIHVuZGVyIHRoZSBzYW1lIGNvbnN0cmFpbnRzLCB5b3UmIzM5O3JlIGFsc28gYWJsZSB0byBzZXQgYSA8Y29kZT5jYWNoZTwvY29kZT4gZnJlc2huZXNzIGR1cmF0aW9uIGRpcmVjdGx5IGluIHlvdXIgcm91dGVzLiBUaGUgPGNvZGU+Y2FjaGU8L2NvZGU+IHByb3BlcnR5IGluIHJvdXRlcyBoYXMgcHJlY2VkZW5jZSBvdmVyIHRoZSBkZWZhdWx0IHZhbHVlLjwvcD5cXG48cD5UaGVyZSYjMzk7cyBjdXJyZW50bHkgdHdvIGNhY2hpbmcgc3RvcmVzOiBhIHJhdyBpbi1tZW1vcnkgc3RvcmUsIGFuZCBhbiA8YSBocmVmPVxcXCJodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSVxcXCI+SW5kZXhlZERCPC9hPiBzdG9yZS4gSW5kZXhlZERCIGlzIGFuIGVtYmVkZGVkIGRhdGFiYXNlIHNvbHV0aW9uLCBhbmQgeW91IGNhbiB0aGluayBvZiBpdCBsaWtlIGFuIGFzeW5jaHJvbm91cyB2ZXJzaW9uIG9mIDxjb2RlPmxvY2FsU3RvcmFnZTwvY29kZT4uIEl0IGhhcyA8YSBocmVmPVxcXCJodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9aW5kZXhlZGRiXFxcIj5zdXJwcmlzaW5nbHkgYnJvYWQgYnJvd3NlciBzdXBwb3J0PC9hPiwgYW5kIGluIHRoZSBjYXNlcyB3aGVyZSBpdCYjMzk7cyBub3Qgc3VwcG9ydGVkIHRoZW4gY2FjaGluZyBpcyBkb25lIHNvbGVseSBpbi1tZW1vcnkuPC9wPlxcbjxwPlRoZSBwcmVmZXRjaGluZyBtZWNoYW5pc20gaXMgYW4gaW50ZXJlc3Rpbmcgc3Bpbi1vZmYgb2YgY2FjaGluZywgYW5kIGl0IHJlcXVpcmVzIGNhY2hpbmcgdG8gYmUgZW5hYmxlZCBpbiBvcmRlciB0byB3b3JrLiBXaGVuZXZlciBodW1hbnMgaG92ZXIgb3ZlciBhIGxpbmssIG9yIHdoZW5ldmVyIHRoZXkgcHV0IHRoZWlyIGZpbmdlciBvbiBvbmUgb2YgdGhlbSA8ZW0+KHRoZSA8Y29kZT50b3VjaHN0YXJ0PC9jb2RlPiBldmVudCk8L2VtPiwgdGhlIHByZWZldGNoZXIgd2lsbCBpc3N1ZSBhbiBBSkFYIHJlcXVlc3QgZm9yIHRoZSB2aWV3IG1vZGVsIGZvciB0aGF0IGxpbmsuPC9wPlxcbjxwPklmIHRoZSByZXF1ZXN0IGVuZHMgc3VjY2Vzc2Z1bGx5IHRoZW4gdGhlIHJlc3BvbnNlIHdpbGwgYmUgY2FjaGVkIGluIHRoZSBzYW1lIHdheSBhbnkgb3RoZXIgdmlldyB3b3VsZCBiZSBjYWNoZWQuIElmIHRoZSBodW1hbiBob3ZlcnMgb3ZlciBhbm90aGVyIGxpbmsgd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyBzdGlsbCBiZWluZyBwcmVmZXRjaGVkLCB0aGVuIHRoZSBvbGQgcmVxdWVzdCBpcyBhYm9ydGVkLCBhcyBub3QgdG8gZHJhaW4gdGhlaXIgPGVtPihwb3NzaWJseSBsaW1pdGVkKTwvZW0+IEludGVybmV0IGNvbm5lY3Rpb24gYmFuZHdpZHRoLjwvcD5cXG48cD5JZiB0aGUgaHVtYW4gY2xpY2tzIG9uIHRoZSBsaW5rIGJlZm9yZSBwcmVmZXRjaGluZyBpcyBjb21wbGV0ZWQsIGhlJiMzOTtsbCBuYXZpZ2F0ZSB0byB0aGUgdmlldyBhcyBzb29uIGFzIHByZWZldGNoaW5nIGVuZHMsIHJhdGhlciB0aGFuIGZpcmluZyBhbm90aGVyIHJlcXVlc3QuIFRoaXMgaGVscHMgVGF1bnVzIHNhdmUgcHJlY2lvdXMgbWlsbGlzZWNvbmRzIHdoZW4gZGVhbGluZyB3aXRoIGxhdGVuY3ktc2Vuc2l0aXZlIG9wZXJhdGlvbnMuPC9wPlxcbjxwPlR1cm5pbmcgcHJlZmV0Y2hpbmcgb24gaXMgc2ltcGx5IGEgbWF0dGVyIG9mIHNldHRpbmcgPGNvZGU+cHJlZmV0Y2g8L2NvZGU+IHRvIDxjb2RlPnRydWU8L2NvZGU+IGluIHRoZSBvcHRpb25zIHBhc3NlZCB0byA8Y29kZT50YXVudXMubW91bnQ8L2NvZGU+LiBGb3IgYWRkaXRpb25hbCBpbnNpZ2h0cyBpbnRvIHRoZSBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudHMgVGF1bnVzIGNhbiBvZmZlciwgaGVhZCBvdmVyIHRvIHRoZSA8YSBocmVmPVxcXCIvcGVyZm9ybWFuY2VcXFwiPlBlcmZvcm1hbmNlIE9wdGltaXphdGlvbnM8L2E+IGd1aWRlLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiN0YWJsZS1vZi1jb250ZW50c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDQgaWQ9XFxcInZlcnNpb25pbmdcXFwiPlZlcnNpb25pbmc8L2g0PlxcbjxwPldoZW4geW91IGFsdGVyIHlvdXIgdmlld3MsIGNoYW5nZSBjb250cm9sbGVycywgb3IgbW9kaWZ5IHRoZSBtb2RlbHMsIGNoYW5jZXMgYXJlIHRoZSBjbGllbnQtc2lkZSBpcyBnb2luZyB0byBjb21lIGFjcm9zcyBvbmUgb2YgdGhlIGZvbGxvd2luZyBpc3N1ZXMuPC9wPlxcbjx1bD5cXG48bGk+T3V0ZGF0ZWQgdmlldyB0ZW1wbGF0ZSBmdW5jdGlvbnMgaW4gdGhlIGNsaWVudC1zaWRlLCBjYXVzaW5nIG5ldyBtb2RlbHMgdG8gYnJlYWs8L2xpPlxcbjxsaT5PdXRkYXRlZCBjbGllbnQtc2lkZSBjb250cm9sbGVycywgY2F1c2luZyBuZXcgbW9kZWxzIHRvIGJyZWFrIG9yIG1pc3Mgb3V0IG9uIGZ1bmN0aW9uYWxpdHk8L2xpPlxcbjxsaT5PdXRkYXRlZCBtb2RlbHMgaW4gdGhlIGNhY2hlLCBjYXVzaW5nIG5ldyB2aWV3cyBvciBjb250cm9sbGVycyB0byBicmVhazwvbGk+XFxuPC91bD5cXG48cD5WZXJzaW9uaW5nIGhhbmRsZXMgdGhlc2UgaXNzdWVzIGdyYWNlZnVsbHkgb24geW91ciBiZWhhbGYuIFRoZSB3YXkgaXQgd29ya3MgaXMgdGhhdCB3aGVuZXZlciB5b3UgZ2V0IGEgcmVzcG9uc2UgZnJvbSBUYXVudXMsIGEgPGVtPnZlcnNpb24gc3RyaW5nIChjb25maWd1cmVkIG9uIHRoZSBzZXJ2ZXItc2lkZSk8L2VtPiBpcyBpbmNsdWRlZCB3aXRoIGl0LiBJZiB0aGF0IHZlcnNpb24gc3RyaW5nIGRvZXNuJiMzOTt0IG1hdGNoIHRoZSBvbmUgc3RvcmVkIGluIHRoZSBjbGllbnQsIHRoZW4gdGhlIGNhY2hlIHdpbGwgYmUgZmx1c2hlZCBhbmQgdGhlIGh1bWFuIHdpbGwgYmUgcmVkaXJlY3RlZCwgZm9yY2luZyBhIGZ1bGwgcGFnZSByZWxvYWQuPC9wPlxcbjxibG9ja3F1b3RlPlxcbjxwPlRoZSB2ZXJzaW9uaW5nIEFQSSBpcyB1bmFibGUgdG8gaGFuZGxlIGNoYW5nZXMgdG8gcm91dGVzLCBhbmQgaXQmIzM5O3MgdXAgdG8geW91IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBhcHBsaWNhdGlvbiBzdGF5cyBiYWNrd2FyZHMgY29tcGF0aWJsZSB3aGVuIGl0IGNvbWVzIHRvIHJvdXRpbmcuPC9wPlxcbjxwPlZlcnNpb25pbmcgY2FuJiMzOTt0IGludGVydmVuZSB3aGVuIHRoZSBjbGllbnQtc2lkZSBpcyBoZWF2aWx5IHJlbHlpbmcgb24gY2FjaGVkIHZpZXdzIGFuZCBtb2RlbHMsIGFuZCB0aGUgaHVtYW4gaXMgcmVmdXNpbmcgdG8gcmVsb2FkIHRoZWlyIGJyb3dzZXIuIFRoZSBzZXJ2ZXIgaXNuJiMzOTt0IGJlaW5nIGFjY2Vzc2VkIGFuZCB0aHVzIGl0IGNhbiYjMzk7dCBjb21tdW5pY2F0ZSB0aGF0IGV2ZXJ5dGhpbmcgb24gdGhlIGNhY2hlIG1heSBoYXZlIGJlY29tZSBzdGFsZS4gVGhlIGdvb2QgbmV3cyBpcyB0aGF0IHRoZSBodW1hbiB3b24mIzM5O3Qgbm90aWNlIGFueSBvZGRpdGllcywgYXMgdGhlIHNpdGUgd2lsbCBjb250aW51ZSB0byB3b3JrIGFzIGhlIGtub3dzIGl0LiBXaGVuIGhlIGZpbmFsbHkgYXR0ZW1wdHMgdG8gdmlzaXQgc29tZXRoaW5nIHRoYXQgaXNuJiMzOTt0IGNhY2hlZCwgYSByZXF1ZXN0IGlzIG1hZGUsIGFuZCB0aGUgdmVyc2lvbmluZyBlbmdpbmUgcmVzb2x2ZXMgdmVyc2lvbiBkaXNjcmVwYW5jaWVzIGZvciB0aGVtLjwvcD5cXG48L2Jsb2NrcXVvdGU+XFxuPHA+TWFraW5nIHVzZSBvZiB2ZXJzaW9uaW5nIGludm9sdmVzIHNldHRpbmcgdGhlIDxjb2RlPnZlcnNpb248L2NvZGU+IGZpZWxkIGluIHRoZSBvcHRpb25zLCB3aGVuIGludm9raW5nIDxjb2RlPnRhdW51cy5tb3VudDwvY29kZT4gPHN0cm9uZz5vbiBib3RoIHRoZSBzZXJ2ZXItc2lkZSBhbmQgdGhlIGNsaWVudC1zaWRlLCB1c2luZyB0aGUgc2FtZSB2YWx1ZTwvc3Ryb25nPi4gVGhlIFRhdW51cyB2ZXJzaW9uIHN0cmluZyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBvbmUgeW91IHByb3ZpZGVkLCBzbyB0aGF0IFRhdW51cyB3aWxsIGtub3cgdG8gc3RheSBhbGVydCBmb3IgY2hhbmdlcyB0byBUYXVudXMgaXRzZWxmLCBhcyB3ZWxsLjwvcD5cXG48cD5Zb3UgbWF5IHVzZSB5b3VyIGJ1aWxkIGlkZW50aWZpZXIgb3IgdGhlIDxjb2RlPnZlcnNpb248L2NvZGU+IGZpZWxkIGluIDxjb2RlPnBhY2thZ2UuanNvbjwvY29kZT4sIGJ1dCB1bmRlcnN0YW5kIHRoYXQgaXQgbWF5IGNhdXNlIHRoZSBjbGllbnQtc2lkZSB0byBmbHVzaCB0aGUgY2FjaGUgdG9vIG9mdGVuIDxlbT4obWF5YmUgZXZlbiBvbiBldmVyeSBkZXBsb3ltZW50KTwvZW0+LjwvcD5cXG48cD5UaGUgZGVmYXVsdCB2ZXJzaW9uIHN0cmluZyBpcyBzZXQgdG8gPGNvZGU+MTwvY29kZT4uIFRoZSBUYXVudXMgdmVyc2lvbiB3aWxsIGJlIHByZXBlbmRlZCB0byB5b3VycywgcmVzdWx0aW5nIGluIGEgdmFsdWUgc3VjaCBhcyA8Y29kZT50My4wLjA7djE8L2NvZGU+IHdoZXJlIFRhdW51cyBpcyBydW5uaW5nIHZlcnNpb24gPGNvZGU+My4wLjA8L2NvZGU+IGFuZCB5b3VyIGFwcGxpY2F0aW9uIGlzIHJ1bm5pbmcgdmVyc2lvbiA8Y29kZT4xPC9jb2RlPi48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGgxIGlkPVxcXCJ0aGUtc2t5LWlzLXRoZS1saW1pdC1cXFwiPlRoZSBza3kgaXMgdGhlIGxpbWl0ITwvaDE+XFxuPHA+WW91JiMzOTtyZSBub3cgZmFtaWxpYXIgd2l0aCBob3cgVGF1bnVzIHdvcmtzIG9uIGEgaGlnaC1sZXZlbC4gWW91IGhhdmUgY292ZXJlZCBhIGRlY2VudCBhbW91bnQgb2YgZ3JvdW5kLCBidXQgeW91IHNob3VsZG4mIzM5O3Qgc3RvcCB0aGVyZS48L3A+XFxuPHVsPlxcbjxsaT5MZWFybiBtb3JlIGFib3V0IDxhIGhyZWY9XFxcIi9hcGlcXFwiPnRoZSBBUEkgVGF1bnVzIGhhczwvYT4gdG8gb2ZmZXI8L2xpPlxcbjxsaT5HbyB0aHJvdWdoIHRoZSA8YSBocmVmPVxcXCIvcGVyZm9ybWFuY2VcXFwiPnBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0aXBzPC9hPi4gWW91IG1heSBsZWFybiBzb21ldGhpbmcgbmV3ITwvbGk+XFxuPGxpPjxlbT5GYW1pbGlhcml6ZSB5b3Vyc2VsZiB3aXRoIHRoZSB3YXlzIG9mIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50PC9lbT48dWw+XFxuPGxpPkplcmVteSBLZWl0aCBlbnVuY2lhdGVzIDxhIGhyZWY9XFxcImh0dHBzOi8vYWRhY3Rpby5jb20vam91cm5hbC83NzA2XFxcIj4mcXVvdDtCZSBwcm9ncmVzc2l2ZSZxdW90OzwvYT48L2xpPlxcbjxsaT5DaHJpc3RpYW4gSGVpbG1hbm4gYWR2b2NhdGVzIGZvciA8YSBocmVmPVxcXCJodHRwOi8vaWNhbnQuY28udWsvYXJ0aWNsZXMvcHJhZ21hdGljLXByb2dyZXNzaXZlLWVuaGFuY2VtZW50L1xcXCI+JnF1b3Q7UHJhZ21hdGljIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50JnF1b3Q7PC9hPjwvbGk+XFxuPGxpPkpha2UgQXJjaGliYWxkIGV4cGxhaW5zIGhvdyA8YSBocmVmPVxcXCJodHRwOi8vamFrZWFyY2hpYmFsZC5jb20vMjAxMy9wcm9ncmVzc2l2ZS1lbmhhbmNlbWVudC1pcy1mYXN0ZXIvXFxcIj4mcXVvdDtQcm9ncmVzc2l2ZSBlbmhhbmNlbWVudCBpcyBmYXN0ZXImcXVvdDs8L2E+PC9saT5cXG48bGk+SSBibG9nZ2VkIGFib3V0IGhvdyB3ZSBzaG91bGQgPGEgaHJlZj1cXFwiaHR0cDovL3Bvbnlmb28uY29tL3N0b3AtYnJlYWtpbmctdGhlLXdlYlxcXCI+JnF1b3Q7U3RvcCBCcmVha2luZyB0aGUgV2ViJnF1b3Q7PC9hPjwvbGk+XFxuPGxpPkd1aWxsZXJtbyBSYXVjaCBhcmd1ZXMgZm9yIDxhIGhyZWY9XFxcImh0dHA6Ly9yYXVjaGcuY29tLzIwMTQvNy1wcmluY2lwbGVzLW9mLXJpY2gtd2ViLWFwcGxpY2F0aW9ucy9cXFwiPiZxdW90OzcgUHJpbmNpcGxlcyBvZiBSaWNoIFdlYiBBcHBsaWNhdGlvbnMmcXVvdDs8L2E+PC9saT5cXG48bGk+QWFyb24gR3VzdGFmc29uIHdyaXRlcyA8YSBocmVmPVxcXCJodHRwOi8vYWxpc3RhcGFydC5jb20vYXJ0aWNsZS91bmRlcnN0YW5kaW5ncHJvZ3Jlc3NpdmVlbmhhbmNlbWVudFxcXCI+JnF1b3Q7VW5kZXJzdGFuZGluZyBQcm9ncmVzc2l2ZSBFbmhhbmNlbWVudCZxdW90OzwvYT48L2xpPlxcbjxsaT5PcmRlIFNhdW5kZXJzIGdpdmVzIGhpcyBwb2ludCBvZiB2aWV3IGluIDxhIGhyZWY9XFxcImh0dHBzOi8vZGVjYWRlY2l0eS5uZXQvYmxvZy8yMDEzLzA5LzE2L3Byb2dyZXNzaXZlLWVuaGFuY2VtZW50LWZvci1mYXVsdC10b2xlcmFuY2VcXFwiPiZxdW90O1Byb2dyZXNzaXZlIGVuaGFuY2VtZW50IGZvciBmYXVsdCB0b2xlcmFuY2UmcXVvdDs8L2E+PC9saT5cXG48L3VsPlxcbjwvbGk+XFxuPGxpPlNpZnQgdGhyb3VnaCB0aGUgPGEgaHJlZj1cXFwiL2NvbXBsZW1lbnRzXFxcIj5jb21wbGVtZW50YXJ5IG1vZHVsZXM8L2E+LiBZb3UgbWF5IGZpbmQgc29tZXRoaW5nIHlvdSBoYWRuJiMzOTt0IHRob3VnaHQgb2YhPC9saT5cXG48L3VsPlxcbjxwPkFsc28sIGdldCBpbnZvbHZlZCE8L3A+XFxuPHVsPlxcbjxsaT5Gb3JrIHRoaXMgcmVwb3NpdG9yeSBhbmQgPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy90YXVudXMuaW8vcHVsbHNcXFwiPnNlbmQgc29tZSBwdWxsIHJlcXVlc3RzPC9hPiB0byBpbXByb3ZlIHRoZXNlIGd1aWRlcyE8L2xpPlxcbjxsaT5TZWUgc29tZXRoaW5nLCBzYXkgc29tZXRoaW5nISBJZiB5b3UgZGV0ZWN0IGEgYnVnLCA8YSBocmVmPVxcXCJodHRwczovL2dpdGh1Yi5jb20vdGF1bnVzL3RhdW51cy9pc3N1ZXMvbmV3XFxcIj5wbGVhc2UgY3JlYXRlIGFuIGlzc3VlPC9hPiE8L2xpPlxcbjwvdWw+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjdGFibGUtb2YtY29udGVudHNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuPGJsb2NrcXVvdGU+XFxuPHA+WW91JiMzOTtsbCBmaW5kIGEgPGEgaHJlZj1cXFwiaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy9nZXR0aW5nLXN0YXJ0ZWRcXFwiPmZ1bGwgZmxlZGdlZCB2ZXJzaW9uIG9mIHRoZSBHZXR0aW5nIFN0YXJ0ZWQ8L2E+IHR1dG9yaWFsIGFwcGxpY2F0aW9uIG9uIEdpdEh1Yi48L3A+XFxuPC9ibG9ja3F1b3RlPlxcblwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9zZWN0aW9uPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufSBjYXRjaCAoZXJyKSB7XG4gIGphZGUucmV0aHJvdyhlcnIsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUsIGphZGVfZGVidWdbMF0ubGluZW5vLCBcInNlY3Rpb24ubHktc2VjdGlvbi5tZC1tYXJrZG93blxcbiAgOnVsdHJhbWFya2VkXFxuICAgICMgR2V0dGluZyBTdGFydGVkXFxuXFxuICAgIFRhdW51cyBpcyBhIHNoYXJlZC1yZW5kZXJpbmcgTVZDIGVuZ2luZSBmb3IgTm9kZS5qcywgYW5kIGl0J3MgX3VwIHRvIHlvdSBob3cgdG8gdXNlIGl0Xy4gSW4gZmFjdCwgaXQgbWlnaHQgYmUgYSBnb29kIGlkZWEgZm9yIHlvdSB0byAqKnNldCB1cCBqdXN0IHRoZSBzZXJ2ZXItc2lkZSBhc3BlY3QgZmlyc3QqKiwgYXMgdGhhdCdsbCB0ZWFjaCB5b3UgaG93IGl0IHdvcmtzIGV2ZW4gd2hlbiBKYXZhU2NyaXB0IG5ldmVyIGdldHMgdG8gdGhlIGNsaWVudC5cXG5cXG4gICAgIyBUYWJsZSBvZiBDb250ZW50c1xcblxcbiAgICAtIFtIb3cgaXQgd29ya3NdKCNob3ctaXQtd29ya3MpXFxuICAgIC0gW0luc3RhbGxpbmcgVGF1bnVzXSgjaW5zdGFsbGluZy10YXVudXMpXFxuICAgIC0gW1NldHRpbmcgdXAgdGhlIHNlcnZlci1zaWRlXSgjc2V0dGluZy11cC10aGUtc2VydmVyLXNpZGUpXFxuICAgICAgLSBbWW91ciBmaXJzdCByb3V0ZV0oI3lvdXItZmlyc3Qtcm91dGUpXFxuICAgICAgLSBbQ3JlYXRpbmcgYSBsYXlvdXRdKCNjcmVhdGluZy1hLWxheW91dClcXG4gICAgICAtIFtVc2luZyBKYWRlIGFzIHlvdXIgdmlldyBlbmdpbmVdKCN1c2luZy1qYWRlLWFzLXlvdXItdmlldy1lbmdpbmUpXFxuICAgICAgLSBbVGhyb3dpbmcgaW4gYSBjb250cm9sbGVyXSgjdGhyb3dpbmctaW4tYS1jb250cm9sbGVyKVxcbiAgICAtIFtUYXVudXMgaW4gdGhlIGNsaWVudF0oI3RhdW51cy1pbi10aGUtY2xpZW50KVxcbiAgICAgIC0gW1VzaW5nIHRoZSBUYXVudXMgQ0xJXSgjdXNpbmctdGhlLXRhdW51cy1jbGkpXFxuICAgICAgLSBbQm9vdGluZyB1cCB0aGUgY2xpZW50LXNpZGUgcm91dGVyXSgjYm9vdGluZy11cC10aGUtY2xpZW50LXNpZGUtcm91dGVyKVxcbiAgICAgIC0gW0FkZGluZyBmdW5jdGlvbmFsaXR5IGluIGEgY2xpZW50LXNpZGUgY29udHJvbGxlcl0oI2FkZGluZy1mdW5jdGlvbmFsaXR5LWluLWEtY2xpZW50LXNpZGUtY29udHJvbGxlcilcXG4gICAgICAtIFtDb21waWxpbmcgeW91ciBjbGllbnQtc2lkZSBKYXZhU2NyaXB0XSgjY29tcGlsaW5nLXlvdXItY2xpZW50LXNpZGUtamF2YXNjcmlwdClcXG4gICAgICAtIFtVc2luZyB0aGUgY2xpZW50LXNpZGUgVGF1bnVzIEFQSV0oI3VzaW5nLXRoZS1jbGllbnQtc2lkZS10YXVudXMtYXBpKVxcbiAgICAgIC0gW0NhY2hpbmcgYW5kIFByZWZldGNoaW5nXSgjY2FjaGluZy1hbmQtcHJlZmV0Y2hpbmcpXFxuICAgICAgLSBbVmVyc2lvbmluZ10oI3ZlcnNpb25pbmcpXFxuICAgIC0gW1RoZSBza3kgaXMgdGhlIGxpbWl0IV0oI3RoZS1za3ktaXMtdGhlLWxpbWl0LSlcXG5cXG4gICAgIyBIb3cgaXQgd29ya3NcXG5cXG4gICAgVGF1bnVzIGZvbGxvd3MgYSBzaW1wbGUgYnV0ICoqcHJvdmVuKiogc2V0IG9mIHJ1bGVzLlxcblxcbiAgICAtIERlZmluZSBhIGBmdW5jdGlvbihtb2RlbClgIGZvciBlYWNoIHlvdXIgdmlld3NcXG4gICAgLSBQdXQgdGhlc2Ugdmlld3MgaW4gYm90aCB0aGUgc2VydmVyIGFuZCB0aGUgY2xpZW50XFxuICAgIC0gRGVmaW5lIHJvdXRlcyBmb3IgeW91ciBhcHBsaWNhdGlvblxcbiAgICAtIFB1dCB0aG9zZSByb3V0ZXMgaW4gYm90aCB0aGUgc2VydmVyIGFuZCB0aGUgY2xpZW50XFxuICAgIC0gRW5zdXJlIHJvdXRlIG1hdGNoZXMgd29yayB0aGUgc2FtZSB3YXkgb24gYm90aCBlbmRzXFxuICAgIC0gQ3JlYXRlIHNlcnZlci1zaWRlIGNvbnRyb2xsZXJzIHRoYXQgeWllbGQgdGhlIG1vZGVsIGZvciB5b3VyIHZpZXdzXFxuICAgIC0gQ3JlYXRlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGlmIHlvdSBuZWVkIHRvIGFkZCBjbGllbnQtc2lkZSBmdW5jdGlvbmFsaXR5IHRvIGEgcGFydGljdWxhciB2aWV3XFxuICAgIC0gRm9yIHRoZSBmaXJzdCByZXF1ZXN0LCBhbHdheXMgcmVuZGVyIHZpZXdzIG9uIHRoZSBzZXJ2ZXItc2lkZVxcbiAgICAtIFdoZW4gcmVuZGVyaW5nIGEgdmlldyBvbiB0aGUgc2VydmVyLXNpZGUsIGluY2x1ZGUgdGhlIGZ1bGwgbGF5b3V0IGFzIHdlbGwhXFxuICAgIC0gT25jZSB0aGUgY2xpZW50LXNpZGUgY29kZSBraWNrcyBpbiwgKipoaWphY2sgbGluayBjbGlja3MqKiBhbmQgbWFrZSBBSkFYIHJlcXVlc3RzIGluc3RlYWRcXG4gICAgLSBXaGVuIHlvdSBnZXQgdGhlIEpTT04gbW9kZWwgYmFjaywgcmVuZGVyIHZpZXdzIG9uIHRoZSBjbGllbnQtc2lkZVxcbiAgICAtIElmIHRoZSBgaGlzdG9yeWAgQVBJIGlzIHVuYXZhaWxhYmxlLCBmYWxsIGJhY2sgdG8gZ29vZCBvbGQgcmVxdWVzdC1yZXNwb25zZS4gKipEb24ndCBjb25mdXNlIHlvdXIgaHVtYW5zIHdpdGggb2JzY3VyZSBoYXNoIHJvdXRlcnMhKipcXG5cXG4gICAgSSdsbCBzdGVwIHlvdSB0aHJvdWdoIHRoZXNlLCBidXQgcmF0aGVyIHRoYW4gbG9va2luZyBhdCBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLCBJJ2xsIHdhbGsgeW91IHRocm91Z2ggdGhlIHN0ZXBzIHlvdSBuZWVkIHRvIHRha2UgaW4gb3JkZXIgdG8gbWFrZSB0aGlzIGZsb3cgaGFwcGVuLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIEluc3RhbGxpbmcgVGF1bnVzXFxuXFxuICAgIEZpcnN0IG9mZiwgeW91J2xsIG5lZWQgdG8gY2hvb3NlIGEgSFRUUCBzZXJ2ZXIgZnJhbWV3b3JrIGZvciB5b3VyIGFwcGxpY2F0aW9uLiBBdCB0aGUgbW9tZW50IFRhdW51cyBzdXBwb3J0cyBvbmx5IGEgY291cGxlIG9mIEhUVFAgZnJhbWV3b3JrcywgYnV0IG1vcmUgbWF5IGJlIGFkZGVkIGlmIHRoZXkgYXJlIHBvcHVsYXIgZW5vdWdoLlxcblxcbiAgICAtIFtFeHByZXNzXVs2XSwgdGhyb3VnaCBbdGF1bnVzLWV4cHJlc3NdWzFdXFxuICAgIC0gW0hhcGldWzddLCB0aHJvdWdoIFt0YXVudXMtaGFwaV1bMl0gYW5kIHRoZSBbaGFwaWlmeV1bM10gdHJhbnNmb3JtXFxuXFxuICAgID4gSWYgeW91J3JlIG1vcmUgb2YgYSBfXFxcInJ1bW1hZ2UgdGhyb3VnaCBzb21lb25lIGVsc2UncyBjb2RlXFxcIl8gdHlwZSBvZiBkZXZlbG9wZXIsIHlvdSBtYXkgZmVlbCBjb21mb3J0YWJsZSBbZ29pbmcgdGhyb3VnaCB0aGlzIHdlYnNpdGUncyBzb3VyY2UgY29kZV1bNF0sIHdoaWNoIHVzZXMgdGhlIFtIYXBpXVs3XSBmbGF2b3Igb2YgVGF1bnVzLiBBbHRlcm5hdGl2ZWx5IHlvdSBjYW4gbG9vayBhdCB0aGUgc291cmNlIGNvZGUgZm9yIFtwb255Zm9vLmNvbV1bNV0sIHdoaWNoIGlzICoqYSBtb3JlIGFkdmFuY2VkIHVzZS1jYXNlKiogdW5kZXIgdGhlIFtFeHByZXNzXVs2XSBmbGF2b3IuIE9yLCB5b3UgY291bGQganVzdCBrZWVwIG9uIHJlYWRpbmcgdGhpcyBwYWdlLCB0aGF0J3Mgb2theSB0b28uXFxuICAgID5cXG4gICAgPiBUaGVyZSdzIGFsc28gW2EgWWVvbWFuIGdlbmVyYXRvciBuYW1lZCBgZ2VuZXJhdG9yLXRhdW51c2BdWzQyXSB5b3UgY291bGQgdXNlIHRvIGdldCBzdGFydGVkLCBpbnN0ZWFkLlxcblxcbiAgICBPbmNlIHlvdSd2ZSBzZXR0bGVkIGZvciBlaXRoZXIgW0V4cHJlc3NdWzZdIG9yIFtIYXBpXVs3XSB5b3UnbGwgYmUgYWJsZSB0byBwcm9jZWVkLiBGb3IgdGhlIHB1cnBvc2VzIG9mIHRoaXMgZ3VpZGUsIHdlJ2xsIHVzZSBbRXhwcmVzc11bNl0uIFN3aXRjaGluZyBiZXR3ZWVuIG9uZSBvZiB0aGUgZGlmZmVyZW50IEhUVFAgZmxhdm9ycyBpcyBzdHJpa2luZ2x5IGVhc3ksIHRob3VnaC5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyBTZXR0aW5nIHVwIHRoZSBzZXJ2ZXItc2lkZVxcblxcbiAgICBOYXR1cmFsbHksIHlvdSdsbCBuZWVkIHRvIGluc3RhbGwgYWxsIG9mIHRoZSBmb2xsb3dpbmcgbW9kdWxlcyBmcm9tIGBucG1gIHRvIGdldCBzdGFydGVkLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICBta2RpciBnZXR0aW5nLXN0YXJ0ZWRcXG4gICAgY2QgZ2V0dGluZy1zdGFydGVkXFxuICAgIG5wbSBpbml0XFxuICAgIG5wbSBpbnN0YWxsIC0tc2F2ZSB0YXVudXMgdGF1bnVzLWV4cHJlc3MgZXhwcmVzc1xcbiAgICBgYGBcXG5cXG4gICAgIVtTY3JlZW5zaG90IHdpdGggYG5wbSBpbml0YCBvdXRwdXRdWzMwXVxcblxcbiAgICBMZXQncyBidWlsZCBvdXIgYXBwbGljYXRpb24gc3RlcC1ieS1zdGVwLCBhbmQgSSdsbCB3YWxrIHlvdSB0aHJvdWdoIHRoZW0gYXMgd2UgZ28gYWxvbmcuIEZpcnN0IG9mIGFsbCwgeW91J2xsIG5lZWQgdGhlIGZhbW91cyBgYXBwLmpzYCBmaWxlLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICB0b3VjaCBhcHAuanNcXG4gICAgYGBgXFxuXFxuICAgIEl0J3MgcHJvYmFibHkgYSBnb29kIGlkZWEgdG8gcHV0IHNvbWV0aGluZyBpbiB5b3VyIGBhcHAuanNgIGZpbGUsIGxldCdzIGRvIHRoYXQgbm93LlxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIHZhciB0YXVudXMgPSByZXF1aXJlKCd0YXVudXMnKTtcXG4gICAgdmFyIHRhdW51c0V4cHJlc3MgPSByZXF1aXJlKCd0YXVudXMtZXhwcmVzcycpO1xcbiAgICB2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcXG4gICAgdmFyIGFwcCA9IGV4cHJlc3MoKTtcXG4gICAgdmFyIG9wdGlvbnMgPSB7fTtcXG5cXG4gICAgdGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuICAgIGFwcC5saXN0ZW4oMzAwMCk7XFxuICAgIGBgYFxcblxcbiAgICBBbGwgYHRhdW51cy1leHByZXNzYCByZWFsbHkgZG9lcyBpcyBhZGQgYSBidW5jaCBvZiByb3V0ZXMgdG8geW91ciBFeHByZXNzIGBhcHBgLiBZb3Ugc2hvdWxkIG5vdGUgdGhhdCBhbnkgbWlkZGxld2FyZSBhbmQgQVBJIHJvdXRlcyBzaG91bGQgcHJvYmFibHkgY29tZSBiZWZvcmUgdGhlIGB0YXVudXNFeHByZXNzYCBpbnZvY2F0aW9uLiBZb3UnbGwgcHJvYmFibHkgYmUgdXNpbmcgYSBjYXRjaC1hbGwgdmlldyByb3V0ZSB0aGF0IHJlbmRlcnMgYSBfXFxcIk5vdCBGb3VuZFxcXCJfIHZpZXcsIGJsb2NraW5nIGFueSByb3V0aW5nIGJleW9uZCB0aGF0IHJvdXRlLlxcblxcbiAgICBJZiB5b3Ugd2VyZSB0byBydW4gdGhlIGFwcGxpY2F0aW9uIG5vdyB5b3Ugd291bGQgZ2V0IGEgZnJpZW5kbHkgcmVtaW5kZXIgZnJvbSBUYXVudXMgbGV0dGluZyB5b3Uga25vdyB0aGF0IHlvdSBmb3Jnb3QgdG8gZGVjbGFyZSBhbnkgdmlldyByb3V0ZXMuIFNpbGx5IHlvdSFcXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbm9kZSBhcHBcXG4gICAgYGBgXFxuXFxuICAgICFbU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgb3V0cHV0XVszMV1cXG5cXG4gICAgVGhlIGBvcHRpb25zYCBvYmplY3QgcGFzc2VkIHRvIGB0YXVudXNFeHByZXNzYCBsZXQncyB5b3UgY29uZmlndXJlIFRhdW51cy4gSW5zdGVhZCBvZiBkaXNjdXNzaW5nIGV2ZXJ5IHNpbmdsZSBjb25maWd1cmF0aW9uIG9wdGlvbiB5b3UgY291bGQgc2V0IGhlcmUsIGxldCdzIGRpc2N1c3Mgd2hhdCBtYXR0ZXJzOiB0aGUgX3JlcXVpcmVkIGNvbmZpZ3VyYXRpb25fLiBUaGVyZSdzIHR3byBvcHRpb25zIHRoYXQgeW91IG11c3Qgc2V0IGlmIHlvdSB3YW50IHlvdXIgVGF1bnVzIGFwcGxpY2F0aW9uIHRvIG1ha2UgYW55IHNlbnNlLlxcblxcbiAgICAtIGByb3V0ZXNgIHNob3VsZCBiZSBhbiBhcnJheSBvZiB2aWV3IHJvdXRlc1xcbiAgICAtIGBsYXlvdXRgIHNob3VsZCBiZSBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBzaW5nbGUgYG1vZGVsYCBhcmd1bWVudCBhbmQgcmV0dXJucyBhbiBlbnRpcmUgSFRNTCBkb2N1bWVudFxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIFlvdXIgZmlyc3Qgcm91dGVcXG5cXG4gICAgUm91dGVzIG5lZWQgdG8gYmUgcGxhY2VkIGluIGl0cyBvd24gZGVkaWNhdGVkIG1vZHVsZSwgc28gdGhhdCB5b3UgY2FuIHJldXNlIGl0IGxhdGVyIG9uICoqd2hlbiBzZXR0aW5nIHVwIGNsaWVudC1zaWRlIHJvdXRpbmcqKi4gTGV0J3MgY3JlYXRlIHRoYXQgbW9kdWxlIGFuZCBhZGQgYSByb3V0ZSB0byBpdC5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgdG91Y2ggcm91dGVzLmpzXFxuICAgIGBgYFxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIG1vZHVsZS5leHBvcnRzID0gW1xcbiAgICAgIHsgcm91dGU6ICcvJywgYWN0aW9uOiAnaG9tZS9pbmRleCcgfVxcbiAgICBdO1xcbiAgICBgYGBcXG5cXG4gICAgRWFjaCBpdGVtIGluIHRoZSBleHBvcnRlZCBhcnJheSBpcyBhIHJvdXRlLiBJbiB0aGlzIGNhc2UsIHdlIG9ubHkgaGF2ZSB0aGUgYC9gIHJvdXRlIHdpdGggdGhlIGBob21lL2luZGV4YCBhY3Rpb24uIFRhdW51cyBmb2xsb3dzIHRoZSB3ZWxsIGtub3duIFtjb252ZW50aW9uIG92ZXIgY29uZmlndXJhdGlvbiBwYXR0ZXJuXVs4XSwgd2hpY2ggbWFkZSBbUnVieSBvbiBSYWlsc11bOV0gZmFtb3VzLiBfTWF5YmUgb25lIGRheSBUYXVudXMgd2lsbCBiZSBmYW1vdXMgdG9vIV8gQnkgY29udmVudGlvbiwgVGF1bnVzIHdpbGwgYXNzdW1lIHRoYXQgdGhlIGBob21lL2luZGV4YCBhY3Rpb24gdXNlcyB0aGUgYGhvbWUvaW5kZXhgIGNvbnRyb2xsZXIgYW5kIHJlbmRlcnMgdGhlIGBob21lL2luZGV4YCB2aWV3LiBPZiBjb3Vyc2UsIF9hbGwgb2YgdGhhdCBjYW4gYmUgY2hhbmdlZCB1c2luZyBjb25maWd1cmF0aW9uXy5cXG5cXG4gICAgVGltZSB0byBnbyBiYWNrIHRvIGBhcHAuanNgIGFuZCB1cGRhdGUgdGhlIGBvcHRpb25zYCBvYmplY3QuXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgdmFyIHRhdW51cyA9IHJlcXVpcmUoJ3RhdW51cycpO1xcbiAgICB2YXIgdGF1bnVzRXhwcmVzcyA9IHJlcXVpcmUoJ3RhdW51cy1leHByZXNzJyk7XFxuICAgIHZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xcbiAgICB2YXIgYXBwID0gZXhwcmVzcygpO1xcbiAgICB2YXIgb3B0aW9ucyA9IHtcXG4gICAgICByb3V0ZXM6IHJlcXVpcmUoJy4vcm91dGVzJylcXG4gICAgfTtcXG5cXG4gICAgdGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuICAgIGFwcC5saXN0ZW4oMzAwMCk7XFxuICAgIGBgYFxcblxcbiAgICBJdCdzIGltcG9ydGFudCB0byBrbm93IHRoYXQgaWYgeW91IG9taXQgdGhlIGNyZWF0aW9uIG9mIGEgY29udHJvbGxlciB0aGVuIFRhdW51cyB3aWxsIHNraXAgdGhhdCBzdGVwLCBhbmQgcmVuZGVyIHRoZSB2aWV3IHBhc3NpbmcgaXQgd2hhdGV2ZXIgdGhlIGRlZmF1bHQgbW9kZWwgaXMgXyhtb3JlIG9uIHRoYXQgW2luIHRoZSBBUEkgZG9jdW1lbnRhdGlvbl1bMThdLCBidXQgaXQgZGVmYXVsdHMgdG8gYHt9YClfLlxcblxcbiAgICBIZXJlJ3Mgd2hhdCB5b3UnZCBnZXQgaWYgeW91IGF0dGVtcHRlZCB0byBydW4gdGhlIGFwcGxpY2F0aW9uIGF0IHRoaXMgcG9pbnQuXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG5vZGUgYXBwICZcXG4gICAgY3VybCBsb2NhbGhvc3Q6MzAwMFxcbiAgICBgYGBcXG5cXG4gICAgIVtTY3JlZW5zaG90IHdpdGggYG5vZGUgYXBwYCByZXN1bHRzXVszMl1cXG5cXG4gICAgVHVybnMgb3V0IHlvdSdyZSBtaXNzaW5nIGEgbG90IG9mIHRoaW5ncyEgVGF1bnVzIGlzIHF1aXRlIGxlbmllbnQgYW5kIGl0J2xsIHRyeSBpdHMgYmVzdCB0byBsZXQgeW91IGtub3cgd2hhdCB5b3UgbWlnaHQgYmUgbWlzc2luZywgdGhvdWdoLiBBcHBhcmVudGx5IHlvdSBkb24ndCBoYXZlIGEgbGF5b3V0LCBhIHNlcnZlci1zaWRlIGNvbnRyb2xsZXIsIG9yIGV2ZW4gYSB2aWV3ISBfVGhhdCdzIHJvdWdoLl9cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyBDcmVhdGluZyBhIGxheW91dFxcblxcbiAgICBMZXQncyBhbHNvIGNyZWF0ZSBhIGxheW91dC4gRm9yIHRoZSBwdXJwb3NlcyBvZiBtYWtpbmcgb3VyIHdheSB0aHJvdWdoIHRoaXMgZ3VpZGUsIGl0J2xsIGp1c3QgYmUgYSBwbGFpbiBKYXZhU2NyaXB0IGZ1bmN0aW9uLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICB0b3VjaCBsYXlvdXQuanNcXG4gICAgYGBgXFxuXFxuICAgIE5vdGUgdGhhdCB0aGUgYHBhcnRpYWxgIHByb3BlcnR5IGluIHRoZSBgbW9kZWxgIF8oYXMgc2VlbiBiZWxvdylfIGlzIGNyZWF0ZWQgb24gdGhlIGZseSBhZnRlciByZW5kZXJpbmcgcGFydGlhbCB2aWV3cy4gVGhlIGxheW91dCBmdW5jdGlvbiB3ZSdsbCBiZSB1c2luZyBoZXJlIGVmZmVjdGl2ZWx5IG1lYW5zIF9cXFwidXNlIHRoZSBmb2xsb3dpbmcgY29tYmluYXRpb24gb2YgcGxhaW4gdGV4dCBhbmQgdGhlICoqKG1heWJlIEhUTUwpKiogcGFydGlhbCB2aWV3XFxcIl8uXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobW9kZWwpIHtcXG4gICAgICByZXR1cm4gJ1RoaXMgaXMgdGhlIHBhcnRpYWw6IFxcXCInICsgbW9kZWwucGFydGlhbCArICdcXFwiJztcXG4gICAgfTtcXG4gICAgYGBgXFxuXFxuICAgIE9mIGNvdXJzZSwgaWYgeW91IHdlcmUgZGV2ZWxvcGluZyBhIHJlYWwgYXBwbGljYXRpb24sIHRoZW4geW91IHByb2JhYmx5IHdvdWxkbid0IHdhbnQgdG8gd3JpdGUgdmlld3MgYXMgSmF2YVNjcmlwdCBmdW5jdGlvbnMgYXMgdGhhdCdzIHVucHJvZHVjdGl2ZSwgY29uZnVzaW5nLCBhbmQgaGFyZCB0byBtYWludGFpbi4gV2hhdCB5b3UgY291bGQgZG8gaW5zdGVhZCwgaXMgdXNlIGEgdmlldy1yZW5kZXJpbmcgZW5naW5lIHRoYXQgYWxsb3dzIHlvdSB0byBjb21waWxlIHlvdXIgdmlldyB0ZW1wbGF0ZXMgaW50byBKYXZhU2NyaXB0IGZ1bmN0aW9ucy5cXG5cXG4gICAgLSBbTXVzdGFjaGVdWzEwXSBpcyBhIHRlbXBsYXRpbmcgZW5naW5lIHRoYXQgY2FuIGNvbXBpbGUgeW91ciB2aWV3cyBpbnRvIHBsYWluIGZ1bmN0aW9ucywgdXNpbmcgYSBzeW50YXggdGhhdCdzIG1pbmltYWxseSBkaWZmZXJlbnQgZnJvbSBIVE1MXFxuICAgIC0gW0phZGVdWzExXSBpcyBhbm90aGVyIG9wdGlvbiwgYW5kIGl0IGhhcyBhIHRlcnNlIHN5bnRheCB3aGVyZSBzcGFjaW5nIG1hdHRlcnMgYnV0IHRoZXJlJ3Mgbm8gY2xvc2luZyB0YWdzXFxuICAgIC0gVGhlcmUncyBtYW55IG1vcmUgYWx0ZXJuYXRpdmVzIGxpa2UgW01vemlsbGEncyBOdW5qdWNrc11bMTJdLCBbSGFuZGxlYmFyc11bMTNdLCBhbmQgW0VKU11bMTRdLlxcblxcbiAgICBSZW1lbWJlciB0byBhZGQgdGhlIGBsYXlvdXRgIHVuZGVyIHRoZSBgb3B0aW9uc2Agb2JqZWN0IHBhc3NlZCB0byBgdGF1bnVzRXhwcmVzc2AhXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgdmFyIHRhdW51cyA9IHJlcXVpcmUoJ3RhdW51cycpO1xcbiAgICB2YXIgdGF1bnVzRXhwcmVzcyA9IHJlcXVpcmUoJ3RhdW51cy1leHByZXNzJyk7XFxuICAgIHZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xcbiAgICB2YXIgYXBwID0gZXhwcmVzcygpO1xcbiAgICB2YXIgb3B0aW9ucyA9IHtcXG4gICAgICByb3V0ZXM6IHJlcXVpcmUoJy4vcm91dGVzJyksXFxuICAgICAgbGF5b3V0OiByZXF1aXJlKCcuL2xheW91dCcpXFxuICAgIH07XFxuXFxuICAgIHRhdW51c0V4cHJlc3ModGF1bnVzLCBhcHAsIG9wdGlvbnMpO1xcbiAgICBhcHAubGlzdGVuKDMwMDApO1xcbiAgICBgYGBcXG5cXG4gICAgSGVyZSdzIHdoYXQgeW91J2QgZ2V0IGlmIHlvdSByYW4gdGhlIGFwcGxpY2F0aW9uIGF0IHRoaXMgcG9pbnQuXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG5vZGUgYXBwICZcXG4gICAgY3VybCBsb2NhbGhvc3Q6MzAwMFxcbiAgICBgYGBcXG5cXG4gICAgIVtTY3JlZW5zaG90IHdpdGggYG5vZGUgYXBwYCBvdXRwdXRdWzMzXVxcblxcbiAgICBBdCB0aGlzIHBvaW50IHdlIGhhdmUgYSBsYXlvdXQsIGJ1dCB3ZSdyZSBzdGlsbCBtaXNzaW5nIHRoZSBwYXJ0aWFsIHZpZXcgYW5kIHRoZSBzZXJ2ZXItc2lkZSBjb250cm9sbGVyLiBXZSBjYW4gZG8gd2l0aG91dCB0aGUgY29udHJvbGxlciwgYnV0IGhhdmluZyBubyB2aWV3cyBpcyBraW5kIG9mIHBvaW50bGVzcyB3aGVuIHlvdSdyZSB0cnlpbmcgdG8gZ2V0IGFuIE1WQyBlbmdpbmUgdXAgYW5kIHJ1bm5pbmcsIHJpZ2h0P1xcblxcbiAgICBZb3UnbGwgZmluZCB0b29scyByZWxhdGVkIHRvIHZpZXcgdGVtcGxhdGluZyBpbiB0aGUgW2NvbXBsZW1lbnRhcnkgbW9kdWxlcyBzZWN0aW9uXVsxNV0uIElmIHlvdSBkb24ndCBwcm92aWRlIGEgYGxheW91dGAgcHJvcGVydHkgYXQgYWxsLCBUYXVudXMgd2lsbCByZW5kZXIgeW91ciBtb2RlbCBpbiBhIHJlc3BvbnNlIGJ5IHdyYXBwaW5nIGl0IGluIGA8cHJlPmAgYW5kIGA8Y29kZT5gIHRhZ3MsIHdoaWNoIG1heSBhaWQgeW91IHdoZW4gZ2V0dGluZyBzdGFydGVkLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIFVzaW5nIEphZGUgYXMgeW91ciB2aWV3IGVuZ2luZVxcblxcbiAgICBMZXQncyBnbyBhaGVhZCBhbmQgdXNlIEphZGUgYXMgdGhlIHZpZXctcmVuZGVyaW5nIGVuZ2luZSBvZiBjaG9pY2UgZm9yIG91ciB2aWV3cy5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbWtkaXIgLXAgdmlld3MvaG9tZVxcbiAgICB0b3VjaCB2aWV3cy9ob21lL2luZGV4LmphZGVcXG4gICAgYGBgXFxuXFxuICAgIFNpbmNlIHdlJ3JlIGp1c3QgZ2V0dGluZyBzdGFydGVkLCB0aGUgdmlldyB3aWxsIGp1c3QgaGF2ZSBzb21lIGJhc2ljIHN0YXRpYyBjb250ZW50LCBhbmQgdGhhdCdzIGl0LlxcblxcbiAgICBgYGBqYWRlXFxuICAgIHAgSGVsbG8gVGF1bnVzIVxcbiAgICBgYGBcXG5cXG4gICAgTmV4dCB5b3UnbGwgd2FudCB0byBjb21waWxlIHRoZSB2aWV3IGludG8gYSBmdW5jdGlvbi4gVG8gZG8gdGhhdCB5b3UgY2FuIHVzZSBbamFkdW1dWzE2XSwgYSBzcGVjaWFsaXplZCBKYWRlIGNvbXBpbGVyIHRoYXQgcGxheXMgd2VsbCB3aXRoIFRhdW51cyBieSBiZWluZyBhd2FyZSBvZiBgcmVxdWlyZWAgc3RhdGVtZW50cywgYW5kIHRodXMgc2F2aW5nIGJ5dGVzIHdoZW4gaXQgY29tZXMgdG8gY2xpZW50LXNpZGUgcmVuZGVyaW5nLiBMZXQncyBpbnN0YWxsIGl0IGdsb2JhbGx5LCBmb3IgdGhlIHNha2Ugb2YgdGhpcyBleGVyY2lzZSBfKHlvdSBzaG91bGQgaW5zdGFsbCBpdCBsb2NhbGx5IHdoZW4geW91J3JlIGRldmVsb3BpbmcgYSByZWFsIGFwcGxpY2F0aW9uKV8uXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG5wbSBpbnN0YWxsIC0tZ2xvYmFsIGphZHVtXFxuICAgIGBgYFxcblxcbiAgICBUbyBjb21waWxlIGV2ZXJ5IHZpZXcgaW4gdGhlIGB2aWV3c2AgZGlyZWN0b3J5IGludG8gZnVuY3Rpb25zIHRoYXQgd29yayB3ZWxsIHdpdGggVGF1bnVzLCB5b3UgY2FuIHVzZSB0aGUgY29tbWFuZCBiZWxvdy4gVGhlIGAtLW91dHB1dGAgZmxhZyBpbmRpY2F0ZXMgd2hlcmUgeW91IHdhbnQgdGhlIHZpZXdzIHRvIGJlIHBsYWNlZC4gV2UgY2hvc2UgdG8gdXNlIGAuYmluYCBiZWNhdXNlIHRoYXQncyB3aGVyZSBUYXVudXMgZXhwZWN0cyB5b3VyIGNvbXBpbGVkIHZpZXdzIHRvIGJlIGJ5IGRlZmF1bHQuIEJ1dCBzaW5jZSBUYXVudXMgZm9sbG93cyB0aGUgW2NvbnZlbnRpb24gb3ZlciBjb25maWd1cmF0aW9uXVsxN10gYXBwcm9hY2gsIHlvdSBjb3VsZCBjaGFuZ2UgdGhhdCBpZiB5b3Ugd2FudGVkIHRvLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICBqYWR1bSB2aWV3cy8qKiAtLW91dHB1dCAuYmluXFxuICAgIGBgYFxcblxcbiAgICBDb25ncmF0dWxhdGlvbnMhIFlvdXIgZmlyc3QgdmlldyBpcyBub3cgb3BlcmF0aW9uYWwgYW5kIGJ1aWx0IHVzaW5nIGEgZnVsbC1mbGVkZ2VkIHRlbXBsYXRpbmcgZW5naW5lISBBbGwgdGhhdCdzIGxlZnQgaXMgZm9yIHlvdSB0byBydW4gdGhlIGFwcGxpY2F0aW9uIGFuZCB2aXNpdCBpdCBvbiBwb3J0IGAzMDAwYC5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbm9kZSBhcHAgJlxcbiAgICBvcGVuIGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFxcbiAgICBgYGBcXG5cXG4gICAgIVtTY3JlZW5zaG90IHdpdGggYG5vZGUgYXBwYCBvdXRwdXRdWzM0XVxcblxcbiAgICBHcmFudGVkLCB5b3Ugc2hvdWxkIF9wcm9iYWJseV8gbW92ZSB0aGUgbGF5b3V0IGludG8gYSBKYWRlIF8oYW55IHZpZXcgZW5naW5lIHdpbGwgZG8pXyB0ZW1wbGF0ZSBhcyB3ZWxsLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIFRocm93aW5nIGluIGEgY29udHJvbGxlclxcblxcbiAgICBDb250cm9sbGVycyBhcmUgaW5kZWVkIG9wdGlvbmFsLCBidXQgYW4gYXBwbGljYXRpb24gdGhhdCByZW5kZXJzIGV2ZXJ5IHZpZXcgdXNpbmcgdGhlIHNhbWUgbW9kZWwgd29uJ3QgZ2V0IHlvdSB2ZXJ5IGZhci4gQ29udHJvbGxlcnMgYWxsb3cgeW91IHRvIGhhbmRsZSB0aGUgcmVxdWVzdCBhbmQgcHV0IHRvZ2V0aGVyIHRoZSBtb2RlbCB0byBiZSB1c2VkIHdoZW4gc2VuZGluZyBhIHJlc3BvbnNlLiBDb250cmFyeSB0byB3aGF0IG1vc3QgZnJhbWV3b3JrcyBwcm9wb3NlLCBUYXVudXMgZXhwZWN0cyBldmVyeSBhY3Rpb24gdG8gaGF2ZSBpdHMgb3duIGluZGl2aWR1YWwgY29udHJvbGxlci4gU2luY2UgTm9kZS5qcyBtYWtlcyBpdCBlYXN5IHRvIGltcG9ydCBjb21wb25lbnRzLCB0aGlzIHNldHVwIGhlbHBzIHlvdSBrZWVwIHlvdXIgY29kZSBtb2R1bGFyIHdoaWxlIHN0aWxsIGJlaW5nIGFibGUgdG8gcmV1c2UgbG9naWMgYnkgc2hhcmluZyBtb2R1bGVzIGFjcm9zcyBkaWZmZXJlbnQgY29udHJvbGxlcnMuIExldCdzIGNyZWF0ZSBhIGNvbnRyb2xsZXIgZm9yIHRoZSBgaG9tZS92aWV3YCBhY3Rpb24uXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG1rZGlyIC1wIGNvbnRyb2xsZXJzL2hvbWVcXG4gICAgdG91Y2ggY29udHJvbGxlcnMvaG9tZS9pbmRleC5qc1xcbiAgICBgYGBcXG5cXG4gICAgVGhlIGNvbnRyb2xsZXIgbW9kdWxlIHNob3VsZCBtZXJlbHkgZXhwb3J0IGEgZnVuY3Rpb24uIF9TdGFydGVkIG5vdGljaW5nIHRoZSBwYXR0ZXJuP18gVGhlIHNpZ25hdHVyZSBmb3IgdGhlIGNvbnRyb2xsZXIgaXMgdGhlIHNhbWUgc2lnbmF0dXJlIGFzIHRoYXQgb2YgYW55IG90aGVyIG1pZGRsZXdhcmUgcGFzc2VkIHRvIFtFeHByZXNzXVs2XSBfKG9yIGFueSByb3V0ZSBoYW5kbGVyIHBhc3NlZCB0byBbSGFwaV1bN10gaW4gdGhlIGNhc2Ugb2YgYHRhdW51cy1oYXBpYClfLlxcblxcbiAgICBBcyB5b3UgbWF5IGhhdmUgbm90aWNlZCBpbiB0aGUgZXhhbXBsZXMgc28gZmFyLCB5b3UgaGF2ZW4ndCBldmVuIHNldCBhIGRvY3VtZW50IHRpdGxlIGZvciB5b3VyIEhUTUwgcGFnZXMhIFR1cm5zIG91dCwgdGhlcmUncyBhIGZldyBtb2RlbCBwcm9wZXJ0aWVzIF8odmVyeSBmZXcpXyB0aGF0IFRhdW51cyBpcyBhd2FyZSBvZi4gT25lIG9mIHRob3NlIGlzIHRoZSBgdGl0bGVgIHByb3BlcnR5LCBhbmQgaXQnbGwgYmUgdXNlZCB0byBjaGFuZ2UgdGhlIGBkb2N1bWVudC50aXRsZWAgaW4geW91ciBwYWdlcyB3aGVuIG5hdmlnYXRpbmcgdGhyb3VnaCB0aGUgY2xpZW50LXNpZGUuIEtlZXAgaW4gbWluZCB0aGF0IGFueXRoaW5nIHRoYXQncyBub3QgaW4gdGhlIGBtb2RlbGAgcHJvcGVydHkgd29uJ3QgYmUgdHJhc21pdHRlZCB0byB0aGUgY2xpZW50LCBhbmQgd2lsbCBqdXN0IGJlIGFjY2Vzc2libGUgdG8gdGhlIGxheW91dC5cXG5cXG4gICAgSGVyZSBpcyBvdXIgbmV3ZmFuZ2xlZCBgaG9tZS9pbmRleGAgY29udHJvbGxlci4gQXMgeW91J2xsIG5vdGljZSwgaXQgZG9lc24ndCBkaXNydXB0IGFueSBvZiB0aGUgdHlwaWNhbCBFeHByZXNzIGV4cGVyaWVuY2UsIGJ1dCBtZXJlbHkgYnVpbGRzIHVwb24gaXQuIFdoZW4gYG5leHRgIGlzIGNhbGxlZCwgdGhlIFRhdW51cyB2aWV3LXJlbmRlcmluZyBoYW5kbGVyIHdpbGwga2ljayBpbiwgYW5kIHJlbmRlciB0aGUgdmlldyB1c2luZyB0aGUgaW5mb3JtYXRpb24gdGhhdCB3YXMgYXNzaWduZWQgdG8gYHJlcy52aWV3TW9kZWxgLlxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XFxuICAgICAgcmVzLnZpZXdNb2RlbCA9IHtcXG4gICAgICAgIG1vZGVsOiB7XFxuICAgICAgICAgIHRpdGxlOiAnV2VsY29tZSBIb21lLCBUYXVudXMhJ1xcbiAgICAgICAgfVxcbiAgICAgIH07XFxuICAgICAgbmV4dCgpO1xcbiAgICB9O1xcbiAgICBgYGBcXG5cXG4gICAgT2YgY291cnNlLCByZWx5aW5nIG9uIHRoZSBjbGllbnQtc2lkZSBjaGFuZ2VzIHRvIHlvdXIgcGFnZSBpbiBvcmRlciB0byBzZXQgdGhlIHZpZXcgdGl0bGUgX3dvdWxkbid0IGJlIHByb2dyZXNzaXZlXywgYW5kIHRodXMgW2l0IHdvdWxkIGJlIHJlYWxseSwgX3JlYWxseV8gYmFkXVsxN10uIFdlIHNob3VsZCB1cGRhdGUgdGhlIGxheW91dCB0byB1c2Ugd2hhdGV2ZXIgYHRpdGxlYCBoYXMgYmVlbiBwYXNzZWQgdG8gdGhlIG1vZGVsLiBJbiBmYWN0LCBsZXQncyBnbyBiYWNrIHRvIHRoZSBkcmF3aW5nIGJvYXJkIGFuZCBtYWtlIHRoZSBsYXlvdXQgaW50byBhIEphZGUgdGVtcGxhdGUhXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIHJtIGxheW91dC5qc1xcbiAgICB0b3VjaCB2aWV3cy9sYXlvdXQuamFkZVxcbiAgICBqYWR1bSB2aWV3cy8qKiAtLW91dHB1dCAuYmluXFxuICAgIGBgYFxcblxcbiAgICBZb3Ugc2hvdWxkIGFsc28gcmVtZW1iZXIgdG8gdXBkYXRlIHRoZSBgYXBwLmpzYCBtb2R1bGUgb25jZSBhZ2FpbiFcXG5cXG4gICAgYGBganNcXG4gICAgJ3VzZSBzdHJpY3QnO1xcblxcbiAgICB2YXIgdGF1bnVzID0gcmVxdWlyZSgndGF1bnVzJyk7XFxuICAgIHZhciB0YXVudXNFeHByZXNzID0gcmVxdWlyZSgndGF1bnVzLWV4cHJlc3MnKTtcXG4gICAgdmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XFxuICAgIHZhciBhcHAgPSBleHByZXNzKCk7XFxuICAgIHZhciBvcHRpb25zID0ge1xcbiAgICAgIHJvdXRlczogcmVxdWlyZSgnLi9yb3V0ZXMnKSxcXG4gICAgICBsYXlvdXQ6IHJlcXVpcmUoJy4vLmJpbi92aWV3cy9sYXlvdXQnKVxcbiAgICB9O1xcblxcbiAgICB0YXVudXNFeHByZXNzKHRhdW51cywgYXBwLCBvcHRpb25zKTtcXG4gICAgYXBwLmxpc3RlbigzMDAwKTtcXG4gICAgYGBgXFxuXFxuICAgIFRoZSBgIT1gIHN5bnRheCBiZWxvdyBtZWFucyB0aGF0IHdoYXRldmVyIGlzIGluIHRoZSB2YWx1ZSBhc3NpZ25lZCB0byB0aGUgZWxlbWVudCB3b24ndCBiZSBlc2NhcGVkLiBUaGF0J3Mgb2theSBiZWNhdXNlIGBwYXJ0aWFsYCBpcyBhIHZpZXcgd2hlcmUgSmFkZSBlc2NhcGVkIGFueXRoaW5nIHRoYXQgbmVlZGVkIGVzY2FwaW5nLCBidXQgd2Ugd291bGRuJ3Qgd2FudCBIVE1MIHRhZ3MgdG8gYmUgZXNjYXBlZCFcXG5cXG4gICAgYGBgamFkZVxcbiAgICB0aXRsZT1tb2RlbC50aXRsZVxcbiAgICBtYWluIT1wYXJ0aWFsXFxuICAgIGBgYFxcblxcbiAgICBCeSB0aGUgd2F5LCBkaWQgeW91IGtub3cgdGhhdCBgPGh0bWw+YCwgYDxoZWFkPmAsIGFuZCBgPGJvZHk+YCBhcmUgYWxsIG9wdGlvbmFsIGluIEhUTUwgNSwgYW5kIHRoYXQgeW91IGNhbiBzYWZlbHkgb21pdCB0aGVtIGluIHlvdXIgSFRNTD8gT2YgY291cnNlLCByZW5kZXJpbmcgZW5naW5lcyB3aWxsIHN0aWxsIGluc2VydCB0aG9zZSBlbGVtZW50cyBhdXRvbWF0aWNhbGx5IGludG8gdGhlIERPTSBmb3IgeW91ISBfSG93IGNvb2wgaXMgdGhhdD9fXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG5vZGUgYXBwXFxuICAgIGBgYFxcblxcbiAgICAhW1NjcmVlbnNob3Qgd2l0aCBgbm9kZSBhcHBgIG91dHB1dF1bMzVdXFxuXFxuICAgIFlvdSBjYW4gbm93IHZpc2l0IGBsb2NhbGhvc3Q6MzAwMGAgd2l0aCB5b3VyIGZhdm9yaXRlIHdlYiBicm93c2VyIGFuZCB5b3UnbGwgbm90aWNlIHRoYXQgdGhlIHZpZXcgcmVuZGVycyBhcyB5b3UnZCBleHBlY3QuIFRoZSB0aXRsZSB3aWxsIGJlIHByb3Blcmx5IHNldCwgYW5kIGEgYDxtYWluPmAgZWxlbWVudCB3aWxsIGhhdmUgdGhlIGNvbnRlbnRzIG9mIHlvdXIgdmlldy5cXG5cXG4gICAgIVtTY3JlZW5zaG90IHdpdGggYXBwbGljYXRpb24gcnVubmluZyBvbiBHb29nbGUgQ2hyb21lXVszNl1cXG5cXG4gICAgVGhhdCdzIGl0LCBub3cgeW91ciB2aWV3IGhhcyBhIHRpdGxlLiBPZiBjb3Vyc2UsIHRoZXJlJ3Mgbm90aGluZyBzdG9wcGluZyB5b3UgZnJvbSBhZGRpbmcgZGF0YWJhc2UgY2FsbHMgdG8gZmV0Y2ggYml0cyBhbmQgcGllY2VzIG9mIHRoZSBtb2RlbCBiZWZvcmUgaW52b2tpbmcgYG5leHRgIHRvIHJlbmRlciB0aGUgdmlldy5cXG5cXG4gICAgVGhlbiB0aGVyZSdzIGFsc28gdGhlIGNsaWVudC1zaWRlIGFzcGVjdCBvZiBzZXR0aW5nIHVwIFRhdW51cy4gTGV0J3Mgc2V0IGl0IHVwIGFuZCBzZWUgaG93IGl0IG9wZW5zIHVwIG91ciBwb3NzaWJpbGl0aWVzLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIFRhdW51cyBpbiB0aGUgY2xpZW50XFxuXFxuICAgIFlvdSBhbHJlYWR5IGtub3cgaG93IHRvIHNldCB1cCB0aGUgYmFzaWNzIGZvciBzZXJ2ZXItc2lkZSByZW5kZXJpbmcsIGFuZCB5b3Uga25vdyB0aGF0IHlvdSBzaG91bGQgW2NoZWNrIG91dCB0aGUgQVBJIGRvY3VtZW50YXRpb25dWzE4XSB0byBnZXQgYSBtb3JlIHRob3JvdWdoIHVuZGVyc3RhbmRpbmcgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2Ugb24gVGF1bnVzLCBhbmQgd2hhdCBpdCBlbmFibGVzIHlvdSB0byBkby5cXG5cXG4gICAgVGhlIHdheSBUYXVudXMgd29ya3Mgb24gdGhlIGNsaWVudC1zaWRlIGlzIHNvIHRoYXQgb25jZSB5b3Ugc2V0IGl0IHVwLCBpdCB3aWxsIGhpamFjayBsaW5rIGNsaWNrcyBhbmQgdXNlIEFKQVggdG8gZmV0Y2ggbW9kZWxzIGFuZCByZW5kZXIgdGhvc2Ugdmlld3MgaW4gdGhlIGNsaWVudC4gSWYgdGhlIEphdmFTY3JpcHQgY29kZSBmYWlscyB0byBsb2FkLCBfb3IgaWYgaXQgaGFzbid0IGxvYWRlZCB5ZXQgZHVlIHRvIGEgc2xvdyBjb25uZWN0aW9uIHN1Y2ggYXMgdGhvc2UgaW4gdW5zdGFibGUgbW9iaWxlIG5ldHdvcmtzXywgdGhlIHJlZ3VsYXIgbGluayB3b3VsZCBiZSBmb2xsb3dlZCBpbnN0ZWFkIGFuZCBubyBoYXJtIHdvdWxkIGJlIHVubGVhc2hlZCB1cG9uIHRoZSBodW1hbiwgZXhjZXB0IHRoZXkgd291bGQgZ2V0IGEgc2xpZ2h0bHkgbGVzcyBmYW5jeSBleHBlcmllbmNlLlxcblxcbiAgICBTZXR0aW5nIHVwIHRoZSBjbGllbnQtc2lkZSBpbnZvbHZlcyBhIGZldyBkaWZmZXJlbnQgc3RlcHMuIEZpcnN0bHksIHdlJ2xsIGhhdmUgdG8gY29tcGlsZSB0aGUgYXBwbGljYXRpb24ncyB3aXJpbmcgXyh0aGUgcm91dGVzIGFuZCBKYXZhU2NyaXB0IHZpZXcgZnVuY3Rpb25zKV8gaW50byBzb21ldGhpbmcgdGhlIGJyb3dzZXIgdW5kZXJzdGFuZHMuIFRoZW4sIHlvdSdsbCBoYXZlIHRvIG1vdW50IFRhdW51cyBvbiB0aGUgY2xpZW50LXNpZGUsIHBhc3NpbmcgdGhlIHdpcmluZyBzbyB0aGF0IGl0IGtub3dzIHdoaWNoIHJvdXRlcyBpdCBzaG91bGQgcmVzcG9uZCB0bywgYW5kIHdoaWNoIG90aGVycyBpdCBzaG91bGQgbWVyZWx5IGlnbm9yZS4gT25jZSB0aGF0J3Mgb3V0IG9mIHRoZSB3YXksIGNsaWVudC1zaWRlIHJvdXRpbmcgd291bGQgYmUgc2V0IHVwLlxcblxcbiAgICBBcyBzdWdhciBjb2F0aW5nIG9uIHRvcCBvZiB0aGF0LCB5b3UgbWF5IGFkZCBjbGllbnQtc2lkZSBmdW5jdGlvbmFsaXR5IHVzaW5nIGNvbnRyb2xsZXJzLiBUaGVzZSBjb250cm9sbGVycyB3b3VsZCBiZSBleGVjdXRlZCBldmVuIGlmIHRoZSB2aWV3IHdhcyByZW5kZXJlZCBvbiB0aGUgc2VydmVyLXNpZGUuIFRoZXkgY2FuIGFjY2VzcyB0aGUgVGF1bnVzIEFQSSBkaXJlY3RseSwgaW4gY2FzZSB5b3UgbmVlZCB0byBuYXZpZ2F0ZSB0byBhbm90aGVyIHZpZXcgaW4gc29tZSB3YXkgb3RoZXIgdGhhbiBieSBoYXZpbmcgaHVtYW5zIGNsaWNrIG9uIGFuY2hvciB0YWdzLiBUaGUgQVBJLCBhcyB5b3UnbGwgbGVhcm4sIHdpbGwgYWxzbyBsZXQgeW91IHJlbmRlciBwYXJ0aWFsIHZpZXdzIHVzaW5nIHRoZSBwb3dlcmZ1bCBUYXVudXMgZW5naW5lLCBsaXN0ZW4gZm9yIGV2ZW50cyB0aGF0IG1heSBvY2N1ciBhdCBrZXkgc3RhZ2VzIG9mIHRoZSB2aWV3LXJlbmRlcmluZyBwcm9jZXNzLCBhbmQgZXZlbiBpbnRlcmNlcHQgQUpBWCByZXF1ZXN0cyBibG9ja2luZyB0aGVtIGJlZm9yZSB0aGV5IGV2ZXIgaGFwcGVuLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIFVzaW5nIHRoZSBUYXVudXMgQ0xJXFxuXFxuICAgIFRhdW51cyBjb21lcyB3aXRoIGEgQ0xJIHRoYXQgY2FuIGJlIHVzZWQgdG8gd2lyZSB5b3VyIE5vZGUuanMgcm91dGVzIGFuZCB2aWV3cyBpbnRvIHRoZSBjbGllbnQtc2lkZS4gVGhlIHNhbWUgQ0xJIGNhbiBiZSB1c2VkIHRvIHdpcmUgdXAgdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFzIHdlbGwuIFRoZSBtYWluIHJlYXNvbiB3aHkgdGhlIFRhdW51cyBDTEkgZXhpc3RzIGlzIHNvIHRoYXQgeW91IGRvbid0IGhhdmUgdG8gYHJlcXVpcmVgIGV2ZXJ5IHNpbmdsZSB2aWV3IGFuZCBjb250cm9sbGVyLCB1bmRvaW5nIGEgbG90IG9mIHRoZSB3b3JrIHRoYXQgd2FzIHB1dCBpbnRvIGNvZGUgcmV1c2UuIEp1c3QgbGlrZSB3ZSBkaWQgd2l0aCBgamFkdW1gIGVhcmxpZXIsIHdlJ2xsIGluc3RhbGwgdGhlIGB0YXVudXNgIENMSSBnbG9iYWxseSBmb3IgdGhlIHNha2Ugb2YgZXhlcmNpc2luZywgYnV0IHdlIHVuZGVyc3RhbmQgdGhhdCByZWx5aW5nIG9uIGdsb2JhbGx5IGluc3RhbGxlZCBtb2R1bGVzIGlzIGluc3VmZmljaWVudCBmb3IgcHJvZHVjdGlvbi1ncmFkZSBhcHBsaWNhdGlvbnMuXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG5wbSBpbnN0YWxsIC0tZ2xvYmFsIHRhdW51c1xcbiAgICBgYGBcXG5cXG4gICAgQmVmb3JlIHlvdSBjYW4gdXNlIHRoZSBDTEksIHlvdSBzaG91bGQgbW92ZSB0aGUgcm91dGUgZGVmaW5pdGlvbnMgdG8gYGNvbnRyb2xsZXJzL3JvdXRlcy5qc2AuIFRoYXQncyB3aGVyZSBUYXVudXMgZXhwZWN0cyB0aGVtIHRvIGJlLiBJZiB5b3Ugd2FudCB0byBwbGFjZSB0aGVtIHNvbWV0aGluZyBlbHNlLCBbdGhlIEFQSSBkb2N1bWVudGF0aW9uIGNhbiBoZWxwIHlvdV1bMThdLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICBtdiByb3V0ZXMuanMgY29udHJvbGxlcnMvcm91dGVzLmpzXFxuICAgIGBgYFxcblxcbiAgICBTaW5jZSB5b3UgbW92ZWQgdGhlIHJvdXRlcyB5b3Ugc2hvdWxkIGFsc28gdXBkYXRlIHRoZSBgcmVxdWlyZWAgc3RhdGVtZW50IGluIHRoZSBgYXBwLmpzYCBtb2R1bGUuXFxuXFxuICAgIGBgYGpzXFxuICAgICd1c2Ugc3RyaWN0JztcXG5cXG4gICAgdmFyIHRhdW51cyA9IHJlcXVpcmUoJ3RhdW51cycpO1xcbiAgICB2YXIgdGF1bnVzRXhwcmVzcyA9IHJlcXVpcmUoJ3RhdW51cy1leHByZXNzJyk7XFxuICAgIHZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xcbiAgICB2YXIgYXBwID0gZXhwcmVzcygpO1xcbiAgICB2YXIgb3B0aW9ucyA9IHtcXG4gICAgICByb3V0ZXM6IHJlcXVpcmUoJy4vY29udHJvbGxlcnMvcm91dGVzJyksXFxuICAgICAgbGF5b3V0OiByZXF1aXJlKCcuLy5iaW4vdmlld3MvbGF5b3V0JylcXG4gICAgfTtcXG5cXG4gICAgdGF1bnVzRXhwcmVzcyh0YXVudXMsIGFwcCwgb3B0aW9ucyk7XFxuICAgIGFwcC5saXN0ZW4oMzAwMCk7XFxuICAgIGBgYFxcblxcbiAgICBUaGUgQ0xJIGlzIHRlcnNlIGluIGJvdGggaXRzIGlucHV0cyBhbmQgaXRzIG91dHB1dHMuIElmIHlvdSBydW4gaXQgd2l0aG91dCBhbnkgYXJndW1lbnRzIGl0J2xsIHByaW50IG91dCB0aGUgd2lyaW5nIG1vZHVsZSwgYW5kIGlmIHlvdSB3YW50IHRvIHBlcnNpc3QgaXQgeW91IHNob3VsZCBwcm92aWRlIHRoZSBgLS1vdXRwdXRgIGZsYWcuIEluIHR5cGljYWwgW2NvbnZlbnRpb24tb3Zlci1jb25maWd1cmF0aW9uXVs4XSBmYXNoaW9uLCB0aGUgQ0xJIHdpbGwgZGVmYXVsdCB0byBpbmZlcnJpbmcgeW91ciB2aWV3cyBhcmUgbG9jYXRlZCBpbiBgLmJpbi92aWV3c2AgYW5kIHRoYXQgeW91IHdhbnQgdGhlIHdpcmluZyBtb2R1bGUgdG8gYmUgcGxhY2VkIGluIGAuYmluL3dpcmluZy5qc2AsIGJ1dCB5b3UnbGwgYmUgYWJsZSB0byBjaGFuZ2UgdGhhdCBpZiBpdCBkb2Vzbid0IG1lZXQgeW91ciBuZWVkcy5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgdGF1bnVzIC0tb3V0cHV0XFxuICAgIGBgYFxcblxcbiAgICBBdCB0aGlzIHBvaW50IGluIG91ciBleGFtcGxlLCB0aGUgQ0xJIHNob3VsZCBjcmVhdGUgYSBgLmJpbi93aXJpbmcuanNgIGZpbGUgd2l0aCB0aGUgY29udGVudHMgZGV0YWlsZWQgYmVsb3cuIEFzIHlvdSBjYW4gc2VlLCBldmVuIGlmIGB0YXVudXNgIGlzIGFuIGF1dG9tYXRlZCBjb2RlLWdlbmVyYXRpb24gdG9vbCwgaXQncyBvdXRwdXQgaXMgYXMgaHVtYW4gcmVhZGFibGUgYXMgYW55IG90aGVyIG1vZHVsZS5cXG5cXG4gICAgYGBganNcXG4gICAgJ3VzZSBzdHJpY3QnO1xcblxcbiAgICB2YXIgdGVtcGxhdGVzID0ge1xcbiAgICAgICdob21lL2luZGV4JzogcmVxdWlyZSgnLi92aWV3cy9ob21lL2luZGV4LmpzJyksXFxuICAgICAgJ2xheW91dCc6IHJlcXVpcmUoJy4vdmlld3MvbGF5b3V0LmpzJylcXG4gICAgfTtcXG5cXG4gICAgdmFyIGNvbnRyb2xsZXJzID0ge1xcbiAgICB9O1xcblxcbiAgICB2YXIgcm91dGVzID0gW1xcbiAgICAgIHtcXG4gICAgICAgIHJvdXRlOiAnLycsXFxuICAgICAgICBhY3Rpb246ICdob21lL2luZGV4J1xcbiAgICAgIH1cXG4gICAgXTtcXG5cXG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XFxuICAgICAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXFxuICAgICAgY29udHJvbGxlcnM6IGNvbnRyb2xsZXJzLFxcbiAgICAgIHJvdXRlczogcm91dGVzXFxuICAgIH07XFxuICAgIGBgYFxcblxcbiAgICAhW1NjcmVlbnNob3Qgd2l0aCBgdGF1bnVzYCBvdXRwdXRdWzM3XVxcblxcbiAgICBOb3RlIHRoYXQgdGhlIGBjb250cm9sbGVyc2Agb2JqZWN0IGlzIGVtcHR5IGJlY2F1c2UgeW91IGhhdmVuJ3QgY3JlYXRlZCBhbnkgX2NsaWVudC1zaWRlIGNvbnRyb2xsZXJzXyB5ZXQuIFdlIGNyZWF0ZWQgc2VydmVyLXNpZGUgY29udHJvbGxlcnMgYnV0IHRob3NlIGRvbid0IGhhdmUgYW55IGVmZmVjdCBpbiB0aGUgY2xpZW50LXNpZGUsIGJlc2lkZXMgZGV0ZXJtaW5pbmcgd2hhdCBnZXRzIHNlbnQgdG8gdGhlIGNsaWVudC5cXG5cXG4gICAgPiAqKlRoZSBDTEkgY2FuIGJlIGVudGlyZWx5IGlnbm9yZWQqKi4gWW91IGNvdWxkIHdyaXRlIHRoZXNlIGRlZmluaXRpb25zIGJ5IHlvdXJzZWxmLCBidXQgeW91IHdvdWxkIGhhdmUgdG8gcmVtZW1iZXIgdG8gdXBkYXRlIHRoZSB3aXJpbmcgbW9kdWxlIHdoZW5ldmVyIHlvdSBhZGQsIGNoYW5nZSwgb3IgcmVtb3ZlIGEgdmlldywgYSBjbGllbnQtc2lkZSBjb250cm9sbGVyLCBvciBhIHJvdXRlLiBEb2luZyB0aGF0IHdvdWxkIGJlIGN1bWJlcnNvbWUsIGFuZCB0aGUgQ0xJIHNvbHZlcyB0aGF0IHByb2JsZW0gZm9yIHVzIGF0IHRoZSBleHBlbnNlIG9mIG9uZSBhZGRpdGlvbmFsIGJ1aWxkIHN0ZXAuXFxuXFxuICAgIER1cmluZyBkZXZlbG9wbWVudCwgeW91IGNhbiBhbHNvIGFkZCB0aGUgYC0td2F0Y2hgIGZsYWcsIHdoaWNoIHdpbGwgcmVidWlsZCB0aGUgd2lyaW5nIG1vZHVsZSBpZiBhIHJlbGV2YW50IGZpbGUgY2hhbmdlcy5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgdGF1bnVzIC0tb3V0cHV0IC0td2F0Y2hcXG4gICAgYGBgXFxuXFxuICAgIElmIHlvdSdyZSB1c2luZyBIYXBpIGluc3RlYWQgb2YgRXhwcmVzcywgeW91J2xsIGFsc28gbmVlZCB0byBwYXNzIGluIHRoZSBgaGFwaWlmeWAgdHJhbnNmb3JtIHNvIHRoYXQgcm91dGVzIGdldCBjb252ZXJ0ZWQgaW50byBzb21ldGhpbmcgdGhlIGNsaWVudC1zaWRlIHJvdXRpbmcgbW9kdWxlIHVuZGVyc3RhbmQuXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIHRhdW51cyAtLW91dHB1dCAtLXRyYW5zZm9ybSBoYXBpaWZ5XFxuICAgIGBgYFxcblxcbiAgICBOb3cgdGhhdCB5b3UgdW5kZXJzdGFuZCBob3cgdG8gdXNlIHRoZSBDTEkgb3IgYnVpbGQgdGhlIHdpcmluZyBtb2R1bGUgb24geW91ciBvd24sIGJvb3RpbmcgdXAgVGF1bnVzIG9uIHRoZSBjbGllbnQtc2lkZSB3aWxsIGJlIGFuIGVhc3kgdGhpbmcgdG8gZG8hXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMgQm9vdGluZyB1cCB0aGUgY2xpZW50LXNpZGUgcm91dGVyXFxuXFxuICAgIE9uY2Ugd2UgaGF2ZSB0aGUgd2lyaW5nIG1vZHVsZSwgYm9vdGluZyB1cCB0aGUgY2xpZW50LXNpZGUgZW5naW5lIGlzIHByZXR0eSBlYXN5LiBUYXVudXMgc3VnZ2VzdHMgeW91IHVzZSBgY2xpZW50L2pzYCB0byBrZWVwIGFsbCBvZiB5b3VyIGNsaWVudC1zaWRlIEphdmFTY3JpcHQgbG9naWMsIGJ1dCB0aGF0IGlzIHVwIHRvIHlvdSB0b28uIEZvciB0aGUgc2FrZSBvZiB0aGlzIGd1aWRlLCBsZXQncyBzdGljayB0byB0aGUgY29udmVudGlvbnMuXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIG1rZGlyIC1wIGNsaWVudC9qc1xcbiAgICB0b3VjaCBjbGllbnQvanMvbWFpbi5qc1xcbiAgICBgYGBcXG5cXG4gICAgVGhlIGBtYWluYCBtb2R1bGUgd2lsbCBiZSB1c2VkIGFzIHRoZSBfZW50cnkgcG9pbnRfIG9mIHlvdXIgYXBwbGljYXRpb24gb24gdGhlIGNsaWVudC1zaWRlLiBIZXJlIHlvdSdsbCBuZWVkIHRvIGltcG9ydCBgdGF1bnVzYCwgdGhlIHdpcmluZyBtb2R1bGUgd2UndmUganVzdCBidWlsdCwgYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBET00gZWxlbWVudCB3aGVyZSB5b3UgYXJlIHJlbmRlcmluZyB5b3VyIHBhcnRpYWwgdmlld3MuIE9uY2UgeW91IGhhdmUgYWxsIHRoYXQsIHlvdSBjYW4gaW52b2tlIGB0YXVudXMubW91bnRgLlxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIHZhciB0YXVudXMgPSByZXF1aXJlKCd0YXVudXMnKTtcXG4gICAgdmFyIHdpcmluZyA9IHJlcXVpcmUoJy4uLy4uLy5iaW4vd2lyaW5nJyk7XFxuICAgIHZhciBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21haW4nKVswXTtcXG5cXG4gICAgdGF1bnVzLm1vdW50KG1haW4sIHdpcmluZyk7XFxuICAgIGBgYFxcblxcbiAgICBUaGUgbW91bnRwb2ludCB3aWxsIHNldCB1cCB0aGUgY2xpZW50LXNpZGUgVGF1bnVzIHJvdXRlciBhbmQgZmlyZSB0aGUgY2xpZW50LXNpZGUgdmlldyBjb250cm9sbGVyIGZvciB0aGUgdmlldyB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGluIHRoZSBzZXJ2ZXItc2lkZS4gV2hlbmV2ZXIgYW4gYW5jaG9yIGxpbmsgaXMgY2xpY2tlZCwgVGF1bnVzIHdpbGwgYmUgYWJsZSB0byBoaWphY2sgdGhhdCBjbGljayBhbmQgcmVxdWVzdCB0aGUgbW9kZWwgdXNpbmcgQUpBWCwgYnV0IG9ubHkgaWYgaXQgbWF0Y2hlcyBhIHZpZXcgcm91dGUuIE90aGVyd2lzZSB0aGUgbGluayB3aWxsIGJlaGF2ZSBqdXN0IGxpa2UgYW55IG5vcm1hbCBsaW5rIHdvdWxkLlxcblxcbiAgICBCeSBkZWZhdWx0LCB0aGUgbW91bnRwb2ludCB3aWxsIGlzc3VlIGFuIEFKQVggcmVxdWVzdCBmb3IgdGhlIHZpZXcgbW9kZWwgb2YgdGhlIHNlcnZlci1zaWRlIHJlbmRlcmVkIHZpZXcuIFRoaXMgaXMgYWtpbiB0byB3aGF0IGRlZGljYXRlZCBjbGllbnQtc2lkZSByZW5kZXJpbmcgZnJhbWV3b3JrcyBzdWNoIGFzIEFuZ3VsYXJKUyBkbywgd2hlcmUgdmlld3MgYXJlIG9ubHkgcmVuZGVyZWQgYWZ0ZXIgYWxsIHRoZSBKYXZhU2NyaXB0IGhhcyBiZWVuIGRvd25sb2FkZWQsIHBhcnNlZCwgYW5kIGV4ZWN1dGVkLiBFeGNlcHQgVGF1bnVzIHByb3ZpZGVzIGh1bWFuLXJlYWRhYmxlIGNvbnRlbnQgZmFzdGVyLCBiZWZvcmUgdGhlIEphdmFTY3JpcHQgZXZlbiBiZWdpbnMgZG93bmxvYWRpbmcsIGFsdGhvdWdoIGl0IHdvbid0IGJlIGZ1bmN0aW9uYWwgdW50aWwgdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgcnVucy5cXG5cXG4gICAgQW4gYWx0ZXJuYXRpdmUgaXMgdG8gaW5saW5lIHRoZSB2aWV3IG1vZGVsIGFsb25nc2lkZSB0aGUgdmlld3MgaW4gYSBgPHNjcmlwdCB0eXBlPSd0ZXh0L3RhdW51cyc+YCB0YWcsIGJ1dCB0aGlzIHRlbmRzIHRvIHNsb3cgZG93biB0aGUgaW5pdGlhbCByZXNwb25zZSAobW9kZWxzIGFyZSBfdHlwaWNhbGx5IGxhcmdlcl8gdGhhbiB0aGUgcmVzdWx0aW5nIHZpZXdzKS5cXG5cXG4gICAgQSB0aGlyZCBzdHJhdGVneSBpcyB0aGF0IHlvdSByZXF1ZXN0IHRoZSBtb2RlbCBhc3luY2hyb25vdXNseSBvdXRzaWRlIG9mIFRhdW51cywgYWxsb3dpbmcgeW91IHRvIGZldGNoIGJvdGggdGhlIHZpZXcgbW9kZWwgYW5kIFRhdW51cyBpdHNlbGYgY29uY3VycmVudGx5LCBidXQgdGhhdCdzIGhhcmRlciB0byBzZXQgdXAuXFxuXFxuICAgIFRoZSB0aHJlZSBib290aW5nIHN0cmF0ZWdpZXMgYXJlIGV4cGxhaW5lZCBpbiBbdGhlIEFQSSBkb2N1bWVudGF0aW9uXVsxOF0gYW5kIGZ1cnRoZXIgZGlzY3Vzc2VkIGluIFt0aGUgb3B0aW1pemF0aW9uIGd1aWRlXVsyNV0uIEZvciBub3csIHRoZSBkZWZhdWx0IHN0cmF0ZWd5IF8oYCdhdXRvJ2ApXyBzaG91bGQgc3VmZmljZS4gSXQgZmV0Y2hlcyB0aGUgdmlldyBtb2RlbCB1c2luZyBhbiBBSkFYIHJlcXVlc3QgcmlnaHQgYWZ0ZXIgVGF1bnVzIGxvYWRzLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIEFkZGluZyBmdW5jdGlvbmFsaXR5IGluIGEgY2xpZW50LXNpZGUgY29udHJvbGxlclxcblxcbiAgICBDbGllbnQtc2lkZSBjb250cm9sbGVycyBydW4gd2hlbmV2ZXIgYSB2aWV3IGlzIHJlbmRlcmVkLCBldmVuIGlmIGl0J3MgYSBwYXJ0aWFsLiBUaGUgY29udHJvbGxlciBpcyBwYXNzZWQgdGhlIGBtb2RlbGAsIGNvbnRhaW5pbmcgdGhlIG1vZGVsIHRoYXQgd2FzIHVzZWQgdG8gcmVuZGVyIHRoZSB2aWV3OyB0aGUgYHJvdXRlYCwgYnJva2VuIGRvd24gaW50byBpdHMgY29tcG9uZW50czsgYW5kIHRoZSBgY29udGFpbmVyYCwgd2hpY2ggaXMgd2hhdGV2ZXIgRE9NIGVsZW1lbnQgdGhlIHZpZXcgd2FzIHJlbmRlcmVkIGludG8uXFxuXFxuICAgIFRoZXNlIGNvbnRyb2xsZXJzIGFyZSBlbnRpcmVseSBvcHRpb25hbCwgd2hpY2ggbWFrZXMgc2Vuc2Ugc2luY2Ugd2UncmUgcHJvZ3Jlc3NpdmVseSBlbmhhbmNpbmcgdGhlIGFwcGxpY2F0aW9uOiBpdCBtaWdodCBub3QgZXZlbiBiZSBuZWNlc3NhcnkhIExldCdzIGFkZCBzb21lIGNsaWVudC1zaWRlIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGV4YW1wbGUgd2UndmUgYmVlbiBidWlsZGluZy5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbWtkaXIgLXAgY2xpZW50L2pzL2NvbnRyb2xsZXJzL2hvbWVcXG4gICAgdG91Y2ggY2xpZW50L2pzL2NvbnRyb2xsZXJzL2hvbWUvaW5kZXguanNcXG4gICAgYGBgXFxuXFxuICAgIEd1ZXNzIHdoYXQ/IFRoZSBjb250cm9sbGVyIHNob3VsZCBiZSBhIG1vZHVsZSB3aGljaCBleHBvcnRzIGEgZnVuY3Rpb24uIFRoYXQgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgdGhlIHZpZXcgaXMgcmVuZGVyZWQuIEZvciB0aGUgc2FrZSBvZiBzaW1wbGljaXR5IHdlJ2xsIGp1c3QgcHJpbnQgdGhlIGFjdGlvbiBhbmQgdGhlIG1vZGVsIHRvIHRoZSBjb25zb2xlLiBJZiB0aGVyZSdzIG9uZSBwbGFjZSB3aGVyZSB5b3UnZCB3YW50IHRvIGVuaGFuY2UgdGhlIGV4cGVyaWVuY2UsIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIGFyZSB3aGVyZSB5b3Ugd2FudCB0byBwdXQgeW91ciBjb2RlLlxcblxcbiAgICBgYGBqc1xcbiAgICAndXNlIHN0cmljdCc7XFxuXFxuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1vZGVsLCBjb250YWluZXIsIHJvdXRlKSB7XFxuICAgICAgY29uc29sZS5sb2coJ1JlbmRlcmVkIHZpZXcgJXMgdXNpbmcgbW9kZWw6XFxcXG4lcycsIHJvdXRlLmFjdGlvbiwgSlNPTi5zdHJpbmdpZnkobW9kZWwsIG51bGwsIDIpKTtcXG4gICAgfTtcXG4gICAgYGBgXFxuXFxuICAgIFNpbmNlIHdlIHdlcmVuJ3QgdXNpbmcgdGhlIGAtLXdhdGNoYCBmbGFnIGZyb20gdGhlIFRhdW51cyBDTEksIHlvdSdsbCBoYXZlIHRvIHJlY29tcGlsZSB0aGUgd2lyaW5nIGF0IHRoaXMgcG9pbnQsIHNvIHRoYXQgdGhlIGNvbnRyb2xsZXIgZ2V0cyBhZGRlZCB0byB0aGF0IG1hbmlmZXN0LlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICB0YXVudXMgLS1vdXRwdXRcXG4gICAgYGBgXFxuXFxuICAgIE9mIGNvdXJzZSwgeW91J2xsIG5vdyBoYXZlIHRvIHdpcmUgdXAgdGhlIGNsaWVudC1zaWRlIEphdmFTY3JpcHQgdXNpbmcgW0Jyb3dzZXJpZnldWzM4XSFcXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyBDb21waWxpbmcgeW91ciBjbGllbnQtc2lkZSBKYXZhU2NyaXB0XFxuXFxuICAgIFlvdSdsbCBuZWVkIHRvIGNvbXBpbGUgdGhlIGBjbGllbnQvanMvbWFpbi5qc2AgbW9kdWxlLCBvdXIgY2xpZW50LXNpZGUgYXBwbGljYXRpb24ncyBlbnRyeSBwb2ludCwgdXNpbmcgQnJvd3NlcmlmeSBzaW5jZSB0aGUgY29kZSBpcyB3cml0dGVuIHVzaW5nIENvbW1vbkpTLiBJbiB0aGlzIGV4YW1wbGUgeW91J2xsIGluc3RhbGwgYGJyb3dzZXJpZnlgIGdsb2JhbGx5IHRvIGNvbXBpbGUgdGhlIGNvZGUsIGJ1dCBuYXR1cmFsbHkgeW91J2xsIGluc3RhbGwgaXQgbG9jYWxseSB3aGVuIHdvcmtpbmcgb24gYSByZWFsLXdvcmxkIGFwcGxpY2F0aW9uLlxcblxcbiAgICBgYGBzaGVsbFxcbiAgICBucG0gaW5zdGFsbCAtLWdsb2JhbCBicm93c2VyaWZ5XFxuICAgIGBgYFxcblxcbiAgICBPbmNlIHlvdSBoYXZlIHRoZSBCcm93c2VyaWZ5IENMSSwgeW91J2xsIGJlIGFibGUgdG8gY29tcGlsZSB0aGUgY29kZSByaWdodCBmcm9tIHlvdXIgY29tbWFuZCBsaW5lLiBUaGUgYC1kYCBmbGFnIHRlbGxzIEJyb3dzZXJpZnkgdG8gYWRkIGFuIGlubGluZSBzb3VyY2UgbWFwIGludG8gdGhlIGNvbXBpbGVkIGJ1bmRsZSwgbWFraW5nIGRlYnVnZ2luZyBlYXNpZXIgZm9yIHVzLiBUaGUgYC1vYCBmbGFnIHJlZGlyZWN0cyBvdXRwdXQgdG8gdGhlIGluZGljYXRlZCBmaWxlLCB3aGVyZWFzIHRoZSBvdXRwdXQgaXMgcHJpbnRlZCB0byBzdGFuZGFyZCBvdXRwdXQgYnkgZGVmYXVsdC5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbWtkaXIgLXAgLmJpbi9wdWJsaWMvanNcXG4gICAgYnJvd3NlcmlmeSBjbGllbnQvanMvbWFpbi5qcyAtZG8gLmJpbi9wdWJsaWMvanMvYWxsLmpzXFxuICAgIGBgYFxcblxcbiAgICBXZSBoYXZlbid0IGRvbmUgbXVjaCBvZiBhbnl0aGluZyB3aXRoIHRoZSBFeHByZXNzIGFwcGxpY2F0aW9uLCBzbyB5b3UnbGwgbmVlZCB0byBhZGp1c3QgdGhlIGBhcHAuanNgIG1vZHVsZSB0byBzZXJ2ZSBzdGF0aWMgYXNzZXRzLiBJZiB5b3UncmUgdXNlZCB0byBFeHByZXNzLCB5b3UnbGwgbm90aWNlIHRoZXJlJ3Mgbm90aGluZyBzcGVjaWFsIGFib3V0IGhvdyB3ZSdyZSB1c2luZyBgc2VydmUtc3RhdGljYC5cXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbnBtIGluc3RhbGwgLS1zYXZlIHNlcnZlLXN0YXRpY1xcbiAgICBgYGBcXG5cXG4gICAgTGV0J3MgY29uZmlndXJlIHRoZSBhcHBsaWNhdGlvbiB0byBzZXJ2ZSBzdGF0aWMgYXNzZXRzIGZyb20gYC5iaW4vcHVibGljYC5cXG5cXG4gICAgYGBganNcXG4gICAgJ3VzZSBzdHJpY3QnO1xcblxcbiAgICB2YXIgdGF1bnVzID0gcmVxdWlyZSgndGF1bnVzJyk7XFxuICAgIHZhciB0YXVudXNFeHByZXNzID0gcmVxdWlyZSgndGF1bnVzLWV4cHJlc3MnKTtcXG4gICAgdmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XFxuICAgIHZhciBzZXJ2ZVN0YXRpYyA9IHJlcXVpcmUoJ3NlcnZlLXN0YXRpYycpO1xcbiAgICB2YXIgYXBwID0gZXhwcmVzcygpO1xcbiAgICB2YXIgb3B0aW9ucyA9IHtcXG4gICAgICByb3V0ZXM6IHJlcXVpcmUoJy4vY29udHJvbGxlcnMvcm91dGVzJyksXFxuICAgICAgbGF5b3V0OiByZXF1aXJlKCcuLy5iaW4vdmlld3MvbGF5b3V0JylcXG4gICAgfTtcXG5cXG4gICAgYXBwLnVzZShzZXJ2ZVN0YXRpYygnLmJpbi9wdWJsaWMnKSk7XFxuICAgIHRhdW51c0V4cHJlc3ModGF1bnVzLCBhcHAsIG9wdGlvbnMpO1xcbiAgICBhcHAubGlzdGVuKDMwMDApO1xcbiAgICBgYGBcXG5cXG4gICAgTmV4dCB1cCwgeW91J2xsIGhhdmUgdG8gZWRpdCB0aGUgbGF5b3V0IHRvIGluY2x1ZGUgdGhlIGNvbXBpbGVkIEphdmFTY3JpcHQgYnVuZGxlIGZpbGUuXFxuXFxuICAgIGBgYGphZGVcXG4gICAgdGl0bGU9bW9kZWwudGl0bGVcXG4gICAgbWFpbiE9cGFydGlhbFxcbiAgICBzY3JpcHQoc3JjPScvanMvYWxsLmpzJylcXG4gICAgYGBgXFxuXFxuICAgIERvbid0IGZvcmdldCB0byBjb21waWxlIGBsYXlvdXQuamFkZWAgYWdhaW4uXFxuXFxuICAgIGBgYHNoZWxsXFxuICAgIGphZHVtIHZpZXdzLyoqIC0tb3V0cHV0IC5iaW5cXG4gICAgYGBgXFxuXFxuICAgIExhc3RseSwgeW91IGNhbiBleGVjdXRlIHRoZSBhcHBsaWNhdGlvbiBhbmQgc2VlIGl0IGluIGFjdGlvbiFcXG5cXG4gICAgYGBgc2hlbGxcXG4gICAgbm9kZSBhcHBcXG4gICAgYGBgXFxuXFxuICAgICFbU2NyZWVuc2hvdCB3aXRoIGBub2RlIGFwcGAgb3V0cHV0XVszOV1cXG5cXG4gICAgSWYgeW91IG9wZW4gdGhlIGFwcGxpY2F0aW9uIG9uIGEgd2ViIGJyb3dzZXIsIHlvdSdsbCBub3RpY2UgdGhhdCB0aGUgYXBwcm9wcmlhdGUgaW5mb3JtYXRpb24gd2lsbCBiZSBsb2dnZWQgaW50byB0aGUgZGV2ZWxvcGVyIGBjb25zb2xlYC5cXG5cXG4gICAgIVtTY3JlZW5zaG90IHdpdGggdGhlIGFwcGxpY2F0aW9uIHJ1bm5pbmcgdW5kZXIgR29vZ2xlIENocm9tZV1bNDBdXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjdGFibGUtb2YtY29udGVudHMpPC9zdWI+XFxuXFxuICAgICMjIyMgVXNpbmcgdGhlIGNsaWVudC1zaWRlIFRhdW51cyBBUElcXG5cXG4gICAgVGF1bnVzIGRvZXMgcHJvdmlkZSBbYSB0aGluIEFQSV1bMThdIGluIHRoZSBjbGllbnQtc2lkZS4gVXNhZ2Ugb2YgdGhhdCBBUEkgYmVsb25ncyBtb3N0bHkgaW5zaWRlIHRoZSBib2R5IG9mIGNsaWVudC1zaWRlIHZpZXcgY29udHJvbGxlcnMsIGJ1dCB0aGVyZSdzIGEgZmV3IG1ldGhvZHMgeW91IGNhbiB0YWtlIGFkdmFudGFnZSBvZiBvbiBhIGdsb2JhbCBzY2FsZSBhcyB3ZWxsLlxcblxcbiAgICBUYXVudXMgY2FuIG5vdGlmeSB5b3Ugd2hlbmV2ZXIgaW1wb3J0YW50IGV2ZW50cyBvY2N1ci5cXG5cXG4gICAgRXZlbnQgICAgICAgICAgICB8IEFyZ3VtZW50cyAgICAgICAgICAgICAgICAgfCBEZXNjcmlwdGlvblxcbiAgICAtLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuICAgIGAnc3RhcnQnYCAgICAgICAgfCBgY29udGFpbmVyLCBtb2RlbCwgcm91dGVgIHwgRW1pdHRlZCB3aGVuIGB0YXVudXMubW91bnRgIGZpbmlzaGVkIHRoZSByb3V0ZSBzZXR1cCBhbmQgaXMgYWJvdXQgdG8gaW52b2tlIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyLiBTdWJzY3JpYmUgdG8gdGhpcyBldmVudCBiZWZvcmUgY2FsbGluZyBgdGF1bnVzLm1vdW50YC5cXG4gICAgYCdyZW5kZXInYCAgICAgICB8IGBjb250YWluZXIsIG1vZGVsLCByb3V0ZWAgfCBBIHZpZXcgaGFzIGp1c3QgYmVlbiByZW5kZXJlZCBhbmQgaXRzIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgaXMgYWJvdXQgdG8gYmUgaW52b2tlZFxcbiAgICBgJ2NoYW5nZSdgICAgICAgIHwgYHJvdXRlLCBtb2RlbGAgICAgICAgICAgICB8IFNhbWUgYXMgYCdyZW5kZXInYCwgYnV0IG9ubHkgaWYgYGNvbnRhaW5lcmAgaXMgdGhlIG1vdW50cG9pbnQgYW5kIHRoZSByb3V0ZSBoYXMgY2hhbmdlZC5cXG4gICAgYCdmZXRjaC5zdGFydCdgICB8ICBgcm91dGUsIGNvbnRleHRgICAgICAgICAgfCBFbWl0dGVkIHdoZW5ldmVyIGFuIFhIUiByZXF1ZXN0IHN0YXJ0cy5cXG4gICAgYCdmZXRjaC5kb25lJ2AgICB8ICBgcm91dGUsIGNvbnRleHQsIGRhdGFgICAgfCBFbWl0dGVkIHdoZW5ldmVyIGFuIFhIUiByZXF1ZXN0IGVuZHMgc3VjY2Vzc2Z1bGx5LlxcbiAgICBgJ2ZldGNoLmFib3J0J2AgIHwgIGByb3V0ZSwgY29udGV4dGAgICAgICAgICB8IEVtaXR0ZWQgd2hlbmV2ZXIgYW4gWEhSIHJlcXVlc3QgaXMgcHVycG9zZWx5IGFib3J0ZWQuXFxuICAgIGAnZmV0Y2guZXJyb3InYCAgfCAgYHJvdXRlLCBjb250ZXh0LCBlcnJgICAgIHwgRW1pdHRlZCB3aGVuZXZlciBhbiBYSFIgcmVxdWVzdCByZXN1bHRzIGluIGFuIEhUVFAgZXJyb3IuXFxuXFxuICAgIEJlc2lkZXMgZXZlbnRzLCB0aGVyZSdzIGEgY291cGxlIG1vcmUgbWV0aG9kcyB5b3UgY2FuIHVzZS4gVGhlIGB0YXVudXMubmF2aWdhdGVgIG1ldGhvZCBhbGxvd3MgeW91IHRvIG5hdmlnYXRlIHRvIGEgVVJMIHdpdGhvdXQgdGhlIG5lZWQgZm9yIGEgaHVtYW4gdG8gY2xpY2sgb24gYW4gYW5jaG9yIGxpbmsuIFRoZW4gdGhlcmUncyBgdGF1bnVzLnBhcnRpYWxgLCBhbmQgdGhhdCBhbGxvd3MgeW91IHRvIHJlbmRlciBhbnkgcGFydGlhbCB2aWV3IG9uIGEgRE9NIGVsZW1lbnQgb2YgeW91ciBjaG9vc2luZywgYW5kIGl0J2xsIHRoZW4gaW52b2tlIGl0cyBjb250cm9sbGVyLiBZb3UnbGwgbmVlZCB0byBjb21lIHVwIHdpdGggdGhlIG1vZGVsIHlvdXJzZWxmLCB0aG91Z2guXFxuXFxuICAgIEFzdG9uaXNoaW5nbHksIHRoZSBBUEkgaXMgZnVydGhlciBkb2N1bWVudGVkIGluIFt0aGUgQVBJIGRvY3VtZW50YXRpb25dWzE4XS5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgIyMjIyBDYWNoaW5nIGFuZCBQcmVmZXRjaGluZ1xcblxcbiAgICBbUGVyZm9ybWFuY2VdWzI1XSBwbGF5cyBhbiBpbXBvcnRhbnQgcm9sZSBpbiBUYXVudXMuIFRoYXQncyB3aHkgdGhlIHlvdSBjYW4gcGVyZm9ybSBjYWNoaW5nIGFuZCBwcmVmZXRjaGluZyBvbiB0aGUgY2xpZW50LXNpZGUganVzdCBieSB0dXJuaW5nIG9uIGEgcGFpciBvZiBmbGFncy4gQnV0IHdoYXQgZG8gdGhlc2UgZmxhZ3MgZG8gZXhhY3RseT9cXG5cXG4gICAgV2hlbiB0dXJuZWQgb24sIGJ5IHBhc3NpbmcgYHsgY2FjaGU6IHRydWUgfWAgYXMgdGhlIHRoaXJkIHBhcmFtZXRlciBmb3IgYHRhdW51cy5tb3VudGAsIHRoZSBjYWNoaW5nIGxheWVyIHdpbGwgbWFrZSBzdXJlIHRoYXQgcmVzcG9uc2VzIGFyZSBrZXB0IGFyb3VuZCBmb3IgYDE1YCBzZWNvbmRzLiBXaGVuZXZlciBhIHJvdXRlIG5lZWRzIGEgbW9kZWwgaW4gb3JkZXIgdG8gcmVuZGVyIGEgdmlldywgaXQnbGwgZmlyc3QgYXNrIHRoZSBjYWNoaW5nIGxheWVyIGZvciBhIGZyZXNoIGNvcHkuIElmIHRoZSBjYWNoaW5nIGxheWVyIGRvZXNuJ3QgaGF2ZSBhIGNvcHksIG9yIGlmIHRoYXQgY29weSBpcyBzdGFsZSBfKGluIHRoaXMgY2FzZSwgb2xkZXIgdGhhbiBgMTVgIHNlY29uZHMpXywgdGhlbiBhbiBBSkFYIHJlcXVlc3Qgd2lsbCBiZSBpc3N1ZWQgdG8gdGhlIHNlcnZlci4gT2YgY291cnNlLCB0aGUgZHVyYXRpb24gaXMgY29uZmlndXJhYmxlLiBJZiB5b3Ugd2FudCB0byB1c2UgYSB2YWx1ZSBvdGhlciB0aGFuIHRoZSBkZWZhdWx0LCB5b3Ugc2hvdWxkIHNldCBgY2FjaGVgIHRvIGEgbnVtYmVyIGluIHNlY29uZHMgaW5zdGVhZCBvZiBqdXN0IGB0cnVlYC5cXG5cXG4gICAgU2luY2UgVGF1bnVzIHVuZGVyc3RhbmRzIHRoYXQgbm90IGV2ZXJ5IHZpZXcgb3BlcmF0ZXMgdW5kZXIgdGhlIHNhbWUgY29uc3RyYWludHMsIHlvdSdyZSBhbHNvIGFibGUgdG8gc2V0IGEgYGNhY2hlYCBmcmVzaG5lc3MgZHVyYXRpb24gZGlyZWN0bHkgaW4geW91ciByb3V0ZXMuIFRoZSBgY2FjaGVgIHByb3BlcnR5IGluIHJvdXRlcyBoYXMgcHJlY2VkZW5jZSBvdmVyIHRoZSBkZWZhdWx0IHZhbHVlLlxcblxcbiAgICBUaGVyZSdzIGN1cnJlbnRseSB0d28gY2FjaGluZyBzdG9yZXM6IGEgcmF3IGluLW1lbW9yeSBzdG9yZSwgYW5kIGFuIFtJbmRleGVkREJdWzI4XSBzdG9yZS4gSW5kZXhlZERCIGlzIGFuIGVtYmVkZGVkIGRhdGFiYXNlIHNvbHV0aW9uLCBhbmQgeW91IGNhbiB0aGluayBvZiBpdCBsaWtlIGFuIGFzeW5jaHJvbm91cyB2ZXJzaW9uIG9mIGBsb2NhbFN0b3JhZ2VgLiBJdCBoYXMgW3N1cnByaXNpbmdseSBicm9hZCBicm93c2VyIHN1cHBvcnRdWzI5XSwgYW5kIGluIHRoZSBjYXNlcyB3aGVyZSBpdCdzIG5vdCBzdXBwb3J0ZWQgdGhlbiBjYWNoaW5nIGlzIGRvbmUgc29sZWx5IGluLW1lbW9yeS5cXG5cXG4gICAgVGhlIHByZWZldGNoaW5nIG1lY2hhbmlzbSBpcyBhbiBpbnRlcmVzdGluZyBzcGluLW9mZiBvZiBjYWNoaW5nLCBhbmQgaXQgcmVxdWlyZXMgY2FjaGluZyB0byBiZSBlbmFibGVkIGluIG9yZGVyIHRvIHdvcmsuIFdoZW5ldmVyIGh1bWFucyBob3ZlciBvdmVyIGEgbGluaywgb3Igd2hlbmV2ZXIgdGhleSBwdXQgdGhlaXIgZmluZ2VyIG9uIG9uZSBvZiB0aGVtIF8odGhlIGB0b3VjaHN0YXJ0YCBldmVudClfLCB0aGUgcHJlZmV0Y2hlciB3aWxsIGlzc3VlIGFuIEFKQVggcmVxdWVzdCBmb3IgdGhlIHZpZXcgbW9kZWwgZm9yIHRoYXQgbGluay5cXG5cXG4gICAgSWYgdGhlIHJlcXVlc3QgZW5kcyBzdWNjZXNzZnVsbHkgdGhlbiB0aGUgcmVzcG9uc2Ugd2lsbCBiZSBjYWNoZWQgaW4gdGhlIHNhbWUgd2F5IGFueSBvdGhlciB2aWV3IHdvdWxkIGJlIGNhY2hlZC4gSWYgdGhlIGh1bWFuIGhvdmVycyBvdmVyIGFub3RoZXIgbGluayB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHN0aWxsIGJlaW5nIHByZWZldGNoZWQsIHRoZW4gdGhlIG9sZCByZXF1ZXN0IGlzIGFib3J0ZWQsIGFzIG5vdCB0byBkcmFpbiB0aGVpciBfKHBvc3NpYmx5IGxpbWl0ZWQpXyBJbnRlcm5ldCBjb25uZWN0aW9uIGJhbmR3aWR0aC5cXG5cXG4gICAgSWYgdGhlIGh1bWFuIGNsaWNrcyBvbiB0aGUgbGluayBiZWZvcmUgcHJlZmV0Y2hpbmcgaXMgY29tcGxldGVkLCBoZSdsbCBuYXZpZ2F0ZSB0byB0aGUgdmlldyBhcyBzb29uIGFzIHByZWZldGNoaW5nIGVuZHMsIHJhdGhlciB0aGFuIGZpcmluZyBhbm90aGVyIHJlcXVlc3QuIFRoaXMgaGVscHMgVGF1bnVzIHNhdmUgcHJlY2lvdXMgbWlsbGlzZWNvbmRzIHdoZW4gZGVhbGluZyB3aXRoIGxhdGVuY3ktc2Vuc2l0aXZlIG9wZXJhdGlvbnMuXFxuXFxuICAgIFR1cm5pbmcgcHJlZmV0Y2hpbmcgb24gaXMgc2ltcGx5IGEgbWF0dGVyIG9mIHNldHRpbmcgYHByZWZldGNoYCB0byBgdHJ1ZWAgaW4gdGhlIG9wdGlvbnMgcGFzc2VkIHRvIGB0YXVudXMubW91bnRgLiBGb3IgYWRkaXRpb25hbCBpbnNpZ2h0cyBpbnRvIHRoZSBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudHMgVGF1bnVzIGNhbiBvZmZlciwgaGVhZCBvdmVyIHRvIHRoZSBbUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uc11bMjVdIGd1aWRlLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIyMjIFZlcnNpb25pbmdcXG5cXG4gICAgV2hlbiB5b3UgYWx0ZXIgeW91ciB2aWV3cywgY2hhbmdlIGNvbnRyb2xsZXJzLCBvciBtb2RpZnkgdGhlIG1vZGVscywgY2hhbmNlcyBhcmUgdGhlIGNsaWVudC1zaWRlIGlzIGdvaW5nIHRvIGNvbWUgYWNyb3NzIG9uZSBvZiB0aGUgZm9sbG93aW5nIGlzc3Vlcy5cXG5cXG4gICAgLSBPdXRkYXRlZCB2aWV3IHRlbXBsYXRlIGZ1bmN0aW9ucyBpbiB0aGUgY2xpZW50LXNpZGUsIGNhdXNpbmcgbmV3IG1vZGVscyB0byBicmVha1xcbiAgICAtIE91dGRhdGVkIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzLCBjYXVzaW5nIG5ldyBtb2RlbHMgdG8gYnJlYWsgb3IgbWlzcyBvdXQgb24gZnVuY3Rpb25hbGl0eVxcbiAgICAtIE91dGRhdGVkIG1vZGVscyBpbiB0aGUgY2FjaGUsIGNhdXNpbmcgbmV3IHZpZXdzIG9yIGNvbnRyb2xsZXJzIHRvIGJyZWFrXFxuXFxuICAgIFZlcnNpb25pbmcgaGFuZGxlcyB0aGVzZSBpc3N1ZXMgZ3JhY2VmdWxseSBvbiB5b3VyIGJlaGFsZi4gVGhlIHdheSBpdCB3b3JrcyBpcyB0aGF0IHdoZW5ldmVyIHlvdSBnZXQgYSByZXNwb25zZSBmcm9tIFRhdW51cywgYSBfdmVyc2lvbiBzdHJpbmcgKGNvbmZpZ3VyZWQgb24gdGhlIHNlcnZlci1zaWRlKV8gaXMgaW5jbHVkZWQgd2l0aCBpdC4gSWYgdGhhdCB2ZXJzaW9uIHN0cmluZyBkb2Vzbid0IG1hdGNoIHRoZSBvbmUgc3RvcmVkIGluIHRoZSBjbGllbnQsIHRoZW4gdGhlIGNhY2hlIHdpbGwgYmUgZmx1c2hlZCBhbmQgdGhlIGh1bWFuIHdpbGwgYmUgcmVkaXJlY3RlZCwgZm9yY2luZyBhIGZ1bGwgcGFnZSByZWxvYWQuXFxuXFxuICAgID4gVGhlIHZlcnNpb25pbmcgQVBJIGlzIHVuYWJsZSB0byBoYW5kbGUgY2hhbmdlcyB0byByb3V0ZXMsIGFuZCBpdCdzIHVwIHRvIHlvdSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYXBwbGljYXRpb24gc3RheXMgYmFja3dhcmRzIGNvbXBhdGlibGUgd2hlbiBpdCBjb21lcyB0byByb3V0aW5nLlxcbiAgICA+XFxuICAgID4gVmVyc2lvbmluZyBjYW4ndCBpbnRlcnZlbmUgd2hlbiB0aGUgY2xpZW50LXNpZGUgaXMgaGVhdmlseSByZWx5aW5nIG9uIGNhY2hlZCB2aWV3cyBhbmQgbW9kZWxzLCBhbmQgdGhlIGh1bWFuIGlzIHJlZnVzaW5nIHRvIHJlbG9hZCB0aGVpciBicm93c2VyLiBUaGUgc2VydmVyIGlzbid0IGJlaW5nIGFjY2Vzc2VkIGFuZCB0aHVzIGl0IGNhbid0IGNvbW11bmljYXRlIHRoYXQgZXZlcnl0aGluZyBvbiB0aGUgY2FjaGUgbWF5IGhhdmUgYmVjb21lIHN0YWxlLiBUaGUgZ29vZCBuZXdzIGlzIHRoYXQgdGhlIGh1bWFuIHdvbid0IG5vdGljZSBhbnkgb2RkaXRpZXMsIGFzIHRoZSBzaXRlIHdpbGwgY29udGludWUgdG8gd29yayBhcyBoZSBrbm93cyBpdC4gV2hlbiBoZSBmaW5hbGx5IGF0dGVtcHRzIHRvIHZpc2l0IHNvbWV0aGluZyB0aGF0IGlzbid0IGNhY2hlZCwgYSByZXF1ZXN0IGlzIG1hZGUsIGFuZCB0aGUgdmVyc2lvbmluZyBlbmdpbmUgcmVzb2x2ZXMgdmVyc2lvbiBkaXNjcmVwYW5jaWVzIGZvciB0aGVtLlxcblxcbiAgICBNYWtpbmcgdXNlIG9mIHZlcnNpb25pbmcgaW52b2x2ZXMgc2V0dGluZyB0aGUgYHZlcnNpb25gIGZpZWxkIGluIHRoZSBvcHRpb25zLCB3aGVuIGludm9raW5nIGB0YXVudXMubW91bnRgICoqb24gYm90aCB0aGUgc2VydmVyLXNpZGUgYW5kIHRoZSBjbGllbnQtc2lkZSwgdXNpbmcgdGhlIHNhbWUgdmFsdWUqKi4gVGhlIFRhdW51cyB2ZXJzaW9uIHN0cmluZyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBvbmUgeW91IHByb3ZpZGVkLCBzbyB0aGF0IFRhdW51cyB3aWxsIGtub3cgdG8gc3RheSBhbGVydCBmb3IgY2hhbmdlcyB0byBUYXVudXMgaXRzZWxmLCBhcyB3ZWxsLlxcblxcbiAgICBZb3UgbWF5IHVzZSB5b3VyIGJ1aWxkIGlkZW50aWZpZXIgb3IgdGhlIGB2ZXJzaW9uYCBmaWVsZCBpbiBgcGFja2FnZS5qc29uYCwgYnV0IHVuZGVyc3RhbmQgdGhhdCBpdCBtYXkgY2F1c2UgdGhlIGNsaWVudC1zaWRlIHRvIGZsdXNoIHRoZSBjYWNoZSB0b28gb2Z0ZW4gXyhtYXliZSBldmVuIG9uIGV2ZXJ5IGRlcGxveW1lbnQpXy5cXG5cXG4gICAgVGhlIGRlZmF1bHQgdmVyc2lvbiBzdHJpbmcgaXMgc2V0IHRvIGAxYC4gVGhlIFRhdW51cyB2ZXJzaW9uIHdpbGwgYmUgcHJlcGVuZGVkIHRvIHlvdXJzLCByZXN1bHRpbmcgaW4gYSB2YWx1ZSBzdWNoIGFzIGB0My4wLjA7djFgIHdoZXJlIFRhdW51cyBpcyBydW5uaW5nIHZlcnNpb24gYDMuMC4wYCBhbmQgeW91ciBhcHBsaWNhdGlvbiBpcyBydW5uaW5nIHZlcnNpb24gYDFgLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI3RhYmxlLW9mLWNvbnRlbnRzKTwvc3ViPlxcblxcbiAgICAjIFRoZSBza3kgaXMgdGhlIGxpbWl0IVxcblxcbiAgICBZb3UncmUgbm93IGZhbWlsaWFyIHdpdGggaG93IFRhdW51cyB3b3JrcyBvbiBhIGhpZ2gtbGV2ZWwuIFlvdSBoYXZlIGNvdmVyZWQgYSBkZWNlbnQgYW1vdW50IG9mIGdyb3VuZCwgYnV0IHlvdSBzaG91bGRuJ3Qgc3RvcCB0aGVyZS5cXG5cXG4gICAgLSBMZWFybiBtb3JlIGFib3V0IFt0aGUgQVBJIFRhdW51cyBoYXNdWzE4XSB0byBvZmZlclxcbiAgICAtIEdvIHRocm91Z2ggdGhlIFtwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gdGlwc11bMjVdLiBZb3UgbWF5IGxlYXJuIHNvbWV0aGluZyBuZXchXFxuICAgIC0gX0ZhbWlsaWFyaXplIHlvdXJzZWxmIHdpdGggdGhlIHdheXMgb2YgcHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnRfXFxuICAgICAgLSBKZXJlbXkgS2VpdGggZW51bmNpYXRlcyBbXFxcIkJlIHByb2dyZXNzaXZlXFxcIl1bMjBdXFxuICAgICAgLSBDaHJpc3RpYW4gSGVpbG1hbm4gYWR2b2NhdGVzIGZvciBbXFxcIlByYWdtYXRpYyBwcm9ncmVzc2l2ZSBlbmhhbmNlbWVudFxcXCJdWzI2XVxcbiAgICAgIC0gSmFrZSBBcmNoaWJhbGQgZXhwbGFpbnMgaG93IFtcXFwiUHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQgaXMgZmFzdGVyXFxcIl1bMjJdXFxuICAgICAgLSBJIGJsb2dnZWQgYWJvdXQgaG93IHdlIHNob3VsZCBbXFxcIlN0b3AgQnJlYWtpbmcgdGhlIFdlYlxcXCJdWzE3XVxcbiAgICAgIC0gR3VpbGxlcm1vIFJhdWNoIGFyZ3VlcyBmb3IgW1xcXCI3IFByaW5jaXBsZXMgb2YgUmljaCBXZWIgQXBwbGljYXRpb25zXFxcIl1bMjRdXFxuICAgICAgLSBBYXJvbiBHdXN0YWZzb24gd3JpdGVzIFtcXFwiVW5kZXJzdGFuZGluZyBQcm9ncmVzc2l2ZSBFbmhhbmNlbWVudFxcXCJdWzIxXVxcbiAgICAgIC0gT3JkZSBTYXVuZGVycyBnaXZlcyBoaXMgcG9pbnQgb2YgdmlldyBpbiBbXFxcIlByb2dyZXNzaXZlIGVuaGFuY2VtZW50IGZvciBmYXVsdCB0b2xlcmFuY2VcXFwiXVsyM11cXG4gICAgLSBTaWZ0IHRocm91Z2ggdGhlIFtjb21wbGVtZW50YXJ5IG1vZHVsZXNdWzE1XS4gWW91IG1heSBmaW5kIHNvbWV0aGluZyB5b3UgaGFkbid0IHRob3VnaHQgb2YhXFxuXFxuICAgIEFsc28sIGdldCBpbnZvbHZlZCFcXG5cXG4gICAgLSBGb3JrIHRoaXMgcmVwb3NpdG9yeSBhbmQgW3NlbmQgc29tZSBwdWxsIHJlcXVlc3RzXVsxOV0gdG8gaW1wcm92ZSB0aGVzZSBndWlkZXMhXFxuICAgIC0gU2VlIHNvbWV0aGluZywgc2F5IHNvbWV0aGluZyEgSWYgeW91IGRldGVjdCBhIGJ1ZywgW3BsZWFzZSBjcmVhdGUgYW4gaXNzdWVdWzI3XSFcXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCN0YWJsZS1vZi1jb250ZW50cyk8L3N1Yj5cXG5cXG4gICAgPiBZb3UnbGwgZmluZCBhIFtmdWxsIGZsZWRnZWQgdmVyc2lvbiBvZiB0aGUgR2V0dGluZyBTdGFydGVkXVs0MV0gdHV0b3JpYWwgYXBwbGljYXRpb24gb24gR2l0SHViLlxcblxcbiAgICBbMV06IGh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvdGF1bnVzLWV4cHJlc3NcXG4gICAgWzJdOiBodHRwczovL2dpdGh1Yi5jb20vdGF1bnVzL3RhdW51cy1oYXBpXFxuICAgIFszXTogaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy9oYXBpaWZ5XFxuICAgIFs0XTogaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy90YXVudXMuaW9cXG4gICAgWzVdOiBodHRwczovL2dpdGh1Yi5jb20vcG9ueWZvby9wb255Zm9vXFxuICAgIFs2XTogaHR0cDovL2V4cHJlc3Nqcy5jb21cXG4gICAgWzddOiBodHRwOi8vaGFwaWpzLmNvbVxcbiAgICBbOF06IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udmVudGlvbl9vdmVyX2NvbmZpZ3VyYXRpb25cXG4gICAgWzldOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1J1Ynlfb25fUmFpbHNcXG4gICAgWzEwXTogaHR0cHM6Ly9naXRodWIuY29tL2phbmwvbXVzdGFjaGUuanNcXG4gICAgWzExXTogaHR0cHM6Ly9naXRodWIuY29tL2phZGVqcy9qYWRlXFxuICAgIFsxMl06IGh0dHA6Ly9tb3ppbGxhLmdpdGh1Yi5pby9udW5qdWNrcy9cXG4gICAgWzEzXTogaHR0cDovL2hhbmRsZWJhcnNqcy5jb20vXFxuICAgIFsxNF06IGh0dHA6Ly93d3cuZW1iZWRkZWRqcy5jb20vXFxuICAgIFsxNV06IC9jb21wbGVtZW50c1xcbiAgICBbMTZdOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvamFkdW1cXG4gICAgWzE3XTogaHR0cDovL3Bvbnlmb28uY29tL3N0b3AtYnJlYWtpbmctdGhlLXdlYlxcbiAgICBbMThdOiAvYXBpXFxuICAgIFsxOV06IGh0dHBzOi8vZ2l0aHViLmNvbS90YXVudXMvdGF1bnVzLmlvL3B1bGxzXFxuICAgIFsyMF06IGh0dHBzOi8vYWRhY3Rpby5jb20vam91cm5hbC83NzA2XFxuICAgIFsyMV06IGh0dHA6Ly9hbGlzdGFwYXJ0LmNvbS9hcnRpY2xlL3VuZGVyc3RhbmRpbmdwcm9ncmVzc2l2ZWVuaGFuY2VtZW50XFxuICAgIFsyMl06IGh0dHA6Ly9qYWtlYXJjaGliYWxkLmNvbS8yMDEzL3Byb2dyZXNzaXZlLWVuaGFuY2VtZW50LWlzLWZhc3Rlci9cXG4gICAgWzIzXTogaHR0cHM6Ly9kZWNhZGVjaXR5Lm5ldC9ibG9nLzIwMTMvMDkvMTYvcHJvZ3Jlc3NpdmUtZW5oYW5jZW1lbnQtZm9yLWZhdWx0LXRvbGVyYW5jZVxcbiAgICBbMjRdOiBodHRwOi8vcmF1Y2hnLmNvbS8yMDE0LzctcHJpbmNpcGxlcy1vZi1yaWNoLXdlYi1hcHBsaWNhdGlvbnMvXFxuICAgIFsyNV06IC9wZXJmb3JtYW5jZVxcbiAgICBbMjZdOiBodHRwOi8vaWNhbnQuY28udWsvYXJ0aWNsZXMvcHJhZ21hdGljLXByb2dyZXNzaXZlLWVuaGFuY2VtZW50L1xcbiAgICBbMjddOiBodHRwczovL2dpdGh1Yi5jb20vdGF1bnVzL3RhdW51cy9pc3N1ZXMvbmV3XFxuICAgIFsyOF06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJXFxuICAgIFsyOV06IGh0dHA6Ly9jYW5pdXNlLmNvbS8jZmVhdD1pbmRleGVkZGJcXG4gICAgWzMwXTogaHR0cDovL2kuaW1ndXIuY29tLzRQOHZOZTkucG5nXFxuICAgIFszMV06IGh0dHA6Ly9pLmltZ3VyLmNvbS9uOG1ING1OLnBuZ1xcbiAgICBbMzJdOiBodHRwOi8vaS5pbWd1ci5jb20vMDhsbkNlYy5wbmdcXG4gICAgWzMzXTogaHR0cDovL2kuaW1ndXIuY29tL3dVYm5DeWsucG5nXFxuICAgIFszNF06IGh0dHA6Ly9pLmltZ3VyLmNvbS96amFKWUNxLnBuZ1xcbiAgICBbMzVdOiBodHRwOi8vaS5pbWd1ci5jb20vTnZFV3g5ei5wbmdcXG4gICAgWzM2XTogaHR0cDovL2kuaW1ndXIuY29tL0xnWlJGbjUucG5nXFxuICAgIFszN106IGh0dHA6Ly9pLmltZ3VyLmNvbS9mSUVlNVRtLnBuZ1xcbiAgICBbMzhdOiBodHRwOi8vYnJvd3NlcmlmeS5vcmcvXFxuICAgIFszOV06IGh0dHA6Ly9pLmltZ3VyLmNvbS82OE84NHdYLnBuZ1xcbiAgICBbNDBdOiBodHRwOi8vaS5pbWd1ci5jb20vWlVGNk5GbC5wbmdcXG4gICAgWzQxXTogaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy9nZXR0aW5nLXN0YXJ0ZWRcXG4gICAgWzQyXTogaHR0cHM6Ly9naXRodWIuY29tL3RhdW51cy9nZW5lcmF0b3ItdGF1bnVzXFxuXCIpO1xufVxufSIsInZhciBqYWRlID0gcmVxdWlyZShcImphZHVtL3J1bnRpbWVcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBlcmZvcm1hbmNlKGxvY2Fscykge1xudmFyIGphZGVfZGVidWcgPSBbIG5ldyBqYWRlLkRlYnVnSXRlbSggMSwgXCJ2aWV3cy9kb2N1bWVudGF0aW9uL3BlcmZvcm1hbmNlLmphZGVcIiApIF07XG50cnkge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDAsIFwidmlld3MvZG9jdW1lbnRhdGlvbi9wZXJmb3JtYW5jZS5qYWRlXCIgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAxLCBcInZpZXdzL2RvY3VtZW50YXRpb24vcGVyZm9ybWFuY2UuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8c2VjdGlvbiBjbGFzcz1cXFwibHktc2VjdGlvbiBtZC1tYXJrZG93blxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMTIwLCBcInZpZXdzL2RvY3VtZW50YXRpb24vcGVyZm9ybWFuY2UuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8aDEgaWQ9XFxcInBlcmZvcm1hbmNlLW9wdGltaXphdGlvblxcXCI+UGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uPC9oMT5cXG48cD5HaXZlbiB0aGF0IHBlcmZvcm1hbmNlIGlzIG9uZSBvZiB0aGUgY29yZSB2YWx1ZXMgaW4gYm90aCBUYXVudXMgYW5kIFVzZXIgRXhwZXJpZW5jZSwgaXQgZGVzZXJ2ZWQgYSBmaXJzdC1jbGFzcyBhcnRpY2xlIG9uIHRoaXMgc2l0ZSBhcyB3ZWxsLjwvcD5cXG48cD5UaGVyZSYjMzk7cyBhIGZldyB0aGluZ3MgdG8gdGFrZSBpbnRvIGFjY291bnQgd2hlbiBkZXZlbG9waW5nIGFuIGFwcGxpY2F0aW9uIGlmIHdlIHdhbnQgdG8gc3RyaXZlIGZvciBwZXJmb3JtYW5jZSwgYW5kIHRoaXMgYXJ0aWNsZSBhaW1zIHRvIGJlIGEgY29sbGVjdGlvbiBvZiB3ZWIgcGVyZm9ybWFuY2UgYmVzdCBwcmFjdGljZXMgYWxvbmcgd2l0aCB0aXBzIG9uIGhvdyB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIGVzcGVjaWZpY2FsbHkgZm9yIGFwcGxpY2F0aW9ucyBidWlsdCBvbiB0b3Agb2YgVGF1bnVzLjwvcD5cXG48aDEgaWQ9XFxcInBlcmZvcm1hbmNlLWNoZWNrbGlzdFxcXCI+UGVyZm9ybWFuY2UgQ2hlY2tsaXN0PC9oMT5cXG48cD5JZiB5b3UgaGF2ZW4mIzM5O3QsIHlvdSBzaG91bGQgcmVhZCA8YSBocmVmPVxcXCJodHRwOi8vcG9ueWZvby5jb20vYXJ0aWNsZXMvY3JpdGljYWwtcGF0aC1wZXJmb3JtYW5jZS1vcHRpbWl6YXRpb25cXFwiPiZxdW90O0NyaXRpY2FsIFBhdGggUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uJnF1b3Q7PC9hPiBhcyBhIHNtYWxsIGd1aWRlIG9mIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnMgeW91IHNob3VsZCBhbHJlYWR5IGJlIGRvaW5nLiBUaGUgbGlzdCBiZWxvdyBjb250YWlucyBzb21lIG9mIHdoYXQmIzM5O3MgZGlzY3Vzc2VkIGluIHRoYXQgYXJ0aWNsZS48L3A+XFxuPHVsPlxcbjxsaT5Nb3ZlIGF3YXkgZnJvbSBkZWRpY2F0ZWQgY2xpZW50LXNpZGUgcmVuZGVyaW5nPC9saT5cXG48bGk+VXNlIDxhIGhyZWY9XFxcImh0dHA6Ly9uZ2lueC5vcmcvXFxcIj48Y29kZT5uZ2lueDwvY29kZT48L2E+IGFzIGEgcmV2ZXJzZSBwcm94eSBmb3IgeW91ciBmcm9udC1lbmQgc2VydmVyczwvbGk+XFxuPGxpPlJlc2l6ZSBhbmQgb3B0aW1pemUgaW1hZ2VzPC9saT5cXG48bGk+RGVmZXIgbm9uLWNyaXRpY2FsIHN0YXRpYyBhc3NldCBsb2FkaW5nPC9saT5cXG48bGk+SW5saW5lIGNyaXRpY2FsIENTUyBhbmQgSmF2YVNjcmlwdDwvbGk+XFxuPGxpPkNhY2hlIHJlc3BvbnNlcyBhZ2dyZXNzaXZlbHk8L2xpPlxcbjxsaT5EaXRjaCBsYXJnZSBsaWJyYXJpZXMgYW5kIGZyYW1ld29ya3M8L2xpPlxcbjwvdWw+XFxuPGgxIGlkPVxcXCJib29zdGluZy1wZXJmb3JtYW5jZS13aXRoLXRhdW51c1xcXCI+Qm9vc3RpbmcgUGVyZm9ybWFuY2Ugd2l0aCBUYXVudXM8L2gxPlxcbjxwPldoZW4gaXQgY29tZXMgdG8gVGF1bnVzLCB0aGVyZSYjMzk7cyBhIGZldyBtb3JlIHBlcmZvcm1hbmNlIHR3ZWFrcyB5b3Ugc2hvdWxkIGNvbnNpZGVyIGltcGxlbWVudGluZy48L3A+XFxuPHVsPlxcbjxsaT5DaG9vc2UgPGEgaHJlZj1cXFwiI2Nob29zZS10aGUtcmlnaHQtYm9vdC1zdHJhdGVneVxcXCI+dGhlIHJpZ2h0IGJvb3Qgc3RyYXRlZ3k8L2E+PC9saT5cXG48bGk+VHVybiBvbiBjbGllbnQtc2lkZSA8YSBocmVmPVxcXCIjdHVybi1vbi1jbGllbnQtc2lkZS1jYWNoaW5nXFxcIj5jYWNoaW5nPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiN1c2UtdmVyc2lvbmluZy10by1lbnN1cmUtY2FjaGUtdmFsaWRpdHlcXFwiPlVzZSB2ZXJzaW9uaW5nPC9hPiB0byBlbnN1cmUgY2FjaGUgdmFsaWRpdHk8L2xpPlxcbjxsaT5FbmFibGUgcHJlZmV0Y2hpbmcgZm9yIDxhIGhyZWY9XFxcIiNlbmFibGUtcHJlZmV0Y2hpbmctZm9yLXByZWRpY3RpdmUtY2FjaGUtbG9hZGluZ1xcXCI+cHJlZGljdGl2ZSBjYWNoZSBsb2FkaW5nPC9hPjwvbGk+XFxuPGxpPjxhIGhyZWY9XFxcIiNzZW5kLXZpZXdzLWFuZC1jb250cm9sbGVycy10by10aGUtY2xpZW50LXNlbGVjdGl2ZWx5XFxcIj5TZW5kIHZpZXdzIGFuZCBjb250cm9sbGVycyB0byB0aGUgY2xpZW50IHNlbGVjdGl2ZWx5PC9hPjwvbGk+XFxuPC91bD5cXG48cD5HaXZlbiB0aGF0IHRoaXMgc2l0ZSBpcyBhYm91dCBUYXVudXMsIHdlJiMzOTtsbCBmb2N1cyBvbiB0aGUgVGF1bnVzIHR3ZWFrcywgYXMgeW91IGNhbiByZWFkaWx5IHNjb3VyIHRoZSB3ZWIgZm9yIGdlbmVyYWwgd2ViIHBlcmZvcm1hbmNlIGFkdmljZS48L3A+XFxuPGgxIGlkPVxcXCJjaG9vc2UtdGhlLXJpZ2h0LWJvb3Qtc3RyYXRlZ3lcXFwiPkNob29zZSB0aGUgcmlnaHQgYm9vdCBzdHJhdGVneTwvaDE+XFxuPHA+VGF1bnVzIG5lZWRzIHRvIGNvbmp1cmUgdXAgYSB2aWV3IG1vZGVsIHNvIHRoYXQgeW91IGhhdmUgYWNjZXNzIHRvIGl0cyBwcm9wZXJ0aWVzIGluIHRoZSBjbGllbnQtc2lkZSB2aWV3IGNvbnRyb2xsZXIuIFRvIHRoYXQgZW5kLCBUYXVudXMgb2ZmZXJzIHRocmVlIGRpZmZlcmVudCBib290IHN0cmF0ZWdpZXMgYmVjYXVzZSB0aGVyZSBpc24mIzM5O3QgYSBvbmUtc2l6ZS1maXRzLWFsbCBhbnN3ZXIgdG8gdGhlIHF1ZXN0aW9uIDxlbT4mcXVvdDt3aGljaCBib290IHN0cmF0ZWd5IGlzIHRoZSBiZXN0IG9uZSBmb3IgbWU/JnF1b3Q7PC9lbT4uPC9wPlxcbjxwPldoZW4geW91IHdhbnQgYSByZWxheGVkIGFwcHJvYWNoIHRvIHVzaW5nIFRhdW51cywgeW91IHNob3VsZCBnbyBmb3IgdGhlIDxhIGhyZWY9XFxcIi9hcGkjdXNpbmctdGhlLWF1dG8tc3RyYXRlZ3lcXFwiPjxjb2RlPmF1dG88L2NvZGU+PC9hPiBzdHJhdGVneS4gTWF5YmUgeW91JiMzOTtyZSBqdXN0IGdldHRpbmcgc3RhcnRlZCBvciB5b3UmIzM5O3JlIG5vdCBhcyBjb25jZXJuZWQgYWJvdXQgcGVyZm9ybWFuY2UganVzdCB5ZXQuIEhlcmUgVGF1bnVzIHdpbGwgd2FpdCBvbiB5b3UgdG8gY2FsbCA8YSBocmVmPVxcXCIvYXBpIy10YXVudXMtbW91bnQtY29udGFpbmVyLXdpcmluZy1vcHRpb25zLVxcXCI+PGNvZGU+dGF1bnVzLm1vdW50PC9jb2RlPjwvYT4sIGFuZCB0aGVuIG1ha2UgYW4gQUpBWCByZXF1ZXN0IHRvIGdldCB0aGUgbW9kZWwgZm9yIHRoYXQgdmlldyBvbiB5b3VyIGJlaGFsZi4gPGVtPlRoaXMgaXMgdGhlIHN0cmF0ZWd5IHRoYXQgVGF1bnVzIHVzZXMgYnkgZGVmYXVsdC48L2VtPjwvcD5cXG48cD5JZiB5b3VyIG1vZGVscyBhcmUgY29uc2lzdGVudGx5IHNtYWxsIGJlY2F1c2UgeW91IGhhdmUgbGl0dGxlIGR5bmFtaWMgY29udGVudCwgb3IgaWYgeW91IHdhbnQgdG8gPGVtPmV4ZWN1dGUgdGhlIGNsaWVudC1zaWRlIGNvbnRyb2xsZXIgYXMgcXVpY2tseSBhcyBwb3NzaWJsZTwvZW0+LCB0aGVuIHRoZSA8YSBocmVmPVxcXCIvYXBpI3VzaW5nLXRoZS1pbmxpbmUtc3RyYXRlZ3lcXFwiPjxjb2RlPmlubGluZTwvY29kZT48L2E+IHN0cmF0ZWd5IG1pZ2h0IGJlIHRoZSBiZXN0IGZvciB5b3UuIEhlcmUgeW91JiMzOTtyZSBleHBlY3RlZCB0byBwbGFjZSB0aGUgbW9kZWwgaW4gYSA8Y29kZT4mbHQ7c2NyaXB0Jmd0OzwvY29kZT4gdGFnIGluc2lkZSB0aGUgdmlldyBsYXlvdXQsIGFuZCBUYXVudXMgdGFrZXMgY2FyZSBvZiB0aGUgcmVzdC48L3A+XFxuPHA+VGhlIHRoaXJkIHN0cmF0ZWd5IGlzIDxhIGhyZWY9XFxcIi9hcGkjdXNpbmctdGhlLW1hbnVhbC1zdHJhdGVneVxcXCI+PGNvZGU+bWFudWFsPC9jb2RlPjwvYT4sIHdoZXJlIHlvdSBhcmUgc3VwcG9zZWQgdG8gc29tZWhvdyBnZXQgYSBtb2RlbCwgcHJlc3VtYWJseSB1c2luZyBBSkFYIG9yIHNjcmlwdCBsb2FkaW5nLCBhbmQgdGhlbiBsZXR0aW5nIFRhdW51cyBrbm93IHRoYXQgeW91JiMzOTtyZSBkb25lLiBUaGlzIG1pZ2h0IGJlIGZhc3RlciB0aGFuIHRoZSA8YSBocmVmPVxcXCIvYXBpI3VzaW5nLXRoZS1hdXRvLXN0cmF0ZWd5XFxcIj48Y29kZT5hdXRvPC9jb2RlPjwvYT4gYXBwcm9hY2gsIGJlY2F1c2UgeW91IGNvdWxkIHdyaXRlIGFuIGlubGluZSBzY3JpcHQgdG8gZmV0Y2ggdGhlIG1vZGVsIGFzIFRhdW51cyBpcyBiZWluZyBkb3dubG9hZGVkLiBJdCBhbHNvIG1pZ2h0IGJlIHNsb3dlciB0aGFuIDxjb2RlPmF1dG88L2NvZGU+IGluIHRob3NlIGNhc2VzIHdoZXJlIDxjb2RlPmF1dG88L2NvZGU+IHdvdWxkJiMzOTt2ZSB1c2VkIGEgY2FjaGVkIGNvcHkgb2YgdGhlIG1vZGVsIGluc3RlYWQgb2YgbWFraW5nIGEgcmVxdWVzdCwgc28gPGVtPnlvdXIgbWlsZWFnZSBtYXkgdmFyeTwvZW0+LjwvcD5cXG48cD5Gb3IgbW9yZSBjb21wbGV4IHVzZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGNvbnNpZGVyIG1peGluZyBkaWZmZXJlbnQgYm9vdCBzdHJhdGVnaWVzLCBjaG9vc2luZyB0aGUgb25lIHRoYXQgbWFrZXMgdGhlIG1vc3Qgc2Vuc2UgaW4gZWFjaCBjYXNlLiBJbiB0aGVzZSBjYXNlcywgeW91IG5lZWQgdG8gcGF5IGF0dGVudGlvbiB0byBoYXZpbmcgYW4gYWdyZWVtZW50IGJldHdlZW4gd2hhdCYjMzk7cyBiZWluZyBkb25lIGluIHRoZSB2aWV3IGxheW91dCA8ZW0+KHNjcmlwdCBpbmxpbmluZywgQUpBWCBjYWxsLCBvciBkb2luZyBub3RoaW5nKTwvZW0+IGFuZCB0aGUgPGEgaHJlZj1cXFwiL2FwaSMtdGF1bnVzLW1vdW50LWNvbnRhaW5lci13aXJpbmctb3B0aW9ucy1cXFwiPjxjb2RlPnRhdW51cy5tb3VudDwvY29kZT48L2E+IGNhbGwgPGVtPihwaWNraW5nIGEgYm9vdCBzdHJhdGVneSB0aGF0IG1hdGNoZXMgd2hhdCYjMzk7cyBiZWluZyBkb25lIG9uIHRoZSBsYXlvdXQpPC9lbT4uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI2Jvb3N0aW5nLXBlcmZvcm1hbmNlLXdpdGgtdGF1bnVzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMSBpZD1cXFwidHVybi1vbi1jbGllbnQtc2lkZS1jYWNoaW5nXFxcIj5UdXJuIG9uIGNsaWVudC1zaWRlIGNhY2hpbmc8L2gxPlxcbjxwPkEgY2FjaGluZyBlbmdpbmUgaXMgYnVpbHQgaW50byBUYXVudXMsIGFuZCBpdCYjMzk7cyB2ZXJ5IGVhc3kgdG8gc2V0IHVwLCB5b3UganVzdCBoYXZlIHRvIGFzayBmb3IgaXQgYnkgcGFzc2luZyA8YSBocmVmPVxcXCIvYXBpI2NhY2hpbmdcXFwiPjxjb2RlPmNhY2hlOiB0cnVlPC9jb2RlPjwvYT4gdG8gdGhlIGNsaWVudC1zaWRlIG1vdW50cG9pbnQuIFRoZSBjYWNoZSBjYW4gYmUgdXNlZCBhcyBhIG1lYW5zIHRvIGF2b2lkIG1ha2luZyBleHBlbnNpdmUgQUpBWCBjYWxscyBmb3Igd2VsbC1kZWZpbmVkIHBlcmlvZHMgb2YgdGltZS4gWW91IGNhbiBkZXRlcm1pbmUgaG93IGxvbmcgYW4gaXRlbSB3aWxsIGJlIGNhY2hlZCBmb3Igb24gYSBnbG9iYWwgbGV2ZWwsIGFzIHdlbGwgYXMgb24gYSByb3V0ZS1ieS1yb3V0ZSBiYXNpcy48L3A+XFxuPHA+VGF1bnVzIGltcGxlbWVudHMgYSB0d28tdGllcmVkIGNhY2hlIGluIHdoaWNoIGl0ZW1zIGFyZSBwZXJzaXN0ZWQgYm90aCBpbi1tZW1vcnkgYW5kIGluIGFuIEluZGV4ZWREQiBkYXRhYmFzZS4gVGhpcyBwcm92aWRlcyBmYXN0ZXIgYWNjZXNzIHRvIHRoZSBjYWNoZSB3aGlsZSBlbnN1cmluZyB0aGF0IGRhdGEgcGVyc2lzdHMgYWNyb3NzIGJyb3dzZXIgcmVsb2Fkcy4gSW4gYnJvd3NlcnMgdGhhdCBkb24mIzM5O3Qgc3VwcG9ydCBJbmRleGVkREIsIG9ubHkgdGhlIGluLW1lbW9yeSBjYWNoZSB3aWxsIGJlIHVzZWQuPC9wPlxcbjxibG9ja3F1b3RlPlxcbjxwPllvdSBjYW4gYWxzbyB1c2UgYSA8YSBocmVmPVxcXCIvYXBpIy10YXVudXMtaW50ZXJjZXB0LWFjdGlvbi1mbi1cXFwiPmN1c3RvbSByZXF1ZXN0IGludGVyY2VwdG9yPC9hPiB0byBsaXN0ZW4gZm9yIHJlcXVlc3RzIGJlZm9yZSB0aGV5IGJlY29tZSBBSkFYIGNhbGxzIGFuZCBwcmV2ZW50IHRoYXQgZnJvbSBoYXBwZW5uaW5nLiBUaGUgY2FjaGluZyBsYXllciBpcyBpbiBmYWN0IGJ1aWx0IGFzIGEgcmVxdWVzdCBpbnRlcmNlcHRvci4gWW91IG1heSB3YW50IHRvIHVzZSBvdGhlciBtZWNoYW5pc21zIGZvciBwcmV2ZW50aW5nIEFKQVggcmVxdWVzdHMgZnJvbSBiZWluZyBtYWRlLCBzdWNoIGFzIGluZmVycmluZyBhIG1vZGVsIGZyb20gdGhlIG1vZGVscyB0aGF0IHdlcmUgZmV0Y2hlZCBzbyBmYXIgZm9yIG90aGVyIHZpZXdzLCBvciBtYXliZSBzaW1wbHkgcHJldmVudGluZyB0aGUgcmVxdWVzdCBmb3Igdmlld3MgdGhhdCBkb24mIzM5O3QgbmVlZCBhIG1vZGVsIGZyb20gdGhlIHNlcnZlciBhdCBhbGwuPC9wPlxcbjwvYmxvY2txdW90ZT5cXG48cD5UaGUgPHN0cm9uZz5jYWNoZSBjYW4gc2lnbmlmaWNhbnRseSBpbXByb3ZlIHlvdXIgYXBwbGljYXRpb24mIzM5O3MgcGVyY2VpdmVkIHJlc3BvbnNpdmVuZXNzPC9zdHJvbmc+LCBidXQgaXQgY291bGQgYWxzbyBkbyBkYW1hZ2UgaWYgeW91ciBhcHBsaWNhdGlvbiBpcyB1cGRhdGVkIHRvbyBmcmVxdWVudGx5IGJ1dCB5b3UgY2FjaGUgcmVzcG9uc2VzIGZvciBsb25nIHBlcmlvZHMgb2YgdGltZS4gSXQgY2FuIGFsc28gcHJvdmUgcHJvYmxlbWF0aWMgaWYgdGhlIG1vZGVscyBhcmUgaGlnaGx5IHZvbGF0aWxlLCBhcyBhIGNhY2hlZCByZXNwb25zZSBtaWdodCBiZSB1c2VkIGZvciBhIHZpZXcgdGhhdCBleHBlY3RzIHNvbWUgdmFsdWUgdG8gY2hhbmdlIGV2ZXJ5IHRpbWUuIFdoaWxlIGNhY2hpbmcgaXNuJiMzOTt0IHRoZSBzb2x1dGlvbiB0byB0aGUgbGF0dGVyLCB0aGUgZm9ybWVyIGNhbiBiZSBhZGRyZXNzZWQgdXNpbmcgPGEgaHJlZj1cXFwiI3VzZS12ZXJzaW9uaW5nLXRvLWVuc3VyZS1jYWNoZS12YWxpZGl0eVxcXCI+dmVyc2lvbmluZzwvYT4uPC9wPlxcbjxwPjxzdWI+PGEgaHJlZj1cXFwiI2Jvb3N0aW5nLXBlcmZvcm1hbmNlLXdpdGgtdGF1bnVzXFxcIj48ZW0+KGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpPC9lbT48L2E+PC9zdWI+PC9wPlxcbjxoMSBpZD1cXFwidXNlLXZlcnNpb25pbmctdG8tZW5zdXJlLWNhY2hlLXZhbGlkaXR5XFxcIj5Vc2UgdmVyc2lvbmluZyB0byBlbnN1cmUgY2FjaGUgdmFsaWRpdHk8L2gxPlxcbjxwPlZlcnNpb25pbmcgaXMgYSB0b3VnaCBwcm9ibGVtIHRoYXQgc2luZ2xlLXBhZ2UgYXBwbGljYXRpb24gZnJhbWV3b3JrcyBkb24mIzM5O3QgYWRkcmVzcy4gSWYgeW91ciBmcmFtZXdvcmsgb2YgY2hvaWNlIHJlbmRlcnMgeW91ciBhcHBsaWNhdGlvbiBhcyBhIFNQQSwgaG93IGV4YWN0bHkgd2lsbCBpdCBiZWhhdmUgd2hlbiB5b3UgcHVzaCB1cGRhdGVzIHRvIHRoZSBzZXJ2ZXIsIDxhIGhyZWY9XFxcImh0dHA6Ly9iZXZhY3F1YS5pby9iZlxcXCI+bWFueSB0aW1lcyBhIGRheTwvYT4/IElzIGl0IHdlbGwgZGVmaW5lZD8gV2lsbCB2aWV3cyByZWNlaXZlZCBiZWZvcmUgdGhlIGRlcGxveW1lbnQgYmUgdXBkYXRlZCB0byB0aGUgbGF0ZXN0IHZlcnNpb24/IFdpbGwgbW9kZWxzIGNhY2hlZCBpbiB0aGUgb2xkIHZlcnNpb24gb2YgdGhlIGFwcGxpY2F0aW9uIGJlIGludmFsaWRhdGVkPyBXaWxsIG5ldyB2aWV3cyBhbmQgY2xpZW50LXNpZGUgY29udHJvbGxlcnMgbWFrZSBpdCB0byB0aGUgdXNlcj88L3A+XFxuPHA+VGF1bnVzIGhhbmRsZXMgYWxsIG9mIHRoZXNlIHNjZW5hcmlvcyBmb3IgeW91LiBFdmVyeSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgY29udGFpbnMgdGhlIGN1cnJlbnQgdmVyc2lvbiBzdHJpbmcgZm9yIHlvdXIgYXBwLiBJZiBhIHJlc3BvbnNlIHVwZGF0ZXMgdGhlIHZlcnNpb24gbnVtYmVyIHN0b3JlZCBpbiB0aGUgY2xpZW50LCBjYWNoZWQgdmlld3MsIGNvbnRyb2xsZXJzLCBhbmQgbW9kZWxzLCB3aWxsIGJlY29tZSBpbnZhbGlkYXRlZC48L3A+XFxuPHA+SWYgYXQgYW55IHBvaW50IFRhdW51cyBpcyByZWx5aW5nIHNvbGVseSBvbiB0aGUgY2FjaGUgdG8gcmVuZGVyIGEgdmlldywgdGhlbiB5ZXMsIHRoZSB1c2VyIHdpbGwgc2VlIHRoZSBzYW1lIHZpZXcgd2l0aCB0aGUgc2FtZSBtb2RlbCBhbmQgdGhlIHNhbWUgY29udHJvbGxlciB0aGF0IGhlIHNhdyBhIGZldyBzZWNvbmRzIGFnby4gQnV0IHdoZW5ldmVyIGEgcmVxdWVzdCBoaXRzIHRoZSBzZXJ2ZXIgYW5kIGdldHMgYmFjayB0byB0aGUgY2xpZW50IHdpdGggYW4gdXBkYXRlZCB2ZXJzaW9uIG51bWJlciwgVGF1bnVzIHdpbGwga25vdyB0byByZWRpcmVjdCB0aGUgdXNlciA8ZW0+KG9yIHJlLWZldGNoIGVhY2ggdmlldyk8L2VtPiBzbyB0aGF0IHRoZSB1c2VyIGdldHMgdGhlIHVwZ3JhZGVkIGV4cGVyaWVuY2UuPC9wPlxcbjxibG9ja3F1b3RlPlxcbjxwPk1vc3QgaW1wb3J0YW50bHksIHZlcnNpb25pbmcgbWVhbnMgdGhhdCByZXNwb25zZXMgZnJvbSB0aGUgc2VydmVyIHdpbGwgbmV2ZXIgYnJlYWsgY29tbXVuaWNhdGlvbiB3aXRoIGNsaWVudHMgdGhhdCB3ZXJlIGNvbm5lY3RlZCBiZWZvcmUgYSBkZXBsb3ltZW50IGludHJvZHVjZWQgYW4gdXBkYXRlLCBjaGFuZ2luZyB0aGUgbW9kZWxzIHRoYXQgdGhlIHNlcnZlciByZXR1cm5zLCB3aGlsZSB0aGUgY2xpZW50IGV4cGVjdGVkIG1vZGVscyB1c2luZyBhIGRpZmZlcmVudCBzdHJ1Y3R1cmUuPC9wPlxcbjwvYmxvY2txdW90ZT5cXG48cD5UbyA8YSBocmVmPVxcXCIvYXBpI3ZlcnNpb25pbmdcXFwiPmVuYWJsZSB2ZXJzaW9uaW5nPC9hPiB5b3UganVzdCBoYXZlIHRvIGNob29zZSBhIHZlcnNpb24gbnVtYmVyIG9uIGJvdGggdGhlIHNlcnZlciBhbmQgdGhlIGNsaWVudCBtb3VudHBvaW50cy4gVGhpcyBudW1iZXIgc2hvdWxkIGJlIHVwZGF0ZWQgd2l0aCBkaXNjcmV0aW9uLCBhcyBmcmVxdWVudCBjaGFuZ2VzIHRvIHRoZSB2ZXJzaW9uIG51bWJlciBtYXkgZGVmZWF0IHRoZSBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudHMgb2YgY2xpZW50LXNpZGUgcmVuZGVyaW5nLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiNib29zdGluZy1wZXJmb3JtYW5jZS13aXRoLXRhdW51c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDEgaWQ9XFxcImVuYWJsZS1wcmVmZXRjaGluZy1mb3ItcHJlZGljdGl2ZS1jYWNoZS1sb2FkaW5nXFxcIj5FbmFibGUgcHJlZmV0Y2hpbmcgZm9yIHByZWRpY3RpdmUgY2FjaGUgbG9hZGluZzwvaDE+XFxuPGJsb2NrcXVvdGU+XFxuPHA+UHJlZmV0Y2hpbmcgY2FuIHlpZWxkIGh1Z2UgcGVyZm9ybWFuY2UgYm9vc3RzIGJ5IHNpbXBseSBpc3N1aW5nIHJlcXVlc3RzIGFzIHNvb24gYXMgdGhlIGh1bWFuIGhpbnRzIGF0IGhpcyBpbnRlcmVzdCB0byBsb2FkIGEgdmlldy48L3A+XFxuPC9ibG9ja3F1b3RlPlxcbjxwPkJ5IGRlZmF1bHQgVGF1bnVzIHNoaXBzIHdpdGggYW4gPGVtPiZxdW90O29uLWhvdmVyL29uLXRvdWNoLXN0YXJ0JnF1b3Q7PC9lbT4gcHJlZmV0Y2hlciB0aGF0IHlvdSBjYW4gZW5hYmxlIGp1c3QgYnkgPGEgaHJlZj1cXFwiL2FwaSNwcmVmZXRjaGluZ1xcXCI+c2V0dGluZyB0aGUgPGNvZGU+cHJlZmV0Y2g6IHRydWU8L2NvZGU+IG9wdGlvbjwvYT4gb24gdGhlIGNsaWVudC1zaWRlIG1vdW50cG9pbnQuIEl0IHdvcmtzIGJ5IHN0YXJ0aW5nIHRvIGZldGNoIHRoZSBtb2RlbCBmb3IgYSB2aWV3IGFzIHNvb24gYXMgaHVtYW5zIGhvdmVyIG92ZXIgYW4gYW5jaG9yIGxpbmssIG9yIHB1dCB0aGVpciBmaW5nZXIgb24gaXQgb24gbW9iaWxlIGRldmljZXMuIFdoZW4gdGhlIGh1bWFuIGRvZXMgZGVjaWRlIHRvIGNsaWNrIG9uIHRoZSBsaW5rLCB0aGUgcHJlZmV0Y2hlciBtYXkgYmUgZG9uZSwgbWVhbmluZyB0aGF0IHRoZXkmIzM5O2xsIGJlIGluc3RhbnRseSByZWRpcmVjdGVkLiBJZiB0aGUgcHJlZmV0Y2hlciBpcyBzdGlsbCB3b3JraW5nLCB5b3UmIzM5O2Qgc3RpbGwgYmUgbWFraW5nIGEgc2hvcnRjdXQsIGFzIHRoZSB1c2VyIHdpbGwgYmUgcmVkaXJlY3RlZCBhcyBzb29uIGFzIHRoZSBwcmVmZXRjaGVyIGZpbmlzaGVzLCBnaXZpbmcgeW91IGEgaGVhZCBzdGFydCBhbmQgcmVwcmVzZW50aW5nIGEgcGVyY2VpdmVkIHBlcmZvcm1hbmNlIGJvb3N0LjwvcD5cXG48cD5Zb3UgY2FuIGFsc28gY3JlYXRlIHlvdXIgb3duIHByZWZldGNoaW5nIHJ1bGVzLiBNYXliZSB5b3UmIzM5O2QgbGlrZSB0byBzdGFydCBwcmVmZXRjaGluZyBhIHZpZXcgYXMgc29vbiBhcyBodW1hbnMgc3RhcnQgbW92aW5nIHRoZSBtb3VzZSBjdXJzb3IgdG93YXJkcyBhIGxpbmsuIFdoZW4geW91IGNvbnNpZGVyIHRoYXQgYSB1c2VyIHNob3dzIGludGVudCB0byBuYXZpZ2F0ZSB0byBhbiBhY3Rpb24sIHlvdSBjYW4gY2FsbCA8YSBocmVmPVxcXCIvYXBpI3VzaW5nLXRhdW51cy1wcmVmZXRjaC11cmwtZWxlbWVudC1cXFwiPjxjb2RlPnRhdW51cy5wcmVmZXRjaDwvY29kZT48L2E+IGFuZCBzdGFydCBsb2FkaW5nIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IGZvciB0aGUgdmlldyB0byBiZSBpbW1lZGlhdGVseSBsb2FkZWQuPC9wPlxcbjxwPk5vdGUgdGhhdCA8c3Ryb25nPnRoZSBwcmVmZXRjaGVyIGNhbiBvbmx5IGxvYWQgPGVtPm9uZSByb3V0ZTwvZW0+IGF0IGEgdGltZTwvc3Ryb25nPi4gVGhpcyBpcyBieSBkZXNpZ24sIGFzIHByZWZldGNoaW5nIGxvdHMgb2YgbGlua3Mgd291bGQgaW50ZXJmZXJlIHdpdGggdGhlIGh1bWFuJiMzOTtzIGNvbm5lY3Rpdml0eSwgZG9pbmcgbW9yZSBoYXJtIHRoYW4gZ29vZC4gSWYgdGhlIHByZWZldGNoZXIgaXMgYWxyZWFkeSBsb2FkaW5nIGEgcm91dGUgd2hlbiBhbm90aGVyIGF0dGVtcHQgdG8gcHJlZmV0Y2ggaXMgcmVnaXN0ZXJlZCwgdGhlIG9sZCByZXF1ZXN0IHdpbGwgYmUgYWJvcnRlZCB0byBtYWtlIHJvb20gZm9yIHRoZSBuZXcgb25lLjwvcD5cXG48cD48c3ViPjxhIGhyZWY9XFxcIiNib29zdGluZy1wZXJmb3JtYW5jZS13aXRoLXRhdW51c1xcXCI+PGVtPihiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKTwvZW0+PC9hPjwvc3ViPjwvcD5cXG48aDEgaWQ9XFxcInNlbmQtdmlld3MtYW5kLWNvbnRyb2xsZXJzLXRvLXRoZS1jbGllbnQtc2VsZWN0aXZlbHlcXFwiPlNlbmQgdmlld3MgYW5kIGNvbnRyb2xsZXJzIHRvIHRoZSBjbGllbnQgc2VsZWN0aXZlbHk8L2gxPlxcbjxwPlRoZSBtb3N0IGFtYml0aW91cyBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gdGhhdCBjYW4gYmUgZG9uZSB3aXRoIFRhdW51cyBpcyBkZWZlcnJpbmcgY2xpZW50LXNpZGUgdmlld3MgYW5kIGNvbnRyb2xsZXJzLiBUaGUgZGVmYXVsdCBiZWhhdmlvciBpcyB0byBjb21waWxlIGV2ZXJ5IHZpZXcgYW5kIGNvbnRyb2xsZXIsIGFsb25nc2lkZSByb3V0ZXMgYW5kIFRhdW51cyBpdHNlbGYsIGFuZCBzZW5kIGV2ZXJ5dGhpbmcgaW4gYSBzaW5nbGUgYnVuZGxlIHRvIHRoZSBjbGllbnQuIEFzIHlvdXIgYXBwbGljYXRpb24gZ3Jvd3MsIGl0IG1pZ2h0IG5vIGxvbmdlciBiZSBwcmFjdGljYWwgdG8gc2VuZCBldmVyeXRoaW5nIHRvZ2V0aGVyIGluIGEgaHVnZSBidW5kbGUsIGFzIHBlcmZvcm1hbmNlIHdvdWxkIHN1ZmZlci48L3A+XFxuPHA+VGF1bnVzIG9mZmVycyBhIG1lY2hhbmlzbSB0aHJvdWdoIHdoaWNoIHlvdSBjYW4gZGVmZXIgc3BlY2lmaWMgYWN0aW9ucywgb3IgcGFydHMgb2YgdGhlIGFwcGxpY2F0aW9uLiBXaGVuIG9uZSBvZiB0aG9zZSBwYXJ0cyBvZiB0aGUgYXBwbGljYXRpb24gbmVlZHMgdG8gYmUgbG9hZGVkLCBldmVuIHdoZW4gdXNpbmcgPGEgaHJlZj1cXFwiL2FwaSMtdGF1bnVzLXBhcnRpYWwtY29udGFpbmVyLWFjdGlvbi1tb2RlbC1cXFwiPjxjb2RlPnRhdW51cy5wYXJ0aWFsPC9jb2RlPjwvYT4sIHRoZSBzZXJ2ZXItc2lkZSB3aWxsIGJ1bmRsZSB0aGUgdmlldyB0ZW1wbGF0ZSBtb2R1bGUgYW5kIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyIG1vZHVsZSBhbmQgc2VuZCB0aGF0IHRvIHRoZSBjbGllbnQuIFRoZSBjbGllbnQgdGhlbiBydW5zIDxjb2RlPmV2YWw8L2NvZGU+IG9uIHRoZSBidW5kbGUgYW5kIHByb2NlZWRzIHRvIHN0b3JlIGl0IGluIGl0cyBjYWNoZSwgdXNpbmcgdGhlIHNhbWUgY2FjaGluZyBtZWNoYW5pc20gdGhhdCYjMzk7cyB1c2VkIGZvciBtb2RlbHMgPGVtPihleGNlcHQgdGhhdCB2aWV3cyBhbmQgY29udHJvbGxlcnMgb25seSBnbyBzdGFsZSBkdWUgdG8gdmVyc2lvbiBjaGFuZ2VzLCBhbmQgbmV2ZXIgYmVjYXVzZSBvZiBkdXJhdGlvbnMpPC9lbT4uPC9wPlxcbjxwPlRvIG1ha2UgdXNlIG9mIHRoZSBkZWZlcnJhbCBtZWNoYW5pc20geW91IGhhdmUgdG8gdGFrZSBhIGZldyB0aGluZ3MgaW50byBjb25zaWRlcmF0aW9uLiBGaXJzdCBvZmYsIHlvdSYjMzk7bGwgaGF2ZSB0byB1c2UgdGhlIDxhIGhyZWY9XFxcIi9hcGkjLWRlZmVyLWFjdGlvbnMtXFxcIj48Y29kZT4tLWRlZmVyPC9jb2RlPjwvYT4gZmxhZyBpbiB0aGUgQ0xJIHRvIHNlbGVjdCB0aGUgYWN0aW9ucyB5b3Ugd2FudCB0byBkZWZlci4gRm9yIGluc3RhbmNlLCBkb2luZyA8Y29kZT50YXVudXMgLS1kZWZlciBhZG1pbjwvY29kZT4gd2lsbCBkZWZlciBhbGwgYWN0aW9ucyBmb3IgdGhlIDxjb2RlPmFkbWluPC9jb2RlPiBjb250cm9sbGVyLjwvcD5cXG48cD5EZWZlcnJlZCBtb2R1bGVzIGFyZSBidW5kbGVkIHdpdGggQnJvd3NlcmlmeSBhbmQgZ2V0IDxzdHJvbmc+c291cmNlIG1hcHMgYnkgZGVmYXVsdDwvc3Ryb25nPiwgc28gZGVidWdnaW5nIHRoZW0gZHVyaW5nIGRldmVsb3BtZW50IGlzIGFzIGVhc3kgYXMgZGVidWdnaW5nIG5vbi1kZWZlcnJlZCBjb250cm9sbGVycyBvciB2aWV3IHRlbXBsYXRlIGZ1bmN0aW9ucy4gWW91IGNhbiBjaGFuZ2UgdGhpcyBiZWhhdmlvciBieSA8YSBocmVmPVxcXCIvYXBpIy1vcHRpb25zLWRlZmVybWluaWZpZWQtXFxcIj5zZXR0aW5nIDxjb2RlPmRlZmVyTWluaWZpZWQ6IHRydWU8L2NvZGU+IGF0IHRoZSBzZXJ2ZXItc2lkZSBtb3VudHBvaW50PC9hPiwgd2hpY2ggd2lsbCBtaW5pZnkgdGhlIGJ1bmRsZSBhbmQgYWxzbyByZW1vdmUgdGhlIHNvdXJjZW1hcC4gVGhlc2UgYnVuZGxlcyBhcmUgZ2VuZXJhdGVkIHRoZSBmaXJzdCB0aW1lIHRoYXQgdGhleSBnZXQgcmVxdWVzdGVkLCBhbmQgc3Vic2VxdWVudCByZXF1ZXN0cyBmb3IgdGhlIHNhbWUgYnVuZGxlIHdpbGwgcmVjZWl2ZSBhIGNvcHkgdGhhdCBnZXRzIGNhY2hlZCBpbiBtZW1vcnkuPC9wPlxcbjxwPllvdSBoYXZlIHRvIGJlIGNhcmVmdWwgd2hlbiBkZWZlcnJpbmcgdmlld3MgYW5kIGNvbnRyb2xsZXJzLCBhcyB0aGUgYnVuZGxlIGZvciBldmVyeSBjb21wb25lbnQgd2lsbCBiZSBjb21waWxlZCBpbmRlcGVuZGVudGx5LiBIZXJlJiMzOTtzIGEgZmV3IGNvbnNpZGVyYXRpb25zIHRvIHRha2UgaW4gbWluZC48L3A+XFxuPHVsPlxcbjxsaT5UYWtlIGludG8gYWNjb3VudCB0aGF0IGVhY2ggbW9kdWxlIHlvdSByZWZlcmVuY2UgZ2xvYmFsbHkgaXMgYSBtb2R1bGUgdGhhdCYjMzk7cyBub3QgY29tcGlsZWQgb24gZXZlcnkgY29tcG9uZW50IHRoYXQgPGNvZGU+cmVxdWlyZTwvY29kZT5zIGl0LiBUaGlzIHRyYW5zbGF0ZXMgaW50byBsZWFuZXIgcmVzcG9uc2VzIHdoZW4gY2xpZW50cyBuZWVkIHRvIGZldGNoIGEgdGVtcGxhdGUgYW5kIGEgY2xpZW50LXNpZGUgY29udHJvbGxlcjwvbGk+XFxuPGxpPkF2b2lkIG1haW50YWluaW5nIGdsb2JhbCBzdGF0ZSBhY3Jvc3MgdmlldyBjb250cm9sbGVycyB1c2luZyBtb2R1bGVzLiBJZiB5b3UgbmVlZCB0byBkbyBzbywgY29uc2lkZXIgdXNpbmcgZXZlbnRzIGluc3RlYWQuIERlZmVycmVkIG1vZHVsZXMgYXJlIHNlbGYtY29udGFpbmVkLCBtZWFuaW5nIHRoYXQgZXZlbiBpZiB0d28gc2VwYXJhdGUgY29udHJvbGxlcnMgcmVxdWlyZSBhIGdpdmVuIDxjb2RlPi4vc3RhdGU8L2NvZGU+IG1vZHVsZSwgZWFjaCBjb250cm9sbGVyIHdpbGwgZ2V0IGl0cyBvd24gaWRlcGVuZGVudCBpbnN0YW5jZSBvZiB0aGUgPGNvZGU+Li9zdGF0ZTwvY29kZT4gbW9kdWxlLCBhbmQgbm90aGluZyB3aWxsIGJlIHNoYXJlZC48L2xpPlxcbjwvdWw+XFxuPHA+SW4gdGhlIGZ1dHVyZSwgdHJhbnNwb3J0cyBvdGhlciB0aGFuIENvbW1vbkpTIG1heSBiZSBhdmFpbGFibGUgZm9yIGRlZmluaW5nIGNvbnRyb2xsZXJzIGFuZCB2aWV3IHRlbXBsYXRlcyB0aGF0IGNhbiBiZSBkZWZlcnJlZCwgYnV0IGZvciBub3cgdGhhdCYjMzk7cyB0aGUgb25seSB2aWFibGUgdHJhbnNwb3J0IHdoZW4gaXQgY29tZXMgdG8gZGVmZXJyZWQgZXhlY3V0aW9uIGluIFRhdW51cy48L3A+XFxuPHA+PHN1Yj48YSBocmVmPVxcXCIjYm9vc3RpbmctcGVyZm9ybWFuY2Utd2l0aC10YXVudXNcXFwiPjxlbT4oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cyk8L2VtPjwvYT48L3N1Yj48L3A+XFxuXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L3NlY3Rpb24+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpOztyZXR1cm4gYnVmLmpvaW4oXCJcIik7XG59IGNhdGNoIChlcnIpIHtcbiAgamFkZS5yZXRocm93KGVyciwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSwgamFkZV9kZWJ1Z1swXS5saW5lbm8sIFwic2VjdGlvbi5seS1zZWN0aW9uLm1kLW1hcmtkb3duXFxuICA6dWx0cmFtYXJrZWRcXG4gICAgIyBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25cXG5cXG4gICAgR2l2ZW4gdGhhdCBwZXJmb3JtYW5jZSBpcyBvbmUgb2YgdGhlIGNvcmUgdmFsdWVzIGluIGJvdGggVGF1bnVzIGFuZCBVc2VyIEV4cGVyaWVuY2UsIGl0IGRlc2VydmVkIGEgZmlyc3QtY2xhc3MgYXJ0aWNsZSBvbiB0aGlzIHNpdGUgYXMgd2VsbC5cXG5cXG4gICAgVGhlcmUncyBhIGZldyB0aGluZ3MgdG8gdGFrZSBpbnRvIGFjY291bnQgd2hlbiBkZXZlbG9waW5nIGFuIGFwcGxpY2F0aW9uIGlmIHdlIHdhbnQgdG8gc3RyaXZlIGZvciBwZXJmb3JtYW5jZSwgYW5kIHRoaXMgYXJ0aWNsZSBhaW1zIHRvIGJlIGEgY29sbGVjdGlvbiBvZiB3ZWIgcGVyZm9ybWFuY2UgYmVzdCBwcmFjdGljZXMgYWxvbmcgd2l0aCB0aXBzIG9uIGhvdyB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIGVzcGVjaWZpY2FsbHkgZm9yIGFwcGxpY2F0aW9ucyBidWlsdCBvbiB0b3Agb2YgVGF1bnVzLlxcblxcbiAgICAjIFBlcmZvcm1hbmNlIENoZWNrbGlzdFxcblxcbiAgICBJZiB5b3UgaGF2ZW4ndCwgeW91IHNob3VsZCByZWFkIFtcXFwiQ3JpdGljYWwgUGF0aCBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25cXFwiXVsxXSBhcyBhIHNtYWxsIGd1aWRlIG9mIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnMgeW91IHNob3VsZCBhbHJlYWR5IGJlIGRvaW5nLiBUaGUgbGlzdCBiZWxvdyBjb250YWlucyBzb21lIG9mIHdoYXQncyBkaXNjdXNzZWQgaW4gdGhhdCBhcnRpY2xlLlxcblxcbiAgICAtIE1vdmUgYXdheSBmcm9tIGRlZGljYXRlZCBjbGllbnQtc2lkZSByZW5kZXJpbmdcXG4gICAgLSBVc2UgW2BuZ2lueGBdWzJdIGFzIGEgcmV2ZXJzZSBwcm94eSBmb3IgeW91ciBmcm9udC1lbmQgc2VydmVyc1xcbiAgICAtIFJlc2l6ZSBhbmQgb3B0aW1pemUgaW1hZ2VzXFxuICAgIC0gRGVmZXIgbm9uLWNyaXRpY2FsIHN0YXRpYyBhc3NldCBsb2FkaW5nXFxuICAgIC0gSW5saW5lIGNyaXRpY2FsIENTUyBhbmQgSmF2YVNjcmlwdFxcbiAgICAtIENhY2hlIHJlc3BvbnNlcyBhZ2dyZXNzaXZlbHlcXG4gICAgLSBEaXRjaCBsYXJnZSBsaWJyYXJpZXMgYW5kIGZyYW1ld29ya3NcXG5cXG4gICAgIyBCb29zdGluZyBQZXJmb3JtYW5jZSB3aXRoIFRhdW51c1xcblxcbiAgICBXaGVuIGl0IGNvbWVzIHRvIFRhdW51cywgdGhlcmUncyBhIGZldyBtb3JlIHBlcmZvcm1hbmNlIHR3ZWFrcyB5b3Ugc2hvdWxkIGNvbnNpZGVyIGltcGxlbWVudGluZy5cXG5cXG4gICAgLSBDaG9vc2UgW3RoZSByaWdodCBib290IHN0cmF0ZWd5XSgjY2hvb3NlLXRoZS1yaWdodC1ib290LXN0cmF0ZWd5KVxcbiAgICAtIFR1cm4gb24gY2xpZW50LXNpZGUgW2NhY2hpbmddKCN0dXJuLW9uLWNsaWVudC1zaWRlLWNhY2hpbmcpXFxuICAgIC0gW1VzZSB2ZXJzaW9uaW5nXSgjdXNlLXZlcnNpb25pbmctdG8tZW5zdXJlLWNhY2hlLXZhbGlkaXR5KSB0byBlbnN1cmUgY2FjaGUgdmFsaWRpdHlcXG4gICAgLSBFbmFibGUgcHJlZmV0Y2hpbmcgZm9yIFtwcmVkaWN0aXZlIGNhY2hlIGxvYWRpbmddKCNlbmFibGUtcHJlZmV0Y2hpbmctZm9yLXByZWRpY3RpdmUtY2FjaGUtbG9hZGluZylcXG4gICAgLSBbU2VuZCB2aWV3cyBhbmQgY29udHJvbGxlcnMgdG8gdGhlIGNsaWVudCBzZWxlY3RpdmVseV0oI3NlbmQtdmlld3MtYW5kLWNvbnRyb2xsZXJzLXRvLXRoZS1jbGllbnQtc2VsZWN0aXZlbHkpXFxuXFxuICAgIEdpdmVuIHRoYXQgdGhpcyBzaXRlIGlzIGFib3V0IFRhdW51cywgd2UnbGwgZm9jdXMgb24gdGhlIFRhdW51cyB0d2Vha3MsIGFzIHlvdSBjYW4gcmVhZGlseSBzY291ciB0aGUgd2ViIGZvciBnZW5lcmFsIHdlYiBwZXJmb3JtYW5jZSBhZHZpY2UuXFxuXFxuICAgICMgQ2hvb3NlIHRoZSByaWdodCBib290IHN0cmF0ZWd5XFxuXFxuICAgIFRhdW51cyBuZWVkcyB0byBjb25qdXJlIHVwIGEgdmlldyBtb2RlbCBzbyB0aGF0IHlvdSBoYXZlIGFjY2VzcyB0byBpdHMgcHJvcGVydGllcyBpbiB0aGUgY2xpZW50LXNpZGUgdmlldyBjb250cm9sbGVyLiBUbyB0aGF0IGVuZCwgVGF1bnVzIG9mZmVycyB0aHJlZSBkaWZmZXJlbnQgYm9vdCBzdHJhdGVnaWVzIGJlY2F1c2UgdGhlcmUgaXNuJ3QgYSBvbmUtc2l6ZS1maXRzLWFsbCBhbnN3ZXIgdG8gdGhlIHF1ZXN0aW9uIF9cXFwid2hpY2ggYm9vdCBzdHJhdGVneSBpcyB0aGUgYmVzdCBvbmUgZm9yIG1lP1xcXCJfLlxcblxcbiAgICBXaGVuIHlvdSB3YW50IGEgcmVsYXhlZCBhcHByb2FjaCB0byB1c2luZyBUYXVudXMsIHlvdSBzaG91bGQgZ28gZm9yIHRoZSBbYGF1dG9gXVszXSBzdHJhdGVneS4gTWF5YmUgeW91J3JlIGp1c3QgZ2V0dGluZyBzdGFydGVkIG9yIHlvdSdyZSBub3QgYXMgY29uY2VybmVkIGFib3V0IHBlcmZvcm1hbmNlIGp1c3QgeWV0LiBIZXJlIFRhdW51cyB3aWxsIHdhaXQgb24geW91IHRvIGNhbGwgW2B0YXVudXMubW91bnRgXVs1XSwgYW5kIHRoZW4gbWFrZSBhbiBBSkFYIHJlcXVlc3QgdG8gZ2V0IHRoZSBtb2RlbCBmb3IgdGhhdCB2aWV3IG9uIHlvdXIgYmVoYWxmLiBfVGhpcyBpcyB0aGUgc3RyYXRlZ3kgdGhhdCBUYXVudXMgdXNlcyBieSBkZWZhdWx0Ll9cXG5cXG4gICAgSWYgeW91ciBtb2RlbHMgYXJlIGNvbnNpc3RlbnRseSBzbWFsbCBiZWNhdXNlIHlvdSBoYXZlIGxpdHRsZSBkeW5hbWljIGNvbnRlbnQsIG9yIGlmIHlvdSB3YW50IHRvIF9leGVjdXRlIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyIGFzIHF1aWNrbHkgYXMgcG9zc2libGVfLCB0aGVuIHRoZSBbYGlubGluZWBdWzRdIHN0cmF0ZWd5IG1pZ2h0IGJlIHRoZSBiZXN0IGZvciB5b3UuIEhlcmUgeW91J3JlIGV4cGVjdGVkIHRvIHBsYWNlIHRoZSBtb2RlbCBpbiBhIGA8c2NyaXB0PmAgdGFnIGluc2lkZSB0aGUgdmlldyBsYXlvdXQsIGFuZCBUYXVudXMgdGFrZXMgY2FyZSBvZiB0aGUgcmVzdC5cXG5cXG4gICAgVGhlIHRoaXJkIHN0cmF0ZWd5IGlzIFtgbWFudWFsYF1bNl0sIHdoZXJlIHlvdSBhcmUgc3VwcG9zZWQgdG8gc29tZWhvdyBnZXQgYSBtb2RlbCwgcHJlc3VtYWJseSB1c2luZyBBSkFYIG9yIHNjcmlwdCBsb2FkaW5nLCBhbmQgdGhlbiBsZXR0aW5nIFRhdW51cyBrbm93IHRoYXQgeW91J3JlIGRvbmUuIFRoaXMgbWlnaHQgYmUgZmFzdGVyIHRoYW4gdGhlIFtgYXV0b2BdWzNdIGFwcHJvYWNoLCBiZWNhdXNlIHlvdSBjb3VsZCB3cml0ZSBhbiBpbmxpbmUgc2NyaXB0IHRvIGZldGNoIHRoZSBtb2RlbCBhcyBUYXVudXMgaXMgYmVpbmcgZG93bmxvYWRlZC4gSXQgYWxzbyBtaWdodCBiZSBzbG93ZXIgdGhhbiBgYXV0b2AgaW4gdGhvc2UgY2FzZXMgd2hlcmUgYGF1dG9gIHdvdWxkJ3ZlIHVzZWQgYSBjYWNoZWQgY29weSBvZiB0aGUgbW9kZWwgaW5zdGVhZCBvZiBtYWtpbmcgYSByZXF1ZXN0LCBzbyBfeW91ciBtaWxlYWdlIG1heSB2YXJ5Xy5cXG5cXG4gICAgRm9yIG1vcmUgY29tcGxleCB1c2UgY2FzZXMsIHlvdSBtYXkgd2FudCB0byBjb25zaWRlciBtaXhpbmcgZGlmZmVyZW50IGJvb3Qgc3RyYXRlZ2llcywgY2hvb3NpbmcgdGhlIG9uZSB0aGF0IG1ha2VzIHRoZSBtb3N0IHNlbnNlIGluIGVhY2ggY2FzZS4gSW4gdGhlc2UgY2FzZXMsIHlvdSBuZWVkIHRvIHBheSBhdHRlbnRpb24gdG8gaGF2aW5nIGFuIGFncmVlbWVudCBiZXR3ZWVuIHdoYXQncyBiZWluZyBkb25lIGluIHRoZSB2aWV3IGxheW91dCBfKHNjcmlwdCBpbmxpbmluZywgQUpBWCBjYWxsLCBvciBkb2luZyBub3RoaW5nKV8gYW5kIHRoZSBbYHRhdW51cy5tb3VudGBdWzVdIGNhbGwgXyhwaWNraW5nIGEgYm9vdCBzdHJhdGVneSB0aGF0IG1hdGNoZXMgd2hhdCdzIGJlaW5nIGRvbmUgb24gdGhlIGxheW91dClfLlxcblxcbiAgICA8c3ViPltfKGJhY2sgdG8gdGFibGUgb2YgY29udGVudHMpX10oI2Jvb3N0aW5nLXBlcmZvcm1hbmNlLXdpdGgtdGF1bnVzKTwvc3ViPlxcblxcbiAgICAjIFR1cm4gb24gY2xpZW50LXNpZGUgY2FjaGluZ1xcblxcbiAgICBBIGNhY2hpbmcgZW5naW5lIGlzIGJ1aWx0IGludG8gVGF1bnVzLCBhbmQgaXQncyB2ZXJ5IGVhc3kgdG8gc2V0IHVwLCB5b3UganVzdCBoYXZlIHRvIGFzayBmb3IgaXQgYnkgcGFzc2luZyBbYGNhY2hlOiB0cnVlYF1bN10gdG8gdGhlIGNsaWVudC1zaWRlIG1vdW50cG9pbnQuIFRoZSBjYWNoZSBjYW4gYmUgdXNlZCBhcyBhIG1lYW5zIHRvIGF2b2lkIG1ha2luZyBleHBlbnNpdmUgQUpBWCBjYWxscyBmb3Igd2VsbC1kZWZpbmVkIHBlcmlvZHMgb2YgdGltZS4gWW91IGNhbiBkZXRlcm1pbmUgaG93IGxvbmcgYW4gaXRlbSB3aWxsIGJlIGNhY2hlZCBmb3Igb24gYSBnbG9iYWwgbGV2ZWwsIGFzIHdlbGwgYXMgb24gYSByb3V0ZS1ieS1yb3V0ZSBiYXNpcy5cXG5cXG4gICAgVGF1bnVzIGltcGxlbWVudHMgYSB0d28tdGllcmVkIGNhY2hlIGluIHdoaWNoIGl0ZW1zIGFyZSBwZXJzaXN0ZWQgYm90aCBpbi1tZW1vcnkgYW5kIGluIGFuIEluZGV4ZWREQiBkYXRhYmFzZS4gVGhpcyBwcm92aWRlcyBmYXN0ZXIgYWNjZXNzIHRvIHRoZSBjYWNoZSB3aGlsZSBlbnN1cmluZyB0aGF0IGRhdGEgcGVyc2lzdHMgYWNyb3NzIGJyb3dzZXIgcmVsb2Fkcy4gSW4gYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IEluZGV4ZWREQiwgb25seSB0aGUgaW4tbWVtb3J5IGNhY2hlIHdpbGwgYmUgdXNlZC5cXG5cXG4gICAgPiBZb3UgY2FuIGFsc28gdXNlIGEgW2N1c3RvbSByZXF1ZXN0IGludGVyY2VwdG9yXVs4XSB0byBsaXN0ZW4gZm9yIHJlcXVlc3RzIGJlZm9yZSB0aGV5IGJlY29tZSBBSkFYIGNhbGxzIGFuZCBwcmV2ZW50IHRoYXQgZnJvbSBoYXBwZW5uaW5nLiBUaGUgY2FjaGluZyBsYXllciBpcyBpbiBmYWN0IGJ1aWx0IGFzIGEgcmVxdWVzdCBpbnRlcmNlcHRvci4gWW91IG1heSB3YW50IHRvIHVzZSBvdGhlciBtZWNoYW5pc21zIGZvciBwcmV2ZW50aW5nIEFKQVggcmVxdWVzdHMgZnJvbSBiZWluZyBtYWRlLCBzdWNoIGFzIGluZmVycmluZyBhIG1vZGVsIGZyb20gdGhlIG1vZGVscyB0aGF0IHdlcmUgZmV0Y2hlZCBzbyBmYXIgZm9yIG90aGVyIHZpZXdzLCBvciBtYXliZSBzaW1wbHkgcHJldmVudGluZyB0aGUgcmVxdWVzdCBmb3Igdmlld3MgdGhhdCBkb24ndCBuZWVkIGEgbW9kZWwgZnJvbSB0aGUgc2VydmVyIGF0IGFsbC5cXG5cXG4gICAgVGhlICoqY2FjaGUgY2FuIHNpZ25pZmljYW50bHkgaW1wcm92ZSB5b3VyIGFwcGxpY2F0aW9uJ3MgcGVyY2VpdmVkIHJlc3BvbnNpdmVuZXNzKiosIGJ1dCBpdCBjb3VsZCBhbHNvIGRvIGRhbWFnZSBpZiB5b3VyIGFwcGxpY2F0aW9uIGlzIHVwZGF0ZWQgdG9vIGZyZXF1ZW50bHkgYnV0IHlvdSBjYWNoZSByZXNwb25zZXMgZm9yIGxvbmcgcGVyaW9kcyBvZiB0aW1lLiBJdCBjYW4gYWxzbyBwcm92ZSBwcm9ibGVtYXRpYyBpZiB0aGUgbW9kZWxzIGFyZSBoaWdobHkgdm9sYXRpbGUsIGFzIGEgY2FjaGVkIHJlc3BvbnNlIG1pZ2h0IGJlIHVzZWQgZm9yIGEgdmlldyB0aGF0IGV4cGVjdHMgc29tZSB2YWx1ZSB0byBjaGFuZ2UgZXZlcnkgdGltZS4gV2hpbGUgY2FjaGluZyBpc24ndCB0aGUgc29sdXRpb24gdG8gdGhlIGxhdHRlciwgdGhlIGZvcm1lciBjYW4gYmUgYWRkcmVzc2VkIHVzaW5nIFt2ZXJzaW9uaW5nXSgjdXNlLXZlcnNpb25pbmctdG8tZW5zdXJlLWNhY2hlLXZhbGlkaXR5KS5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCNib29zdGluZy1wZXJmb3JtYW5jZS13aXRoLXRhdW51cyk8L3N1Yj5cXG5cXG4gICAgIyBVc2UgdmVyc2lvbmluZyB0byBlbnN1cmUgY2FjaGUgdmFsaWRpdHlcXG5cXG4gICAgVmVyc2lvbmluZyBpcyBhIHRvdWdoIHByb2JsZW0gdGhhdCBzaW5nbGUtcGFnZSBhcHBsaWNhdGlvbiBmcmFtZXdvcmtzIGRvbid0IGFkZHJlc3MuIElmIHlvdXIgZnJhbWV3b3JrIG9mIGNob2ljZSByZW5kZXJzIHlvdXIgYXBwbGljYXRpb24gYXMgYSBTUEEsIGhvdyBleGFjdGx5IHdpbGwgaXQgYmVoYXZlIHdoZW4geW91IHB1c2ggdXBkYXRlcyB0byB0aGUgc2VydmVyLCBbbWFueSB0aW1lcyBhIGRheV1bMTBdPyBJcyBpdCB3ZWxsIGRlZmluZWQ/IFdpbGwgdmlld3MgcmVjZWl2ZWQgYmVmb3JlIHRoZSBkZXBsb3ltZW50IGJlIHVwZGF0ZWQgdG8gdGhlIGxhdGVzdCB2ZXJzaW9uPyBXaWxsIG1vZGVscyBjYWNoZWQgaW4gdGhlIG9sZCB2ZXJzaW9uIG9mIHRoZSBhcHBsaWNhdGlvbiBiZSBpbnZhbGlkYXRlZD8gV2lsbCBuZXcgdmlld3MgYW5kIGNsaWVudC1zaWRlIGNvbnRyb2xsZXJzIG1ha2UgaXQgdG8gdGhlIHVzZXI/XFxuXFxuICAgIFRhdW51cyBoYW5kbGVzIGFsbCBvZiB0aGVzZSBzY2VuYXJpb3MgZm9yIHlvdS4gRXZlcnkgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIGNvbnRhaW5zIHRoZSBjdXJyZW50IHZlcnNpb24gc3RyaW5nIGZvciB5b3VyIGFwcC4gSWYgYSByZXNwb25zZSB1cGRhdGVzIHRoZSB2ZXJzaW9uIG51bWJlciBzdG9yZWQgaW4gdGhlIGNsaWVudCwgY2FjaGVkIHZpZXdzLCBjb250cm9sbGVycywgYW5kIG1vZGVscywgd2lsbCBiZWNvbWUgaW52YWxpZGF0ZWQuXFxuXFxuICAgIElmIGF0IGFueSBwb2ludCBUYXVudXMgaXMgcmVseWluZyBzb2xlbHkgb24gdGhlIGNhY2hlIHRvIHJlbmRlciBhIHZpZXcsIHRoZW4geWVzLCB0aGUgdXNlciB3aWxsIHNlZSB0aGUgc2FtZSB2aWV3IHdpdGggdGhlIHNhbWUgbW9kZWwgYW5kIHRoZSBzYW1lIGNvbnRyb2xsZXIgdGhhdCBoZSBzYXcgYSBmZXcgc2Vjb25kcyBhZ28uIEJ1dCB3aGVuZXZlciBhIHJlcXVlc3QgaGl0cyB0aGUgc2VydmVyIGFuZCBnZXRzIGJhY2sgdG8gdGhlIGNsaWVudCB3aXRoIGFuIHVwZGF0ZWQgdmVyc2lvbiBudW1iZXIsIFRhdW51cyB3aWxsIGtub3cgdG8gcmVkaXJlY3QgdGhlIHVzZXIgXyhvciByZS1mZXRjaCBlYWNoIHZpZXcpXyBzbyB0aGF0IHRoZSB1c2VyIGdldHMgdGhlIHVwZ3JhZGVkIGV4cGVyaWVuY2UuXFxuXFxuICAgID4gTW9zdCBpbXBvcnRhbnRseSwgdmVyc2lvbmluZyBtZWFucyB0aGF0IHJlc3BvbnNlcyBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBuZXZlciBicmVhayBjb21tdW5pY2F0aW9uIHdpdGggY2xpZW50cyB0aGF0IHdlcmUgY29ubmVjdGVkIGJlZm9yZSBhIGRlcGxveW1lbnQgaW50cm9kdWNlZCBhbiB1cGRhdGUsIGNoYW5naW5nIHRoZSBtb2RlbHMgdGhhdCB0aGUgc2VydmVyIHJldHVybnMsIHdoaWxlIHRoZSBjbGllbnQgZXhwZWN0ZWQgbW9kZWxzIHVzaW5nIGEgZGlmZmVyZW50IHN0cnVjdHVyZS5cXG5cXG4gICAgVG8gW2VuYWJsZSB2ZXJzaW9uaW5nXVsxMV0geW91IGp1c3QgaGF2ZSB0byBjaG9vc2UgYSB2ZXJzaW9uIG51bWJlciBvbiBib3RoIHRoZSBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbW91bnRwb2ludHMuIFRoaXMgbnVtYmVyIHNob3VsZCBiZSB1cGRhdGVkIHdpdGggZGlzY3JldGlvbiwgYXMgZnJlcXVlbnQgY2hhbmdlcyB0byB0aGUgdmVyc2lvbiBudW1iZXIgbWF5IGRlZmVhdCB0aGUgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzIG9mIGNsaWVudC1zaWRlIHJlbmRlcmluZy5cXG5cXG4gICAgPHN1Yj5bXyhiYWNrIHRvIHRhYmxlIG9mIGNvbnRlbnRzKV9dKCNib29zdGluZy1wZXJmb3JtYW5jZS13aXRoLXRhdW51cyk8L3N1Yj5cXG5cXG4gICAgIyBFbmFibGUgcHJlZmV0Y2hpbmcgZm9yIHByZWRpY3RpdmUgY2FjaGUgbG9hZGluZ1xcblxcbiAgICA+IFByZWZldGNoaW5nIGNhbiB5aWVsZCBodWdlIHBlcmZvcm1hbmNlIGJvb3N0cyBieSBzaW1wbHkgaXNzdWluZyByZXF1ZXN0cyBhcyBzb29uIGFzIHRoZSBodW1hbiBoaW50cyBhdCBoaXMgaW50ZXJlc3QgdG8gbG9hZCBhIHZpZXcuXFxuXFxuICAgIEJ5IGRlZmF1bHQgVGF1bnVzIHNoaXBzIHdpdGggYW4gX1xcXCJvbi1ob3Zlci9vbi10b3VjaC1zdGFydFxcXCJfIHByZWZldGNoZXIgdGhhdCB5b3UgY2FuIGVuYWJsZSBqdXN0IGJ5IFtzZXR0aW5nIHRoZSBgcHJlZmV0Y2g6IHRydWVgIG9wdGlvbl1bMTJdIG9uIHRoZSBjbGllbnQtc2lkZSBtb3VudHBvaW50LiBJdCB3b3JrcyBieSBzdGFydGluZyB0byBmZXRjaCB0aGUgbW9kZWwgZm9yIGEgdmlldyBhcyBzb29uIGFzIGh1bWFucyBob3ZlciBvdmVyIGFuIGFuY2hvciBsaW5rLCBvciBwdXQgdGhlaXIgZmluZ2VyIG9uIGl0IG9uIG1vYmlsZSBkZXZpY2VzLiBXaGVuIHRoZSBodW1hbiBkb2VzIGRlY2lkZSB0byBjbGljayBvbiB0aGUgbGluaywgdGhlIHByZWZldGNoZXIgbWF5IGJlIGRvbmUsIG1lYW5pbmcgdGhhdCB0aGV5J2xsIGJlIGluc3RhbnRseSByZWRpcmVjdGVkLiBJZiB0aGUgcHJlZmV0Y2hlciBpcyBzdGlsbCB3b3JraW5nLCB5b3UnZCBzdGlsbCBiZSBtYWtpbmcgYSBzaG9ydGN1dCwgYXMgdGhlIHVzZXIgd2lsbCBiZSByZWRpcmVjdGVkIGFzIHNvb24gYXMgdGhlIHByZWZldGNoZXIgZmluaXNoZXMsIGdpdmluZyB5b3UgYSBoZWFkIHN0YXJ0IGFuZCByZXByZXNlbnRpbmcgYSBwZXJjZWl2ZWQgcGVyZm9ybWFuY2UgYm9vc3QuXFxuXFxuICAgIFlvdSBjYW4gYWxzbyBjcmVhdGUgeW91ciBvd24gcHJlZmV0Y2hpbmcgcnVsZXMuIE1heWJlIHlvdSdkIGxpa2UgdG8gc3RhcnQgcHJlZmV0Y2hpbmcgYSB2aWV3IGFzIHNvb24gYXMgaHVtYW5zIHN0YXJ0IG1vdmluZyB0aGUgbW91c2UgY3Vyc29yIHRvd2FyZHMgYSBsaW5rLiBXaGVuIHlvdSBjb25zaWRlciB0aGF0IGEgdXNlciBzaG93cyBpbnRlbnQgdG8gbmF2aWdhdGUgdG8gYW4gYWN0aW9uLCB5b3UgY2FuIGNhbGwgW2B0YXVudXMucHJlZmV0Y2hgXVsxM10gYW5kIHN0YXJ0IGxvYWRpbmcgZXZlcnl0aGluZyBuZWNlc3NhcnkgZm9yIHRoZSB2aWV3IHRvIGJlIGltbWVkaWF0ZWx5IGxvYWRlZC5cXG5cXG4gICAgTm90ZSB0aGF0ICoqdGhlIHByZWZldGNoZXIgY2FuIG9ubHkgbG9hZCBfb25lIHJvdXRlXyBhdCBhIHRpbWUqKi4gVGhpcyBpcyBieSBkZXNpZ24sIGFzIHByZWZldGNoaW5nIGxvdHMgb2YgbGlua3Mgd291bGQgaW50ZXJmZXJlIHdpdGggdGhlIGh1bWFuJ3MgY29ubmVjdGl2aXR5LCBkb2luZyBtb3JlIGhhcm0gdGhhbiBnb29kLiBJZiB0aGUgcHJlZmV0Y2hlciBpcyBhbHJlYWR5IGxvYWRpbmcgYSByb3V0ZSB3aGVuIGFub3RoZXIgYXR0ZW1wdCB0byBwcmVmZXRjaCBpcyByZWdpc3RlcmVkLCB0aGUgb2xkIHJlcXVlc3Qgd2lsbCBiZSBhYm9ydGVkIHRvIG1ha2Ugcm9vbSBmb3IgdGhlIG5ldyBvbmUuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjYm9vc3RpbmctcGVyZm9ybWFuY2Utd2l0aC10YXVudXMpPC9zdWI+XFxuXFxuICAgICMgU2VuZCB2aWV3cyBhbmQgY29udHJvbGxlcnMgdG8gdGhlIGNsaWVudCBzZWxlY3RpdmVseVxcblxcbiAgICBUaGUgbW9zdCBhbWJpdGlvdXMgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHRoYXQgY2FuIGJlIGRvbmUgd2l0aCBUYXVudXMgaXMgZGVmZXJyaW5nIGNsaWVudC1zaWRlIHZpZXdzIGFuZCBjb250cm9sbGVycy4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gY29tcGlsZSBldmVyeSB2aWV3IGFuZCBjb250cm9sbGVyLCBhbG9uZ3NpZGUgcm91dGVzIGFuZCBUYXVudXMgaXRzZWxmLCBhbmQgc2VuZCBldmVyeXRoaW5nIGluIGEgc2luZ2xlIGJ1bmRsZSB0byB0aGUgY2xpZW50LiBBcyB5b3VyIGFwcGxpY2F0aW9uIGdyb3dzLCBpdCBtaWdodCBubyBsb25nZXIgYmUgcHJhY3RpY2FsIHRvIHNlbmQgZXZlcnl0aGluZyB0b2dldGhlciBpbiBhIGh1Z2UgYnVuZGxlLCBhcyBwZXJmb3JtYW5jZSB3b3VsZCBzdWZmZXIuXFxuXFxuICAgIFRhdW51cyBvZmZlcnMgYSBtZWNoYW5pc20gdGhyb3VnaCB3aGljaCB5b3UgY2FuIGRlZmVyIHNwZWNpZmljIGFjdGlvbnMsIG9yIHBhcnRzIG9mIHRoZSBhcHBsaWNhdGlvbi4gV2hlbiBvbmUgb2YgdGhvc2UgcGFydHMgb2YgdGhlIGFwcGxpY2F0aW9uIG5lZWRzIHRvIGJlIGxvYWRlZCwgZXZlbiB3aGVuIHVzaW5nIFtgdGF1bnVzLnBhcnRpYWxgXVsxNF0sIHRoZSBzZXJ2ZXItc2lkZSB3aWxsIGJ1bmRsZSB0aGUgdmlldyB0ZW1wbGF0ZSBtb2R1bGUgYW5kIHRoZSBjbGllbnQtc2lkZSBjb250cm9sbGVyIG1vZHVsZSBhbmQgc2VuZCB0aGF0IHRvIHRoZSBjbGllbnQuIFRoZSBjbGllbnQgdGhlbiBydW5zIGBldmFsYCBvbiB0aGUgYnVuZGxlIGFuZCBwcm9jZWVkcyB0byBzdG9yZSBpdCBpbiBpdHMgY2FjaGUsIHVzaW5nIHRoZSBzYW1lIGNhY2hpbmcgbWVjaGFuaXNtIHRoYXQncyB1c2VkIGZvciBtb2RlbHMgXyhleGNlcHQgdGhhdCB2aWV3cyBhbmQgY29udHJvbGxlcnMgb25seSBnbyBzdGFsZSBkdWUgdG8gdmVyc2lvbiBjaGFuZ2VzLCBhbmQgbmV2ZXIgYmVjYXVzZSBvZiBkdXJhdGlvbnMpXy5cXG5cXG4gICAgVG8gbWFrZSB1c2Ugb2YgdGhlIGRlZmVycmFsIG1lY2hhbmlzbSB5b3UgaGF2ZSB0byB0YWtlIGEgZmV3IHRoaW5ncyBpbnRvIGNvbnNpZGVyYXRpb24uIEZpcnN0IG9mZiwgeW91J2xsIGhhdmUgdG8gdXNlIHRoZSBbYC0tZGVmZXJgXVsxNV0gZmxhZyBpbiB0aGUgQ0xJIHRvIHNlbGVjdCB0aGUgYWN0aW9ucyB5b3Ugd2FudCB0byBkZWZlci4gRm9yIGluc3RhbmNlLCBkb2luZyBgdGF1bnVzIC0tZGVmZXIgYWRtaW5gIHdpbGwgZGVmZXIgYWxsIGFjdGlvbnMgZm9yIHRoZSBgYWRtaW5gIGNvbnRyb2xsZXIuXFxuXFxuICAgIERlZmVycmVkIG1vZHVsZXMgYXJlIGJ1bmRsZWQgd2l0aCBCcm93c2VyaWZ5IGFuZCBnZXQgKipzb3VyY2UgbWFwcyBieSBkZWZhdWx0KiosIHNvIGRlYnVnZ2luZyB0aGVtIGR1cmluZyBkZXZlbG9wbWVudCBpcyBhcyBlYXN5IGFzIGRlYnVnZ2luZyBub24tZGVmZXJyZWQgY29udHJvbGxlcnMgb3IgdmlldyB0ZW1wbGF0ZSBmdW5jdGlvbnMuIFlvdSBjYW4gY2hhbmdlIHRoaXMgYmVoYXZpb3IgYnkgW3NldHRpbmcgYGRlZmVyTWluaWZpZWQ6IHRydWVgIGF0IHRoZSBzZXJ2ZXItc2lkZSBtb3VudHBvaW50XVsxNl0sIHdoaWNoIHdpbGwgbWluaWZ5IHRoZSBidW5kbGUgYW5kIGFsc28gcmVtb3ZlIHRoZSBzb3VyY2VtYXAuIFRoZXNlIGJ1bmRsZXMgYXJlIGdlbmVyYXRlZCB0aGUgZmlyc3QgdGltZSB0aGF0IHRoZXkgZ2V0IHJlcXVlc3RlZCwgYW5kIHN1YnNlcXVlbnQgcmVxdWVzdHMgZm9yIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHJlY2VpdmUgYSBjb3B5IHRoYXQgZ2V0cyBjYWNoZWQgaW4gbWVtb3J5LlxcblxcbiAgICBZb3UgaGF2ZSB0byBiZSBjYXJlZnVsIHdoZW4gZGVmZXJyaW5nIHZpZXdzIGFuZCBjb250cm9sbGVycywgYXMgdGhlIGJ1bmRsZSBmb3IgZXZlcnkgY29tcG9uZW50IHdpbGwgYmUgY29tcGlsZWQgaW5kZXBlbmRlbnRseS4gSGVyZSdzIGEgZmV3IGNvbnNpZGVyYXRpb25zIHRvIHRha2UgaW4gbWluZC5cXG5cXG4gICAgLSBUYWtlIGludG8gYWNjb3VudCB0aGF0IGVhY2ggbW9kdWxlIHlvdSByZWZlcmVuY2UgZ2xvYmFsbHkgaXMgYSBtb2R1bGUgdGhhdCdzIG5vdCBjb21waWxlZCBvbiBldmVyeSBjb21wb25lbnQgdGhhdCBgcmVxdWlyZWBzIGl0LiBUaGlzIHRyYW5zbGF0ZXMgaW50byBsZWFuZXIgcmVzcG9uc2VzIHdoZW4gY2xpZW50cyBuZWVkIHRvIGZldGNoIGEgdGVtcGxhdGUgYW5kIGEgY2xpZW50LXNpZGUgY29udHJvbGxlclxcbiAgICAtIEF2b2lkIG1haW50YWluaW5nIGdsb2JhbCBzdGF0ZSBhY3Jvc3MgdmlldyBjb250cm9sbGVycyB1c2luZyBtb2R1bGVzLiBJZiB5b3UgbmVlZCB0byBkbyBzbywgY29uc2lkZXIgdXNpbmcgZXZlbnRzIGluc3RlYWQuIERlZmVycmVkIG1vZHVsZXMgYXJlIHNlbGYtY29udGFpbmVkLCBtZWFuaW5nIHRoYXQgZXZlbiBpZiB0d28gc2VwYXJhdGUgY29udHJvbGxlcnMgcmVxdWlyZSBhIGdpdmVuIGAuL3N0YXRlYCBtb2R1bGUsIGVhY2ggY29udHJvbGxlciB3aWxsIGdldCBpdHMgb3duIGlkZXBlbmRlbnQgaW5zdGFuY2Ugb2YgdGhlIGAuL3N0YXRlYCBtb2R1bGUsIGFuZCBub3RoaW5nIHdpbGwgYmUgc2hhcmVkLlxcblxcbiAgICBJbiB0aGUgZnV0dXJlLCB0cmFuc3BvcnRzIG90aGVyIHRoYW4gQ29tbW9uSlMgbWF5IGJlIGF2YWlsYWJsZSBmb3IgZGVmaW5pbmcgY29udHJvbGxlcnMgYW5kIHZpZXcgdGVtcGxhdGVzIHRoYXQgY2FuIGJlIGRlZmVycmVkLCBidXQgZm9yIG5vdyB0aGF0J3MgdGhlIG9ubHkgdmlhYmxlIHRyYW5zcG9ydCB3aGVuIGl0IGNvbWVzIHRvIGRlZmVycmVkIGV4ZWN1dGlvbiBpbiBUYXVudXMuXFxuXFxuICAgIDxzdWI+W18oYmFjayB0byB0YWJsZSBvZiBjb250ZW50cylfXSgjYm9vc3RpbmctcGVyZm9ybWFuY2Utd2l0aC10YXVudXMpPC9zdWI+XFxuXFxuICAgIFsxXTogaHR0cDovL3Bvbnlmb28uY29tL2FydGljbGVzL2NyaXRpY2FsLXBhdGgtcGVyZm9ybWFuY2Utb3B0aW1pemF0aW9uXFxuICAgIFsyXTogaHR0cDovL25naW54Lm9yZy9cXG4gICAgWzNdOiAvYXBpI3VzaW5nLXRoZS1hdXRvLXN0cmF0ZWd5XFxuICAgIFs0XTogL2FwaSN1c2luZy10aGUtaW5saW5lLXN0cmF0ZWd5XFxuICAgIFs1XTogL2FwaSMtdGF1bnVzLW1vdW50LWNvbnRhaW5lci13aXJpbmctb3B0aW9ucy1cXG4gICAgWzZdOiAvYXBpI3VzaW5nLXRoZS1tYW51YWwtc3RyYXRlZ3lcXG4gICAgWzddOiAvYXBpI2NhY2hpbmdcXG4gICAgWzhdOiAvYXBpIy10YXVudXMtaW50ZXJjZXB0LWFjdGlvbi1mbi1cXG4gICAgWzldOiBodHRwOi8vcmF1Y2hnLmNvbS8yMDE0LzctcHJpbmNpcGxlcy1vZi1yaWNoLXdlYi1hcHBsaWNhdGlvbnMvXFxuICAgIFsxMF06IGh0dHA6Ly9iZXZhY3F1YS5pby9iZlxcbiAgICBbMTFdOiAvYXBpI3ZlcnNpb25pbmdcXG4gICAgWzEyXTogL2FwaSNwcmVmZXRjaGluZ1xcbiAgICBbMTNdOiAvYXBpI3VzaW5nLXRhdW51cy1wcmVmZXRjaC11cmwtZWxlbWVudC1cXG4gICAgWzE0XTogL2FwaSMtdGF1bnVzLXBhcnRpYWwtY29udGFpbmVyLWFjdGlvbi1tb2RlbC1cXG4gICAgWzE1XTogL2FwaSMtZGVmZXItYWN0aW9ucy1cXG4gICAgWzE2XTogL2FwaSMtb3B0aW9ucy1kZWZlcm1pbmlmaWVkLVxcblwiKTtcbn1cbn0iLCJ2YXIgamFkZSA9IHJlcXVpcmUoXCJqYWR1bS9ydW50aW1lXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3RGb3VuZChsb2NhbHMpIHtcbnZhciBqYWRlX2RlYnVnID0gWyBuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvZXJyb3Ivbm90LWZvdW5kLmphZGVcIiApIF07XG50cnkge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG5cbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDAsIFwidmlld3MvZXJyb3Ivbm90LWZvdW5kLmphZGVcIiApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvZXJyb3Ivbm90LWZvdW5kLmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5idWYucHVzaChcIk5vdCBGb3VuZFwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9oMT5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzLCBcInZpZXdzL2Vycm9yL25vdC1mb3VuZC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxwPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDMsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5idWYucHVzaChcIlRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhbnl0aGluZyBoZXJlIHlldC4gSWYgeW91IGJlbGlldmUgdGhpcyB0byBiZSBhIG1pc3Rha2UsIHBsZWFzZSBsZXQgdXMga25vdyFcIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvcD5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCA0LCBcInZpZXdzL2Vycm9yL25vdC1mb3VuZC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxwPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDUsIFwidmlld3MvZXJyb3Ivbm90LWZvdW5kLmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGEgaHJlZj1cXFwiaHR0cHM6Ly90d2l0dGVyLmNvbS9uemdiXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggNSwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiJm1kYXNoOyBAbnpnYlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9hPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9wPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufSBjYXRjaCAoZXJyKSB7XG4gIGphZGUucmV0aHJvdyhlcnIsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUsIGphZGVfZGVidWdbMF0ubGluZW5vLCBcImgxIE5vdCBGb3VuZFxcblxcbnAgVGhlcmUgZG9lc24ndCBzZWVtIHRvIGJlIGFueXRoaW5nIGhlcmUgeWV0LiBJZiB5b3UgYmVsaWV2ZSB0aGlzIHRvIGJlIGEgbWlzdGFrZSwgcGxlYXNlIGxldCB1cyBrbm93IVxcbnBcXG4gIGEoaHJlZj0naHR0cHM6Ly90d2l0dGVyLmNvbS9uemdiJywgdGFyZ2V0PSdfYmxhbmsnKSAmbWRhc2g7IEBuemdiXFxuXCIpO1xufVxufSIsInZhciBqYWRlID0gcmVxdWlyZShcImphZHVtL3J1bnRpbWVcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxheW91dChsb2NhbHMpIHtcbnZhciBqYWRlX2RlYnVnID0gWyBuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvbGF5b3V0LmphZGVcIiApIF07XG50cnkge1xudmFyIGJ1ZiA9IFtdO1xudmFyIGphZGVfbWl4aW5zID0ge307XG52YXIgamFkZV9pbnRlcnA7XG47dmFyIGxvY2Fsc19mb3Jfd2l0aCA9IChsb2NhbHMgfHwge30pOyhmdW5jdGlvbiAobW9kZWwsIHBhcnRpYWwpIHtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDAsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPCFET0NUWVBFIGh0bWw+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMiwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8aHRtbCBsYW5nPVxcXCJlblxcXCIgaXRlbXNjb3BlIGl0ZW10eXBlPVxcXCJodHRwOi8vc2NoZW1hLm9yZy9CbG9nXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzLCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxoZWFkPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDQsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPHRpdGxlPlwiICsgKGphZGUuZXNjYXBlKG51bGwgPT0gKGphZGVfaW50ZXJwID0gbW9kZWwudGl0bGUpID8gXCJcIiA6IGphZGVfaW50ZXJwKSkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L3RpdGxlPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDUsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPG1ldGEgY2hhcnNldD1cXFwidXRmLThcXFwiPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDYsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGxpbmsgcmVsPVxcXCJzaG9ydGN1dCBpY29uXFxcIiBocmVmPVxcXCIvZmF2aWNvbi5pY29cXFwiPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDcsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPG1ldGEgaHR0cC1lcXVpdj1cXFwiWC1VQS1Db21wYXRpYmxlXFxcIiBjb250ZW50PVxcXCJJRT1lZGdlLGNocm9tZT0xXFxcIj5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCA4LCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggOSwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8bGluayByZWw9XFxcInN0eWxlc2hlZXRcXFwiIHR5cGU9XFxcInRleHQvY3NzXFxcIiBocmVmPVxcXCIvY3NzL2FsbC5jc3NcXFwiPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEwLCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxsaW5rIHJlbD1cXFwic3R5bGVzaGVldFxcXCIgdHlwZT1cXFwidGV4dC9jc3NcXFwiIGhyZWY9XFxcImh0dHA6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PVVuaWNhK09uZTo0MDB8UGxheWZhaXIrRGlzcGxheTo3MDB8TWVncmltOjcwMHxGYXVuYStPbmU6NDAwaXRhbGljLDQwMCw3MDBcXFwiPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9oZWFkPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEyLCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxib2R5IGlkPVxcXCJ0b3BcXFwiPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDEzLCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxoZWFkZXI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMTQsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGgxPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDE1LCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxhIGhyZWY9XFxcIi9cXFwiIGFyaWEtbGFiZWw9XFxcIkdvIHRvIGhvbWVcXFwiIGNsYXNzPVxcXCJseS10aXRsZVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMTUsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5idWYucHVzaChcIlRhdW51c1wiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9hPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9oMT5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAxNiwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8aDIgY2xhc3M9XFxcImx5LXN1YmhlYWRpbmdcXFwiPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDE2LCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuYnVmLnB1c2goXCJNaWNybyBJc29tb3JwaGljIE1WQyBFbmdpbmUgZm9yIE5vZGUuanNcIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvaDI+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2hlYWRlcj5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAxOCwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8YXNpZGUgY2xhc3M9XFxcInNiLXNpZGViYXJcXFwiPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDE5LCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxuYXYgY2xhc3M9XFxcInNiLWNvbnRhaW5lclxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjAsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPHVsIGNsYXNzPVxcXCJudi1pdGVtc1xcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjEsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGxpIGNsYXNzPVxcXCJudi1pdGVtXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAyMiwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8YSBocmVmPVxcXCIvXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAyMiwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiQWJvdXRcIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvYT5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvbGk+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjMsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGxpIGNsYXNzPVxcXCJudi1pdGVtXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAyNCwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8YSBocmVmPVxcXCIvZ2V0dGluZy1zdGFydGVkXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAyNCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiR2V0dGluZyBTdGFydGVkXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2E+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2xpPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDI1LCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxsaSBjbGFzcz1cXFwibnYtaXRlbVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjYsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGEgaHJlZj1cXFwiL2FwaVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjYsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5idWYucHVzaChcIkFQSSBEb2N1bWVudGF0aW9uXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2E+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2xpPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDI3LCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxsaSBjbGFzcz1cXFwibnYtaXRlbVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMjgsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGEgaHJlZj1cXFwiL2NvbXBsZW1lbnRzXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAyOCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiQ29tcGxlbWVudGFyeSBNb2R1bGVzXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2E+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2xpPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDI5LCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxsaSBjbGFzcz1cXFwibnYtaXRlbVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMzAsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGEgaHJlZj1cXFwiL3BlcmZvcm1hbmNlXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzMCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2E+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2xpPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIDMxLCBcInZpZXdzL2xheW91dC5qYWRlXCIgKSk7XG5idWYucHVzaChcIjxsaSBjbGFzcz1cXFwibnYtaXRlbVxcXCI+XCIpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMzIsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGEgaHJlZj1cXFwiL3NvdXJjZS1jb2RlXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzMiwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiU291cmNlIENvZGVcIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvYT5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvbGk+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMzMsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPGxpIGNsYXNzPVxcXCJudi1pdGVtXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzNCwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8YSBocmVmPVxcXCIvY2hhbmdlbG9nXFxcIj5cIik7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCB1bmRlZmluZWQsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUgKSk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzNCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmJ1Zi5wdXNoKFwiQ2hhbmdlbG9nXCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2E+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2xpPlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC91bD5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5idWYucHVzaChcIjwvbmF2PlwiKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9hc2lkZT5cIik7XG5qYWRlX2RlYnVnLnNoaWZ0KCk7XG5qYWRlX2RlYnVnLnVuc2hpZnQobmV3IGphZGUuRGVidWdJdGVtKCAzNiwgXCJ2aWV3cy9sYXlvdXQuamFkZVwiICkpO1xuYnVmLnB1c2goXCI8bWFpbiBpZD1cXFwiYXBwbGljYXRpb24tcm9vdFxcXCIgZGF0YS10YXVudXM9XFxcIm1vZGVsXFxcIiBjbGFzcz1cXFwibHktbWFpblxcXCI+XCIgKyAobnVsbCA9PSAoamFkZV9pbnRlcnAgPSBwYXJ0aWFsKSA/IFwiXCIgOiBqYWRlX2ludGVycCkpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggdW5kZWZpbmVkLCBqYWRlX2RlYnVnWzBdLmZpbGVuYW1lICkpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L21haW4+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy51bnNoaWZ0KG5ldyBqYWRlLkRlYnVnSXRlbSggMzcsIFwidmlld3MvbGF5b3V0LmphZGVcIiApKTtcbmJ1Zi5wdXNoKFwiPHNjcmlwdCBzcmM9XFxcIi9qcy9hbGwuanNcXFwiPlwiKTtcbmphZGVfZGVidWcudW5zaGlmdChuZXcgamFkZS5EZWJ1Z0l0ZW0oIHVuZGVmaW5lZCwgamFkZV9kZWJ1Z1swXS5maWxlbmFtZSApKTtcbmphZGVfZGVidWcuc2hpZnQoKTtcbmJ1Zi5wdXNoKFwiPC9zY3JpcHQ+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2JvZHk+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuYnVmLnB1c2goXCI8L2h0bWw+XCIpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO1xuamFkZV9kZWJ1Zy5zaGlmdCgpO30uY2FsbCh0aGlzLFwibW9kZWxcIiBpbiBsb2NhbHNfZm9yX3dpdGg/bG9jYWxzX2Zvcl93aXRoLm1vZGVsOnR5cGVvZiBtb2RlbCE9PVwidW5kZWZpbmVkXCI/bW9kZWw6dW5kZWZpbmVkLFwicGFydGlhbFwiIGluIGxvY2Fsc19mb3Jfd2l0aD9sb2NhbHNfZm9yX3dpdGgucGFydGlhbDp0eXBlb2YgcGFydGlhbCE9PVwidW5kZWZpbmVkXCI/cGFydGlhbDp1bmRlZmluZWQpKTs7cmV0dXJuIGJ1Zi5qb2luKFwiXCIpO1xufSBjYXRjaCAoZXJyKSB7XG4gIGphZGUucmV0aHJvdyhlcnIsIGphZGVfZGVidWdbMF0uZmlsZW5hbWUsIGphZGVfZGVidWdbMF0ubGluZW5vLCBcImRvY3R5cGUgaHRtbFxcbmh0bWwobGFuZz0nZW4nLCBpdGVtc2NvcGUsIGl0ZW10eXBlPSdodHRwOi8vc2NoZW1hLm9yZy9CbG9nJylcXG4gIGhlYWRcXG4gICAgdGl0bGU9bW9kZWwudGl0bGVcXG4gICAgbWV0YShjaGFyc2V0PSd1dGYtOCcpXFxuICAgIGxpbmsocmVsPSdzaG9ydGN1dCBpY29uJywgaHJlZj0nL2Zhdmljb24uaWNvJylcXG4gICAgbWV0YShodHRwLWVxdWl2PSdYLVVBLUNvbXBhdGlibGUnLCBjb250ZW50PSdJRT1lZGdlLGNocm9tZT0xJylcXG4gICAgbWV0YShuYW1lPSd2aWV3cG9ydCcsIGNvbnRlbnQ9J3dpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xJylcXG4gICAgbGluayhyZWw9J3N0eWxlc2hlZXQnLCB0eXBlPSd0ZXh0L2NzcycsIGhyZWY9Jy9jc3MvYWxsLmNzcycpXFxuICAgIGxpbmsocmVsPSdzdHlsZXNoZWV0JywgdHlwZT0ndGV4dC9jc3MnLCBocmVmPSdodHRwOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1VbmljYStPbmU6NDAwfFBsYXlmYWlyK0Rpc3BsYXk6NzAwfE1lZ3JpbTo3MDB8RmF1bmErT25lOjQwMGl0YWxpYyw0MDAsNzAwJylcXG5cXG4gIGJvZHkjdG9wXFxuICAgIGhlYWRlclxcbiAgICAgIGgxXFxuICAgICAgICBhLmx5LXRpdGxlKGhyZWY9Jy8nLCBhcmlhLWxhYmVsPSdHbyB0byBob21lJykgVGF1bnVzXFxuICAgICAgaDIubHktc3ViaGVhZGluZyBNaWNybyBJc29tb3JwaGljIE1WQyBFbmdpbmUgZm9yIE5vZGUuanNcXG5cXG4gICAgYXNpZGUuc2Itc2lkZWJhclxcbiAgICAgIG5hdi5zYi1jb250YWluZXJcXG4gICAgICAgIHVsLm52LWl0ZW1zXFxuICAgICAgICAgIGxpLm52LWl0ZW1cXG4gICAgICAgICAgICBhKGhyZWY9Jy8nKSBBYm91dFxcbiAgICAgICAgICBsaS5udi1pdGVtXFxuICAgICAgICAgICAgYShocmVmPScvZ2V0dGluZy1zdGFydGVkJykgR2V0dGluZyBTdGFydGVkXFxuICAgICAgICAgIGxpLm52LWl0ZW1cXG4gICAgICAgICAgICBhKGhyZWY9Jy9hcGknKSBBUEkgRG9jdW1lbnRhdGlvblxcbiAgICAgICAgICBsaS5udi1pdGVtXFxuICAgICAgICAgICAgYShocmVmPScvY29tcGxlbWVudHMnKSBDb21wbGVtZW50YXJ5IE1vZHVsZXNcXG4gICAgICAgICAgbGkubnYtaXRlbVxcbiAgICAgICAgICAgIGEoaHJlZj0nL3BlcmZvcm1hbmNlJykgUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXFxuICAgICAgICAgIGxpLm52LWl0ZW1cXG4gICAgICAgICAgICBhKGhyZWY9Jy9zb3VyY2UtY29kZScpIFNvdXJjZSBDb2RlXFxuICAgICAgICAgIGxpLm52LWl0ZW1cXG4gICAgICAgICAgICBhKGhyZWY9Jy9jaGFuZ2Vsb2cnKSBDaGFuZ2Vsb2dcXG5cXG4gICAgbWFpbi5seS1tYWluI2FwcGxpY2F0aW9uLXJvb3QoZGF0YS10YXVudXM9J21vZGVsJykhPXBhcnRpYWxcXG4gICAgc2NyaXB0KHNyYz0nL2pzL2FsbC5qcycpXFxuXCIpO1xufVxufSIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRlbXBsYXRlcyA9IHtcbiAgJ2RvY3VtZW50YXRpb24vYWJvdXQnOiByZXF1aXJlKCcuL3ZpZXdzL2RvY3VtZW50YXRpb24vYWJvdXQuanMnKSxcbiAgJ2RvY3VtZW50YXRpb24vYXBpJzogcmVxdWlyZSgnLi92aWV3cy9kb2N1bWVudGF0aW9uL2FwaS5qcycpLFxuICAnZG9jdW1lbnRhdGlvbi9jb21wbGVtZW50cyc6IHJlcXVpcmUoJy4vdmlld3MvZG9jdW1lbnRhdGlvbi9jb21wbGVtZW50cy5qcycpLFxuICAnZG9jdW1lbnRhdGlvbi9nZXR0aW5nLXN0YXJ0ZWQnOiByZXF1aXJlKCcuL3ZpZXdzL2RvY3VtZW50YXRpb24vZ2V0dGluZy1zdGFydGVkLmpzJyksXG4gICdkb2N1bWVudGF0aW9uL3BlcmZvcm1hbmNlJzogcmVxdWlyZSgnLi92aWV3cy9kb2N1bWVudGF0aW9uL3BlcmZvcm1hbmNlLmpzJyksXG4gICdlcnJvci9ub3QtZm91bmQnOiByZXF1aXJlKCcuL3ZpZXdzL2Vycm9yL25vdC1mb3VuZC5qcycpLFxuICAnbGF5b3V0JzogcmVxdWlyZSgnLi92aWV3cy9sYXlvdXQuanMnKVxufTtcblxudmFyIGNvbnRyb2xsZXJzID0ge1xuICAnZG9jdW1lbnRhdGlvbi9hYm91dCc6IHJlcXVpcmUoJy4uL2NsaWVudC9qcy9jb250cm9sbGVycy9kb2N1bWVudGF0aW9uL2Fib3V0LmpzJylcbn07XG5cbnZhciByb3V0ZXMgPSBbXG4gIHtcbiAgICByb3V0ZTogJy8nLFxuICAgIGFjdGlvbjogJ2RvY3VtZW50YXRpb24vYWJvdXQnXG4gIH0sXG4gIHtcbiAgICByb3V0ZTogJy9nZXR0aW5nLXN0YXJ0ZWQnLFxuICAgIGFjdGlvbjogJ2RvY3VtZW50YXRpb24vZ2V0dGluZy1zdGFydGVkJ1xuICB9LFxuICB7XG4gICAgcm91dGU6ICcvYXBpJyxcbiAgICBhY3Rpb246ICdkb2N1bWVudGF0aW9uL2FwaSdcbiAgfSxcbiAge1xuICAgIHJvdXRlOiAnL2NvbXBsZW1lbnRzJyxcbiAgICBhY3Rpb246ICdkb2N1bWVudGF0aW9uL2NvbXBsZW1lbnRzJ1xuICB9LFxuICB7XG4gICAgcm91dGU6ICcvcGVyZm9ybWFuY2UnLFxuICAgIGFjdGlvbjogJ2RvY3VtZW50YXRpb24vcGVyZm9ybWFuY2UnXG4gIH0sXG4gIHtcbiAgICByb3V0ZTogJy9zb3VyY2UtY29kZScsXG4gICAgaWdub3JlOiB0cnVlXG4gIH0sXG4gIHtcbiAgICByb3V0ZTogJy9jaGFuZ2Vsb2cnLFxuICAgIGlnbm9yZTogdHJ1ZVxuICB9LFxuICB7XG4gICAgcm91dGU6ICcvOmNhdGNoYWxsKicsXG4gICAgYWN0aW9uOiAnZXJyb3Ivbm90LWZvdW5kJ1xuICB9XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdGVtcGxhdGVzOiB0ZW1wbGF0ZXMsXG4gIGNvbnRyb2xsZXJzOiBjb250cm9sbGVycyxcbiAgcm91dGVzOiByb3V0ZXNcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICBjb25zb2xlLmxvZygnV2VsY29tZSB0byBUYXVudXMgZG9jdW1lbnRhdGlvbiBtaW5pLXNpdGUhJyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgJCA9IHJlcXVpcmUoJ2RvbWludXMnKTtcbnZhciByYWYgPSByZXF1aXJlKCdyYWYnKTtcbnZhciB0YXVudXMgPSByZXF1aXJlKCd0YXVudXMnKTtcbnZhciB0aHJvdHRsZSA9IHJlcXVpcmUoJy4vdGhyb3R0bGUnKTtcbnZhciBzbG93U2Nyb2xsQ2hlY2sgPSB0aHJvdHRsZShzY3JvbGxDaGVjaywgNTApO1xudmFyIGh4ID0gL15oWzEtNl0kL2k7XG52YXIgaGVhZGluZztcblxuZnVuY3Rpb24gY29udmVudGlvbnMgKGNvbnRhaW5lcikge1xuICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ2gxLGgyLGgzLGg0LGg1LGg2JywgaGVhZGluZ0NsaWNrKTtcblxuICByYWYoc2Nyb2xsKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsICgpIHtcbiAgc2xvd1Njcm9sbENoZWNrKCk7XG4gIHJhZihzY3JvbGwpO1xufVxuXG5mdW5jdGlvbiBzY3JvbGxDaGVjayAoKSB7XG4gIHZhciBmb3VuZCA9ICQoJ21haW4nKS5maW5kKCdoMSxoMixoMyxoNCxoNSxoNicpLmZpbHRlcihpblZpZXdwb3J0KTtcbiAgaWYgKGZvdW5kLmxlbmd0aCA9PT0gMCB8fCBoZWFkaW5nICYmIGZvdW5kWzBdID09PSBoZWFkaW5nWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChoZWFkaW5nKSB7XG4gICAgaGVhZGluZy5yZW1vdmVDbGFzcygndXYtaGlnaGxpZ2h0Jyk7XG4gIH1cbiAgaGVhZGluZyA9IGZvdW5kLmkoMCk7XG4gIGhlYWRpbmcuYWRkQ2xhc3MoJ3V2LWhpZ2hsaWdodCcpO1xufVxuXG5mdW5jdGlvbiBpblZpZXdwb3J0IChlbGVtZW50KSB7XG4gIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHZpZXdhYmxlID0gKFxuICAgIE1hdGguY2VpbChyZWN0LnRvcCkgPj0gMCAmJlxuICAgIE1hdGguY2VpbChyZWN0LmxlZnQpID49IDAgJiZcbiAgICBNYXRoLmZsb29yKHJlY3QuYm90dG9tKSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgTWF0aC5mbG9vcihyZWN0LnJpZ2h0KSA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKVxuICApO1xuICByZXR1cm4gdmlld2FibGU7XG59XG5cbmZ1bmN0aW9uIGZpbmRIZWFkaW5nIChlKSB7XG4gIHZhciBoID0gZS50YXJnZXQ7XG4gIHdoaWxlIChoICYmICFoeC50ZXN0KGgudGFnTmFtZSkpIHtcbiAgICBoID0gaC5wYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBoO1xufVxuXG5mdW5jdGlvbiBoZWFkaW5nQ2xpY2sgKGUpIHtcbiAgdmFyIGggPSBmaW5kSGVhZGluZyhlKTtcbiAgaWYgKGggJiYgaC5pZCkge1xuICAgIHRhdW51cy5uYXZpZ2F0ZSgnIycgKyBoLmlkKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnZlbnRpb25zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBpbXBvcnQgdGhlIHRhdW51cyBtb2R1bGVcbnZhciB0YXVudXMgPSByZXF1aXJlKCd0YXVudXMnKTtcblxuLy8gaW1wb3J0IHRoZSB3aXJpbmcgbW9kdWxlIGV4cG9ydGVkIGJ5IFRhdW51c1xudmFyIHdpcmluZyA9IHJlcXVpcmUoJy4uLy4uLy5iaW4vd2lyaW5nJyk7XG5cbi8vIGltcG9ydCBjb252ZW50aW9uc1xudmFyIGNvbnZlbnRpb25zID0gcmVxdWlyZSgnLi9jb252ZW50aW9ucycpO1xuXG4vLyBnZXQgdGhlIDxtYWluPiBlbGVtZW50XG52YXIgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBsaWNhdGlvbi1yb290Jyk7XG5cbi8vIHNldCB1cCBjb252ZW50aW9ucyB0aGF0IGdldCBleGVjdXRlZCBmb3IgZXZlcnkgdmlld1xudGF1bnVzLm9uKCdyZW5kZXInLCBjb252ZW50aW9ucyk7XG5cbi8vIG1vdW50IHRhdW51cyBzbyBpdCBzdGFydHMgaXRzIHJvdXRpbmcgZW5naW5lXG50YXVudXMubW91bnQobWFpbiwgd2lyaW5nKTtcblxuLy8gY3JlYXRlIGdsb2JhbHMgdG8gbWFrZSBpdCBlYXN5IHRvIGRlYnVnXG4vLyBkb24ndCBkbyB0aGlzIGluIHByb2R1Y3Rpb24hXG5nbG9iYWwuJCA9IHJlcXVpcmUoJ2RvbWludXMnKTtcbmdsb2JhbC50YXVudXMgPSB0YXVudXM7XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHRocm90dGxlIChmbiwgdCkge1xuICB2YXIgY2FjaGU7XG4gIHZhciBsYXN0ID0gLTE7XG4gIHJldHVybiBmdW5jdGlvbiB0aHJvdHRsZWQgKCkge1xuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChub3cgLSBsYXN0ID4gdCkge1xuICAgICAgY2FjaGUgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgbGFzdCA9IG5vdztcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuZ2xvYmFsLnRocm90dGxlPXRocm90dGxlO1xuIiwiXG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3VzdG9tRXZlbnQgPSByZXF1aXJlKCdjdXN0b20tZXZlbnQnKTtcbnZhciBldmVudG1hcCA9IHJlcXVpcmUoJy4vZXZlbnRtYXAnKTtcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBhZGRFdmVudCA9IGFkZEV2ZW50RWFzeTtcbnZhciByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50RWFzeTtcbnZhciBoYXJkQ2FjaGUgPSBbXTtcblxuaWYgKCFnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICBhZGRFdmVudCA9IGFkZEV2ZW50SGFyZDtcbiAgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEhhcmQ7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCB1bndyYXAoZWwsIHR5cGUsIGZuKSk7XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcbiIsInZhciBwb3NlciA9IHJlcXVpcmUoJy4vc3JjL25vZGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBwb3NlcjtcblxuWydBcnJheScsICdGdW5jdGlvbicsICdPYmplY3QnLCAnRGF0ZScsICdTdHJpbmcnXS5mb3JFYWNoKHBvc2UpO1xuXG5mdW5jdGlvbiBwb3NlICh0eXBlKSB7XG4gIHBvc2VyW3R5cGVdID0gZnVuY3Rpb24gcG9zZUNvbXB1dGVkVHlwZSAoKSB7IHJldHVybiBwb3Nlcih0eXBlKTsgfTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGQgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cbmZ1bmN0aW9uIHBvc2VyICh0eXBlKSB7XG4gIHZhciBpZnJhbWUgPSBkLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBkLmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICByZXR1cm4gbWFwKHR5cGUsIGlmcmFtZS5jb250ZW50V2luZG93KTtcbn1cblxuZnVuY3Rpb24gbWFwICh0eXBlLCBzb3VyY2UpIHsgLy8gZm9yd2FyZCBwb2x5ZmlsbHMgdG8gdGhlIHN0b2xlbiByZWZlcmVuY2UhXG4gIHZhciBvcmlnaW5hbCA9IHdpbmRvd1t0eXBlXS5wcm90b3R5cGU7XG4gIHZhciB2YWx1ZSA9IHNvdXJjZVt0eXBlXTtcbiAgdmFyIHByb3A7XG5cbiAgZm9yIChwcm9wIGluIG9yaWdpbmFsKSB7XG4gICAgdmFsdWUucHJvdG90eXBlW3Byb3BdID0gb3JpZ2luYWxbcHJvcF07XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcG9zZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBleHBhbmRvID0gJ3Nla3Rvci0nICsgRGF0ZS5ub3coKTtcbnZhciByc2libGluZ3MgPSAvWyt+XS87XG52YXIgZG9jdW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgZGVsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xudmFyIG1hdGNoID0gZGVsLm1hdGNoZXMgfHxcbiAgICAgICAgICAgIGRlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIGRlbC5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIGRlbC5vTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBkZWwubXNNYXRjaGVzU2VsZWN0b3I7XG5cbmZ1bmN0aW9uIHFzYSAoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGV4aXN0ZWQsIGlkLCBwcmVmaXgsIHByZWZpeGVkLCBhZGFwdGVyLCBoYWNrID0gY29udGV4dCAhPT0gZG9jdW1lbnQ7XG4gIGlmIChoYWNrKSB7IC8vIGlkIGhhY2sgZm9yIGNvbnRleHQtcm9vdGVkIHF1ZXJpZXNcbiAgICBleGlzdGVkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgaWQgPSBleGlzdGVkIHx8IGV4cGFuZG87XG4gICAgcHJlZml4ID0gJyMnICsgaWQgKyAnICc7XG4gICAgcHJlZml4ZWQgPSBwcmVmaXggKyBzZWxlY3Rvci5yZXBsYWNlKC8sL2csICcsJyArIHByZWZpeCk7XG4gICAgYWRhcHRlciA9IHJzaWJsaW5ncy50ZXN0KHNlbGVjdG9yKSAmJiBjb250ZXh0LnBhcmVudE5vZGU7XG4gICAgaWYgKCFleGlzdGVkKSB7IGNvbnRleHQuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTsgfVxuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIChhZGFwdGVyIHx8IGNvbnRleHQpLnF1ZXJ5U2VsZWN0b3JBbGwocHJlZml4ZWQgfHwgc2VsZWN0b3IpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChleGlzdGVkID09PSBudWxsKSB7IGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCdpZCcpOyB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoc2VsZWN0b3IsIGN0eCwgY29sbGVjdGlvbiwgc2VlZCkge1xuICB2YXIgZWxlbWVudDtcbiAgdmFyIGNvbnRleHQgPSBjdHggfHwgZG9jdW1lbnQ7XG4gIHZhciByZXN1bHRzID0gY29sbGVjdGlvbiB8fCBbXTtcbiAgdmFyIGkgPSAwO1xuICBpZiAodHlwZW9mIHNlbGVjdG9yICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG4gIGlmIChjb250ZXh0Lm5vZGVUeXBlICE9PSAxICYmIGNvbnRleHQubm9kZVR5cGUgIT09IDkpIHtcbiAgICByZXR1cm4gW107IC8vIGJhaWwgaWYgY29udGV4dCBpcyBub3QgYW4gZWxlbWVudCBvciBkb2N1bWVudFxuICB9XG4gIGlmIChzZWVkKSB7XG4gICAgd2hpbGUgKChlbGVtZW50ID0gc2VlZFtpKytdKSkge1xuICAgICAgaWYgKG1hdGNoZXNTZWxlY3RvcihlbGVtZW50LCBzZWxlY3RvcikpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXN1bHRzLnB1c2guYXBwbHkocmVzdWx0cywgcXNhKHNlbGVjdG9yLCBjb250ZXh0KSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXMgKHNlbGVjdG9yLCBlbGVtZW50cykge1xuICByZXR1cm4gZmluZChzZWxlY3RvciwgbnVsbCwgbnVsbCwgZWxlbWVudHMpO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVzU2VsZWN0b3IgKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBtYXRjaC5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kO1xuXG5maW5kLm1hdGNoZXMgPSBtYXRjaGVzO1xuZmluZC5tYXRjaGVzU2VsZWN0b3IgPSBtYXRjaGVzU2VsZWN0b3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBwb3NlciA9IHJlcXVpcmUoJ3Bvc2VyJyk7XG52YXIgRG9taW51cyA9IHBvc2VyLkFycmF5KCk7XG5cbm1vZHVsZS5leHBvcnRzID0gRG9taW51cztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyICQgPSByZXF1aXJlKCcuL3B1YmxpYycpO1xudmFyIGZsYXR0ZW4gPSByZXF1aXJlKCcuL2ZsYXR0ZW4nKTtcbnZhciBkb20gPSByZXF1aXJlKCcuL2RvbScpO1xudmFyIGN1c3RvbSA9IHJlcXVpcmUoJy4vY3VzdG9tJyk7XG52YXIgY2xhc3NlcyA9IHJlcXVpcmUoJy4vY2xhc3NlcycpO1xudmFyIERvbWludXMgPSByZXF1aXJlKCcuL0RvbWludXMuY3RvcicpO1xuXG5mdW5jdGlvbiBlcXVhbHMgKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiBlcXVhbHMgKGVsZW0pIHtcbiAgICByZXR1cm4gZG9tLm1hdGNoZXMoZWxlbSwgc2VsZWN0b3IpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHJhaWdodCAocHJvcCwgb25lKSB7XG4gIHJldHVybiBmdW5jdGlvbiBkb21NYXBwaW5nIChzZWxlY3Rvcikge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLm1hcChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgcmV0dXJuIGRvbVtwcm9wXShlbGVtLCBzZWxlY3Rvcik7XG4gICAgfSk7XG4gICAgdmFyIHJlc3VsdHMgPSBmbGF0dGVuKHJlc3VsdCk7XG4gICAgcmV0dXJuIG9uZSA/IHJlc3VsdHNbMF0gOiByZXN1bHRzO1xuICB9O1xufVxuXG5Eb21pbnVzLnByb3RvdHlwZS5wcmV2ID0gc3RyYWlnaHQoJ3ByZXYnKTtcbkRvbWludXMucHJvdG90eXBlLm5leHQgPSBzdHJhaWdodCgnbmV4dCcpO1xuRG9taW51cy5wcm90b3R5cGUucGFyZW50ID0gc3RyYWlnaHQoJ3BhcmVudCcpO1xuRG9taW51cy5wcm90b3R5cGUucGFyZW50cyA9IHN0cmFpZ2h0KCdwYXJlbnRzJyk7XG5Eb21pbnVzLnByb3RvdHlwZS5jaGlsZHJlbiA9IHN0cmFpZ2h0KCdjaGlsZHJlbicpO1xuRG9taW51cy5wcm90b3R5cGUuZmluZCA9IHN0cmFpZ2h0KCdxc2EnKTtcbkRvbWludXMucHJvdG90eXBlLmZpbmRPbmUgPSBzdHJhaWdodCgncXMnLCB0cnVlKTtcblxuRG9taW51cy5wcm90b3R5cGUud2hlcmUgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHRoaXMuZmlsdGVyKGVxdWFscyhzZWxlY3RvcikpO1xufTtcblxuRG9taW51cy5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHRoaXMuc29tZShlcXVhbHMoc2VsZWN0b3IpKTtcbn07XG5cbkRvbWludXMucHJvdG90eXBlLmkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgcmV0dXJuIHRoaXNbaW5kZXhdID8gbmV3IERvbWludXModGhpc1tpbmRleF0pIDogbmV3IERvbWludXMoKTtcbn07XG5cbmZ1bmN0aW9uIGNvbXBhcmVGYWN0b3J5IChmbikge1xuICByZXR1cm4gZnVuY3Rpb24gY29tcGFyZSAoKSB7XG4gICAgJC5hcHBseShudWxsLCBhcmd1bWVudHMpLmZvckVhY2goZm4sIHRoaXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xufVxuXG5Eb21pbnVzLnByb3RvdHlwZS5hbmQgPSBjb21wYXJlRmFjdG9yeShmdW5jdGlvbiBhZGRPbmUgKGVsZW0pIHtcbiAgaWYgKHRoaXMuaW5kZXhPZihlbGVtKSA9PT0gLTEpIHtcbiAgICB0aGlzLnB1c2goZWxlbSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59KTtcblxuRG9taW51cy5wcm90b3R5cGUuYnV0ID0gY29tcGFyZUZhY3RvcnkoZnVuY3Rpb24gYWRkT25lIChlbGVtKSB7XG4gIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihlbGVtKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn0pO1xuXG5Eb21pbnVzLnByb3RvdHlwZS5jc3MgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgdmFyIHByb3BzO1xuICB2YXIgbWFueSA9IG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnO1xuICB2YXIgZ2V0dGVyID0gIW1hbnkgJiYgIXZhbHVlO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoID8gZG9tLmdldENzcyh0aGlzWzBdLCBuYW1lKSA6IG51bGw7XG4gIH1cbiAgaWYgKG1hbnkpIHtcbiAgICBwcm9wcyA9IG5hbWU7XG4gIH0gZWxzZSB7XG4gICAgcHJvcHMgPSB7fTtcbiAgICBwcm9wc1tuYW1lXSA9IHZhbHVlO1xuICB9XG4gIHRoaXMuZm9yRWFjaChkb20uc2V0Q3NzKHByb3BzKSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZXZlbnRlciAobWV0aG9kKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodHlwZXMsIGZpbHRlciwgZm4pIHtcbiAgICB2YXIgdHlwZWxpc3QgPSB0eXBlcy5zcGxpdCgnICcpO1xuICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZuID0gZmlsdGVyO1xuICAgICAgZmlsdGVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICB0eXBlbGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gY3VzdG9tLmhhbmRsZXJzW3R5cGVdO1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIGRvbVttZXRob2RdKGVsZW0sIGhhbmRsZXIuZXZlbnQsIGZpbHRlciwgaGFuZGxlci53cmFwKGZuKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9tW21ldGhvZF0oZWxlbSwgdHlwZSwgZmlsdGVyLCBmbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xufVxuXG5Eb21pbnVzLnByb3RvdHlwZS5vbmNlID0gZXZlbnRlcignb25jZScpO1xuRG9taW51cy5wcm90b3R5cGUub24gPSBldmVudGVyKCdvbicpO1xuRG9taW51cy5wcm90b3R5cGUub2ZmID0gZXZlbnRlcignb2ZmJyk7XG5Eb21pbnVzLnByb3RvdHlwZS5lbWl0ID0gZXZlbnRlcignZW1pdCcpO1xuXG5bXG4gIFsnYWRkQ2xhc3MnLCBjbGFzc2VzLmFkZF0sXG4gIFsncmVtb3ZlQ2xhc3MnLCBjbGFzc2VzLnJlbW92ZV0sXG4gIFsnc2V0Q2xhc3MnLCBjbGFzc2VzLnNldF0sXG4gIFsncmVtb3ZlQ2xhc3MnLCBjbGFzc2VzLnJlbW92ZV0sXG4gIFsncmVtb3ZlJywgZG9tLnJlbW92ZV1cbl0uZm9yRWFjaChtYXBNZXRob2RzKTtcblxuZnVuY3Rpb24gbWFwTWV0aG9kcyAoZGF0YSkge1xuICBEb21pbnVzLnByb3RvdHlwZVtkYXRhWzBdXSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgZGF0YVsxXShlbGVtLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59XG5cbltcbiAgJ2FwcGVuZCcsXG4gICdhcHBlbmRUbycsXG4gICdwcmVwZW5kJyxcbiAgJ3ByZXBlbmRUbycsXG4gICdiZWZvcmUnLFxuICAnYmVmb3JlT2YnLFxuICAnYWZ0ZXInLFxuICAnYWZ0ZXJPZidcbl0uZm9yRWFjaChtYXBNYW5pcHVsYXRpb24pO1xuXG5mdW5jdGlvbiBtYXBNYW5pcHVsYXRpb24gKG1ldGhvZCkge1xuICBEb21pbnVzLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgZG9tW21ldGhvZF0odGhpcywgdmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xufVxuXG5Eb21pbnVzLnByb3RvdHlwZS5oYXNDbGFzcyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gdGhpcy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMuY29udGFpbnMoZWxlbSwgdmFsdWUpO1xuICB9KTtcbn07XG5cbkRvbWludXMucHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgdmFyIGhhc2ggPSBuYW1lICYmIHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JztcbiAgdmFyIHNldCA9IGhhc2ggPyBzZXRNYW55IDogc2V0U2luZ2xlO1xuICB2YXIgc2V0dGVyID0gaGFzaCB8fCBhcmd1bWVudHMubGVuZ3RoID4gMTtcbiAgaWYgKHNldHRlcikge1xuICAgIHRoaXMuZm9yRWFjaChzZXQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLmxlbmd0aCA/IGRvbS5nZXRBdHRyKHRoaXNbMF0sIG5hbWUpIDogbnVsbDtcbiAgfVxuICBmdW5jdGlvbiBzZXRNYW55IChlbGVtKSB7XG4gICAgZG9tLm1hbnlBdHRyKGVsZW0sIG5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIHNldFNpbmdsZSAoZWxlbSkge1xuICAgIGRvbS5hdHRyKGVsZW0sIG5hbWUsIHZhbHVlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24ga2V5VmFsdWUgKGtleSwgdmFsdWUpIHtcbiAgdmFyIGdldHRlciA9IGFyZ3VtZW50cy5sZW5ndGggPCAyO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIHRoaXMubGVuZ3RoID8gZG9tW2tleV0odGhpc1swXSkgOiAnJztcbiAgfVxuICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcbiAgICBkb21ba2V5XShlbGVtLCB2YWx1ZSk7XG4gIH0pO1xuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24ga2V5VmFsdWVQcm9wZXJ0eSAocHJvcCkge1xuICBEb21pbnVzLnByb3RvdHlwZVtwcm9wXSA9IGZ1bmN0aW9uIGFjY2Vzc29yICh2YWx1ZSkge1xuICAgIHZhciBnZXR0ZXIgPSBhcmd1bWVudHMubGVuZ3RoIDwgMTtcbiAgICBpZiAoZ2V0dGVyKSB7XG4gICAgICByZXR1cm4ga2V5VmFsdWUuY2FsbCh0aGlzLCBwcm9wKTtcbiAgICB9XG4gICAgcmV0dXJuIGtleVZhbHVlLmNhbGwodGhpcywgcHJvcCwgdmFsdWUpO1xuICB9O1xufVxuXG5bJ2h0bWwnLCAndGV4dCcsICd2YWx1ZSddLmZvckVhY2goa2V5VmFsdWVQcm9wZXJ0eSk7XG5cbkRvbWludXMucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICByZXR1cm4gZG9tLmNsb25lKGVsZW0pO1xuICB9KTtcbn07XG5cbkRvbWludXMucHJvdG90eXBlLmZvY3VzID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5sZW5ndGgpIHtcbiAgICB0aGlzWzBdLmZvY3VzKCk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vcHVibGljJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBEb21pbnVzID0gcmVxdWlyZSgnLi9Eb21pbnVzLmN0b3InKTtcbnZhciBwcm90byA9IERvbWludXMucHJvdG90eXBlO1xuXG5mdW5jdGlvbiBBcHBsaWVkIChhcmdzKSB7XG4gIHJldHVybiBEb21pbnVzLmFwcGx5KHRoaXMsIGFyZ3MpO1xufVxuXG5BcHBsaWVkLnByb3RvdHlwZSA9IHByb3RvO1xuXG5mdW5jdGlvbiBhcHBseSAoYSkge1xuICByZXR1cm4gbmV3IEFwcGxpZWQoYSk7XG59XG5cblsnbWFwJywgJ2ZpbHRlcicsICdjb25jYXQnLCAnc2xpY2UnXS5mb3JFYWNoKGVuc3VyZSk7XG5cbmZ1bmN0aW9uIGVuc3VyZSAoa2V5KSB7XG4gIHZhciBvcmlnaW5hbCA9IHByb3RvW2tleV07XG4gIHByb3RvW2tleV0gPSBmdW5jdGlvbiBhcHBsaWVkICgpIHtcbiAgICByZXR1cm4gYXBwbHkob3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXBwbHk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB0ZXN0ID0gcmVxdWlyZSgnLi90ZXN0Jyk7XG52YXIgYXBwbHkgPSByZXF1aXJlKCcuL2FwcGx5Jyk7XG52YXIgRG9taW51cyA9IHJlcXVpcmUoJy4vRG9taW51cy5jdG9yJyk7XG5cbmZ1bmN0aW9uIGNhc3QgKGEpIHtcbiAgaWYgKGEgPT09IGdsb2JhbCkge1xuICAgIHJldHVybiBuZXcgRG9taW51cyhhKTtcbiAgfVxuICBpZiAoYSBpbnN0YW5jZW9mIERvbWludXMpIHtcbiAgICByZXR1cm4gYTtcbiAgfVxuICBpZiAoIWEpIHtcbiAgICByZXR1cm4gbmV3IERvbWludXMoKTtcbiAgfVxuICBpZiAodGVzdC5pc0VsZW1lbnQoYSkpIHtcbiAgICByZXR1cm4gbmV3IERvbWludXMoYSk7XG4gIH1cbiAgaWYgKCF0ZXN0LmlzQXJyYXkoYSkpIHtcbiAgICByZXR1cm4gbmV3IERvbWludXMoKTtcbiAgfVxuICByZXR1cm4gYXBwbHkoYSkuZmlsdGVyKGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIHRlc3QuaXNFbGVtZW50KGkpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYXN0O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xudmFyIHdoaXRlc3BhY2UgPSAvXFxzKy9nO1xudmFyIHRlc3QgPSByZXF1aXJlKCcuL3Rlc3QnKTtcblxuZnVuY3Rpb24gaW50ZXJwcmV0IChpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyA/IGlucHV0LnJlcGxhY2UodHJpbSwgJycpLnNwbGl0KHdoaXRlc3BhY2UpIDogaW5wdXQ7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZXMgKGVsKSB7XG4gIGlmICh0ZXN0LmlzRWxlbWVudChlbCkpIHtcbiAgICByZXR1cm4gZWwuY2xhc3NOYW1lLnJlcGxhY2UodHJpbSwgJycpLnNwbGl0KHdoaXRlc3BhY2UpO1xuICB9XG4gIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24gc2V0IChlbCwgaW5wdXQpIHtcbiAgaWYgKHRlc3QuaXNFbGVtZW50KGVsKSkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGludGVycHJldChpbnB1dCkuam9pbignICcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZCAoZWwsIGlucHV0KSB7XG4gIHZhciBjdXJyZW50ID0gcmVtb3ZlKGVsLCBpbnB1dCk7XG4gIHZhciB2YWx1ZXMgPSBpbnRlcnByZXQoaW5wdXQpO1xuICBjdXJyZW50LnB1c2guYXBwbHkoY3VycmVudCwgdmFsdWVzKTtcbiAgc2V0KGVsLCBjdXJyZW50KTtcbiAgcmV0dXJuIGN1cnJlbnQ7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSAoZWwsIGlucHV0KSB7XG4gIHZhciBjdXJyZW50ID0gY2xhc3NlcyhlbCk7XG4gIHZhciB2YWx1ZXMgPSBpbnRlcnByZXQoaW5wdXQpO1xuICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgaSA9IGN1cnJlbnQuaW5kZXhPZih2YWx1ZSk7XG4gICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICBjdXJyZW50LnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH0pO1xuICBzZXQoZWwsIGN1cnJlbnQpO1xuICByZXR1cm4gY3VycmVudDtcbn1cblxuZnVuY3Rpb24gY29udGFpbnMgKGVsLCBpbnB1dCkge1xuICB2YXIgY3VycmVudCA9IGNsYXNzZXMoZWwpO1xuICB2YXIgdmFsdWVzID0gaW50ZXJwcmV0KGlucHV0KTtcblxuICByZXR1cm4gdmFsdWVzLmV2ZXJ5KGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBjdXJyZW50LmluZGV4T2YodmFsdWUpICE9PSAtMTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZCxcbiAgcmVtb3ZlOiByZW1vdmUsXG4gIGNvbnRhaW5zOiBjb250YWlucyxcbiAgc2V0OiBzZXQsXG4gIGdldDogY2xhc3Nlc1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGhhbmRsZXJzID0ge307XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyIChuYW1lLCB0eXBlLCBmaWx0ZXIpIHtcbiAgaGFuZGxlcnNbbmFtZV0gPSB7XG4gICAgZXZlbnQ6IHR5cGUsXG4gICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgd3JhcDogd3JhcFxuICB9O1xuXG4gIGZ1bmN0aW9uIHdyYXAgKGZuKSB7XG4gICAgcmV0dXJuIHdyYXBwZXIobmFtZSwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXIgKG5hbWUsIGZuKSB7XG4gIGlmICghZm4pIHtcbiAgICByZXR1cm4gZm47XG4gIH1cbiAgdmFyIGtleSA9ICdfX2RjZV8nICsgbmFtZTtcbiAgaWYgKGZuW2tleV0pIHtcbiAgICByZXR1cm4gZm5ba2V5XTtcbiAgfVxuICBmbltrZXldID0gZnVuY3Rpb24gY3VzdG9tRXZlbnQgKGUpIHtcbiAgICB2YXIgbWF0Y2ggPSBoYW5kbGVyc1tuYW1lXS5maWx0ZXIoZSk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBmbltrZXldO1xufVxuXG5yZWdpc3RlcignbGVmdC1jbGljaycsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiBlLndoaWNoID09PSAxICYmICFlLm1ldGFLZXkgJiYgIWUuY3RybEtleTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVnaXN0ZXI6IHJlZ2lzdGVyLFxuICB3cmFwcGVyOiB3cmFwcGVyLFxuICBoYW5kbGVyczogaGFuZGxlcnNcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBzZWt0b3IgPSByZXF1aXJlKCdzZWt0b3InKTtcbnZhciBjcm9zc3ZlbnQgPSByZXF1aXJlKCdjcm9zc3ZlbnQnKTtcbnZhciBEb21pbnVzID0gcmVxdWlyZSgnLi9Eb21pbnVzLmN0b3InKTtcbnZhciBjYXN0ID0gcmVxdWlyZSgnLi9jYXN0Jyk7XG52YXIgYXBwbHkgPSByZXF1aXJlKCcuL2FwcGx5Jyk7XG52YXIgdGV4dCA9IHJlcXVpcmUoJy4vdGV4dCcpO1xudmFyIHRlc3QgPSByZXF1aXJlKCcuL3Rlc3QnKTtcbnZhciBhcGkgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xudmFyIGRlbGVnYXRlcyA9IHt9O1xuXG5mdW5jdGlvbiBjYXN0Q29udGV4dCAoY29udGV4dCkge1xuICBpZiAodHlwZW9mIGNvbnRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGFwaS5xcyhudWxsLCBjb250ZXh0KTtcbiAgfVxuICBpZiAodGVzdC5pc0VsZW1lbnQoY29udGV4dCkpIHtcbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxuICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIERvbWludXMpIHtcbiAgICByZXR1cm4gY29udGV4dFswXTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuYXBpLnFzYSA9IGZ1bmN0aW9uIChlbCwgc2VsZWN0b3IpIHtcbiAgdmFyIHJlc3VsdHMgPSBuZXcgRG9taW51cygpO1xuICByZXR1cm4gc2VrdG9yKHNlbGVjdG9yLCBjYXN0Q29udGV4dChlbCksIHJlc3VsdHMpO1xufTtcblxuYXBpLnFzID0gZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuICByZXR1cm4gYXBpLnFzYShlbCwgc2VsZWN0b3IpWzBdO1xufTtcblxuYXBpLm1hdGNoZXMgPSBmdW5jdGlvbiAoZWwsIHNlbGVjdG9yKSB7XG4gIHJldHVybiB0ZXN0LmlzRWxlbWVudChlbCkgJiYgc2VrdG9yLm1hdGNoZXNTZWxlY3RvcihlbCwgc2VsZWN0b3IpO1xufTtcblxuZnVuY3Rpb24gcmVsYXRlZEZhY3RvcnkgKHByb3ApIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlbGF0ZWQgKGVsLCBzZWxlY3Rvcikge1xuICAgIHZhciByZWxhdGl2ZSA9IGVsW3Byb3BdO1xuICAgIGlmIChyZWxhdGl2ZSkge1xuICAgICAgaWYgKCFzZWxlY3RvciB8fCBhcGkubWF0Y2hlcyhyZWxhdGl2ZSwgc2VsZWN0b3IpKSB7XG4gICAgICAgIHJldHVybiBjYXN0KHJlbGF0aXZlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEb21pbnVzKCk7XG4gIH07XG59XG5cbmFwaS5wcmV2ID0gcmVsYXRlZEZhY3RvcnkoJ3ByZXZpb3VzRWxlbWVudFNpYmxpbmcnKTtcbmFwaS5uZXh0ID0gcmVsYXRlZEZhY3RvcnkoJ25leHRFbGVtZW50U2libGluZycpO1xuYXBpLnBhcmVudCA9IHJlbGF0ZWRGYWN0b3J5KCdwYXJlbnRFbGVtZW50Jyk7XG5cbmZ1bmN0aW9uIG1hdGNoZXMgKGVsLCB2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRG9taW51cykge1xuICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKGVsKSAhPT0gLTE7XG4gIH1cbiAgaWYgKHRlc3QuaXNFbGVtZW50KHZhbHVlKSkge1xuICAgIHJldHVybiBlbCA9PT0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGFwaS5tYXRjaGVzKGVsLCB2YWx1ZSk7XG59XG5cbmFwaS5wYXJlbnRzID0gZnVuY3Rpb24gKGVsLCB2YWx1ZSkge1xuICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgdmFyIGN1cnJlbnQgPSBlbDtcbiAgd2hpbGUgKGN1cnJlbnQucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChtYXRjaGVzKGN1cnJlbnQucGFyZW50RWxlbWVudCwgdmFsdWUpKSB7XG4gICAgICBlbGVtZW50cy5wdXNoKGN1cnJlbnQucGFyZW50RWxlbWVudCk7XG4gICAgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XG4gIH1cbiAgcmV0dXJuIGFwcGx5KGVsZW1lbnRzKTtcbn07XG5cbmFwaS5jaGlsZHJlbiA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIHtcbiAgdmFyIGVsZW1lbnRzID0gW107XG4gIHZhciBjaGlsZHJlbiA9IGVsLmNoaWxkcmVuO1xuICB2YXIgY2hpbGQ7XG4gIHZhciBpO1xuICBmb3IgKGkgPSAwOyBjaGlsZHJlbiAmJiBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgIGlmIChtYXRjaGVzKGNoaWxkLCB2YWx1ZSkpIHtcbiAgICAgIGVsZW1lbnRzLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXBwbHkoZWxlbWVudHMpO1xufTtcblxuLy8gdGhpcyBtZXRob2QgY2FjaGVzIGRlbGVnYXRlcyBzbyB0aGF0IC5vZmYoKSB3b3JrcyBzZWFtbGVzc2x5XG5mdW5jdGlvbiBkZWxlZ2F0ZSAocm9vdCwgZmlsdGVyLCBmbikge1xuICBpZiAoZGVsZWdhdGVzW2ZuLl9kZF0pIHtcbiAgICByZXR1cm4gZGVsZWdhdGVzW2ZuLl9kZF07XG4gIH1cbiAgZm4uX2RkID0gRGF0ZS5ub3coKTtcbiAgZGVsZWdhdGVzW2ZuLl9kZF0gPSBkZWxlZ2F0b3I7XG4gIGZ1bmN0aW9uIGRlbGVnYXRvciAoZSkge1xuICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gcm9vdCkge1xuICAgICAgaWYgKGFwaS5tYXRjaGVzKGVsLCBmaWx0ZXIpKSB7XG4gICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlbGVnYXRvcjtcbn1cblxuZnVuY3Rpb24gZXZlbnRlZCAobWV0aG9kLCBlbCwgdHlwZSwgZmlsdGVyLCBmbikge1xuICBpZiAoZmlsdGVyID09PSBudWxsKSB7XG4gICAgY3Jvc3N2ZW50W21ldGhvZF0oZWwsIHR5cGUsIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbbWV0aG9kXShlbCwgdHlwZSwgZGVsZWdhdGUoZWwsIGZpbHRlciwgZm4pKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvbmNlIChlbCwgdHlwZSwgZmlsdGVyLCBmbikge1xuICB2YXIgdGhpbmdzID0gW2VsLCB0eXBlLCBmaWx0ZXIsIGRpc3Bvc2FibGVdO1xuICBhcGkub24uYXBwbHkoYXBpLCB0aGluZ3MpO1xuICBmdW5jdGlvbiBkaXNwb3NhYmxlICgpIHtcbiAgICBhcGkub2ZmLmFwcGx5KGFwaSwgdGhpbmdzKTtcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5hcGkub25jZSA9IG9uY2U7XG5hcGkub24gPSBldmVudGVkLmJpbmQobnVsbCwgJ2FkZCcpO1xuYXBpLm9mZiA9IGV2ZW50ZWQuYmluZChudWxsLCAncmVtb3ZlJyk7XG5hcGkuZW1pdCA9IGV2ZW50ZWQuYmluZChudWxsLCAnZmFicmljYXRlJyk7XG5cbmFwaS5odG1sID0gZnVuY3Rpb24gKGVsZW0sIGh0bWwpIHtcbiAgdmFyIGdldHRlciA9IGFyZ3VtZW50cy5sZW5ndGggPCAyO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGVsZW0uaW5uZXJIVE1MO1xuICB9IGVsc2Uge1xuICAgIGVsZW0uaW5uZXJIVE1MID0gaHRtbDtcbiAgfVxufTtcblxuYXBpLnRleHQgPSBmdW5jdGlvbiAoZWxlbSwgdGV4dCkge1xuICB2YXIgY2hlY2thYmxlID0gdGVzdC5pc0NoZWNrYWJsZShlbGVtKTtcbiAgdmFyIGdldHRlciA9IGFyZ3VtZW50cy5sZW5ndGggPCAyO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGNoZWNrYWJsZSA/IGVsZW0udmFsdWUgOiBlbGVtLmlubmVyVGV4dCB8fCBlbGVtLnRleHRDb250ZW50O1xuICB9IGVsc2UgaWYgKGNoZWNrYWJsZSkge1xuICAgIGVsZW0udmFsdWUgPSB0ZXh0O1xuICB9IGVsc2Uge1xuICAgIGVsZW0uaW5uZXJUZXh0ID0gZWxlbS50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cbn07XG5cbmFwaS52YWx1ZSA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIHtcbiAgdmFyIGNoZWNrYWJsZSA9IHRlc3QuaXNDaGVja2FibGUoZWwpO1xuICB2YXIgZ2V0dGVyID0gYXJndW1lbnRzLmxlbmd0aCA8IDI7XG4gIGlmIChnZXR0ZXIpIHtcbiAgICByZXR1cm4gY2hlY2thYmxlID8gZWwuY2hlY2tlZCA6IGVsLnZhbHVlO1xuICB9IGVsc2UgaWYgKGNoZWNrYWJsZSkge1xuICAgIGVsLmNoZWNrZWQgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBlbC52YWx1ZSA9IHZhbHVlO1xuICB9XG59O1xuXG5hcGkuYXR0ciA9IGZ1bmN0aW9uIChlbCwgbmFtZSwgdmFsdWUpIHtcbiAgaWYgKCF0ZXN0LmlzRWxlbWVudChlbCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDApIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7IHJldHVybjtcbiAgfVxuICB2YXIgY2FtZWwgPSB0ZXh0Lmh5cGhlblRvQ2FtZWwobmFtZSk7XG4gIGlmIChjYW1lbCBpbiBlbCkge1xuICAgIGVsW2NhbWVsXSA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGVsLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbn07XG5cbmFwaS5nZXRBdHRyID0gZnVuY3Rpb24gKGVsLCBuYW1lKSB7XG4gIHZhciBjYW1lbCA9IHRleHQuaHlwaGVuVG9DYW1lbChuYW1lKTtcbiAgaWYgKGNhbWVsIGluIGVsKSB7XG4gICAgcmV0dXJuIGVsW2NhbWVsXTtcbiAgfSBlbHNlIGlmIChlbC5nZXRBdHRyaWJ1dGUpIHtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuYXBpLm1hbnlBdHRyID0gZnVuY3Rpb24gKGVsZW0sIGF0dHJzKSB7XG4gIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgYXBpLmF0dHIoZWxlbSwgYXR0ciwgYXR0cnNbYXR0cl0pO1xuICB9KTtcbn07XG5cbmFwaS5tYWtlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgcmV0dXJuIG5ldyBEb21pbnVzKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSkpO1xufTtcblxuYXBpLmNsb25lID0gZnVuY3Rpb24gKGVsKSB7XG4gIGlmIChlbC5jbG9uZU5vZGUpIHtcbiAgICByZXR1cm4gZWwuY2xvbmVOb2RlKHRydWUpO1xuICB9XG4gIHJldHVybiBlbDtcbn07XG5cbmFwaS5yZW1vdmUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgaWYgKGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICBlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsKTtcbiAgfVxufTtcblxuYXBpLmFwcGVuZCA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gIGlmIChtYW5pcHVsYXRpb25HdWFyZChlbCwgdGFyZ2V0LCBhcGkuYXBwZW5kKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZWwuYXBwZW5kQ2hpbGQpIHtcbiAgICBlbC5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuICB9XG59O1xuXG5hcGkucHJlcGVuZCA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gIGlmIChtYW5pcHVsYXRpb25HdWFyZChlbCwgdGFyZ2V0LCBhcGkucHJlcGVuZCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGVsLmluc2VydEJlZm9yZSkge1xuICAgIGVsLmluc2VydEJlZm9yZSh0YXJnZXQsIGVsLmZpcnN0Q2hpbGQpO1xuICB9XG59O1xuXG5hcGkuYmVmb3JlID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQpIHtcbiAgaWYgKG1hbmlwdWxhdGlvbkd1YXJkKGVsLCB0YXJnZXQsIGFwaS5iZWZvcmUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGFyZ2V0LCBlbCk7XG4gIH1cbn07XG5cbmFwaS5hZnRlciA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gIGlmIChtYW5pcHVsYXRpb25HdWFyZChlbCwgdGFyZ2V0LCBhcGkuYWZ0ZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgZWwucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGFyZ2V0LCBlbC5uZXh0U2libGluZyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG1hbmlwdWxhdGlvbkd1YXJkIChlbCwgdGFyZ2V0LCBmbikge1xuICB2YXIgcmlnaHQgPSB0YXJnZXQgaW5zdGFuY2VvZiBEb21pbnVzO1xuICB2YXIgbGVmdCA9IGVsIGluc3RhbmNlb2YgRG9taW51cztcbiAgaWYgKGxlZnQpIHtcbiAgICBlbC5mb3JFYWNoKG1hbmlwdWxhdGVNYW55KTtcbiAgfSBlbHNlIGlmIChyaWdodCkge1xuICAgIG1hbmlwdWxhdGUoZWwsIHRydWUpO1xuICB9XG4gIHJldHVybiAhZWwgfHwgIXRhcmdldCB8fCBsZWZ0IHx8IHJpZ2h0O1xuXG4gIGZ1bmN0aW9uIG1hbmlwdWxhdGUgKGVsLCBwcmVjb25kaXRpb24pIHtcbiAgICBpZiAocmlnaHQpIHtcbiAgICAgIHRhcmdldC5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXQsIGopIHtcbiAgICAgICAgZm4oZWwsIGNsb25lVW5sZXNzKHRhcmdldCwgcHJlY29uZGl0aW9uICYmIGogPT09IDApKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBmbihlbCwgY2xvbmVVbmxlc3ModGFyZ2V0LCBwcmVjb25kaXRpb24pKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYW5pcHVsYXRlTWFueSAoZWwsIGkpIHtcbiAgICBtYW5pcHVsYXRlKGVsLCBpID09PSAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9uZVVubGVzcyAodGFyZ2V0LCBjb25kaXRpb24pIHtcbiAgcmV0dXJuIGNvbmRpdGlvbiA/IHRhcmdldCA6IGFwaS5jbG9uZSh0YXJnZXQpO1xufVxuXG5bJ2FwcGVuZFRvJywgJ3ByZXBlbmRUbycsICdiZWZvcmVPZicsICdhZnRlck9mJ10uZm9yRWFjaChmbGlwKTtcblxuZnVuY3Rpb24gZmxpcCAoa2V5KSB7XG4gIHZhciBvcmlnaW5hbCA9IGtleS5zcGxpdCgvW0EtWl0vKVswXTtcbiAgYXBpW2tleV0gPSBmdW5jdGlvbiAoZWwsIHRhcmdldCkge1xuICAgIGFwaVtvcmlnaW5hbF0odGFyZ2V0LCBlbCk7XG4gIH07XG59XG5cbnZhciBudW1lcmljQ3NzUHJvcGVydGllcyA9IHtcbiAgJ2NvbHVtbi1jb3VudCc6IHRydWUsXG4gICdmaWxsLW9wYWNpdHknOiB0cnVlLFxuICAnZmxleC1ncm93JzogdHJ1ZSxcbiAgJ2ZsZXgtc2hyaW5rJzogdHJ1ZSxcbiAgJ2ZvbnQtd2VpZ2h0JzogdHJ1ZSxcbiAgJ2xpbmUtaGVpZ2h0JzogdHJ1ZSxcbiAgJ29wYWNpdHknOiB0cnVlLFxuICAnb3JkZXInOiB0cnVlLFxuICAnb3JwaGFucyc6IHRydWUsXG4gICd3aWRvd3MnOiB0cnVlLFxuICAnei1pbmRleCc6IHRydWUsXG4gICd6b29tJzogdHJ1ZVxufTtcbnZhciBudW1lcmljID0gL15cXGQrJC87XG52YXIgY2FuRmxvYXQgPSAnZmxvYXQnIGluIGRvY3VtZW50LmJvZHkuc3R5bGU7XG5cbmFwaS5nZXRDc3MgPSBmdW5jdGlvbiAoZWwsIHByb3ApIHtcbiAgaWYgKCF0ZXN0LmlzRWxlbWVudChlbCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgaHByb3AgPSB0ZXh0Lmh5cGhlbmF0ZShwcm9wKTtcbiAgdmFyIGZwcm9wID0gIWNhbkZsb2F0ICYmIGhwcm9wID09PSAnZmxvYXQnID8gJ2Nzc0Zsb2F0JyA6IGhwcm9wO1xuICB2YXIgcmVzdWx0ID0gZ2xvYmFsLmdldENvbXB1dGVkU3R5bGUoZWwpW2hwcm9wXTtcbiAgaWYgKHByb3AgPT09ICdvcGFjaXR5JyAmJiByZXN1bHQgPT09ICcnKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgaWYgKHJlc3VsdC5zdWJzdHIoLTIpID09PSAncHgnIHx8IG51bWVyaWMudGVzdChyZXN1bHQpKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQocmVzdWx0LCAxMCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmFwaS5zZXRDc3MgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgdmFyIG1hcHBlZCA9IE9iamVjdC5rZXlzKHByb3BzKS5maWx0ZXIoYmFkKS5tYXAoZXhwYW5kKTtcbiAgZnVuY3Rpb24gYmFkIChwcm9wKSB7XG4gICAgdmFyIHZhbHVlID0gcHJvcHNbcHJvcF07XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlID09PSB2YWx1ZTtcbiAgfVxuICBmdW5jdGlvbiBleHBhbmQgKHByb3ApIHtcbiAgICB2YXIgaHByb3AgPSB0ZXh0Lmh5cGhlbmF0ZShwcm9wKTtcbiAgICB2YXIgdmFsdWUgPSBwcm9wc1twcm9wXTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhbnVtZXJpY0Nzc1Byb3BlcnRpZXNbaHByb3BdKSB7XG4gICAgICB2YWx1ZSArPSAncHgnO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogaHByb3AsIHZhbHVlOiB2YWx1ZVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlbCkge1xuICAgIGlmICghdGVzdC5pc0VsZW1lbnQoZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG1hcHBlZC5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICBlbC5zdHlsZVtwcm9wLm5hbWVdID0gcHJvcC52YWx1ZTtcbiAgICB9KTtcbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9Eb21pbnVzLnByb3RvdHlwZScpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRG9taW51cyA9IHJlcXVpcmUoJy4vRG9taW51cy5jdG9yJyk7XG5cbmZ1bmN0aW9uIGZsYXR0ZW4gKGEsIGNhY2hlKSB7XG4gIHJldHVybiBhLnJlZHVjZShmdW5jdGlvbiAoY3VycmVudCwgaXRlbSkge1xuICAgIGlmIChEb21pbnVzLmlzQXJyYXkoaXRlbSkpIHtcbiAgICAgIHJldHVybiBmbGF0dGVuKGl0ZW0sIGN1cnJlbnQpO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudC5pbmRleE9mKGl0ZW0pID09PSAtMSkge1xuICAgICAgcmV0dXJuIGN1cnJlbnQuY29uY2F0KGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbiAgfSwgY2FjaGUgfHwgbmV3IERvbWludXMoKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmxhdHRlbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGRvbSA9IHJlcXVpcmUoJy4vZG9tJyk7XG52YXIgY2FzdCA9IHJlcXVpcmUoJy4vY2FzdCcpO1xudmFyIGN1c3RvbSA9IHJlcXVpcmUoJy4vY3VzdG9tJyk7XG52YXIgRG9taW51cyA9IHJlcXVpcmUoJy4vRG9taW51cy5jdG9yJyk7XG52YXIgdGFnID0gL15cXHMqPChbYS16XSsoPzotW2Etel0rKT8pXFxzKlxcLz8+XFxzKiQvaTtcblxuZnVuY3Rpb24gYXBpIChzZWxlY3RvciwgY29udGV4dCkge1xuICB2YXIgbm90VGV4dCA9IHR5cGVvZiBzZWxlY3RvciAhPT0gJ3N0cmluZyc7XG4gIGlmIChub3RUZXh0ICYmIGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIGNhc3Qoc2VsZWN0b3IpO1xuICB9XG4gIGlmIChub3RUZXh0KSB7XG4gICAgcmV0dXJuIG5ldyBEb21pbnVzKCk7XG4gIH1cbiAgdmFyIG1hdGNoZXMgPSBzZWxlY3Rvci5tYXRjaCh0YWcpO1xuICBpZiAobWF0Y2hlcykge1xuICAgIHJldHVybiBkb20ubWFrZShtYXRjaGVzWzFdKTtcbiAgfVxuICByZXR1cm4gYXBpLmZpbmQoc2VsZWN0b3IsIGNvbnRleHQpO1xufVxuXG5hcGkuZmluZCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgY29udGV4dCkge1xuICByZXR1cm4gZG9tLnFzYShjb250ZXh0LCBzZWxlY3Rvcik7XG59O1xuXG5hcGkuZmluZE9uZSA9IGZ1bmN0aW9uIChzZWxlY3RvciwgY29udGV4dCkge1xuICByZXR1cm4gZG9tLnFzKGNvbnRleHQsIHNlbGVjdG9yKTtcbn07XG5cbmFwaS5jdXN0b20gPSBjdXN0b20ucmVnaXN0ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gYXBpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWxlbWVudE9iamVjdHMgPSB0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdvYmplY3QnO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnQgKG8pIHtcbiAgcmV0dXJuIGVsZW1lbnRPYmplY3RzID8gbyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IDogaXNFbGVtZW50T2JqZWN0KG8pO1xufVxuXG5mdW5jdGlvbiBpc0VsZW1lbnRPYmplY3QgKG8pIHtcbiAgcmV0dXJuIG8gJiZcbiAgICB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiZcbiAgICB0eXBlb2Ygby5ub2RlTmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICBvLm5vZGVUeXBlID09PSAxO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5IChhKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbmZ1bmN0aW9uIGlzQ2hlY2thYmxlIChlbGVtKSB7XG4gIHJldHVybiAnY2hlY2tlZCcgaW4gZWxlbSAmJiBlbGVtLnR5cGUgPT09ICdyYWRpbycgfHwgZWxlbS50eXBlID09PSAnY2hlY2tib3gnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNFbGVtZW50OiBpc0VsZW1lbnQsXG4gIGlzQXJyYXk6IGlzQXJyYXksXG4gIGlzQ2hlY2thYmxlOiBpc0NoZWNrYWJsZVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gaHlwaGVuVG9DYW1lbCAoaHlwaGVucykge1xuICB2YXIgcGFydCA9IC8tKFthLXpdKS9nO1xuICByZXR1cm4gaHlwaGVucy5yZXBsYWNlKHBhcnQsIGZ1bmN0aW9uIChnLCBtKSB7XG4gICAgcmV0dXJuIG0udG9VcHBlckNhc2UoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGh5cGhlbmF0ZSAodGV4dCkge1xuICB2YXIgY2FtZWwgPSAvKFthLXpdKShbQS1aXSkvZztcbiAgcmV0dXJuIHRleHQucmVwbGFjZShjYW1lbCwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGh5cGhlblRvQ2FtZWw6IGh5cGhlblRvQ2FtZWwsXG4gIGh5cGhlbmF0ZTogaHlwaGVuYXRlXG59O1xuIiwiKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09XCJvYmplY3RcIiYmdHlwZW9mIG1vZHVsZSE9PVwidW5kZWZpbmVkXCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuamFkZSA9IGYoKX19KShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBNZXJnZSB0d28gYXR0cmlidXRlIG9iamVjdHMgZ2l2aW5nIHByZWNlZGVuY2VcbiAqIHRvIHZhbHVlcyBpbiBvYmplY3QgYGJgLiBDbGFzc2VzIGFyZSBzcGVjaWFsLWNhc2VkXG4gKiBhbGxvd2luZyBmb3IgYXJyYXlzIGFuZCBtZXJnaW5nL2pvaW5pbmcgYXBwcm9wcmlhdGVseVxuICogcmVzdWx0aW5nIGluIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICogQHJldHVybiB7T2JqZWN0fSBhXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5leHBvcnRzLm1lcmdlID0gZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHZhciBhdHRycyA9IGFbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhdHRycyA9IG1lcmdlKGF0dHJzLCBhW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGF0dHJzO1xuICB9XG4gIHZhciBhYyA9IGFbJ2NsYXNzJ107XG4gIHZhciBiYyA9IGJbJ2NsYXNzJ107XG5cbiAgaWYgKGFjIHx8IGJjKSB7XG4gICAgYWMgPSBhYyB8fCBbXTtcbiAgICBiYyA9IGJjIHx8IFtdO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShhYykpIGFjID0gW2FjXTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYmMpKSBiYyA9IFtiY107XG4gICAgYVsnY2xhc3MnXSA9IGFjLmNvbmNhdChiYykuZmlsdGVyKG51bGxzKTtcbiAgfVxuXG4gIGZvciAodmFyIGtleSBpbiBiKSB7XG4gICAgaWYgKGtleSAhPSAnY2xhc3MnKSB7XG4gICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGE7XG59O1xuXG4vKipcbiAqIEZpbHRlciBudWxsIGB2YWxgcy5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIG51bGxzKHZhbCkge1xuICByZXR1cm4gdmFsICE9IG51bGwgJiYgdmFsICE9PSAnJztcbn1cblxuLyoqXG4gKiBqb2luIGFycmF5IGFzIGNsYXNzZXMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5qb2luQ2xhc3NlcyA9IGpvaW5DbGFzc2VzO1xuZnVuY3Rpb24gam9pbkNsYXNzZXModmFsKSB7XG4gIHJldHVybiAoQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsLm1hcChqb2luQ2xhc3NlcykgOlxuICAgICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpID8gT2JqZWN0LmtleXModmFsKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gdmFsW2tleV07IH0pIDpcbiAgICBbdmFsXSkuZmlsdGVyKG51bGxzKS5qb2luKCcgJyk7XG59XG5cbi8qKlxuICogUmVuZGVyIHRoZSBnaXZlbiBjbGFzc2VzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGNsYXNzZXNcbiAqIEBwYXJhbSB7QXJyYXkuPEJvb2xlYW4+fSBlc2NhcGVkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuY2xzID0gZnVuY3Rpb24gY2xzKGNsYXNzZXMsIGVzY2FwZWQpIHtcbiAgdmFyIGJ1ZiA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZXNjYXBlZCAmJiBlc2NhcGVkW2ldKSB7XG4gICAgICBidWYucHVzaChleHBvcnRzLmVzY2FwZShqb2luQ2xhc3NlcyhbY2xhc3Nlc1tpXV0pKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1Zi5wdXNoKGpvaW5DbGFzc2VzKGNsYXNzZXNbaV0pKTtcbiAgICB9XG4gIH1cbiAgdmFyIHRleHQgPSBqb2luQ2xhc3NlcyhidWYpO1xuICBpZiAodGV4dC5sZW5ndGgpIHtcbiAgICByZXR1cm4gJyBjbGFzcz1cIicgKyB0ZXh0ICsgJ1wiJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cblxuZXhwb3J0cy5zdHlsZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLm1hcChmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgIHJldHVybiBzdHlsZSArICc6JyArIHZhbFtzdHlsZV07XG4gICAgfSkuam9pbignOycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbn07XG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gYXR0cmlidXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZXNjYXBlZFxuICogQHBhcmFtIHtCb29sZWFufSB0ZXJzZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmF0dHIgPSBmdW5jdGlvbiBhdHRyKGtleSwgdmFsLCBlc2NhcGVkLCB0ZXJzZSkge1xuICBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgdmFsID0gZXhwb3J0cy5zdHlsZSh2YWwpO1xuICB9XG4gIGlmICgnYm9vbGVhbicgPT0gdHlwZW9mIHZhbCB8fCBudWxsID09IHZhbCkge1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHJldHVybiAnICcgKyAodGVyc2UgPyBrZXkgOiBrZXkgKyAnPVwiJyArIGtleSArICdcIicpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9IGVsc2UgaWYgKDAgPT0ga2V5LmluZGV4T2YoJ2RhdGEnKSAmJiAnc3RyaW5nJyAhPSB0eXBlb2YgdmFsKSB7XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KHZhbCkuaW5kZXhPZignJicpICE9PSAtMSkge1xuICAgICAgY29uc29sZS53YXJuKCdTaW5jZSBKYWRlIDIuMC4wLCBhbXBlcnNhbmRzIChgJmApIGluIGRhdGEgYXR0cmlidXRlcyAnICtcbiAgICAgICAgICAgICAgICAgICAnd2lsbCBiZSBlc2NhcGVkIHRvIGAmYW1wO2AnKTtcbiAgICB9O1xuICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbC50b0lTT1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdKYWRlIHdpbGwgZWxpbWluYXRlIHRoZSBkb3VibGUgcXVvdGVzIGFyb3VuZCBkYXRlcyBpbiAnICtcbiAgICAgICAgICAgICAgICAgICAnSVNPIGZvcm0gYWZ0ZXIgMi4wLjAnKTtcbiAgICB9XG4gICAgcmV0dXJuICcgJyArIGtleSArIFwiPSdcIiArIEpTT04uc3RyaW5naWZ5KHZhbCkucmVwbGFjZSgvJy9nLCAnJmFwb3M7JykgKyBcIidcIjtcbiAgfSBlbHNlIGlmIChlc2NhcGVkKSB7XG4gICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0phZGUgd2lsbCBzdHJpbmdpZnkgZGF0ZXMgaW4gSVNPIGZvcm0gYWZ0ZXIgMi4wLjAnKTtcbiAgICB9XG4gICAgcmV0dXJuICcgJyArIGtleSArICc9XCInICsgZXhwb3J0cy5lc2NhcGUodmFsKSArICdcIic7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0phZGUgd2lsbCBzdHJpbmdpZnkgZGF0ZXMgaW4gSVNPIGZvcm0gYWZ0ZXIgMi4wLjAnKTtcbiAgICB9XG4gICAgcmV0dXJuICcgJyArIGtleSArICc9XCInICsgdmFsICsgJ1wiJztcbiAgfVxufTtcblxuLyoqXG4gKiBSZW5kZXIgdGhlIGdpdmVuIGF0dHJpYnV0ZXMgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7T2JqZWN0fSBlc2NhcGVkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuYXR0cnMgPSBmdW5jdGlvbiBhdHRycyhvYmosIHRlcnNlKXtcbiAgdmFyIGJ1ZiA9IFtdO1xuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblxuICBpZiAoa2V5cy5sZW5ndGgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldXG4gICAgICAgICwgdmFsID0gb2JqW2tleV07XG5cbiAgICAgIGlmICgnY2xhc3MnID09IGtleSkge1xuICAgICAgICBpZiAodmFsID0gam9pbkNsYXNzZXModmFsKSkge1xuICAgICAgICAgIGJ1Zi5wdXNoKCcgJyArIGtleSArICc9XCInICsgdmFsICsgJ1wiJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1Zi5wdXNoKGV4cG9ydHMuYXR0cihrZXksIHZhbCwgZmFsc2UsIHRlcnNlKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1Zi5qb2luKCcnKTtcbn07XG5cbi8qKlxuICogRXNjYXBlIHRoZSBnaXZlbiBzdHJpbmcgb2YgYGh0bWxgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG52YXIgamFkZV9lbmNvZGVfaHRtbF9ydWxlcyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnXG59O1xudmFyIGphZGVfbWF0Y2hfaHRtbCA9IC9bJjw+XCJdL2c7XG5cbmZ1bmN0aW9uIGphZGVfZW5jb2RlX2NoYXIoYykge1xuICByZXR1cm4gamFkZV9lbmNvZGVfaHRtbF9ydWxlc1tjXSB8fCBjO1xufVxuXG5leHBvcnRzLmVzY2FwZSA9IGphZGVfZXNjYXBlO1xuZnVuY3Rpb24gamFkZV9lc2NhcGUoaHRtbCl7XG4gIHZhciByZXN1bHQgPSBTdHJpbmcoaHRtbCkucmVwbGFjZShqYWRlX21hdGNoX2h0bWwsIGphZGVfZW5jb2RlX2NoYXIpO1xuICBpZiAocmVzdWx0ID09PSAnJyArIGh0bWwpIHJldHVybiBodG1sO1xuICBlbHNlIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFJlLXRocm93IHRoZSBnaXZlbiBgZXJyYCBpbiBjb250ZXh0IHRvIHRoZVxuICogdGhlIGphZGUgaW4gYGZpbGVuYW1lYCBhdCB0aGUgZ2l2ZW4gYGxpbmVub2AuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyXG4gKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsaW5lbm9cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmV4cG9ydHMucmV0aHJvdyA9IGZ1bmN0aW9uIHJldGhyb3coZXJyLCBmaWxlbmFtZSwgbGluZW5vLCBzdHIpe1xuICBpZiAoIShlcnIgaW5zdGFuY2VvZiBFcnJvcikpIHRocm93IGVycjtcbiAgaWYgKCh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnIHx8ICFmaWxlbmFtZSkgJiYgIXN0cikge1xuICAgIGVyci5tZXNzYWdlICs9ICcgb24gbGluZSAnICsgbGluZW5vO1xuICAgIHRocm93IGVycjtcbiAgfVxuICB0cnkge1xuICAgIHN0ciA9IHN0ciB8fCByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0ZjgnKVxuICB9IGNhdGNoIChleCkge1xuICAgIHJldGhyb3coZXJyLCBudWxsLCBsaW5lbm8pXG4gIH1cbiAgdmFyIGNvbnRleHQgPSAzXG4gICAgLCBsaW5lcyA9IHN0ci5zcGxpdCgnXFxuJylcbiAgICAsIHN0YXJ0ID0gTWF0aC5tYXgobGluZW5vIC0gY29udGV4dCwgMClcbiAgICAsIGVuZCA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgbGluZW5vICsgY29udGV4dCk7XG5cbiAgLy8gRXJyb3IgY29udGV4dFxuICB2YXIgY29udGV4dCA9IGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLm1hcChmdW5jdGlvbihsaW5lLCBpKXtcbiAgICB2YXIgY3VyciA9IGkgKyBzdGFydCArIDE7XG4gICAgcmV0dXJuIChjdXJyID09IGxpbmVubyA/ICcgID4gJyA6ICcgICAgJylcbiAgICAgICsgY3VyclxuICAgICAgKyAnfCAnXG4gICAgICArIGxpbmU7XG4gIH0pLmpvaW4oJ1xcbicpO1xuXG4gIC8vIEFsdGVyIGV4Y2VwdGlvbiBtZXNzYWdlXG4gIGVyci5wYXRoID0gZmlsZW5hbWU7XG4gIGVyci5tZXNzYWdlID0gKGZpbGVuYW1lIHx8ICdKYWRlJykgKyAnOicgKyBsaW5lbm9cbiAgICArICdcXG4nICsgY29udGV4dCArICdcXG5cXG4nICsgZXJyLm1lc3NhZ2U7XG4gIHRocm93IGVycjtcbn07XG5cbmV4cG9ydHMuRGVidWdJdGVtID0gZnVuY3Rpb24gRGVidWdJdGVtKGxpbmVubywgZmlsZW5hbWUpIHtcbiAgdGhpcy5saW5lbm8gPSBsaW5lbm87XG4gIHRoaXMuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbn1cblxufSx7XCJmc1wiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblxufSx7fV19LHt9LFsxXSkoMSlcbn0pOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnamFkZS9ydW50aW1lJyk7XG4iLCJ2YXIgbm93ID0gcmVxdWlyZSgncGVyZm9ybWFuY2Utbm93JylcbiAgLCBnbG9iYWwgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IHt9IDogd2luZG93XG4gICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG4gICwgc3VmZml4ID0gJ0FuaW1hdGlvbkZyYW1lJ1xuICAsIHJhZiA9IGdsb2JhbFsncmVxdWVzdCcgKyBzdWZmaXhdXG4gICwgY2FmID0gZ2xvYmFsWydjYW5jZWwnICsgc3VmZml4XSB8fCBnbG9iYWxbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXG5mb3IodmFyIGkgPSAwOyBpIDwgdmVuZG9ycy5sZW5ndGggJiYgIXJhZjsgaSsrKSB7XG4gIHJhZiA9IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ1JlcXVlc3QnICsgc3VmZml4XVxuICBjYWYgPSBnbG9iYWxbdmVuZG9yc1tpXSArICdDYW5jZWwnICsgc3VmZml4XVxuICAgICAgfHwgZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG59XG5cbi8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgaGF2ZSByQUYgYnV0IG5vdCBjQUZcbmlmKCFyYWYgfHwgIWNhZikge1xuICB2YXIgbGFzdCA9IDBcbiAgICAsIGlkID0gMFxuICAgICwgcXVldWUgPSBbXVxuICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXG4gIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgX25vdyA9IG5vdygpXG4gICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gY2FsbGJhY2tzIGZyb20gYXBwZW5kaW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICBjcFtpXS5jYWxsYmFjayhsYXN0KVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGgucm91bmQobmV4dCkpXG4gICAgfVxuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgaGFuZGxlOiArK2lkLFxuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuICAgIH0pXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHF1ZXVlW2ldLmhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcbiAgLy8gYGNhbmNlbGAgcG90ZW50aWFsbHkgYmVpbmcgYXNzaWduZWRcbiAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cbiAgcmV0dXJuIHJhZi5jYWxsKGdsb2JhbCwgZm4pXG59XG5tb2R1bGUuZXhwb3J0cy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgY2FmLmFwcGx5KGdsb2JhbCwgYXJndW1lbnRzKVxufVxuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2V0TmFub1NlY29uZHMsIGhydGltZSwgbG9hZFRpbWU7XG5cbiAgaWYgKCh0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2UgIT09IG51bGwpICYmIHBlcmZvcm1hbmNlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfTtcbiAgfSBlbHNlIGlmICgodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2VzcyAhPT0gbnVsbCkgJiYgcHJvY2Vzcy5ocnRpbWUpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIChnZXROYW5vU2Vjb25kcygpIC0gbG9hZFRpbWUpIC8gMWU2O1xuICAgIH07XG4gICAgaHJ0aW1lID0gcHJvY2Vzcy5ocnRpbWU7XG4gICAgZ2V0TmFub1NlY29uZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBocjtcbiAgICAgIGhyID0gaHJ0aW1lKCk7XG4gICAgICByZXR1cm4gaHJbMF0gKiAxZTkgKyBoclsxXTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gZ2V0TmFub1NlY29uZHMoKTtcbiAgfSBlbHNlIGlmIChEYXRlLm5vdykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBEYXRlLm5vdygpO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2FkVGltZTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cblxufSkuY2FsbCh0aGlzKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJhZiA9IHJlcXVpcmUoJ3JhZicpO1xudmFyIGNsb25lID0gcmVxdWlyZSgnLi9jbG9uZScpO1xudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCcuL2VtaXR0ZXInKTtcbnZhciBmZXRjaGVyID0gcmVxdWlyZSgnLi9mZXRjaGVyJyk7XG52YXIgcHJlZmV0Y2hlckludGVudCA9IHJlcXVpcmUoJy4vcHJlZmV0Y2hlckludGVudCcpO1xudmFyIHZpZXcgPSByZXF1aXJlKCcuL3ZpZXcnKTtcbnZhciByb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcicpO1xudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIHJlZGlyZWN0b3IgPSByZXF1aXJlKCcuL3JlZGlyZWN0b3InKTtcbnZhciBkb2MgPSByZXF1aXJlKCcuL2dsb2JhbC9kb2N1bWVudCcpO1xudmFyIGxvY2F0aW9uID0gcmVxdWlyZSgnLi9nbG9iYWwvbG9jYXRpb24nKTtcbnZhciBoaXN0b3J5ID0gcmVxdWlyZSgnLi9nbG9iYWwvaGlzdG9yeScpO1xudmFyIHZlcnNpb25DaGVjayA9IHJlcXVpcmUoJy4vdmVyc2lvbkNoZWNrJyk7XG52YXIgaGFyZFJlZGlyZWN0ID0gcmVxdWlyZSgnLi9oYXJkUmVkaXJlY3QnKTtcblxuZnVuY3Rpb24gbW9kZXJuICgpIHsgLy8gbmVlZHMgdG8gYmUgYSBmdW5jdGlvbiBiZWNhdXNlIHRlc3RpbmdcbiAgcmV0dXJuIGhpc3RvcnkgJiYgaGlzdG9yeS5tb2Rlcm4gIT09IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBnbyAodXJsLCBvcHRpb25zKSB7XG4gIGlmIChzdGF0ZS5oYXJkUmVkaXJlY3QpIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbYWN0aXZhdG9yXSBoYXJkIHJlZGlyZWN0IGluIHByb2dyZXNzLCBhYm9ydGluZycpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBvID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGRpcmVjdGlvbiA9IG8ucmVwbGFjZVN0YXRlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJztcbiAgdmFyIGNvbnRleHQgPSBvLmNvbnRleHQgfHwgbnVsbDtcbiAgdmFyIHJvdXRlID0gcm91dGVyKHVybCk7XG4gIGlmICghcm91dGUpIHtcbiAgICBpZiAoby5zdHJpY3QgIT09IHRydWUpIHtcbiAgICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdIHJlZGlyZWN0aW5nIHRvICVzJywgdXJsKTtcbiAgICAgIGhhcmRSZWRpcmVjdCh1cmwpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbYWN0aXZhdG9yXSByb3V0ZSBtYXRjaGVzICVzJywgcm91dGUucm91dGUpO1xuXG4gIGlmIChvLmRyeSkge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdIGhpc3RvcnkgdXBkYXRlIG9ubHknKTtcbiAgICBuYXZpZ2F0aW9uKHJvdXRlLCBzdGF0ZS5tb2RlbCwgZGlyZWN0aW9uKTsgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG5vdEZvcmNlZCA9IG8uZm9yY2UgIT09IHRydWU7XG4gIHZhciBzYW1lID0gcm91dGVyLmVxdWFscyhyb3V0ZSwgc3RhdGUucm91dGUpO1xuICBpZiAoc2FtZSAmJiBub3RGb3JjZWQpIHtcbiAgICBpZiAocm91dGUuaGFzaCkge1xuICAgICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2FjdGl2YXRvcl0gc2FtZSByb3V0ZSBhbmQgaGFzaCwgdXBkYXRpbmcgc2Nyb2xsIHBvc2l0aW9uJyk7XG4gICAgICBzY3JvbGxJbnRvKGlkKHJvdXRlLmhhc2gpLCBvLnNjcm9sbCk7XG4gICAgICBuYXZpZ2F0aW9uKHJvdXRlLCBzdGF0ZS5tb2RlbCwgZGlyZWN0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2FjdGl2YXRvcl0gc2FtZSByb3V0ZSwgcmVzb2x2aW5nJyk7XG4gICAgICByZXNvbHZlZChzdGF0ZS5tb2RlbCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdICVzJywgbm90Rm9yY2VkID8gJ25vdCBzYW1lIHJvdXRlIGFzIGJlZm9yZScgOiAnZm9yY2VkIHRvIGZldGNoIHNhbWUgcm91dGUnKTtcblxuICBpZiAoIW1vZGVybigpKSB7XG4gICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2FjdGl2YXRvcl0gbm90IG1vZGVybiwgcmVkaXJlY3RpbmcgdG8gJXMnLCB1cmwpO1xuICAgIGhhcmRSZWRpcmVjdCh1cmwpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdIGZldGNoaW5nICVzJywgcm91dGUudXJsKTtcbiAgcHJlZmV0Y2hlckludGVudC5hYm9ydCgpO1xuICBmZXRjaGVyLmFib3J0UGVuZGluZygpO1xuICBmZXRjaGVyKHJvdXRlLCB7IGVsZW1lbnQ6IGNvbnRleHQsIHNvdXJjZTogJ2ludGVudCcgfSwgbWF5YmVSZXNvbHZlZCk7XG5cbiAgZnVuY3Rpb24gbWF5YmVSZXNvbHZlZCAoZXJyLCBkYXRhKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmVyc2lvbkNoZWNrKGRhdGEudmVyc2lvbiwgdXJsKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCdyZWRpcmVjdCcgaW4gZGF0YSkge1xuICAgICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2FjdGl2YXRvcl0gcmVkaXJlY3QgZGV0ZWN0ZWQgaW4gcmVzcG9uc2UnKTtcbiAgICAgIHJlZGlyZWN0b3IucmVkaXJlY3QoZGF0YS5yZWRpcmVjdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlc29sdmVkKGRhdGEubW9kZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZWQgKG1vZGVsKSB7XG4gICAgdmFyIHNhbWUgPSByb3V0ZXIuZXF1YWxzKHJvdXRlLCBzdGF0ZS5yb3V0ZSk7XG4gICAgbmF2aWdhdGlvbihyb3V0ZSwgbW9kZWwsIHNhbWUgPyAncmVwbGFjZVN0YXRlJyA6IGRpcmVjdGlvbik7XG4gICAgdmlldyhzdGF0ZS5jb250YWluZXIsIG51bGwsIG1vZGVsLCByb3V0ZSk7XG4gICAgc2Nyb2xsSW50byhpZChyb3V0ZS5oYXNoKSwgby5zY3JvbGwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN0YXJ0IChkYXRhKSB7XG4gIGlmIChkYXRhLnZlcnNpb24gIT09IHN0YXRlLnZlcnNpb24pIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbYWN0aXZhdG9yXSB2ZXJzaW9uIGNoYW5nZSwgcmVsb2FkaW5nIGJyb3dzZXInKTtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8gdmVyc2lvbiBtYXkgY2hhbmdlIGJldHdlZW4gVGF1bnVzIGxvYWRpbmcgYW5kIGEgbW9kZWwgYmVjb21pbmcgYXZhaWxhYmxlXG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtb2RlbCA9IGRhdGEubW9kZWw7XG4gIHZhciByb3V0ZSA9IHJvdXRlcihsb2NhdGlvbi5ocmVmKTtcbiAgbmF2aWdhdGlvbihyb3V0ZSwgbW9kZWwsICdyZXBsYWNlU3RhdGUnKTtcbiAgZW1pdHRlci5lbWl0KCdzdGFydCcsIHN0YXRlLmNvbnRhaW5lciwgbW9kZWwsIHJvdXRlKTtcbiAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2FjdGl2YXRvcl0gc3RhcnRlZCwgZXhlY3V0aW5nIGNsaWVudC1zaWRlIGNvbnRyb2xsZXInKTtcbiAgdmlldyhzdGF0ZS5jb250YWluZXIsIG51bGwsIG1vZGVsLCByb3V0ZSwgeyByZW5kZXI6IGZhbHNlIH0pO1xuICBnbG9iYWwub25wb3BzdGF0ZSA9IGJhY2s7XG59XG5cbmZ1bmN0aW9uIGJhY2sgKGUpIHtcbiAgdmFyIHMgPSBlLnN0YXRlO1xuICB2YXIgZW1wdHkgPSAhcyB8fCAhcy5fX3RhdW51cztcbiAgaWYgKGVtcHR5KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdIGJhY2t3YXJkcyBoaXN0b3J5IG5hdmlnYXRpb24gd2l0aCBzdGF0ZScsIHMpO1xuICB2YXIgbW9kZWwgPSBzLm1vZGVsO1xuICB2YXIgcm91dGUgPSByb3V0ZXIobG9jYXRpb24uaHJlZik7XG4gIG5hdmlnYXRpb24ocm91dGUsIG1vZGVsLCAncmVwbGFjZVN0YXRlJyk7XG4gIHZpZXcoc3RhdGUuY29udGFpbmVyLCBudWxsLCBtb2RlbCwgcm91dGUpO1xuICBzY3JvbGxJbnRvKGlkKHJvdXRlLmhhc2gpKTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsSW50byAoaWQsIGVuYWJsZWQpIHtcbiAgaWYgKGVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdIHNjcm9sbGluZyBpbnRvIFwiJXNcIicsIGlkIHx8ICcjZG9jdW1lbnQnKTtcblxuICB2YXIgZWxlbSA9IGlkICYmIGRvYy5nZXRFbGVtZW50QnlJZChpZCkgfHwgZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKGVsZW0gJiYgZWxlbS5zY3JvbGxJbnRvVmlldykge1xuICAgIHJhZihzY3JvbGxTb29uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjcm9sbFNvb24gKCkge1xuICAgIGVsZW0uc2Nyb2xsSW50b1ZpZXcoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpZCAoaGFzaCkge1xuICByZXR1cm4gb3JFbXB0eShoYXNoKS5zdWJzdHIoMSk7XG59XG5cbmZ1bmN0aW9uIG9yRW1wdHkgKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSB8fCAnJztcbn1cblxuZnVuY3Rpb24gbmF2aWdhdGlvbiAocm91dGUsIG1vZGVsLCBkaXJlY3Rpb24pIHtcbiAgdmFyIGRhdGE7XG5cbiAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2FjdGl2YXRvcl0gaGlzdG9yeSA6JXMgJXMnLCBkaXJlY3Rpb24ucmVwbGFjZSgnU3RhdGUnLCAnJyksIHJvdXRlLnVybCk7XG4gIHN0YXRlLnJvdXRlID0gcm91dGU7XG4gIHN0YXRlLm1vZGVsID0gY2xvbmUobW9kZWwpO1xuICBpZiAobW9kZWwudGl0bGUpIHtcbiAgICBkb2MudGl0bGUgPSBtb2RlbC50aXRsZTtcbiAgfVxuICBpZiAobW9kZXJuKCkgJiYgaGlzdG9yeVtkaXJlY3Rpb25dKSB7XG4gICAgZGF0YSA9IHtcbiAgICAgIF9fdGF1bnVzOiB0cnVlLFxuICAgICAgbW9kZWw6IG1vZGVsXG4gICAgfTtcbiAgICBoaXN0b3J5W2RpcmVjdGlvbl0oZGF0YSwgbW9kZWwudGl0bGUsIHJvdXRlLnVybCk7XG4gICAgc2V0VGltZW91dChlbWl0LCAwKTtcbiAgfVxuICBmdW5jdGlvbiBlbWl0ICgpIHtcbiAgICBlbWl0dGVyLmVtaXQoJ3JvdXRlcicsIHJvdXRlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc3RhcnQ6IHN0YXJ0LFxuICBnbzogZ29cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjbG9uZSA9IHJlcXVpcmUoJy4vY2xvbmUnKTtcbnZhciBvbmNlID0gcmVxdWlyZSgnLi9vbmNlJyk7XG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL3N0YXRlJyk7XG52YXIgcmF3ID0gcmVxdWlyZSgnLi9zdG9yZXMvcmF3Jyk7XG52YXIgaWRiID0gcmVxdWlyZSgnLi9zdG9yZXMvaWRiJyk7XG52YXIgc3RvcmVzID0gW3JhdywgaWRiXTtcblxuZnVuY3Rpb24gZ2V0ICh0eXBlLCBrZXksIGRvbmUpIHtcbiAgdmFyIGkgPSAwO1xuXG4gIGZ1bmN0aW9uIG5leHQgKCkge1xuICAgIHZhciBnb3RPbmNlID0gb25jZShnb3QpO1xuICAgIHZhciBzdG9yZSA9IHN0b3Jlc1tpKytdO1xuICAgIGlmIChzdG9yZSkge1xuICAgICAgc3RvcmUuZ2V0KHR5cGUsIGtleSwgZ290T25jZSk7XG4gICAgICBzZXRUaW1lb3V0KGdvdE9uY2UsIHN0b3JlID09PSBpZGIgPyAzNSA6IDUpOyAvLyBhdCB3b3JzdCwgc3BlbmQgNDBtcyBvbiBjYWNoaW5nIGxheWVyc1xuICAgIH0gZWxzZSB7XG4gICAgICBkb25lKHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdvdCAoZXJyLCBpdGVtKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsaWQoaXRlbSkpIHtcbiAgICAgICAgZG9uZShmYWxzZSwgYmxvYihpdGVtKSk7IC8vIGFsd2F5cyByZXR1cm4gYSB1bmlxdWUgY29weVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZhbGlkIChpdGVtKSB7XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBjYWNoZSBtdXN0IGhhdmUgaXRlbVxuICAgICAgfVxuICAgICAgdmFyIG1pc21hdGNoID0gdHlwZW9mIGl0ZW0udmVyc2lvbiAhPT0gJ3N0cmluZycgfHwgaXRlbS52ZXJzaW9uICE9PSBzdGF0ZS52ZXJzaW9uO1xuICAgICAgaWYgKG1pc21hdGNoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gY2FjaGUgbXVzdCBtYXRjaCBjdXJyZW50IHZlcnNpb25cbiAgICAgIH1cbiAgICAgIHZhciBzdGFsZSA9IHR5cGVvZiBpdGVtLmV4cGlyZXMgIT09ICdudW1iZXInIHx8IERhdGUubm93KCkgPj0gaXRlbS5leHBpcmVzO1xuICAgICAgaWYgKHN0YWxlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gY2FjaGUgbXVzdCBiZSBmcmVzaFxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYmxvYiAoaXRlbSkge1xuICAgICAgdmFyIHNpbmd1bGFyID0gdHlwZS5zdWJzdHIoMCwgdHlwZS5sZW5ndGggLSAxKTtcbiAgICAgIHZhciBkYXRhID0gY2xvbmUoaXRlbS5kYXRhKTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgdmVyc2lvbjogaXRlbS52ZXJzaW9uXG4gICAgICB9O1xuICAgICAgcmVzcG9uc2Vbc2luZ3VsYXJdID0gZGF0YTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gIH1cblxuICBuZXh0KCk7XG59XG5cbmZ1bmN0aW9uIHNldCAodHlwZSwga2V5LCBkYXRhLCBkdXJhdGlvbiwgdikge1xuICBpZiAoZHVyYXRpb24gPCAxKSB7IC8vIHNhbml0eVxuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdmVyc2lvbiA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDUgPyB2IDogc3RhdGUudmVyc2lvbjtcbiAgdmFyIGNsb25lZCA9IGNsb25lKGRhdGEpOyAvLyBmcmVlemUgYSBjb3B5IGZvciBvdXIgcmVjb3Jkc1xuICBzdG9yZXMuZm9yRWFjaChzdG9yZSk7XG4gIGZ1bmN0aW9uIHN0b3JlIChzKSB7XG4gICAgcy5zZXQodHlwZSwga2V5LCB7XG4gICAgICBkYXRhOiBjbG9uZWQsXG4gICAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgZXhwaXJlczogRGF0ZS5ub3coKSArIGR1cmF0aW9uXG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldDogZ2V0LFxuICBzZXQ6IHNldFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpO1xudmFyIGlkYiA9IHJlcXVpcmUoJy4vc3RvcmVzL2lkYicpO1xudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCcuL2VtaXR0ZXInKTtcbnZhciBpbnRlcmNlcHRvciA9IHJlcXVpcmUoJy4vaW50ZXJjZXB0b3InKTtcbnZhciBkZWZhdWx0cyA9IDE1O1xudmFyIGJhc2VsaW5lO1xuXG5mdW5jdGlvbiBlICh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgfHwgJyc7XG59XG5cbmZ1bmN0aW9uIHNldHVwIChkdXJhdGlvbiwgcm91dGUpIHtcbiAgYmFzZWxpbmUgPSBwYXJzZUR1cmF0aW9uKGR1cmF0aW9uKTtcbiAgaWYgKGJhc2VsaW5lIDwgMSkge1xuICAgIHN0YXRlLmNhY2hlID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG4gIGludGVyY2VwdG9yLmFkZChpbnRlcmNlcHQpO1xuICBlbWl0dGVyLm9uKCdmZXRjaC5kb25lJywgcGVyc2lzdCk7XG4gIHN0YXRlLmNhY2hlID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaW50ZXJjZXB0IChlKSB7XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tjYWNoZV0gYXR0ZW1wdGluZyB0byBpbnRlcmNlcHQgJXMnLCBlLnJvdXRlLnVybCk7XG4gIGNhY2hlLmdldCgnbW9kZWxzJywgZS5yb3V0ZS5wYXRoLCByZXN1bHQpO1xuXG4gIGZ1bmN0aW9uIHJlc3VsdCAoZXJyLCBkYXRhKSB7XG4gICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2NhY2hlXSBpbnRlcmNlcHRpb24gZm9yICVzICVzJywgZS5yb3V0ZS51cmwsIGVyciB8fCAhZGF0YSA/ICdmYWlsZWQnIDogJ3N1Y2NlZWRlZCcpO1xuICAgIGlmICghZXJyICYmIGRhdGEpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoZGF0YSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlRHVyYXRpb24gKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBiYXNlbGluZSB8fCBkZWZhdWx0cztcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gMDtcbn1cblxuZnVuY3Rpb24gcGVyc2lzdCAocm91dGUsIGNvbnRleHQsIGRhdGEpIHtcbiAgaWYgKCFzdGF0ZS5jYWNoZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAocm91dGUuY2FjaGUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBkID0gYmFzZWxpbmU7XG4gIGlmICh0eXBlb2Ygcm91dGUuY2FjaGUgPT09ICdudW1iZXInKSB7XG4gICAgZCA9IHJvdXRlLmNhY2hlO1xuICB9XG4gIHZhciB0YXJnZXQgPSBjb250ZXh0LmhpamFja2VyIHx8IHJvdXRlLmFjdGlvbjtcbiAgdmFyIGZyZXNobmVzcyA9IHBhcnNlRHVyYXRpb24oZCkgKiAxMDAwO1xuICBpZiAoJ21vZGVsJyBpbiBkYXRhKSB7XG4gICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2NhY2hlXSBzYXZpbmcgbW9kZWwgZm9yICVzJywgcm91dGUucGF0aCk7XG4gICAgY2FjaGUuc2V0KCdtb2RlbHMnLCByb3V0ZS5wYXRoLCBkYXRhLm1vZGVsLCBmcmVzaG5lc3MsIGRhdGEudmVyc2lvbik7XG4gIH1cbiAgaWYgKCd0ZW1wbGF0ZScgaW4gZGF0YSkge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tjYWNoZV0gc2F2aW5nIHRlbXBsYXRlIGZvciAlcycsIHRhcmdldCk7XG4gICAgY2FjaGUuc2V0KCd0ZW1wbGF0ZXMnLCB0YXJnZXQsIGRhdGEudGVtcGxhdGUsIEluZmluaXR5KTtcbiAgfVxuICBpZiAoJ2NvbnRyb2xsZXInIGluIGRhdGEpIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbY2FjaGVdIHNhdmluZyBjb250cm9sbGVyIGZvciAlcycsIHRhcmdldCk7XG4gICAgY2FjaGUuc2V0KCdjb250cm9sbGVycycsIHRhcmdldCwgZGF0YS5jb250cm9sbGVyLCBJbmZpbml0eSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZHkgKGZuKSB7XG4gIGlmIChzdGF0ZS5jYWNoZSkge1xuICAgIGlkYi50ZXN0ZWQoZm4pOyAvLyB3YWl0IG9uIGlkYiBjb21wYXRpYmlsaXR5IHRlc3RzXG4gIH0gZWxzZSB7XG4gICAgZm4oZmFsc2UpOyAvLyBjYWNoaW5nIGlzIGEgbm8tb3BcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0dXA6IHNldHVwLFxuICBwZXJzaXN0OiBwZXJzaXN0LFxuICByZWFkeTogcmVhZHlcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNsb25lICh2YWx1ZSkge1xuICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsb25lO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL3N0YXRlJyk7XG52YXIgY2FjaGluZyA9IHJlcXVpcmUoJy4vY2FjaGluZycpO1xudmFyIHVuc3RyaWN0RXZhbCA9IHJlcXVpcmUoJy4vdW5zdHJpY3RFdmFsJyk7XG52YXIgaWRiID0gcmVxdWlyZSgnLi9zdG9yZXMvaWRiJyk7XG52YXIgZGVmZXJyZWQgPSByZXF1aXJlKCcuLi9saWIvZGVmZXJyZWQnKTtcblxuZnVuY3Rpb24gc2V0IChhY3Rpb24sIGRhdGEpIHtcbiAgc3RvcmUoJ3RlbXBsYXRlJyk7XG4gIHN0b3JlKCdjb250cm9sbGVyJyk7XG5cbiAgZnVuY3Rpb24gc3RvcmUgKGtleSkge1xuICAgIHZhciB0eXBlID0ga2V5ICsgJ3MnO1xuXG4gICAgaWYgKGtleSBpbiBkYXRhKSB7XG4gICAgICBwdXNoKHR5cGUsIGFjdGlvbiwgZGF0YVtrZXldLCBkYXRhLnZlcnNpb24pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZWZpbGwgKCkge1xuICBjYWNoaW5nLnJlYWR5KHB1bGxDb21wb25lbnRzKTtcbn1cblxuZnVuY3Rpb24gcHVsbENvbXBvbmVudHMgKGVuYWJsZWQpIHtcbiAgaWYgKCFlbmFibGVkKSB7IC8vIGJhaWwgaWYgY2FjaGluZyBpcyB0dXJuZWQgb2ZmXG4gICAgcmV0dXJuO1xuICB9XG4gIGlkYi5nZXQoJ2NvbnRyb2xsZXJzJywgcHVsbC5iaW5kKG51bGwsICdjb250cm9sbGVycycpKTtcbiAgaWRiLmdldCgndGVtcGxhdGVzJywgcHVsbC5iaW5kKG51bGwsICd0ZW1wbGF0ZXMnKSk7XG59XG5cbmZ1bmN0aW9uIHB1bGwgKHR5cGUsIGVyciwgaXRlbXMpIHtcbiAgaWYgKGVycikge1xuICAgIHJldHVybjtcbiAgfVxuICBpdGVtcy5mb3JFYWNoKHB1bGxJdGVtKTtcblxuICBmdW5jdGlvbiBwdWxsSXRlbSAoaXRlbSkge1xuICAgIHB1c2godHlwZSwgaXRlbS5rZXksIGl0ZW0uZGF0YSwgaXRlbS52ZXJzaW9uKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdXNoICh0eXBlLCBhY3Rpb24sIHZhbHVlLCB2ZXJzaW9uKSB7XG4gIHZhciBzaW5ndWxhciA9IHR5cGUuc3Vic3RyKDAsIHR5cGUubGVuZ3RoIC0gMSk7XG4gIHZhciBpcyA9IGRlZmVycmVkKGFjdGlvbiwgc3RhdGUuZGVmZXJyYWxzKTtcbiAgaWYgKGlzID09PSBmYWxzZSkge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tjb21wb25lbnRDYWNoZV0gYWN0aW9uIFwiJXNcIiBpcyBub3QgZGVmZXJyZWQsIG5vdCBzdG9yaW5nICVzJywgYWN0aW9uLCBzaW5ndWxhcik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tjb21wb25lbnRDYWNoZV0gc3RvcmluZyAlcyBmb3IgJXMgaW4gc3RhdGUnLCBzaW5ndWxhciwgYWN0aW9uKTtcbiAgc3RhdGVbdHlwZV1bYWN0aW9uXSA9IHN0YXRlW3R5cGVdW2FjdGlvbl0gfHwge307XG4gIHN0YXRlW3R5cGVdW2FjdGlvbl1bdmVyc2lvbl0gPSB7XG4gICAgZm46IHBhcnNlKHNpbmd1bGFyLCB2YWx1ZSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2UgKHR5cGUsIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdW5zdHJpY3RFdmFsKHZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbY29tcG9uZW50Q2FjaGVdICVzIGV2YWwgZmFpbGVkJywgdHlwZSwgZSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IHNldCxcbiAgcmVmaWxsOiByZWZpbGxcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBzdGF0ZSA9IHJlcXVpcmUoJy4vc3RhdGUnKTtcbnZhciBkZWZlcnJlZCA9IHJlcXVpcmUoJy4uL2xpYi9kZWZlcnJlZCcpO1xuXG5mdW5jdGlvbiBuZWVkcyAoYWN0aW9uKSB7XG4gIHZhciBkZW1hbmRzID0gW107XG4gIHZhciBpcyA9IGRlZmVycmVkKGFjdGlvbiwgc3RhdGUuZGVmZXJyYWxzKTtcbiAgaWYgKGlzKSB7XG4gICAgaWYgKGludmFsaWQoJ3RlbXBsYXRlcycpKSB7XG4gICAgICBkZW1hbmRzLnB1c2goJ3RlbXBsYXRlJyk7XG4gICAgfVxuICAgIGlmIChpbnZhbGlkKCdjb250cm9sbGVycycpKSB7XG4gICAgICBkZW1hbmRzLnB1c2goJ2NvbnRyb2xsZXInKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbnZhbGlkICh0eXBlKSB7XG4gICAgdmFyIHN0b3JlID0gc3RhdGVbdHlwZV07XG4gICAgdmFyIGZhaWwgPSAhc3RvcmVbYWN0aW9uXSB8fCAhc3RvcmVbYWN0aW9uXVtzdGF0ZS52ZXJzaW9uXTtcbiAgICBpZiAoZmFpbCkge1xuICAgICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2RlZmVycmFsXSBkZWZlcnJlZCAlcyAlcyBub3QgZm91bmQnLCBhY3Rpb24sIHR5cGUuc3Vic3RyKDAsIHR5cGUubGVuZ3RoIC0gMSkpO1xuICAgIH1cbiAgICByZXR1cm4gISFmYWlsO1xuICB9XG5cbiAgcmV0dXJuIGRlbWFuZHM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBuZWVkczogbmVlZHNcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbWl0dGVyID0gcmVxdWlyZSgnY29udHJhL2VtaXR0ZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBlbWl0dGVyKHt9LCB7IHRocm93czogZmFsc2UgfSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB4aHIgPSByZXF1aXJlKCcuL3hocicpO1xudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIHJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVyJyk7XG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJy4vZW1pdHRlcicpO1xudmFyIGRlZmVycmFsID0gcmVxdWlyZSgnLi9kZWZlcnJhbCcpO1xudmFyIGludGVyY2VwdG9yID0gcmVxdWlyZSgnLi9pbnRlcmNlcHRvcicpO1xudmFyIGNvbXBvbmVudENhY2hlID0gcmVxdWlyZSgnLi9jb21wb25lbnRDYWNoZScpO1xudmFyIGxhc3RYaHIgPSB7fTtcblxuZnVuY3Rpb24gZSAodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlIHx8ICcnO1xufVxuXG5mdW5jdGlvbiBuZWdvdGlhdGUgKHJvdXRlLCBjb250ZXh0KSB7XG4gIHZhciBxcyA9IGUocm91dGUuc2VhcmNoKTtcbiAgdmFyIHAgPSBxcyA/ICcmJyA6ICc/JztcbiAgdmFyIHRhcmdldCA9IGNvbnRleHQuaGlqYWNrZXIgfHwgcm91dGUuYWN0aW9uO1xuICB2YXIgZGVtYW5kcyA9IFsnanNvbiddLmNvbmNhdChkZWZlcnJhbC5uZWVkcyh0YXJnZXQpKTtcbiAgaWYgKGNvbnRleHQuaGlqYWNrZXIgJiYgY29udGV4dC5oaWphY2tlciAhPT0gcm91dGUuYWN0aW9uKSB7XG4gICAgZGVtYW5kcy5wdXNoKCdoaWphY2tlcj0nICsgY29udGV4dC5oaWphY2tlcik7XG4gIH1cbiAgcmV0dXJuIHJvdXRlLnBhdGhuYW1lICsgcXMgKyBwICsgZGVtYW5kcy5qb2luKCcmJyk7XG59XG5cbmZ1bmN0aW9uIGFib3J0IChzb3VyY2UpIHtcbiAgaWYgKGxhc3RYaHJbc291cmNlXSkge1xuICAgIGxhc3RYaHJbc291cmNlXS5hYm9ydCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFib3J0UGVuZGluZyAoKSB7XG4gIE9iamVjdC5rZXlzKGxhc3RYaHIpLmZvckVhY2goYWJvcnQpO1xuICBsYXN0WGhyID0ge307XG59XG5cbmZ1bmN0aW9uIGZldGNoZXIgKHJvdXRlLCBjb250ZXh0LCBkb25lKSB7XG4gIHZhciB1cmwgPSByb3V0ZS51cmw7XG4gIGlmIChsYXN0WGhyW2NvbnRleHQuc291cmNlXSkge1xuICAgIGxhc3RYaHJbY29udGV4dC5zb3VyY2VdLmFib3J0KCk7XG4gICAgbGFzdFhocltjb250ZXh0LnNvdXJjZV0gPSBudWxsO1xuICB9XG5cbiAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2ZldGNoZXJdIHJlcXVlc3RlZCAlcycsIHJvdXRlLnVybCk7XG5cbiAgaW50ZXJjZXB0b3IuZXhlY3V0ZShyb3V0ZSwgYWZ0ZXJJbnRlcmNlcHRvcnMpO1xuXG4gIGZ1bmN0aW9uIGFmdGVySW50ZXJjZXB0b3JzIChlcnIsIHJlc3VsdCkge1xuICAgIGlmICghZXJyICYmIHJlc3VsdC5kZWZhdWx0UHJldmVudGVkICYmICFjb250ZXh0LmhpamFja2VyKSB7XG4gICAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbZmV0Y2hlcl0gcHJldmVudGVkICVzIHdpdGggZGF0YScsIHJvdXRlLnVybCwgcmVzdWx0LmRhdGEpO1xuICAgICAgZG9uZShudWxsLCByZXN1bHQuZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXR0ZXIuZW1pdCgnZmV0Y2guc3RhcnQnLCByb3V0ZSwgY29udGV4dCk7XG4gICAgICBsYXN0WGhyW2NvbnRleHQuc291cmNlXSA9IHhocihuZWdvdGlhdGUocm91dGUsIGNvbnRleHQpLCBub3RpZnkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeSAoZXJyLCBkYXRhLCByZXMpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbZmV0Y2hlcl0gZmFpbGVkIGZvciAlcycsIHJvdXRlLnVybCk7XG4gICAgICBpZiAoZXJyLm1lc3NhZ2UgPT09ICdhYm9ydGVkJykge1xuICAgICAgICBlbWl0dGVyLmVtaXQoJ2ZldGNoLmFib3J0Jywgcm91dGUsIGNvbnRleHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW1pdHRlci5lbWl0KCdmZXRjaC5lcnJvcicsIHJvdXRlLCBjb250ZXh0LCBlcnIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbZmV0Y2hlcl0gc3VjY2VlZGVkIGZvciAlcycsIHJvdXRlLnVybCk7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLnZlcnNpb24pIHtcbiAgICAgICAgY29tcG9uZW50Q2FjaGUuc2V0KHJvdXRlcihyZXMudXJsKS5xdWVyeS5oaWphY2tlciB8fCByb3V0ZS5hY3Rpb24sIGRhdGEpO1xuICAgICAgfVxuICAgICAgZW1pdHRlci5lbWl0KCdmZXRjaC5kb25lJywgcm91dGUsIGNvbnRleHQsIGRhdGEpO1xuICAgIH1cbiAgICBkb25lKGVyciwgZGF0YSk7XG4gIH1cbn1cblxuZmV0Y2hlci5hYm9ydFBlbmRpbmcgPSBhYm9ydFBlbmRpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gZmV0Y2hlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGdyYWR1YWwgPSByZXF1aXJlKCdncmFkdWFsJyk7XG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL3N0YXRlJyk7XG52YXIgZG9jdW1lbnQgPSByZXF1aXJlKCcuL2dsb2JhbC9kb2N1bWVudCcpO1xudmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG5mdW5jdGlvbiBzZXR1cCAoKSB7XG4gIGlmIChzdGF0ZS5mb3JtcyA9PT0gZmFsc2UpIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbZ3JhZHVhbF0gZGlzYWJsZWQnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2dyYWR1YWxdIGVuYWJsZWQnKTtcbiAgZ3JhZHVhbC5jb25maWd1cmUoe1xuICAgIHRhdW51czogZ2xvYmFsLnRhdW51cyxcbiAgICBxczogc3RhdGUucXNcbiAgfSk7XG4gIGNyb3NzdmVudC5hZGQoYm9keSwgJ3N1Ym1pdCcsIG1heWJlSGlqYWNrKTtcbn1cblxuZnVuY3Rpb24gbWF5YmVIaWphY2sgKGUpIHtcbiAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdGT1JNJykge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tncmFkdWFsXSBoaWphY2tpbmcgZm9ybSBzdWJtaXNzaW9uJyk7XG4gICAgZ3JhZHVhbC5oaWphY2soZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldHVwOiBzZXR1cFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGRvY3VtZW50ID0gcmVxdWlyZSgnLi9nbG9iYWwvZG9jdW1lbnQnKTtcbnZhciBlbWl0dGVyID0gcmVxdWlyZSgnLi9lbWl0dGVyJyk7XG52YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG52YXIgdHJhY2tlciA9IFtdO1xuXG5mdW5jdGlvbiBlbmFibGUgKCkge1xuICBlbWl0dGVyLm9uKCdyZW5kZXInLCBjb2xsZWN0KTtcbn1cblxuZnVuY3Rpb24gdHJhY2sgKGVsLCBkZXN0cm95YWJsZSwgb3B0aW9ucykge1xuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvLmltcGxvZGVzICE9PSB0cnVlKSB7IG8uaW1wbG9kZXMgPSBmYWxzZTsgfVxuICB0cmFja2VyLnB1c2goeyBlbDogZWwsIGRlc3Ryb3lhYmxlOiBkZXN0cm95YWJsZSwgb3B0aW9uczogbyB9KTtcbn1cblxuZnVuY3Rpb24gY29sbGVjdCAoY29udGFpbmVyKSB7XG4gIHRyYWNrZXIuZmlsdGVyKHJlbW92YWJsZXMpLmZvckVhY2gocmVtb3ZlKTtcbiAgdHJhY2tlciA9IHRyYWNrZXIuZmlsdGVyKG5vdChyZW1vdmFibGVzKSk7XG4gIGZ1bmN0aW9uIHJlbW92YWJsZXMgKGNvbnRleHQpIHtcbiAgICBpZiAoY29udGV4dC5lbCA9PT0gY29udGFpbmVyICYmIGNvbnRleHQub3B0aW9ucy5pbXBsb2Rlcykge1xuICAgICAgcmV0dXJuIHRydWU7IC8vIG5vdCB0eXBpY2FsbHkgd2hhdCB3ZSB3YW50LiBtYXkgdW5iaW5kIGV2ZW50cyBhbmQgbmV2ZXIgcmViaW5kXG4gICAgfVxuICAgIGlmIChib2R5LmNvbnRhaW5zKGNvbnRleHQuZWwpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG5vdCAoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5lZ2F0ZWQgKCkge1xuICAgIHJldHVybiAhZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlIChjb250ZXh0KSB7XG4gIGNvbnRleHQuZGVzdHJveWFibGUuZGVzdHJveSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZW5hYmxlOiBlbmFibGUsXG4gIHRyYWNrOiB0cmFjayxcbiAgY29sbGVjdDogY29sbGVjdFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQ7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBtb2Rlcm4gPSAnaGlzdG9yeScgaW4gZ2xvYmFsICYmICdwdXNoU3RhdGUnIGluIGdsb2JhbC5oaXN0b3J5O1xudmFyIGFwaSA9IG1vZGVybiAmJiBnbG9iYWwuaGlzdG9yeTtcblxuLy8gR29vZ2xlIENocm9tZSAzOCBvbiBpT1MgbWFrZXMgd2VpcmQgY2hhbmdlcyB0byBoaXN0b3J5LnJlcGxhY2VTdGF0ZSwgYnJlYWtpbmcgaXRcbnZhciBuYXRpdmVGbiA9IHJlcXVpcmUoJy4uL25hdGl2ZUZuJyk7XG52YXIgbmF0aXZlUmVwbGFjZUJyb2tlbiA9IG1vZGVybiAmJiAhbmF0aXZlRm4oYXBpLnJlcGxhY2VTdGF0ZSk7XG5pZiAobmF0aXZlUmVwbGFjZUJyb2tlbikge1xuICBhcGkgPSB7XG4gICAgcHVzaFN0YXRlOiBhcGkucHVzaFN0YXRlLmJpbmQoYXBpKVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwaTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwubG9jYXRpb247XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBzdGF0ZSA9IHJlcXVpcmUoJy4vc3RhdGUnKTtcbnZhciBsb2NhdGlvbiA9IHJlcXVpcmUoJy4vZ2xvYmFsL2xvY2F0aW9uJyk7XG5cbmZ1bmN0aW9uIGhhcmRSZWRpcmVjdCAoaHJlZikge1xuICBsb2NhdGlvbi5ocmVmID0gaHJlZjtcbiAgc3RhdGUucmVkaXJlY3RpbmcgPSB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhcmRSZWRpcmVjdDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCcuL2VtaXR0ZXInKTtcbnZhciBsaW5rcyA9IHJlcXVpcmUoJy4vbGlua3MnKTtcblxuZnVuY3Rpb24gYXR0YWNoICgpIHtcbiAgZW1pdHRlci5vbignc3RhcnQnLCBsaW5rcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhdHRhY2g6IGF0dGFjaFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2luZGV4XSBsb2FkaW5nIHRhdW51cycpO1xuXG5pZiAoZ2xvYmFsLnRhdW51cyAhPT0gdm9pZCAwKSB7XG4gIHRocm93IG5ldyBFcnJvcignVXNlIHJlcXVpcmUoXFwndGF1bnVzL2dsb2JhbFxcJykgYWZ0ZXIgdGhlIGluaXRpYWwgcmVxdWlyZShcXCd0YXVudXNcXCcpIHN0YXRlbWVudCEnKTtcbn1cblxudmFyIGdyYWR1YWwgPSByZXF1aXJlKCdncmFkdWFsJyk7XG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL3N0YXRlJyk7XG52YXIgc3RhdGVDbGVhciA9IHJlcXVpcmUoJy4vc3RhdGVDbGVhcicpO1xudmFyIGludGVyY2VwdG9yID0gcmVxdWlyZSgnLi9pbnRlcmNlcHRvcicpO1xudmFyIGFjdGl2YXRvciA9IHJlcXVpcmUoJy4vYWN0aXZhdG9yJyk7XG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJy4vZW1pdHRlcicpO1xudmFyIGhvb2tzID0gcmVxdWlyZSgnLi9ob29rcycpO1xudmFyIHZpZXcgPSByZXF1aXJlKCcuL3ZpZXcnKTtcbnZhciBtb3VudCA9IHJlcXVpcmUoJy4vbW91bnQnKTtcbnZhciByb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcicpO1xudmFyIHhociA9IHJlcXVpcmUoJy4veGhyJyk7XG52YXIgZ2MgPSByZXF1aXJlKCcuL2djJyk7XG52YXIgcHJlZmV0Y2hlciA9IHJlcXVpcmUoJy4vcHJlZmV0Y2hlcicpO1xudmFyIHJlZGlyZWN0b3IgPSByZXF1aXJlKCcuL3JlZGlyZWN0b3InKTtcbnZhciByZXNvbHZlID0gcmVxdWlyZSgnLi4vbGliL3Jlc29sdmUnKTtcbnZhciB2ZXJzaW9uID0gcmVxdWlyZSgnLi4vdmVyc2lvbi5qc29uJyk7XG52YXIgdmVyc2lvbkNoZWNrID0gcmVxdWlyZSgnLi92ZXJzaW9uQ2hlY2snKTtcblxuc3RhdGUuY2xlYXIgPSBzdGF0ZUNsZWFyO1xuaG9va3MuYXR0YWNoKCk7XG5cbmZ1bmN0aW9uIGJpbmQgKG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlbWl0dGVyW21ldGhvZF0uYXBwbHkoZW1pdHRlciwgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwudGF1bnVzID0ge1xuICBtb3VudDogbW91bnQsXG4gIHBhcnRpYWw6IHZpZXcucGFydGlhbCxcbiAgb246IGJpbmQoJ29uJyksXG4gIG9uY2U6IGJpbmQoJ29uY2UnKSxcbiAgb2ZmOiBiaW5kKCdvZmYnKSxcbiAgdHJhY2s6IGdjLnRyYWNrLFxuICBpbnRlcmNlcHQ6IGludGVyY2VwdG9yLmFkZCxcbiAgbmF2aWdhdGU6IGFjdGl2YXRvci5nbyxcbiAgcHJlZmV0Y2g6IHByZWZldGNoZXIuc3RhcnQsXG4gIGdyYWR1YWw6IGdyYWR1YWwsXG4gIHN0YXRlOiBzdGF0ZSxcbiAgcm91dGU6IHJvdXRlcixcbiAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgcmVkaXJlY3Q6IHJlZGlyZWN0b3IucmVkaXJlY3QsXG4gIHhocjogeGhyLFxuICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICB2ZXJzaW9uQ2hlY2s6IHZlcnNpb25DaGVja1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCdjb250cmEvZW1pdHRlcicpO1xudmFyIG9uY2UgPSByZXF1aXJlKCcuL29uY2UnKTtcbnZhciByb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcicpO1xudmFyIGludGVyY2VwdG9ycyA9IGVtaXR0ZXIoeyBjb3VudDogMCB9LCB7IGFzeW5jOiB0cnVlIH0pO1xuXG5mdW5jdGlvbiBnZXRJbnRlcmNlcHRvckV2ZW50IChyb3V0ZSkge1xuICB2YXIgZSA9IHtcbiAgICB1cmw6IHJvdXRlLnVybCxcbiAgICByb3V0ZTogcm91dGUsXG4gICAgZGF0YTogbnVsbCxcbiAgICBjYW5QcmV2ZW50RGVmYXVsdDogdHJ1ZSxcbiAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZSxcbiAgICBwcmV2ZW50RGVmYXVsdDogb25jZShwcmV2ZW50RGVmYXVsdClcbiAgfTtcblxuICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoZGF0YSkge1xuICAgIGlmICghZS5jYW5QcmV2ZW50RGVmYXVsdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLmNhblByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgZS5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICBlLmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGFkZCAoYWN0aW9uLCBmbikge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGZuID0gYWN0aW9uO1xuICAgIGFjdGlvbiA9ICcqJztcbiAgfVxuICBpbnRlcmNlcHRvcnMuY291bnQrKztcbiAgaW50ZXJjZXB0b3JzLm9uKGFjdGlvbiwgZm4pO1xufVxuXG5mdW5jdGlvbiBleGVjdXRlIChyb3V0ZSwgZG9uZSkge1xuICB2YXIgZSA9IGdldEludGVyY2VwdG9yRXZlbnQocm91dGUpO1xuICBpZiAoaW50ZXJjZXB0b3JzLmNvdW50ID09PSAwKSB7IC8vIGZhaWwgZmFzdFxuICAgIGVuZCgpOyByZXR1cm47XG4gIH1cbiAgdmFyIGZuID0gb25jZShlbmQpO1xuICB2YXIgcHJldmVudERlZmF1bHRCYXNlID0gZS5wcmV2ZW50RGVmYXVsdDtcblxuICBlLnByZXZlbnREZWZhdWx0ID0gb25jZShwcmV2ZW50RGVmYXVsdEVuZHMpO1xuXG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tpbnRlcmNlcHRvcl0gZXhlY3V0aW5nIGZvciAlcycsIHJvdXRlLnVybCk7XG5cbiAgaW50ZXJjZXB0b3JzLmVtaXQoJyonLCBlKTtcbiAgaW50ZXJjZXB0b3JzLmVtaXQocm91dGUuYWN0aW9uLCBlKTtcblxuICBzZXRUaW1lb3V0KGZuLCA1MCk7IC8vIGF0IHdvcnN0LCBzcGVuZCA1MG1zIHdhaXRpbmcgb24gaW50ZXJjZXB0b3JzXG5cbiAgZnVuY3Rpb24gcHJldmVudERlZmF1bHRFbmRzICgpIHtcbiAgICBwcmV2ZW50RGVmYXVsdEJhc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICBmbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbaW50ZXJjZXB0b3JdICVzIGZvciAlcycsIGludGVyY2VwdG9ycy5jb3VudCA9PT0gMCAmJiAnc2tpcHBlZCcgfHwgZS5kZWZhdWx0UHJldmVudGVkICYmICdwcmV2ZW50ZWQnIHx8ICd0aW1lZCBvdXQnLCByb3V0ZS51cmwpO1xuICAgIGUuY2FuUHJldmVudERlZmF1bHQgPSBmYWxzZTtcbiAgICBkb25lKG51bGwsIGUpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZCxcbiAgZXhlY3V0ZTogZXhlY3V0ZVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNyb3NzdmVudCA9IHJlcXVpcmUoJ2Nyb3NzdmVudCcpO1xudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIHJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVyJyk7XG52YXIgcHJlZmV0Y2hlciA9IHJlcXVpcmUoJy4vcHJlZmV0Y2hlcicpO1xudmFyIHByZWZldGNoZXJJbnRlbnQgPSByZXF1aXJlKCcuL3ByZWZldGNoZXJJbnRlbnQnKTtcbnZhciBhY3RpdmF0b3IgPSByZXF1aXJlKCcuL2FjdGl2YXRvcicpO1xudmFyIGRvY3VtZW50ID0gcmVxdWlyZSgnLi9nbG9iYWwvZG9jdW1lbnQnKTtcbnZhciBsb2NhdGlvbiA9IHJlcXVpcmUoJy4vZ2xvYmFsL2xvY2F0aW9uJyk7XG52YXIgb3JpZ2luID0gcmVxdWlyZSgnLi9vcmlnaW4nKTtcbnZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbnZhciBsZWZ0Q2xpY2sgPSAxO1xudmFyIHByZWZldGNoaW5nID0gW107XG52YXIgY2xpY2tzT25Ib2xkID0gW107XG5cbmZ1bmN0aW9uIGxpbmtzICgpIHtcbiAgaWYgKHN0YXRlLmxpbmtzID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc3RhdGUucHJlZmV0Y2ggJiYgc3RhdGUuY2FjaGUpIHsgLy8gcHJlZmV0Y2ggd2l0aG91dCBjYWNoZSBtYWtlcyBubyBzZW5zZVxuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tsaW5rc10gbGlzdGVuaW5nIGZvciBwcmVmZXRjaGluZyBvcHBvcnR1bml0aWVzJyk7XG4gICAgY3Jvc3N2ZW50LmFkZChib2R5LCAnbW91c2VvdmVyJywgbWF5YmVQcmVmZXRjaCk7XG4gICAgY3Jvc3N2ZW50LmFkZChib2R5LCAndG91Y2hzdGFydCcsIG1heWJlUHJlZmV0Y2gpO1xuICB9XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tsaW5rc10gbGlzdGVuaW5nIGZvciByZXJvdXRpbmcgb3Bwb3J0dW5pdGllcycpO1xuICBjcm9zc3ZlbnQuYWRkKGJvZHksICdjbGljaycsIG1heWJlUmVyb3V0ZSk7XG59XG5cbmZ1bmN0aW9uIHNvIChhbmNob3IpIHtcbiAgcmV0dXJuIGFuY2hvci5vcmlnaW4gPT09IG9yaWdpbjtcbn1cblxuZnVuY3Rpb24gbGVmdENsaWNrT25BbmNob3IgKGUsIGFuY2hvcikge1xuICByZXR1cm4gYW5jaG9yLnBhdGhuYW1lICYmIGUud2hpY2ggPT09IGxlZnRDbGljayAmJiAhZS5tZXRhS2V5ICYmICFlLmN0cmxLZXk7XG59XG5cbmZ1bmN0aW9uIHRhcmdldE9yQW5jaG9yIChlKSB7XG4gIHZhciBhbmNob3IgPSBlLnRhcmdldDtcbiAgd2hpbGUgKGFuY2hvcikge1xuICAgIGlmIChhbmNob3IudGFnTmFtZSA9PT0gJ0EnKSB7XG4gICAgICByZXR1cm4gYW5jaG9yO1xuICAgIH1cbiAgICBhbmNob3IgPSBhbmNob3IucGFyZW50RWxlbWVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXliZVJlcm91dGUgKGUpIHtcbiAgdmFyIGFuY2hvciA9IHRhcmdldE9yQW5jaG9yKGUpO1xuICBpZiAoYW5jaG9yICYmIHNvKGFuY2hvcikgJiYgbm90anVzdGhhc2hjaGFuZ2UoYW5jaG9yKSAmJiBsZWZ0Q2xpY2tPbkFuY2hvcihlLCBhbmNob3IpICYmIHJvdXRhYmxlKGFuY2hvcikpIHtcbiAgICByZXJvdXRlKGUsIGFuY2hvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXR0ciAoZWwsIG5hbWUpIHtcbiAgdmFyIHZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gcm91dGFibGUgKGFuY2hvcikge1xuICByZXR1cm4gYXR0cihhbmNob3IsICdkb3dubG9hZCcpID09PSBudWxsICYmIGF0dHIoYW5jaG9yLCAndGFyZ2V0JykgIT09ICdfYmxhbmsnICYmIGF0dHIoYW5jaG9yLCAnZGF0YS10YXVudXMtaWdub3JlJykgPT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIG5vdGp1c3RoYXNoY2hhbmdlIChhbmNob3IpIHtcbiAgcmV0dXJuIChcbiAgICBhbmNob3IucGF0aG5hbWUgIT09IGxvY2F0aW9uLnBhdGhuYW1lIHx8XG4gICAgYW5jaG9yLnNlYXJjaCAhPT0gbG9jYXRpb24uc2VhcmNoIHx8XG4gICAgYW5jaG9yLmhhc2ggPT09IGxvY2F0aW9uLmhhc2hcbiAgKTtcbn1cblxuZnVuY3Rpb24gbWF5YmVQcmVmZXRjaCAoZSkge1xuICB2YXIgYW5jaG9yID0gdGFyZ2V0T3JBbmNob3IoZSk7XG4gIGlmIChhbmNob3IgJiYgc28oYW5jaG9yKSkge1xuICAgIHByZWZldGNoKGUsIGFuY2hvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9vcCAoKSB7fVxuXG5mdW5jdGlvbiBwYXJzZSAoYW5jaG9yKSB7XG4gIHJldHVybiBhbmNob3IucGF0aG5hbWUgKyBhbmNob3Iuc2VhcmNoICsgYW5jaG9yLmhhc2g7XG59XG5cbmZ1bmN0aW9uIHJlcm91dGUgKGUsIGFuY2hvcikge1xuICB2YXIgdXJsID0gcGFyc2UoYW5jaG9yKTtcbiAgdmFyIHJvdXRlID0gcm91dGVyKHVybCk7XG4gIGlmICghcm91dGUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcmV2ZW50KCk7XG5cbiAgaWYgKHN0YXRlLmhhcmRSZWRpcmVjdCkge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tsaW5rc10gaGFyZCByZWRpcmVjdCBpbiBwcm9ncmVzcywgYWJvcnRpbmcnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocHJlZmV0Y2hlci5idXN5KHVybCkpIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbbGlua3NdIG5hdmlnYXRpb24gdG8gJXMgYmxvY2tlZCBieSBwcmVmZXRjaGVyJywgcm91dGUudXJsKTtcbiAgICBwcmVmZXRjaGVySW50ZW50LnNldCh1cmwpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tsaW5rc10gbmF2aWdhdGluZyB0byAlcycsIHJvdXRlLnVybCk7XG4gIGFjdGl2YXRvci5nbyhyb3V0ZS51cmwsIHsgY29udGV4dDogYW5jaG9yIH0pO1xuXG4gIGZ1bmN0aW9uIHByZXZlbnQgKCkgeyBlLnByZXZlbnREZWZhdWx0KCk7IH1cbn1cblxuZnVuY3Rpb24gcHJlZmV0Y2ggKGUsIGFuY2hvcikge1xuICBwcmVmZXRjaGVyLnN0YXJ0KHBhcnNlKGFuY2hvciksIGFuY2hvcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlua3M7XG4iLCJcbid1c2Ugc3RyaWN0JztcblxudmFyIHNhZmVzb24gPSByZXF1aXJlKCdzYWZlc29uJyk7XG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL3N0YXRlJyk7XG52YXIgcm91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXInKTtcbnZhciBhY3RpdmF0b3IgPSByZXF1aXJlKCcuL2FjdGl2YXRvcicpO1xudmFyIGNhY2hpbmcgPSByZXF1aXJlKCcuL2NhY2hpbmcnKTtcbnZhciBjb21wb25lbnRDYWNoZSA9IHJlcXVpcmUoJy4vY29tcG9uZW50Q2FjaGUnKTtcbnZhciBmZXRjaGVyID0gcmVxdWlyZSgnLi9mZXRjaGVyJyk7XG52YXIgZm9ybXMgPSByZXF1aXJlKCcuL2Zvcm1zJyk7XG52YXIgZ2MgPSByZXF1aXJlKCcuL2djJyk7XG52YXIgdmVyc2lvbmluZyA9IHJlcXVpcmUoJy4uL3ZlcnNpb25pbmcnKTtcbnZhciBkb2N1bWVudCA9IHJlcXVpcmUoJy4vZ2xvYmFsL2RvY3VtZW50Jyk7XG52YXIgbG9jYXRpb24gPSByZXF1aXJlKCcuL2dsb2JhbC9sb2NhdGlvbicpO1xudmFyIHJlc29sdmUgPSByZXF1aXJlKCcuLi9saWIvcmVzb2x2ZScpO1xudmFyIGcgPSBnbG9iYWw7XG52YXIgbW91bnRlZDtcbnZhciBib290ZWQ7XG5cbmZ1bmN0aW9uIG1vdW50IChjb250YWluZXIsIHdpcmluZywgb3B0aW9ucykge1xuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChtb3VudGVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUYXVudXMgYWxyZWFkeSBtb3VudGVkIScpO1xuICB9XG4gIGlmICghY29udGFpbmVyIHx8ICFjb250YWluZXIudGFnTmFtZSkgeyAvLyBuYcOvdmUgaXMgZW5vdWdoXG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBkZWZpbmUgYW4gYXBwbGljYXRpb24gcm9vdCBjb250YWluZXIhJyk7XG4gIH1cbiAgaWYgKCFvLmJvb3RzdHJhcCkgeyBvLmJvb3RzdHJhcCA9ICdhdXRvJzsgfVxuXG4gIG1vdW50ZWQgPSB0cnVlO1xuXG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1ttb3VudF0gbW91bnRwb2ludCBpbnZva2VkIHVzaW5nIFwiJXNcIiBzdHJhdGVneScsIG8uYm9vdHN0cmFwKTtcblxuICBzdGF0ZS5jb250YWluZXIgPSBjb250YWluZXI7XG4gIHN0YXRlLmNvbnRyb2xsZXJzID0gd2lyaW5nLmNvbnRyb2xsZXJzO1xuICBzdGF0ZS50ZW1wbGF0ZXMgPSB3aXJpbmcudGVtcGxhdGVzO1xuICBzdGF0ZS5yb3V0ZXMgPSB3aXJpbmcucm91dGVzO1xuICBzdGF0ZS5kZWZlcnJhbHMgPSB3aXJpbmcuZGVmZXJyYWxzIHx8IFtdO1xuICBzdGF0ZS5wcmVmZXRjaCA9ICEhby5wcmVmZXRjaDtcbiAgc3RhdGUudmVyc2lvbiA9IHZlcnNpb25pbmcuZ2V0KG8udmVyc2lvbiB8fCAnMScpO1xuICBzdGF0ZS5xcyA9IG8ucXMgfHwgbm9vcDtcbiAgc3RhdGUubGlua3MgPSAnbGlua3MnIGluIG8gPyAhIW8ubGlua3MgOiB0cnVlO1xuICBzdGF0ZS5mb3JtcyA9ICdmb3JtcycgaW4gbyA/ICEhby5mb3JtcyA6IHRydWU7XG5cbiAgcmVzb2x2ZS5zZXQoc3RhdGUucm91dGVzKTtcbiAgcm91dGVyLnNldHVwKHN0YXRlLnJvdXRlcyk7XG4gIGZvcm1zLnNldHVwKCk7XG4gIGdjLmVuYWJsZSgpO1xuXG4gIHZhciByb3V0ZSA9IHJvdXRlcihsb2NhdGlvbi5ocmVmKTtcblxuICBjYWNoaW5nLnNldHVwKG8uY2FjaGUsIHJvdXRlKTtcbiAgY2FjaGluZy5yZWFkeShraWNrc3RhcnQpO1xuICBjb21wb25lbnRDYWNoZS5yZWZpbGwoKTtcblxuICBmdW5jdGlvbiBraWNrc3RhcnQgKCkge1xuICAgIGlmIChvLmJvb3RzdHJhcCA9PT0gJ2F1dG8nKSB7XG4gICAgICBhdXRvYm9vdCgpO1xuICAgIH0gZWxzZSBpZiAoby5ib290c3RyYXAgPT09ICdpbmxpbmUnKSB7XG4gICAgICBpbmxpbmVib290KCk7XG4gICAgfSBlbHNlIGlmIChvLmJvb3RzdHJhcCA9PT0gJ21hbnVhbCcpIHtcbiAgICAgIG1hbnVhbGJvb3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG8uYm9vdHN0cmFwICsgJyBpcyBub3QgYSB2YWxpZCBib290c3RyYXAgbW9kZSEnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhdXRvYm9vdCAoKSB7XG4gICAgZmV0Y2hlcihyb3V0ZSwgeyBlbGVtZW50OiBjb250YWluZXIsIHNvdXJjZTogJ2Jvb3QnIH0sIGZldGNoZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hlZCAoZXJyLCBkYXRhKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGZXRjaGluZyBKU09OIGRhdGEgbW9kZWwgZmFpbGVkIGF0IG1vdW50cG9pbnQuJyk7XG4gICAgfVxuICAgIGJvb3QoZGF0YSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbmxpbmVib290ICgpIHtcbiAgICB2YXIgaWQgPSBjb250YWluZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhdW51cycpO1xuICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgdmFyIGRhdGEgPSBzYWZlc29uLmRlY29kZShzY3JpcHQuaW5uZXJUZXh0IHx8IHNjcmlwdC50ZXh0Q29udGVudCk7XG4gICAgYm9vdChkYXRhKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbGJvb3QgKCkge1xuICAgIGlmICh0eXBlb2YgZy50YXVudXNSZWFkeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZy50YXVudXNSZWFkeSA9IGJvb3Q7IC8vIG5vdCB5ZXQgYW4gb2JqZWN0PyB0dXJuIGl0IGludG8gdGhlIGJvb3QgbWV0aG9kXG4gICAgfSBlbHNlIGlmIChnLnRhdW51c1JlYWR5ICYmIHR5cGVvZiBnLnRhdW51c1JlYWR5ID09PSAnb2JqZWN0Jykge1xuICAgICAgYm9vdChnLnRhdW51c1JlYWR5KTsgLy8gYWxyZWFkeSBhbiBvYmplY3Q/IGJvb3Qgd2l0aCB0aGF0IGFzIHRoZSBkYXRhIG9iamVjdFxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RpZCB5b3UgZm9yZ2V0IHRvIGFkZCB0aGUgdGF1bnVzUmVhZHkgZ2xvYmFsPycpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGJvb3QgKGRhdGEpIHtcbiAgICBpZiAoYm9vdGVkKSB7IC8vIHNhbml0eVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1ttb3VudF0gbW91bnRwb2ludCBib290ZWQgd2l0aCBkYXRhJywgZGF0YSk7XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGF1bnVzIGRhdGEgaXMgcmVxdWlyZWQhIEJvb3QgZmFpbGVkJyk7XG4gICAgfVxuICAgIGlmICghZGF0YS52ZXJzaW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZlcnNpb24gZGF0YSBpcyBtaXNzaW5nISBCb290IGZhaWxlZCcpO1xuICAgIH1cbiAgICBpZiAoIWRhdGEubW9kZWwgfHwgdHlwZW9mIGRhdGEubW9kZWwgIT09ICdvYmplY3QnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhdW51cyBtb2RlbCBtdXN0IGJlIGFuIG9iamVjdCEgQm9vdCBmYWlsZWQnKTtcbiAgICB9XG4gICAgYm9vdGVkID0gdHJ1ZTtcbiAgICBjYWNoaW5nLnBlcnNpc3Qocm91dGUsIHN0YXRlLmNvbnRhaW5lciwgZGF0YSk7XG4gICAgYWN0aXZhdG9yLnN0YXJ0KGRhdGEpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vb3AgKCkge31cblxubW9kdWxlLmV4cG9ydHMgPSBtb3VudDtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gc291cmNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qZGFsdG9uLzVlMzRkODkwMTA1YWNhNDQzOTlmXG4vLyB0aGFua3MgQGpkYWx0b24hXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7IC8vIHVzZWQgdG8gcmVzb2x2ZSB0aGUgaW50ZXJuYWwgYFtbQ2xhc3NdXWAgb2YgdmFsdWVzXG52YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzsgLy8gdXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnNcbnZhciBob3N0ID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLzsgLy8gdXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDQ7IHJlYWxseSB0eXBlZCBhcnJheSBzcGVjaWZpYylcblxuLy8gRXNjYXBlIGFueSBzcGVjaWFsIHJlZ2V4cCBjaGFyYWN0ZXJzLlxudmFyIHNwZWNpYWxzID0gL1suKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXG4vLyBSZXBsYWNlIG1lbnRpb25zIG9mIGB0b1N0cmluZ2Agd2l0aCBgLio/YCB0byBrZWVwIHRoZSB0ZW1wbGF0ZSBnZW5lcmljLlxuLy8gUmVwbGFjZSB0aGluZyBsaWtlIGBmb3IgLi4uYCB0byBzdXBwb3J0IGVudmlyb25tZW50cywgbGlrZSBSaGlubywgd2hpY2ggYWRkIGV4dHJhXG4vLyBpbmZvIHN1Y2ggYXMgbWV0aG9kIGFyaXR5LlxudmFyIGV4dHJhcyA9IC90b1N0cmluZ3woZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nO1xuXG4vLyBDb21waWxlIGEgcmVnZXhwIHVzaW5nIGEgY29tbW9uIG5hdGl2ZSBtZXRob2QgYXMgYSB0ZW1wbGF0ZS5cbi8vIFdlIGNob3NlIGBPYmplY3QjdG9TdHJpbmdgIGJlY2F1c2UgdGhlcmUncyBhIGdvb2QgY2hhbmNlIGl0IGlzIG5vdCBiZWluZyBtdWNrZWQgd2l0aC5cbnZhciBmblN0cmluZyA9IFN0cmluZyh0b1N0cmluZykucmVwbGFjZShzcGVjaWFscywgJ1xcXFwkJicpLnJlcGxhY2UoZXh0cmFzLCAnJDEuKj8nKTtcbnZhciByZU5hdGl2ZSA9IG5ldyBSZWdFeHAoJ14nICsgZm5TdHJpbmcgKyAnJCcpO1xuXG5mdW5jdGlvbiBuYXRpdmVGbiAodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gVXNlIGBGdW5jdGlvbiN0b1N0cmluZ2AgdG8gYnlwYXNzIHRoZSB2YWx1ZSdzIG93biBgdG9TdHJpbmdgIG1ldGhvZFxuICAgIC8vIGFuZCBhdm9pZCBiZWluZyBmYWtlZCBvdXQuXG4gICAgcmV0dXJuIHJlTmF0aXZlLnRlc3QoZm5Ub1N0cmluZy5jYWxsKHZhbHVlKSk7XG4gIH1cblxuICAvLyBGYWxsYmFjayB0byBhIGhvc3Qgb2JqZWN0IGNoZWNrIGJlY2F1c2Ugc29tZSBlbnZpcm9ubWVudHMgd2lsbCByZXByZXNlbnRcbiAgLy8gdGhpbmdzIGxpa2UgdHlwZWQgYXJyYXlzIGFzIERPTSBtZXRob2RzIHdoaWNoIG1heSBub3QgY29uZm9ybSB0byB0aGVcbiAgLy8gbm9ybWFsIG5hdGl2ZSBwYXR0ZXJuLlxuICByZXR1cm4gKHZhbHVlICYmIHR5cGUgPT09ICdvYmplY3QnICYmIGhvc3QudGVzdCh0b1N0cmluZy5jYWxsKHZhbHVlKSkpIHx8IGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUZuO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3Bvc2FibGUgKGZuKSB7XG4gIHZhciB1c2VkO1xuICB2YXIgcmVzdWx0O1xuICByZXR1cm4gZnVuY3Rpb24gb25jZSAoKSB7XG4gICAgaWYgKHVzZWQpIHsgcmV0dXJuIHJlc3VsdDsgfSB1c2VkID0gdHJ1ZTtcbiAgICByZXR1cm4gKHJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGwgPSByZXF1aXJlKCcuL2dsb2JhbC9sb2NhdGlvbicpO1xudmFyIG9yaWdpbiA9IGwub3JpZ2luIHx8IChsLnByb3RvY29sICsgJy8vJyArIGwuaG9zdG5hbWUgKyAobC5wb3J0ID8gJzonICsgbC5wb3J0OiAnJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9yaWdpbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIHJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVyJyk7XG52YXIgZmV0Y2hlciA9IHJlcXVpcmUoJy4vZmV0Y2hlcicpO1xudmFyIGFjdGl2YXRvciA9IHJlcXVpcmUoJy4vYWN0aXZhdG9yJyk7XG52YXIgcHJlZmV0Y2hlckludGVudCA9IHJlcXVpcmUoJy4vcHJlZmV0Y2hlckludGVudCcpO1xudmFyIGpvYnMgPSBbXTtcbnZhciBpbnRlbnQ7XG5cbmZ1bmN0aW9uIGJ1c3kgKHVybCkge1xuICByZXR1cm4gam9icy5pbmRleE9mKHVybCkgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBzdGFydCAodXJsLCBlbGVtZW50KSB7XG4gIGlmIChzdGF0ZS5oYXJkUmVkaXJlY3QpIHtcbiAgICByZXR1cm47IC8vIG5vIHBvaW50IGluIHByZWZldGNoaW5nIGlmIGxvY2F0aW9uLmhyZWYgaGFzIGNoYW5nZWRcbiAgfVxuICBpZiAoc3RhdGUuY2FjaGUgIT09IHRydWUpIHtcbiAgICByZXR1cm47IC8vIGNhbid0IHByZWZldGNoIGlmIGNhY2hpbmcgaXMgZGlzYWJsZWRcbiAgfVxuICBpZiAocHJlZmV0Y2hlckludGVudC5pcyhudWxsKSA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm47IC8vIGRvbid0IHByZWZldGNoIGlmIHRoZSBodW1hbiB3YW50cyB0byBuYXZpZ2F0ZTogaXQnZCBhYm9ydCB0aGUgcHJldmlvdXMgYXR0ZW1wdFxuICB9XG4gIHZhciByb3V0ZSA9IHJvdXRlcih1cmwpO1xuICBpZiAocm91dGUgPT09IG51bGwpIHtcbiAgICByZXR1cm47IC8vIG9ubHkgcHJlZmV0Y2ggdGF1bnVzIHZpZXcgcm91dGVzXG4gIH1cbiAgaWYgKGJ1c3kodXJsKSkge1xuICAgIHJldHVybjsgLy8gYWxyZWFkeSBwcmVmZXRjaGluZyB0aGlzIHVybFxuICB9XG5cbiAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW3ByZWZldGNoZXJdIHByZWZldGNoaW5nICVzJywgcm91dGUudXJsKTtcbiAgam9icy5wdXNoKHVybCk7XG4gIGZldGNoZXIocm91dGUsIHsgZWxlbWVudDogZWxlbWVudCwgc291cmNlOiAncHJlZmV0Y2gnIH0sIGZldGNoZWQpO1xuXG4gIGZ1bmN0aW9uIGZldGNoZWQgKCkge1xuICAgIGpvYnMuc3BsaWNlKGpvYnMuaW5kZXhPZih1cmwpLCAxKTtcbiAgICBpZiAocHJlZmV0Y2hlckludGVudC5pcyh1cmwpKSB7XG4gICAgICBwcmVmZXRjaGVySW50ZW50LmFib3J0KCk7XG4gICAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbcHJlZmV0Y2hlcl0gcmVzdW1lZCBuYXZpZ2F0aW9uIGZvciAlcycsIHJvdXRlLnVybCk7XG4gICAgICBhY3RpdmF0b3IuZ28ocm91dGUudXJsLCB7IGNvbnRleHQ6IGVsZW1lbnQgfSk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBidXN5OiBidXN5LFxuICBzdGFydDogc3RhcnRcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbnRlbnQgPSBudWxsO1xudmFyIHByZWZldGNoZXJJbnRlbnQgPSB7XG4gIGlzOiBpcyxcbiAgc2V0OiBzZXQsXG4gIGFib3J0OiBhYm9ydFxufTtcblxuZnVuY3Rpb24gaXMgKHVybCkge1xuICByZXR1cm4gaW50ZW50ID09PSB1cmw7XG59XG5cbmZ1bmN0aW9uIHNldCAodXJsKSB7XG4gIGludGVudCA9IHVybDtcbn1cblxuZnVuY3Rpb24gYWJvcnQgKHVybCkge1xuICBpbnRlbnQgPSBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHByZWZldGNoZXJJbnRlbnQ7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBsb2NhdGlvbiA9IHJlcXVpcmUoJy4vZ2xvYmFsL2xvY2F0aW9uJyk7XG52YXIgaGFyZFJlZGlyZWN0ID0gcmVxdWlyZSgnLi9oYXJkUmVkaXJlY3QnKTtcblxuZnVuY3Rpb24gcmVkaXJlY3QgKG9wdGlvbnMpIHtcbiAgdmFyIGFjdGl2YXRvciA9IHJlcXVpcmUoJy4vYWN0aXZhdG9yJyk7XG4gIHZhciBvID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKG8uaGFyZCA9PT0gdHJ1ZSkgeyAvLyBoYXJkIHJlZGlyZWN0cyBhcmUgc2FmZXIgYnV0IHNsb3dlclxuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tyZWRpcmVjdG9yXSBoYXJkLCB0bycsIG8uaHJlZik7XG4gICAgaGFyZFJlZGlyZWN0KG8uaHJlZik7XG4gIH0gZWxzZSB7IC8vIHNvZnQgcmVkaXJlY3RzIGFyZSBmYXN0ZXIgYnV0IG1heSBicmVhayBleHBlY3RhdGlvbnNcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbcmVkaXJlY3Rvcl0gc29mdCwgdG8nLCBvLmhyZWYpO1xuICAgIGFjdGl2YXRvci5nbyhvLmhyZWYsIHsgZm9yY2U6IG8uZm9yY2UgPT09IHRydWUgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlZGlyZWN0OiByZWRpcmVjdFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIG9tbmlib3ggPSByZXF1aXJlKCdvbW5pYm94Jyk7XG52YXIgcnV0YTMgPSByZXF1aXJlKCdydXRhMycpO1xudmFyIGxvY2F0aW9uID0gcmVxdWlyZSgnLi9nbG9iYWwvbG9jYXRpb24nKTtcbnZhciBxdWVyeXBhcnNlciA9IHJlcXVpcmUoJy4uL2xpYi9xdWVyeXBhcnNlcicpO1xudmFyIG9yaWdpbiA9IHJlcXVpcmUoJy4vb3JpZ2luJyk7XG52YXIgbWF0Y2hlciA9IHJ1dGEzKCk7XG52YXIgcHJvdG9jb2wgPSAvXlthLXpdKz86XFwvXFwvL2k7XG5cbmZ1bmN0aW9uIGdldEZ1bGxVcmwgKHJhdykge1xuICB2YXIgYmFzZSA9IGxvY2F0aW9uLmhyZWYuc3Vic3RyKG9yaWdpbi5sZW5ndGgpO1xuICB2YXIgaGFzaGxlc3M7XG4gIGlmICghcmF3KSB7XG4gICAgcmV0dXJuIGJhc2U7XG4gIH1cbiAgaWYgKHJhd1swXSA9PT0gJyMnKSB7XG4gICAgaGFzaGxlc3MgPSBiYXNlLnN1YnN0cigwLCBiYXNlLmxlbmd0aCAtIGxvY2F0aW9uLmhhc2gubGVuZ3RoKTtcbiAgICByZXR1cm4gaGFzaGxlc3MgKyByYXc7XG4gIH1cbiAgaWYgKHByb3RvY29sLnRlc3QocmF3KSkge1xuICAgIGlmIChyYXcuaW5kZXhPZihvcmlnaW4pID09PSAwKSB7XG4gICAgICByZXR1cm4gcmF3LnN1YnN0cihvcmlnaW4ubGVuZ3RoKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHJhdztcbn1cblxuZnVuY3Rpb24gcm91dGVyIChyYXcpIHtcbiAgdmFyIGZ1bGwgPSBnZXRGdWxsVXJsKHJhdyk7XG4gIGlmIChmdWxsID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHBhcnRzID0gb21uaWJveC5wYXJzZShmdWxsKTtcbiAgdmFyIGluZm8gPSBtYXRjaGVyLm1hdGNoKHBhcnRzLnBhdGhuYW1lKTtcblxuICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbcm91dGVyXSAlcyBwcm9kdWNlcyAlbycsIHJhdywgaW5mbyk7XG5cbiAgdmFyIHJvdXRlID0gaW5mbyA/IG1lcmdlKGluZm8pIDogbnVsbDtcbiAgaWYgKHJvdXRlID09PSBudWxsIHx8IHJvdXRlLmlnbm9yZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcm91dGUudXJsID0gZnVsbDtcbiAgcm91dGUuaGFzaCA9IHBhcnRzLmhhc2ggfHwgJyc7XG4gIHJvdXRlLnF1ZXJ5ID0gcXVlcnlwYXJzZXIocGFydHMucXVlcnkpO1xuICByb3V0ZS5wYXRoID0gcGFydHMucGF0aDtcbiAgcm91dGUucGF0aG5hbWUgPSBwYXJ0cy5wYXRobmFtZTtcbiAgcm91dGUuc2VhcmNoID0gcGFydHMuc2VhcmNoO1xuXG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tyb3V0ZXJdICVzIHlpZWxkcyAlcycsIHJhdywgcm91dGUucm91dGUpO1xuXG4gIHJldHVybiByb3V0ZTtcbn1cblxuZnVuY3Rpb24gbWVyZ2UgKGluZm8pIHtcbiAgdmFyIHJvdXRlID0gT2JqZWN0LmtleXMoaW5mby5hY3Rpb24pLnJlZHVjZShjb3B5T3Zlciwge1xuICAgIHBhcmFtczogaW5mby5wYXJhbXNcbiAgfSk7XG4gIGluZm8ucGFyYW1zLmFyZ3MgPSBpbmZvLnNwbGF0cztcblxuICByZXR1cm4gcm91dGU7XG5cbiAgZnVuY3Rpb24gY29weU92ZXIgKHJvdXRlLCBrZXkpIHtcbiAgICByb3V0ZVtrZXldID0gaW5mby5hY3Rpb25ba2V5XTsgcmV0dXJuIHJvdXRlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldHVwIChkZWZpbml0aW9ucykge1xuICBkZWZpbml0aW9ucy5mb3JFYWNoKGRlZmluZSk7XG59XG5cbmZ1bmN0aW9uIGRlZmluZSAoZGVmaW5pdGlvbikge1xuICBpZiAodHlwZW9mIGRlZmluaXRpb24uYWN0aW9uICE9PSAnc3RyaW5nJykge1xuICAgIGRlZmluaXRpb24uYWN0aW9uID0gbnVsbDtcbiAgfVxuICBtYXRjaGVyLmFkZFJvdXRlKGRlZmluaXRpb24ucm91dGUsIGRlZmluaXRpb24pO1xufVxuXG5mdW5jdGlvbiBlcXVhbHMgKGxlZnQsIHJpZ2h0KSB7XG4gIHJldHVybiBsZWZ0ICYmIHJpZ2h0ICYmIGxlZnQucGF0aCA9PT0gcmlnaHQucGF0aDtcbn1cblxucm91dGVyLnNldHVwID0gc2V0dXA7XG5yb3V0ZXIuZXF1YWxzID0gZXF1YWxzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbnRhaW5lcjogbnVsbFxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIHJhdyA9IHJlcXVpcmUoJy4vc3RvcmVzL3JhdycpO1xudmFyIGlkYiA9IHJlcXVpcmUoJy4vc3RvcmVzL2lkYicpO1xuXG5mdW5jdGlvbiBjbGVhciAoKSB7XG4gIHJhdy5jbGVhcigpO1xuICBpZGIuY2xlYXIoJ21vZGVscycpO1xuICBpZGIuY2xlYXIoJ2NvbnRyb2xsZXJzJyk7XG4gIGlkYi5jbGVhcigndGVtcGxhdGVzJyk7XG4gIGNsZWFyU3RvcmUoJ2NvbnRyb2xsZXJzJyk7XG4gIGNsZWFyU3RvcmUoJ3RlbXBsYXRlcycpO1xufVxuXG5mdW5jdGlvbiBjbGVhclN0b3JlICh0eXBlKSB7XG4gIHZhciBzdG9yZSA9IHN0YXRlW3R5cGVdO1xuICBPYmplY3Qua2V5cyhzdG9yZSkuZmlsdGVyKG8pLmZvckVhY2gocm0pO1xuXG4gIGZ1bmN0aW9uIG8gKGFjdGlvbikge1xuICAgIHJldHVybiBzdG9yZVthY3Rpb25dICYmIHR5cGVvZiBzdG9yZVthY3Rpb25dID09PSAnb2JqZWN0JztcbiAgfVxuICBmdW5jdGlvbiBybSAoYWN0aW9uKSB7XG4gICAgZGVsZXRlIHN0b3JlW2FjdGlvbl07XG4gIH1cbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsZWFyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBpID0ge307XG52YXIgb25jZSA9IHJlcXVpcmUoJy4uL29uY2UnKTtcbnZhciBpZGIgPSByZXF1aXJlKCcuL3VuZGVybHlpbmdfaWRiJyk7XG52YXIgc3VwcG9ydHM7XG52YXIgZGI7XG52YXIgZGJWZXJzaW9uID0gMztcbnZhciBkYk5hbWUgPSAndGF1bnVzJztcbnZhciBrZXlQYXRoID0gJ2tleSc7XG52YXIgc2V0UXVldWUgPSBbXTtcbnZhciB0ZXN0ZWRRdWV1ZSA9IFtdO1xuXG5mdW5jdGlvbiBub29wICgpIHt9XG5cbmZ1bmN0aW9uIHRlc3QgKCkge1xuICB2YXIga2V5ID0gJ2luZGV4ZWQtZGItZmVhdHVyZS1kZXRlY3Rpb24nO1xuICB2YXIgcmVxO1xuICB2YXIgZGI7XG5cbiAgaWYgKCFpZGIgfHwgISgnZGVsZXRlRGF0YWJhc2UnIGluIGlkYikpIHtcbiAgICBzdXBwb3J0KGZhbHNlKTsgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZGIuZGVsZXRlRGF0YWJhc2Uoa2V5KS5vbnN1Y2Nlc3MgPSB0cmFuc2FjdGlvbmFsVGVzdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHN1cHBvcnQoZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNhY3Rpb25hbFRlc3QgKCkge1xuICAgIHJlcSA9IGlkYi5vcGVuKGtleSwgMSk7XG4gICAgcmVxLm9udXBncmFkZW5lZWRlZCA9IHVwZ25lZWRlZDtcbiAgICByZXEub25lcnJvciA9IGVycm9yO1xuICAgIHJlcS5vbnN1Y2Nlc3MgPSBzdWNjZXNzO1xuXG4gICAgZnVuY3Rpb24gdXBnbmVlZGVkICgpIHtcbiAgICAgIHJlcS5yZXN1bHQuY3JlYXRlT2JqZWN0U3RvcmUoJ3N0b3JlJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VjY2VzcyAoKSB7XG4gICAgICBkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICB0cnkge1xuICAgICAgICBkYi50cmFuc2FjdGlvbignc3RvcmUnLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoJ3N0b3JlJykuYWRkKG5ldyBnbG9iYWwuQmxvYigpLCAna2V5Jyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHN1cHBvcnQoZmFsc2UpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgaWRiLmRlbGV0ZURhdGFiYXNlKGtleSk7XG4gICAgICAgIGlmIChzdXBwb3J0cyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBvcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvciAoKSB7XG4gICAgICBzdXBwb3J0KGZhbHNlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlbiAoKSB7XG4gIHZhciByZXEgPSBpZGIub3BlbihkYk5hbWUsIGRiVmVyc2lvbik7XG4gIHJlcS5vbmVycm9yID0gZXJyb3I7XG4gIHJlcS5vbnVwZ3JhZGVuZWVkZWQgPSB1cGduZWVkZWQ7XG4gIHJlcS5vbnN1Y2Nlc3MgPSBzdWNjZXNzO1xuXG4gIGZ1bmN0aW9uIHVwZ25lZWRlZCAoZSkge1xuICAgIHZhciBkYiA9IHJlcS5yZXN1bHQ7XG4gICAgdmFyIHYgPSBlLm9sZFZlcnNpb247XG4gICAgaWYgKHYgPT09IDEpIHtcbiAgICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKCd3aWxkc3RvcmUnKTtcbiAgICB9XG4gICAgaWYgKHYgPCAyKSB7XG4gICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZSgnbW9kZWxzJywgeyBrZXlQYXRoOiBrZXlQYXRoIH0pO1xuICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ3RlbXBsYXRlcycsIHsga2V5UGF0aDoga2V5UGF0aCB9KTtcbiAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdjb250cm9sbGVycycsIHsga2V5UGF0aDoga2V5UGF0aCB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdWNjZXNzICgpIHtcbiAgICBkYiA9IHJlcS5yZXN1bHQ7XG4gICAgYXBpLm5hbWUgPSAnSW5kZXhlZERCJztcbiAgICBhcGkuZ2V0ID0gZ2V0O1xuICAgIGFwaS5zZXQgPSBzZXQ7XG4gICAgYXBpLmNsZWFyID0gY2xlYXI7XG4gICAgc3VwcG9ydCh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yICgpIHtcbiAgICBzdXBwb3J0KGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmYWxsYmFjayAoKSB7XG4gIGFwaS5uYW1lID0gJ0luZGV4ZWREQi1mYWxsYmFja1N0b3JlJztcbiAgYXBpLmdldCA9IHVuZGVmaW5lZEdldDtcbiAgYXBpLnNldCA9IGVucXVldWVTZXQ7XG4gIGFwaS5jbGVhciA9IG5vb3A7XG59XG5cbmZ1bmN0aW9uIHVuZGVmaW5lZEdldCAoc3RvcmUsIGtleSwgZG9uZSkge1xuICAoZG9uZSB8fCBrZXkpKG51bGwsIGRvbmUgPyBudWxsIDogW10pO1xufVxuXG5mdW5jdGlvbiBlbnF1ZXVlU2V0IChzdG9yZSwga2V5LCAgdmFsdWUsIGRvbmUpIHtcbiAgdmFyIG5leHQgPSBkb25lIHx8IG5vb3A7XG4gIGlmIChzdXBwb3J0cyA9PT0gZmFsc2UpIHtcbiAgICBuZXh0KG51bGwpOyByZXR1cm47XG4gIH1cbiAgaWYgKHNldFF1ZXVlLmxlbmd0aCA+IDEwKSB7IC8vIGxldCdzIG5vdCB3YXN0ZSBhbnkgbW9yZSBtZW1vcnlcbiAgICBuZXh0KG5ldyBFcnJvcignRUZVTExRVUVVRScpKTsgcmV0dXJuO1xuICB9XG4gIHNldFF1ZXVlLnB1c2goeyBzdG9yZTogc3RvcmUsIGtleToga2V5LCB2YWx1ZTogdmFsdWUsIGRvbmU6IG5leHQgfSk7XG59XG5cbmZ1bmN0aW9uIGRyYWluU2V0ICgpIHtcbiAgaWYgKHN1cHBvcnRzID09PSBmYWxzZSkge1xuICAgIHNldFF1ZXVlID0gW107XG4gICAgcmV0dXJuO1xuICB9XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1tpZGJdIGRyYWluaW5nIHNldFF1ZXVlICglcyBpdGVtcyknLCBzZXRRdWV1ZS5sZW5ndGgpO1xuICB3aGlsZSAoc2V0UXVldWUubGVuZ3RoKSB7XG4gICAgdmFyIGl0ZW0gPSBzZXRRdWV1ZS5zaGlmdCgpO1xuICAgIHNldChpdGVtLnN0b3JlLCBpdGVtLmtleSwgaXRlbS52YWx1ZSwgaXRlbS5kb25lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBxdWVyeSAob3AsIHN0b3JlLCB2YWx1ZSwgZG9uZSkge1xuICB2YXIgbmV4dCA9IGRvbmUgfHwgbm9vcDtcbiAgdmFyIHJlcSA9IGRiLnRyYW5zYWN0aW9uKHN0b3JlLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUoc3RvcmUpW29wXSh2YWx1ZSk7XG5cbiAgcmVxLm9uc3VjY2VzcyA9IHN1Y2Nlc3M7XG4gIHJlcS5vbmVycm9yID0gZXJyb3I7XG5cbiAgZnVuY3Rpb24gc3VjY2VzcyAoKSB7XG4gICAgbmV4dChudWxsLCByZXEucmVzdWx0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yICgpIHtcbiAgICBuZXh0KG5ldyBFcnJvcignVGF1bnVzIGNhY2hlIHF1ZXJ5IGZhaWxlZCBhdCBJbmRleGVkREIhJykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5Q29sbGVjdGlvbiAoc3RvcmUsIGRvbmUpIHtcbiAgdmFyIG5leHQgPSBkb25lIHx8IG5vb3A7XG4gIHZhciB0eCA9IGRiLnRyYW5zYWN0aW9uKHN0b3JlLCAncmVhZG9ubHknKTtcbiAgdmFyIHMgPSB0eC5vYmplY3RTdG9yZShzdG9yZSk7XG4gIHZhciByZXEgPSBzLm9wZW5DdXJzb3IoKTtcbiAgdmFyIGl0ZW1zID0gW107XG5cbiAgcmVxLm9uc3VjY2VzcyA9IHN1Y2Nlc3M7XG4gIHJlcS5vbmVycm9yID0gZXJyb3I7XG4gIHR4Lm9uY29tcGxldGUgPSBjb21wbGV0ZTtcblxuICBmdW5jdGlvbiBjb21wbGV0ZSAoKSB7XG4gICAgbmV4dChudWxsLCBpdGVtcyk7XG4gIH1cblxuICBmdW5jdGlvbiBzdWNjZXNzIChlKSB7XG4gICAgdmFyIGN1cnNvciA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICBpZiAoY3Vyc29yKSB7XG4gICAgICBpdGVtcy5wdXNoKGN1cnNvci52YWx1ZSk7XG4gICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlcnJvciAoKSB7XG4gICAgbmV4dChuZXcgRXJyb3IoJ1RhdW51cyBjYWNoZSBxdWVyeUNvbGxlY3Rpb24gZmFpbGVkIGF0IEluZGV4ZWREQiEnKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYXIgKHN0b3JlLCBkb25lKSB7XG4gIHZhciBuZXh0ID0gZG9uZSB8fCBub29wO1xuICB2YXIgdHggPSBkYi50cmFuc2FjdGlvbihzdG9yZSwgJ3JlYWR3cml0ZScpO1xuICB2YXIgcyA9IHR4Lm9iamVjdFN0b3JlKHN0b3JlKTtcbiAgdmFyIHJlcSA9IHMuY2xlYXIoKTtcbiAgdmFyIGl0ZW1zID0gW107XG5cbiAgcmVxLm9uZXJyb3IgPSBlcnJvcjtcbiAgdHgub25jb21wbGV0ZSA9IGNvbXBsZXRlO1xuXG4gIGZ1bmN0aW9uIGNvbXBsZXRlICgpIHtcbiAgICBuZXh0KG51bGwsIGl0ZW1zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVycm9yICgpIHtcbiAgICBuZXh0KG5ldyBFcnJvcignVGF1bnVzIGNhY2hlIGNsZWFyIGZhaWxlZCBhdCBJbmRleGVkREIhJykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldCAoc3RvcmUsIGtleSwgZG9uZSkge1xuICBpZiAoZG9uZSA9PT0gdm9pZCAwKSB7XG4gICAgcXVlcnlDb2xsZWN0aW9uKHN0b3JlLCBrZXkpO1xuICB9IGVsc2Uge1xuICAgIHF1ZXJ5KCdnZXQnLCBzdG9yZSwga2V5LCBkb25lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXQgKHN0b3JlLCBrZXksIHZhbHVlLCBkb25lKSB7XG4gIHZhciBuZXh0ID0gb25jZShkb25lIHx8IG5vb3ApO1xuICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbaWRiXSBzdG9yaW5nICVzLCBpbiAlcyBkYicsIGtleSwgc3RvcmUsIHZhbHVlKTtcbiAgdmFsdWVba2V5UGF0aF0gPSBrZXk7XG4gIHF1ZXJ5KCdhZGQnLCBzdG9yZSwgdmFsdWUsIG5leHQpOyAvLyBhdHRlbXB0IHRvIGluc2VydFxuICBxdWVyeSgncHV0Jywgc3RvcmUsIHZhbHVlLCBuZXh0KTsgLy8gYXR0ZW1wdCB0byB1cGRhdGVcbn1cblxuZnVuY3Rpb24gZHJhaW5UZXN0ZWQgKCkge1xuICB3aGlsZSAodGVzdGVkUXVldWUubGVuZ3RoKSB7XG4gICAgdGVzdGVkUXVldWUuc2hpZnQoKShzdXBwb3J0cyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGVzdGVkIChmbikge1xuICBpZiAoc3VwcG9ydHMgIT09IHZvaWQgMCkge1xuICAgIGZuKHN1cHBvcnRzKTtcbiAgfSBlbHNlIHtcbiAgICB0ZXN0ZWRRdWV1ZS5wdXNoKGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdXBwb3J0ICh2YWx1ZSkge1xuICBpZiAoc3VwcG9ydHMgIT09IHZvaWQgMCkge1xuICAgIHJldHVybjsgLy8gc2FuaXR5XG4gIH1cbiAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW2lkYl0gdGVzdCByZXN1bHQgJXMsIGRiICVzJywgdmFsdWUsIHZhbHVlID8gJ3JlYWR5JyA6ICd1bmF2YWlsYWJsZScpO1xuICBzdXBwb3J0cyA9IHZhbHVlO1xuICBkcmFpblRlc3RlZCgpO1xuICBkcmFpblNldCgpO1xufVxuXG5mdW5jdGlvbiBmYWlsZWQgKCkge1xuICBzdXBwb3J0KGZhbHNlKTtcbn1cblxuZmFsbGJhY2soKTtcbnRlc3QoKTtcbnNldFRpbWVvdXQoZmFpbGVkLCA2MDApOyAvLyB0aGUgdGVzdCBjYW4gdGFrZSBzb21ld2hlcmUgbmVhciAzMDBtcyB0byBjb21wbGV0ZVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwaTtcblxuYXBpLnRlc3RlZCA9IHRlc3RlZDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJhdyA9IHt9O1xuXG5mdW5jdGlvbiBub29wICgpIHt9XG5cbmZ1bmN0aW9uIGVuc3VyZSAoc3RvcmUpIHtcbiAgaWYgKCFyYXdbc3RvcmVdKSB7IHJhd1tzdG9yZV0gPSB7fTsgfVxufVxuXG5mdW5jdGlvbiBnZXQgKHN0b3JlLCBrZXksIGRvbmUpIHtcbiAgZW5zdXJlKHN0b3JlKTtcbiAgZG9uZShudWxsLCByYXdbc3RvcmVdW2tleV0pO1xufVxuXG5mdW5jdGlvbiBzZXQgKHN0b3JlLCBrZXksIHZhbHVlLCBkb25lKSB7XG4gIGVuc3VyZShzdG9yZSk7XG4gIHJhd1tzdG9yZV1ba2V5XSA9IHZhbHVlO1xuICAoZG9uZSB8fCBub29wKShudWxsKTtcbn1cblxuZnVuY3Rpb24gY2xlYXIgKCkge1xuICByYXcgPSB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG5hbWU6ICdtZW1vcnlTdG9yZScsXG4gIGdldDogZ2V0LFxuICBzZXQ6IHNldCxcbiAgY2xlYXI6IGNsZWFyXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZyA9IGdsb2JhbDtcblxuLy8gZmFsbGJhY2sgdG8gZW1wdHkgb2JqZWN0IGJlY2F1c2UgdGVzdHNcbm1vZHVsZS5leHBvcnRzID0gZy5pbmRleGVkREIgfHwgZy5tb3pJbmRleGVkREIgfHwgZy53ZWJraXRJbmRleGVkREIgfHwgZy5tc0luZGV4ZWREQiB8fCB7fTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJlc29sdmUgPSByZXF1aXJlKCcuLi9saWIvcmVzb2x2ZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVzb2x2ZTogcmVzb2x2ZSxcbiAgdG9KU09OOiBmdW5jdGlvbiAoKSB7fVxufTtcbiIsIi8qIGpzaGludCBzdHJpY3Q6ZmFsc2UgKi9cbi8vIHRoaXMgbW9kdWxlIGRvZXNuJ3QgdXNlIHN0cmljdCwgc28gZXZhbCBpcyB1bnN0cmljdC5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29kZSkge1xuICAvKiBqc2hpbnQgZXZpbDp0cnVlICovXG4gIHJldHVybiBldmFsKGNvZGUpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIGhhcmRSZWRpcmVjdCA9IHJlcXVpcmUoJy4vaGFyZFJlZGlyZWN0Jyk7XG52YXIgbG9jYXRpb24gPSByZXF1aXJlKCcuL2dsb2JhbC9sb2NhdGlvbicpO1xuXG5mdW5jdGlvbiB2ZXJzaW9uQ2hlY2sgKHZlcnNpb24sIGhyZWYpIHtcbiAgdmFyIG1hdGNoID0gdmVyc2lvbiA9PT0gc3RhdGUudmVyc2lvbjtcbiAgaWYgKG1hdGNoID09PSBmYWxzZSkge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1thY3RpdmF0b3JdIHZlcnNpb24gY2hhbmdlIChpcyBcIiVzXCIsIHdhcyBcIiVzXCIpLCByZWRpcmVjdGluZyB0byAlcycsIHZlcnNpb24sIHN0YXRlLnZlcnNpb24sIGhyZWYpO1xuICAgIGhhcmRSZWRpcmVjdChocmVmIHx8IGxvY2F0aW9uLmhyZWYpOyAvLyB2ZXJzaW9uIGNoYW5nZSBkZW1hbmRzIGZhbGxiYWNrIHRvIHN0cmljdCBuYXZpZ2F0aW9uXG4gIH1cbiAgcmV0dXJuIG1hdGNoO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHZlcnNpb25DaGVjaztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNsb25lID0gcmVxdWlyZSgnLi9jbG9uZScpO1xudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xudmFyIGVlID0gcmVxdWlyZSgnY29udHJhL2VtaXR0ZXInKTtcbnZhciBlbWl0dGVyID0gcmVxdWlyZSgnLi9lbWl0dGVyJyk7XG52YXIgZmV0Y2hlciA9IHJlcXVpcmUoJy4vZmV0Y2hlcicpO1xudmFyIGRlZmVycmFsID0gcmVxdWlyZSgnLi9kZWZlcnJhbCcpO1xudmFyIHRlbXBsYXRpbmdBUEkgPSByZXF1aXJlKCcuL3RlbXBsYXRpbmdBUEknKTtcbnZhciBkb2MgPSByZXF1aXJlKCcuL2dsb2JhbC9kb2N1bWVudCcpO1xuXG5mdW5jdGlvbiBub29wICgpIHt9XG5cbmZ1bmN0aW9uIHZpZXcgKGNvbnRhaW5lciwgZW5mb3JjZWRBY3Rpb24sIG1vZGVsLCByb3V0ZSwgb3B0aW9ucykge1xuICB2YXIgYWN0aW9uID0gZW5mb3JjZWRBY3Rpb24gfHwgbW9kZWwgJiYgbW9kZWwuYWN0aW9uIHx8IHJvdXRlICYmIHJvdXRlLmFjdGlvbjtcbiAgdmFyIGRlbWFuZHMgPSBkZWZlcnJhbC5uZWVkcyhhY3Rpb24pO1xuICB2YXIgYXBpID0gZWUoKTtcblxuICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbdmlld10gcmVuZGVyaW5nIHZpZXcgJXMgd2l0aCBbJXNdIGRlbWFuZHMnLCBhY3Rpb24sIGRlbWFuZHMuam9pbignLCcpKTtcblxuICBpZiAoZGVtYW5kcy5sZW5ndGgpIHtcbiAgICBwdWxsKCk7XG4gIH0gZWxzZSB7XG4gICAgcmVhZHkoKTtcbiAgfVxuXG4gIHJldHVybiBhcGk7XG5cbiAgZnVuY3Rpb24gcHVsbCAoKSB7XG4gICAgdmFyIHZpY3RpbSA9IHJvdXRlIHx8IHN0YXRlLnJvdXRlO1xuICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgc291cmNlOiAnaGlqYWNraW5nJyxcbiAgICAgIGhpamFja2VyOiBhY3Rpb24sXG4gICAgICBlbGVtZW50OiBjb250YWluZXJcbiAgICB9O1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1t2aWV3XSBoaWphY2tpbmcgJXMgZm9yIGFjdGlvbiAlcycsIHZpY3RpbS51cmwsIGFjdGlvbik7XG4gICAgZmV0Y2hlcih2aWN0aW0sIGNvbnRleHQsIHJlYWR5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWR5ICgpIHtcbiAgICB2YXIgaHRtbDtcbiAgICB2YXIgY29udHJvbGxlciA9IGdldENvbXBvbmVudCgnY29udHJvbGxlcnMnLCBhY3Rpb24pO1xuICAgIHZhciBpbnRlcm5hbHMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmIChpbnRlcm5hbHMucmVuZGVyICE9PSBmYWxzZSkge1xuICAgICAgaHRtbCA9IHJlbmRlcihhY3Rpb24sIG1vZGVsLCByb3V0ZSk7XG4gICAgICBjb250YWluZXIgPSAoaW50ZXJuYWxzLmRyYXcgfHwgaW5zZXJ0KShjb250YWluZXIsIGh0bWwpIHx8IGNvbnRhaW5lcjtcbiAgICAgIHNldFRpbWVvdXQoZG9uZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1t2aWV3XSBub3QgcmVuZGVyaW5nICVzJywgYWN0aW9uKTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lciA9PT0gc3RhdGUuY29udGFpbmVyKSB7XG4gICAgICBlbWl0dGVyLmVtaXQoJ2NoYW5nZScsIHJvdXRlLCBtb2RlbCk7XG4gICAgfVxuICAgIGVtaXR0ZXIuZW1pdCgncmVuZGVyJywgY29udGFpbmVyLCBtb2RlbCwgcm91dGUpO1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1t2aWV3XSAlcyBjbGllbnQtc2lkZSBjb250cm9sbGVyIGZvciAlcycsIGNvbnRyb2xsZXIgPyAnZXhlY3V0aW5nJyA6ICdubycsIGFjdGlvbik7XG4gICAgaWYgKHR5cGVvZiBjb250cm9sbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb250cm9sbGVyKG1vZGVsLCBjb250YWluZXIsIHJvdXRlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb25lICgpIHtcbiAgICAgIGFwaS5lbWl0KCdyZW5kZXInLCBodG1sLCBjb250YWluZXIpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXIgKGFjdGlvbiwgbW9kZWwsIHJvdXRlKSB7XG4gIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1t2aWV3XSByZW5kZXJpbmcgJXMgd2l0aCBtb2RlbCcsIGFjdGlvbiwgbW9kZWwpO1xuICB2YXIgdGVtcGxhdGUgPSBnZXRDb21wb25lbnQoJ3RlbXBsYXRlcycsIGFjdGlvbik7XG4gIGlmICh0eXBlb2YgdGVtcGxhdGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudC1zaWRlIFwiJyArIGFjdGlvbiArICdcIiB0ZW1wbGF0ZSBub3QgZm91bmQnKTtcbiAgfVxuICB2YXIgY2xvbmVkID0gY2xvbmUobW9kZWwpO1xuICBjbG9uZWQudGF1bnVzID0gdGVtcGxhdGluZ0FQSTtcbiAgY2xvbmVkLnJvdXRlID0gcm91dGUgfHwgc3RhdGUucm91dGU7XG4gIGNsb25lZC5yb3V0ZS50b0pTT04gPSBub29wO1xuICB0cnkge1xuICAgIHJldHVybiB0ZW1wbGF0ZShjbG9uZWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciByZW5kZXJpbmcgXCInICsgYWN0aW9uICsgJ1wiIHZpZXcgdGVtcGxhdGVcXG4nICsgZS5zdGFjayk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50ICh0eXBlLCBhY3Rpb24pIHtcbiAgdmFyIGNvbXBvbmVudCA9IHN0YXRlW3R5cGVdW2FjdGlvbl07XG4gIHZhciB0cmFuc3BvcnQgPSB0eXBlb2YgY29tcG9uZW50O1xuICBpZiAodHJhbnNwb3J0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxuICBpZiAoY29tcG9uZW50ICYmIGNvbXBvbmVudFtzdGF0ZS52ZXJzaW9uXSkge1xuICAgIHJldHVybiBjb21wb25lbnRbc3RhdGUudmVyc2lvbl0uZm47IC8vIGRlZmVycmVkcyBhcmUgc3RvcmVkIGFzIHt2MTp7Zm59LHYyOntmbn19XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIG1vZGUgKGRyYXcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHBhcnRpYWwgKGNvbnRhaW5lciwgYWN0aW9uLCBtb2RlbCkge1xuICAgIGdsb2JhbC5ERUJVRyAmJiBnbG9iYWwuREVCVUcoJ1t2aWV3XSByZW5kZXJpbmcgcGFydGlhbCAlcycsIGFjdGlvbik7XG4gICAgcmV0dXJuIHZpZXcoY29udGFpbmVyLCBhY3Rpb24sIG1vZGVsLCBudWxsLCB7IGRyYXc6IGRyYXcgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGluc2VydCAoY29udGFpbmVyLCBodG1sKSB7XG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xufVxuXG5mdW5jdGlvbiByZXBsYWNlciAoaHRtbCwgbmV4dCkge1xuICB2YXIgcGxhY2Vob2xkZXIgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHBsYWNlaG9sZGVyLmlubmVySFRNTCA9IGh0bWw7XG4gIHdoaWxlIChwbGFjZWhvbGRlci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICBuZXh0KHBsYWNlaG9sZGVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlIChjb250YWluZXIsIGh0bWwpIHtcbiAgdmFyIGZpcnN0O1xuICByZXBsYWNlcihodG1sLCBiZWZvcmUpO1xuICBjb250YWluZXIucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICByZXR1cm4gZmlyc3Q7XG4gIGZ1bmN0aW9uIGJlZm9yZSAocGxhY2Vob2xkZXIpIHtcbiAgICB2YXIgZWwgPSBwbGFjZWhvbGRlci5jaGlsZHJlblswXTtcbiAgICBpZiAoIWZpcnN0KSB7IGZpcnN0ID0gZWw7IH1cbiAgICBjb250YWluZXIucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWwsIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwZW5kVG8gKGNvbnRhaW5lciwgaHRtbCkge1xuICByZXBsYWNlcihodG1sLCBmdW5jdGlvbiBhcHBlbmQgKHBsYWNlaG9sZGVyKSB7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBsYWNlaG9sZGVyLmNoaWxkcmVuWzBdKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHByZXBlbmRUbyAoY29udGFpbmVyLCBodG1sKSB7XG4gIHJlcGxhY2VyKGh0bWwsIGZ1bmN0aW9uIGFwcGVuZCAocCkge1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUocC5jaGlsZHJlbltwLmNoaWxkcmVuLmxlbmd0aCAtIDFdLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gIH0pO1xufVxuXG52aWV3LnBhcnRpYWwgPSBtb2RlKCk7XG52aWV3LnBhcnRpYWwucmVwbGFjZSA9IG1vZGUocmVwbGFjZSk7XG52aWV3LnBhcnRpYWwuYXBwZW5kVG8gPSBtb2RlKGFwcGVuZFRvKTtcbnZpZXcucGFydGlhbC5wcmVwZW5kVG8gPSBtb2RlKHByZXBlbmRUbyk7XG5cbm1vZHVsZS5leHBvcnRzID0gdmlldztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHhociA9IHJlcXVpcmUoJ3hocicpO1xudmFyIHN1bSA9IHJlcXVpcmUoJ2hhc2gtc3VtJyk7XG52YXIgdGVtcG9yaXplID0gcmVxdWlyZSgndGVtcG9yaXplJyk7XG5cbmZ1bmN0aW9uIHJlcXVlc3QgKHVybCwgb3B0aW9ucywgZW5kKSB7XG4gIHZhciBkaXNwbGFjZWQgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJztcbiAgdmFyIGhhc1VybCA9IHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnO1xuICB2YXIgdXNlcjtcbiAgdmFyIGRvbmUgPSBkaXNwbGFjZWQgPyBvcHRpb25zIDogZW5kO1xuXG4gIGlmIChoYXNVcmwpIHtcbiAgICBpZiAoZGlzcGxhY2VkKSB7XG4gICAgICB1c2VyID0geyB1cmw6IHVybCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VyID0gb3B0aW9ucztcbiAgICAgIHVzZXIudXJsID0gdXJsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB1c2VyID0gdXJsO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgaGVhZGVyczogeyBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gIH07XG4gIE9iamVjdC5rZXlzKHVzZXIpLmZvckVhY2gob3ZlcndyaXRlKTtcblxuICB2YXIgcmVxO1xuICB2YXIgaGFzaCA9IHN1bShvKSArICc6JyArIG8udXJsO1xuICB2YXIgY2FjaGVkID0gdHJ1ZTtcblxuICB0ZW1wb3JpemUoe1xuICAgIG5hbWU6IGhhc2gsXG4gICAgc2Vjb25kczogMSxcbiAgICBsb2FkOiBsb2FkXG4gIH0sIGxvYWRlZCk7XG5cbiAgcmV0dXJuIHJlcTtcblxuICBmdW5jdGlvbiBvdmVyd3JpdGUgKHByb3ApIHtcbiAgICBvW3Byb3BdID0gdXNlcltwcm9wXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWQgKGRvbmUpIHtcbiAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbeGhyXSAlcyAlcycsIG8ubWV0aG9kIHx8ICdHRVQnLCBvLnVybCk7XG4gICAgY2FjaGVkID0gZmFsc2U7XG4gICAgdmFyIHJlc3VsdCA9IHhocihvLCBoYW5kbGUpO1xuICAgIGRvbmUobnVsbCwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZGVkIChyZXN1bHQpIHtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICBnbG9iYWwuREVCVUcgJiYgZ2xvYmFsLkRFQlVHKCdbeGhyXSAlcyAlcyAoY2FjaGUpJywgby5tZXRob2QgfHwgJ0dFVCcsIG8udXJsKTtcbiAgICB9XG4gICAgcmVxID0gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlIChlcnIsIHJlcywgYm9keSkge1xuICAgIGlmIChlcnIgJiYgIXJlcS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkge1xuICAgICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW3hocl0gJXMgJXMgKGFib3J0ZWQpJywgby5tZXRob2QgfHwgJ0dFVCcsIG8udXJsKTtcbiAgICAgIGRvbmUobmV3IEVycm9yKCdhYm9ydGVkJyksIG51bGwsIHJlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyeSAge1xuICAgICAgICByZXMuYm9keSA9IGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBzdXBwcmVzc1xuICAgICAgfVxuICAgICAgZ2xvYmFsLkRFQlVHICYmIGdsb2JhbC5ERUJVRygnW3hocl0gJXMgJXMgKGRvbmUpJywgby5tZXRob2QgfHwgJ0dFVCcsIG8udXJsKTtcbiAgICAgIGRvbmUoZXJyLCBib2R5LCByZXMpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVlc3Q7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmZXJyZWQgKGFjdGlvbiwgcnVsZXMpIHtcbiAgcmV0dXJuIHJ1bGVzLnNvbWUoZmFpbGVkKTtcbiAgZnVuY3Rpb24gZmFpbGVkIChjaGFsbGVuZ2UpIHtcbiAgICB2YXIgbGVmdCA9IGNoYWxsZW5nZS5zcGxpdCgnLycpO1xuICAgIHZhciByaWdodCA9IGFjdGlvbi5zcGxpdCgnLycpO1xuICAgIHZhciBscGFydCwgcnBhcnQ7XG4gICAgd2hpbGUgKGxlZnQubGVuZ3RoKSB7XG4gICAgICBscGFydCA9IGxlZnQuc2hpZnQoKTtcbiAgICAgIHJwYXJ0ID0gcmlnaHQuc2hpZnQoKTtcbiAgICAgIGlmIChscGFydCAhPT0gJz8nICYmIGxwYXJ0ICE9PSBycGFydCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmRpZ2l0cyA9IC9eWystXT9cXGQrJC87XG5cbmZ1bmN0aW9uIHF1ZXJ5cGFyc2VyIChxdWVyeSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMocXVlcnkpLnJlZHVjZShwYXJzZWQsIHt9KTtcbiAgZnVuY3Rpb24gcGFyc2VkIChyZXN1bHQsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gZmllbGQocXVlcnlba2V5XSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaWVsZCAodmFsdWUpIHtcbiAgaWYgKHJkaWdpdHMudGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgfVxuICBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSAndHJ1ZScpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5xdWVyeXBhcnNlci5maWVsZCA9IGZpZWxkO1xubW9kdWxlLmV4cG9ydHMgPSBxdWVyeXBhcnNlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLypcbiAqICMgYSBuYW1lZCBwYXJhbWV0ZXIgaW4gdGhlICc6bmFtZScgZm9ybWF0XG4gKiA6KFthLXpdKylcbiAqXG4gKiAjIG1hdGNoZXMgYSByZWdleHAgdGhhdCBjb25zdHJhaW50cyB0aGUgcG9zc2libGUgdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlclxuICogIyBlLmcgJzpuYW1lKFthLXorXSknXG4gKiAoPzpcXCgoPyFbKis/XSkoPzpbXlxcclxcblxcWy9cXFxcXXxcXFxcLnxcXFsoPzpbXlxcclxcblxcXVxcXFxdfFxcXFwuKSpcXF0pK1xcKSk/XG4gKlxuICogIyB0aGUgcGFyYW1ldGVyIG1heSBiZSBvcHRpb25hbCwgZS5nICc6bmFtZT8nXG4gKiAoXFw/KT9cbiAqXG4gKiAtIGk6IHJvdXRlcyBhcmUgdHlwaWNhbGx5IGxvd2VyLWNhc2UgYnV0IHRoZXkgbWF5IGJlIG1peGVkIGNhc2UgYXMgd2VsbFxuICogLSBnOiByb3V0ZXMgbWF5IGhhdmUgemVybyBvciBtb3JlIG5hbWVkIHBhcmFtZXRlcnNcbiAqXG4gKiByZWdleHBlcjogaHR0cDovL3JlZ2V4cGVyLmNvbS8jJTJGJTNBKCU1QmEteiU1RCUyQikoJTNGJTNBJTVDKCglM0YhJTVCKiUyQiUzRiU1RCkoJTNGJTNBJTVCJTVFJTVDciU1Q24lNUMlNUIlMkYlNUMlNUMlNUQlN0MlNUMlNUMuJTdDJTVDJTVCKCUzRiUzQSU1QiU1RSU1Q3IlNUNuJTVDJTVEJTVDJTVDJTVEJTdDJTVDJTVDLikqJTVDJTVEKSUyQiU1QykpJTNGKCU1QyUzRiklM0YlMkZpZ1xuICovXG5cbnZhciBkZWZhdWx0TWF0Y2hlciA9IC86KFthLXpdKykoPzpcXCgoPyFbKis/XSkoPzpbXlxcclxcblxcWy9cXFxcXXxcXFxcLnxcXFsoPzpbXlxcclxcblxcXVxcXFxdfFxcXFwuKSpcXF0pK1xcKSk/KFxcPyk/L2lnO1xudmFyIHJ0cmFpbGluZ3NsYXNoID0gL1xcLyQvO1xudmFyIHJvdXRlcztcbnZhciBtYXRjaGVyO1xuXG5mdW5jdGlvbiBmaW5kIChhY3Rpb24pIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCByb3V0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocm91dGVzW2ldLmFjdGlvbiA9PT0gYWN0aW9uKSB7XG4gICAgICByZXR1cm4gcm91dGVzW2ldLnJvdXRlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gdXNlIChtKSB7XG4gIG1hdGNoZXIgPSBtIHx8IGRlZmF1bHRNYXRjaGVyO1xufVxuXG5mdW5jdGlvbiBzZXQgKHIpIHtcbiAgcm91dGVzID0gciB8fCBbXTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZSAoYWN0aW9uLCBkYXRhKSB7XG4gIHZhciBwcm9wcyA9IGRhdGEgfHwge307XG4gIHZhciByb3V0ZSA9IGZpbmQoYWN0aW9uKTtcbiAgaWYgKHJvdXRlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIHFzID0gcXVlcnlTdHJpbmcocHJvcHMuYXJncyk7XG4gIHZhciBwYXRobmFtZSA9IHJvdXRlLnJlcGxhY2UobWF0Y2hlciwgcmVwbGFjZXIpO1xuICBpZiAocGF0aG5hbWUubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiBwYXRobmFtZS5yZXBsYWNlKHJ0cmFpbGluZ3NsYXNoLCAnJykgKyBxcztcbiAgfVxuICByZXR1cm4gcGF0aG5hbWUgKyBxcztcblxuICBmdW5jdGlvbiByZXBsYWNlciAobWF0Y2gsIGtleSwgb3B0aW9uYWwpIHtcbiAgICB2YXIgdmFsdWUgPSBwcm9wc1trZXldO1xuICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gcHJvcHNba2V5XTtcbiAgICB9XG4gICAgaWYgKGtleSBpbiBwcm9wcyB8fCBvcHRpb25hbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JvdXRlICcgKyByb3V0ZSArICcgZXhwZWN0ZWQgXCInICsga2V5ICsgJ1wiIHBhcmFtZXRlci4nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHF1ZXJ5U3RyaW5nIChhcmdzKSB7XG4gICAgdmFyIHBhcnRzID0gYXJncyB8fCB7fTtcbiAgICB2YXIgcXVlcnkgPSBPYmplY3Qua2V5cyhwYXJ0cykubWFwKGtleVZhbHVlUGFpcikuam9pbignJicpO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcmV0dXJuICc/JyArIHF1ZXJ5O1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG5cbiAgICBmdW5jdGlvbiBrZXlWYWx1ZVBhaXIgKHByb3ApIHtcbiAgICAgIHZhciB2YWx1ZSA9IHBhcnRzW3Byb3BdO1xuICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDAgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb3AgKyAnPScgKyB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxudXNlKCk7XG5zZXQoKTtcblxucmVzb2x2ZS51c2UgPSB1c2U7XG5yZXNvbHZlLnNldCA9IHNldDtcblxubW9kdWxlLmV4cG9ydHMgPSByZXNvbHZlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdGlja3kgPSByZXF1aXJlKCd0aWNreScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhdG9hID0gcmVxdWlyZSgnYXRvYScpO1xudmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtaXR0ZXIgKHRoaW5nLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGV2dCA9IHt9O1xuICBpZiAodGhpbmcgPT09IHVuZGVmaW5lZCkgeyB0aGluZyA9IHt9OyB9XG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgaWYgKCFldnRbdHlwZV0pIHtcbiAgICAgIGV2dFt0eXBlXSA9IFtmbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2dFt0eXBlXS5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxuICAgIHRoaW5nLm9uKHR5cGUsIGZuKTtcbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoYyA9PT0gMSkge1xuICAgICAgZGVsZXRlIGV2dFt0eXBlXTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDApIHtcbiAgICAgIGV2dCA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXQgPSBldnRbdHlwZV07XG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxuICAgICAgZXQuc3BsaWNlKGV0LmluZGV4T2YoZm4pLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5lbWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGluZy5lbWl0dGVyU25hcHNob3QoYXJncy5zaGlmdCgpKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZXQgPSAoZXZ0W3R5cGVdIHx8IFtdKS5zbGljZSgwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgICB2YXIgY3R4ID0gdGhpcyB8fCB0aGluZztcbiAgICAgIGlmICh0eXBlID09PSAnZXJyb3InICYmIG9wdHMudGhyb3dzICE9PSBmYWxzZSAmJiAhZXQubGVuZ3RoKSB7IHRocm93IGFyZ3MubGVuZ3RoID09PSAxID8gYXJnc1swXSA6IGFyZ3M7IH1cbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XG4gICAgICAgIGlmIChvcHRzLmFzeW5jKSB7IGRlYm91bmNlKGxpc3RlbiwgYXJncywgY3R4KTsgfSBlbHNlIHsgbGlzdGVuLmFwcGx5KGN0eCwgYXJncyk7IH1cbiAgICAgICAgaWYgKGxpc3Rlbi5fb25jZSkgeyB0aGluZy5vZmYodHlwZSwgbGlzdGVuKTsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpbmc7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHRoaW5nO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXRvYSAoYSwgbikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgbik7IH1cbiIsInZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XG5pZiAoc2kpIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9O1xufSBlbHNlIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRUaW1lb3V0KGZuLCAwKTsgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aWNrOyIsIlxudmFyIE5hdGl2ZUN1c3RvbUV2ZW50ID0gZ2xvYmFsLkN1c3RvbUV2ZW50O1xuXG5mdW5jdGlvbiB1c2VOYXRpdmUgKCkge1xuICB0cnkge1xuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XG4gICAgcmV0dXJuICAnY2F0JyA9PT0gcC50eXBlICYmICdiYXInID09PSBwLmRldGFpbC5mb287XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ3Jvc3MtYnJvd3NlciBgQ3VzdG9tRXZlbnRgIGNvbnN0cnVjdG9yLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC5DdXN0b21FdmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxuXG4vLyBJRSA+PSA5XG4nZnVuY3Rpb24nID09PSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICB9IGVsc2Uge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcbiAgfVxuICByZXR1cm4gZTtcbn0gOlxuXG4vLyBJRSA8PSA4XG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgZS50eXBlID0gdHlwZTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuYnViYmxlcyA9IEJvb2xlYW4ocGFyYW1zLmJ1YmJsZXMpO1xuICAgIGUuY2FuY2VsYWJsZSA9IEJvb2xlYW4ocGFyYW1zLmNhbmNlbGFibGUpO1xuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgfSBlbHNlIHtcbiAgICBlLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICBlLmRldGFpbCA9IHZvaWQgMDtcbiAgfVxuICByZXR1cm4gZTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnY3VzdG9tLWV2ZW50Jyk7XG52YXIgZG9jID0gZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHdyYXAoZWwsIHR5cGUsIGZuKSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgdW53cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiBmYWJyaWNhdGVFdmVudCAoZWwsIHR5cGUsIG1vZGVsKSB7XG4gIHZhciBlID0gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgaWYgKGVsLmRpc3BhdGNoRXZlbnQpIHtcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmZpcmVFdmVudCgnb24nICsgdHlwZSwgZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JhcHBlckZhY3RvcnkgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcHBlciAob3JpZ2luYWxFdmVudCkge1xuICAgIHZhciBlID0gb3JpZ2luYWxFdmVudCB8fCBnbG9iYWwuZXZlbnQ7XG4gICAgZS50YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCA9IGUucHJldmVudERlZmF1bHQgfHwgZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCkgeyBlLnJldHVyblZhbHVlID0gZmFsc2U7IH07XG4gICAgZS5zdG9wUHJvcGFnYXRpb24gPSBlLnN0b3BQcm9wYWdhdGlvbiB8fCBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24gKCkgeyBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7IH07XG4gICAgZS53aGljaCA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xuICAgIGZuLmNhbGwoZWwsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB3cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIHdyYXBwZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKSB8fCB3cmFwcGVyRmFjdG9yeShlbCwgdHlwZSwgZm4pO1xuICBoYXJkQ2FjaGUucHVzaCh7XG4gICAgd3JhcHBlcjogd3JhcHBlcixcbiAgICBlbGVtZW50OiBlbCxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGZuOiBmblxuICB9KTtcbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbmZ1bmN0aW9uIHVud3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpID0gZmluZChlbCwgdHlwZSwgZm4pO1xuICBpZiAoaSkge1xuICAgIHZhciB3cmFwcGVyID0gaGFyZENhY2hlW2ldLndyYXBwZXI7XG4gICAgaGFyZENhY2hlLnNwbGljZShpLCAxKTsgLy8gZnJlZSB1cCBhIHRhZCBvZiBtZW1vcnlcbiAgICByZXR1cm4gd3JhcHBlcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGksIGl0ZW07XG4gIGZvciAoaSA9IDA7IGkgPCBoYXJkQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBpdGVtID0gaGFyZENhY2hlW2ldO1xuICAgIGlmIChpdGVtLmVsZW1lbnQgPT09IGVsICYmIGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBpdGVtLmZuID09PSBmbikge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZEV2ZW50LFxuICByZW1vdmU6IHJlbW92ZUV2ZW50LFxuICBmYWJyaWNhdGU6IGZhYnJpY2F0ZUV2ZW50XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJ2NvbnRyYS9lbWl0dGVyJyk7XG52YXIgZm9ybWl1bSA9IHJlcXVpcmUoJ2Zvcm1pdW0nKTtcbnZhciBmb3JtdWxhcmlvID0gcmVxdWlyZSgnZm9ybXVsYXJpbycpO1xudmFyIGZvcm1SZXNwb25zZUhhbmRsZXIgPSByZXF1aXJlKCcuL2xpYi9mb3JtUmVzcG9uc2VIYW5kbGVyJyk7XG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL2xpYi9zdGF0ZScpO1xudmFyIHRyYW5zZm9ybWVycyA9IFtdO1xudmFyIGdyYWR1YWwgPSBlbWl0dGVyKHtcbiAgaGlqYWNrOiBoaWphY2ssXG4gIHRyYW5zZm9ybTogZm9ybWl1bS50cmFuc2Zvcm0sXG4gIHN1Ym1pdDogc3VibWl0LFxuICBjb25maWd1cmU6IHN0YXRlLmNvbmZpZ3VyZVxufSk7XG5cbmZ1bmN0aW9uIG5vb3AgKCkge31cblxuZnVuY3Rpb24gaGlqYWNrIChlKSB7XG4gIHZhciBmb3JtID0gZS50YXJnZXQ7XG4gIHN1Ym1pdEZvcm0oZm9ybSk7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybSAoZm9ybSwgZG9uZSkge1xuICBmb3JtaXVtLnN1Ym1pdChmb3JtLCBoYW5kbGVyKTtcbiAgZnVuY3Rpb24gaGFuZGxlciAoZXJyLCBkYXRhKSB7XG4gICAgcmFpc2UoZXJyLCBkYXRhLCBmb3JtLCBkb25lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdWJtaXQgKG9wdGlvbnMsIGRvbmUpIHtcbiAgdmFyIGZvcm0gPSBvcHRpb25zLmZvcm07XG4gIGlmIChmb3JtKSB7XG4gICAgc3VibWl0Rm9ybShmb3JtLCBkb25lKTsgcmV0dXJuO1xuICB9XG4gIHZhciBmb3JtRGF0YSA9IGZvcm11bGFyaW8ob3B0aW9ucy5kYXRhKTtcbiAgdmFyIHJlcSA9IHtcbiAgICBtZXRob2Q6IG9wdGlvbnMubWV0aG9kLFxuICAgIGhlYWRlcnM6IGZvcm1EYXRhLmhlYWRlcnMsXG4gICAgYm9keTogZm9ybURhdGEuYm9keVxuICB9O1xuICByZXR1cm4gc3RhdGUudGF1bnVzLnhocihvcHRpb25zLmFjdGlvbiwgcmVxLCBoYW5kbGVyKTtcbiAgZnVuY3Rpb24gaGFuZGxlciAoZXJyLCBkYXRhKSB7XG4gICAgcmFpc2UoZXJyLCBkYXRhLCBudWxsLCBkb25lKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByYWlzZSAoZXJyLCBkYXRhLCBjb250ZXh0LCBkb25lKSB7XG4gIGlmIChlcnIpIHtcbiAgICBncmFkdWFsLmVtaXQuY2FsbChjb250ZXh0LCAnZXJyb3InLCBlcnIpO1xuICB9IGVsc2Uge1xuICAgIGdyYWR1YWwuZW1pdC5jYWxsKGNvbnRleHQsICdkYXRhJywgZGF0YSk7XG4gIH1cbiAgZ3JhZHVhbC5lbWl0LmNhbGwoY29udGV4dCwgJ3Jlc3BvbnNlJywgZXJyLCBkYXRhKTtcbiAgZm9ybVJlc3BvbnNlSGFuZGxlcihlcnIsIGRhdGEsIGNvbnRleHQsIGRvbmUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdyYWR1YWw7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciAkID0gcmVxdWlyZSgnZG9taW51cycpO1xudmFyIHN0YXRlID0gcmVxdWlyZSgnLi9zdGF0ZScpO1xuXG5mdW5jdGlvbiBub29wICgpIHt9XG5cbmZ1bmN0aW9uIGZvcm1SZXNwb25zZUhhbmRsZXIgKGVyciwgZGF0YSwgZm9ybSwgZG9uZSkge1xuICB2YXIgZW5kID0gZG9uZSB8fCBub29wO1xuICBpZiAoZXJyKSB7XG4gICAgZW5kKGVycik7IHJldHVybjtcbiAgfVxuICB2YXIgaG9zdCA9IGdldE5vdGlmaWNhdGlvbkhvc3QoZGF0YSk7XG4gIGlmIChob3N0KSB7XG4gICAgbWVzc2FnZXMoZm9ybSwgaG9zdCk7XG4gIH0gZWxzZSBpZiAoZGF0YS5yZWRpcmVjdCkge1xuICAgIGRhdGEucmVkaXJlY3QuZm9yY2UgPSB0cnVlO1xuICAgIHN0YXRlLnRhdW51cy5yZWRpcmVjdChkYXRhLnJlZGlyZWN0KTsgcmV0dXJuO1xuICB9XG4gIGVuZChudWxsLCBkYXRhKTtcbn1cblxuZnVuY3Rpb24gaGFzSXRlbXMgKGhvc3QsIHByb3ApIHtcbiAgIHJldHVybiBBcnJheS5pc0FycmF5KGhvc3RbcHJvcF0pID8gaG9zdFtwcm9wXS5sZW5ndGggOiBob3N0W3Byb3BdO1xufVxuXG5mdW5jdGlvbiBnZXROb3RpZmljYXRpb25Ib3N0IChob3N0KSB7XG4gIGlmICghaG9zdCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoaGFzSXRlbXMoaG9zdCwgJ2Vycm9ycycpIHx8IGhhc0l0ZW1zKGhvc3QsICd2YWxpZGF0aW9uJykgfHwgaGFzSXRlbXMoaG9zdCwgJ21lc3NhZ2VzJykpIHtcbiAgICByZXR1cm4gaG9zdDtcbiAgfVxuICByZXR1cm4gZ2V0Tm90aWZpY2F0aW9uSG9zdChob3N0Lm1vZGVsKSB8fCBnZXROb3RpZmljYXRpb25Ib3N0KGhvc3QuZmxhc2gpO1xufVxuXG5mdW5jdGlvbiBtZXNzYWdlcyAoZm9ybSwgbW9kZWwpIHtcbiAgdmFyIHBhcnRpYWwgPSAncGFydGlhbHMvZm9ybS12YWxpZGF0aW9uJztcbiAgdmFyIGRpYWxvZyA9ICQoJzxkaXY+Jyk7XG4gIHZhciBkaWFsb2dFbGVtZW50ID0gZGlhbG9nWzBdO1xuICB2YXIgc2hvdyA9IGZvcm0gPyBhdHRhY2hUb0Zvcm0gOiBkaXNwbGF5SW5EaWFsb2c7XG5cbiAgJCgnLmZ2LWRpYWxvZycpLnJlbW92ZSgpO1xuXG4gIGlmIChmb3JtKSB7XG4gICAgJCgnLnNzLWNvbnRhaW5lciwuZnYtY29udGFpbmVyJywgZm9ybSkucmVtb3ZlKCk7XG4gIH1cblxuICBzdGF0ZS50YXVudXMucGFydGlhbChkaWFsb2dFbGVtZW50LCBwYXJ0aWFsLCBtb2RlbCkub24oJ3JlbmRlcicsIHNob3cpO1xuXG4gIGZ1bmN0aW9uIGF0dGFjaFRvRm9ybSAoKSB7XG4gICAgdmFyIGNvbnRlbnRzID0gZGlhbG9nLmNoaWxkcmVuKCk7XG4gICAgJChmb3JtKS5hZGRDbGFzcygnZmYtdmFsaWRhdGVkJykucHJlcGVuZChjb250ZW50cyk7XG4gICAgZGlhbG9nLnJlbW92ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzcGxheUluRGlhbG9nICgpIHtcbiAgICB2YXIgYm9keSA9ICQoZG9jdW1lbnQuYm9keSk7XG5cbiAgICBkaWFsb2cuYXBwZW5kVG8oYm9keSkuYWRkQ2xhc3MoJ2Z2LWRpYWxvZycpO1xuICAgIGJvZHkub24oJ2NsaWNrJywgZGlhbG9nQ2xvc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlhbG9nQ2xvc2UgKGUpIHtcbiAgICB2YXIgYm9keSA9ICQoZG9jdW1lbnQuYm9keSk7XG4gICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgIGlmICh0YXJnZXQuaXMoJy5mdi1kaWFsb2ctZGlzbWlzcycpIHx8ICh0YXJnZXQuaXMoJy5mdi1kaWFsb2cnKSA9PT0gZmFsc2UgJiYgdGFyZ2V0LnBhcmVudHMoJy5mdi1kaWFsb2cnKS5sZW5ndGggPT09IDApKSB7XG4gICAgICBib2R5Lm9mZignY2xpY2snLCBkaWFsb2dDbG9zZSk7XG4gICAgICBkaWFsb2cucmVtb3ZlKCk7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZm9ybVJlc3BvbnNlSGFuZGxlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ2Fzc2lnbm1lbnQnKTtcbnZhciBmb3JtaXVtID0gcmVxdWlyZSgnZm9ybWl1bScpO1xudmFyIHN0YXRlID0ge1xuICBjb25maWd1cmU6IGNvbmZpZ3VyZVxufTtcblxuZnVuY3Rpb24gY29uZmlndXJlIChvcHRpb25zKSB7XG4gIGZvcm1pdW0uY29uZmlndXJlKHsgcXM6IHFzIH0pO1xuICBzdGF0ZS50YXVudXMgPSBvcHRpb25zLnRhdW51cztcbiAgZnVuY3Rpb24gcXMgKGZvcm0pIHtcbiAgICB2YXIganNvblRleHQgPSB7IGpzb246IHRydWUsICdhcy10ZXh0JzogdHJ1ZSB9O1xuICAgIHJldHVybiBhc3NpZ24oanNvblRleHQsIChvcHRpb25zLnFzIHx8IG5vb3ApKGZvcm0pKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBub29wICgpIHt9XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhdGU7XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGFzc2lnbm1lbnQgKHJlc3VsdCkge1xuICB2YXIgc3RhY2sgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB2YXIgaXRlbTtcbiAgdmFyIGtleTtcbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGl0ZW0gPSBzdGFjay5zaGlmdCgpO1xuICAgIGZvciAoa2V5IGluIGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXN1bHRba2V5XSA9PT0gJ29iamVjdCcgJiYgcmVzdWx0W2tleV0gJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHJlc3VsdFtrZXldKSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbVtrZXldID09PSAnb2JqZWN0JyAmJiBpdGVtW2tleV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gYXNzaWdubWVudChyZXN1bHRba2V5XSwgaXRlbVtrZXldKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBpdGVtW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gaXRlbVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXNzaWdubWVudDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGQgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cbmZ1bmN0aW9uIHBvc2VyICh0eXBlKSB7XG4gIHZhciBpZnJhbWUgPSBkLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBkLmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICByZXR1cm4gbWFwKHR5cGUsIGlmcmFtZS5jb250ZW50V2luZG93KTtcbn1cblxuZnVuY3Rpb24gbWFwICh0eXBlLCBzb3VyY2UpIHsgLy8gZm9yd2FyZCBwb2x5ZmlsbHMgdG8gdGhlIHN0b2xlbiByZWZlcmVuY2UhXG4gIHZhciBvcmlnaW5hbCA9IHdpbmRvd1t0eXBlXS5wcm90b3R5cGU7XG4gIHZhciB2YWx1ZSA9IHNvdXJjZVt0eXBlXTtcbiAgdmFyIHByb3A7XG5cbiAgZm9yIChwcm9wIGluIG9yaWdpbmFsKSB7XG4gICAgdmFsdWUucHJvdG90eXBlW3Byb3BdID0gb3JpZ2luYWxbcHJvcF07XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcG9zZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBleHBhbmRvID0gJ3Nla3Rvci0nICsgRGF0ZS5ub3coKTtcbnZhciByc2libGluZ3MgPSAvWyt+XS87XG52YXIgZG9jdW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgZGVsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xudmFyIG1hdGNoID0gZGVsLm1hdGNoZXMgfHxcbiAgICAgICAgICAgIGRlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIGRlbC5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIGRlbC5vTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBkZWwubXNNYXRjaGVzU2VsZWN0b3I7XG5cbmZ1bmN0aW9uIHFzYSAoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGV4aXN0ZWQsIGlkLCBwcmVmaXgsIHByZWZpeGVkLCBhZGFwdGVyLCBoYWNrID0gY29udGV4dCAhPT0gZG9jdW1lbnQ7XG4gIGlmIChoYWNrKSB7IC8vIGlkIGhhY2sgZm9yIGNvbnRleHQtcm9vdGVkIHF1ZXJpZXNcbiAgICBleGlzdGVkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgaWQgPSBleGlzdGVkIHx8IGV4cGFuZG87XG4gICAgcHJlZml4ID0gJyMnICsgaWQgKyAnICc7XG4gICAgcHJlZml4ZWQgPSBwcmVmaXggKyBzZWxlY3Rvci5yZXBsYWNlKC8sL2csICcsJyArIHByZWZpeCk7XG4gICAgYWRhcHRlciA9IHJzaWJsaW5ncy50ZXN0KHNlbGVjdG9yKSAmJiBjb250ZXh0LnBhcmVudE5vZGU7XG4gICAgaWYgKCFleGlzdGVkKSB7IGNvbnRleHQuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTsgfVxuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIChhZGFwdGVyIHx8IGNvbnRleHQpLnF1ZXJ5U2VsZWN0b3JBbGwocHJlZml4ZWQgfHwgc2VsZWN0b3IpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChleGlzdGVkID09PSBudWxsKSB7IGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCdpZCcpOyB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoc2VsZWN0b3IsIGN0eCwgY29sbGVjdGlvbiwgc2VlZCkge1xuICB2YXIgZWxlbWVudDtcbiAgdmFyIGNvbnRleHQgPSBjdHggfHwgZG9jdW1lbnQ7XG4gIHZhciByZXN1bHRzID0gY29sbGVjdGlvbiB8fCBbXTtcbiAgdmFyIGkgPSAwO1xuICBpZiAodHlwZW9mIHNlbGVjdG9yICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG4gIGlmIChjb250ZXh0Lm5vZGVUeXBlICE9PSAxICYmIGNvbnRleHQubm9kZVR5cGUgIT09IDkpIHtcbiAgICByZXR1cm4gW107IC8vIGJhaWwgaWYgY29udGV4dCBpcyBub3QgYW4gZWxlbWVudCBvciBkb2N1bWVudFxuICB9XG4gIGlmIChzZWVkKSB7XG4gICAgd2hpbGUgKChlbGVtZW50ID0gc2VlZFtpKytdKSkge1xuICAgICAgaWYgKG1hdGNoZXNTZWxlY3RvcihlbGVtZW50LCBzZWxlY3RvcikpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXN1bHRzLnB1c2guYXBwbHkocmVzdWx0cywgcXNhKHNlbGVjdG9yLCBjb250ZXh0KSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXMgKHNlbGVjdG9yLCBlbGVtZW50cykge1xuICByZXR1cm4gZmluZChzZWxlY3RvciwgbnVsbCwgbnVsbCwgZWxlbWVudHMpO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVzU2VsZWN0b3IgKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBtYXRjaC5jYWxsKGVsZW1lbnQsIHNlbGVjdG9yKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kO1xuXG5maW5kLm1hdGNoZXMgPSBtYXRjaGVzO1xuZmluZC5tYXRjaGVzU2VsZWN0b3IgPSBtYXRjaGVzU2VsZWN0b3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB0ZXN0ID0gcmVxdWlyZSgnLi90ZXN0Jyk7XG52YXIgYXBwbHkgPSByZXF1aXJlKCcuL2FwcGx5Jyk7XG52YXIgRG9taW51cyA9IHJlcXVpcmUoJy4vRG9taW51cy5jdG9yJyk7XG5cbmZ1bmN0aW9uIGNhc3QgKGEpIHtcbiAgaWYgKGEgPT09IGdsb2JhbCkge1xuICAgIHJldHVybiBuZXcgRG9taW51cyhhKTtcbiAgfVxuICBpZiAoYSBpbnN0YW5jZW9mIERvbWludXMpIHtcbiAgICByZXR1cm4gYTtcbiAgfVxuICBpZiAoIWEpIHtcbiAgICByZXR1cm4gbmV3IERvbWludXMoKTtcbiAgfVxuICBpZiAodGVzdC5pc0VsZW1lbnQoYSkpIHtcbiAgICByZXR1cm4gbmV3IERvbWludXMoYSk7XG4gIH1cbiAgaWYgKCF0ZXN0LmlzQXJyYXkoYSkpIHtcbiAgICByZXR1cm4gbmV3IERvbWludXMoKTtcbiAgfVxuICByZXR1cm4gYXBwbHkoYSkuZmlsdGVyKGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIHRlc3QuaXNFbGVtZW50KGkpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjYXN0O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc2VrdG9yID0gcmVxdWlyZSgnc2VrdG9yJyk7XG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XG52YXIgRG9taW51cyA9IHJlcXVpcmUoJy4vRG9taW51cy5jdG9yJyk7XG52YXIgY2FzdCA9IHJlcXVpcmUoJy4vY2FzdCcpO1xudmFyIGFwcGx5ID0gcmVxdWlyZSgnLi9hcHBseScpO1xudmFyIHRleHQgPSByZXF1aXJlKCcuL3RleHQnKTtcbnZhciB0ZXN0ID0gcmVxdWlyZSgnLi90ZXN0Jyk7XG52YXIgYXBpID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBkZWxlZ2F0ZXMgPSB7fTtcblxuZnVuY3Rpb24gY2FzdENvbnRleHQgKGNvbnRleHQpIHtcbiAgaWYgKHR5cGVvZiBjb250ZXh0ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBhcGkucXMobnVsbCwgY29udGV4dCk7XG4gIH1cbiAgaWYgKHRlc3QuaXNFbGVtZW50KGNvbnRleHQpKSB7XG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cbiAgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBEb21pbnVzKSB7XG4gICAgcmV0dXJuIGNvbnRleHRbMF07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmFwaS5xc2EgPSBmdW5jdGlvbiAoZWwsIHNlbGVjdG9yKSB7XG4gIHZhciByZXN1bHRzID0gbmV3IERvbWludXMoKTtcbiAgcmV0dXJuIHNla3RvcihzZWxlY3RvciwgY2FzdENvbnRleHQoZWwpLCByZXN1bHRzKTtcbn07XG5cbmFwaS5xcyA9IGZ1bmN0aW9uIChlbCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGFwaS5xc2EoZWwsIHNlbGVjdG9yKVswXTtcbn07XG5cbmFwaS5tYXRjaGVzID0gZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuICByZXR1cm4gdGVzdC5pc0VsZW1lbnQoZWwpICYmIHNla3Rvci5tYXRjaGVzU2VsZWN0b3IoZWwsIHNlbGVjdG9yKTtcbn07XG5cbmZ1bmN0aW9uIHJlbGF0ZWRGYWN0b3J5IChwcm9wKSB7XG4gIHJldHVybiBmdW5jdGlvbiByZWxhdGVkIChlbCwgc2VsZWN0b3IpIHtcbiAgICB2YXIgcmVsYXRpdmUgPSBlbFtwcm9wXTtcbiAgICBpZiAocmVsYXRpdmUpIHtcbiAgICAgIGlmICghc2VsZWN0b3IgfHwgYXBpLm1hdGNoZXMocmVsYXRpdmUsIHNlbGVjdG9yKSkge1xuICAgICAgICByZXR1cm4gY2FzdChyZWxhdGl2ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgRG9taW51cygpO1xuICB9O1xufVxuXG5hcGkucHJldiA9IHJlbGF0ZWRGYWN0b3J5KCdwcmV2aW91c0VsZW1lbnRTaWJsaW5nJyk7XG5hcGkubmV4dCA9IHJlbGF0ZWRGYWN0b3J5KCduZXh0RWxlbWVudFNpYmxpbmcnKTtcbmFwaS5wYXJlbnQgPSByZWxhdGVkRmFjdG9yeSgncGFyZW50RWxlbWVudCcpO1xuXG5mdW5jdGlvbiBtYXRjaGVzIChlbCwgdmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERvbWludXMpIHtcbiAgICByZXR1cm4gdmFsdWUuaW5kZXhPZihlbCkgIT09IC0xO1xuICB9XG4gIGlmICh0ZXN0LmlzRWxlbWVudCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZWwgPT09IHZhbHVlO1xuICB9XG4gIHJldHVybiBhcGkubWF0Y2hlcyhlbCwgdmFsdWUpO1xufVxuXG5hcGkucGFyZW50cyA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIHtcbiAgdmFyIGVsZW1lbnRzID0gW107XG4gIHZhciBjdXJyZW50ID0gZWw7XG4gIHdoaWxlIChjdXJyZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICBpZiAobWF0Y2hlcyhjdXJyZW50LnBhcmVudEVsZW1lbnQsIHZhbHVlKSkge1xuICAgICAgZWxlbWVudHMucHVzaChjdXJyZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIH1cbiAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICB9XG4gIHJldHVybiBhcHBseShlbGVtZW50cyk7XG59O1xuXG5hcGkuY2hpbGRyZW4gPSBmdW5jdGlvbiAoZWwsIHZhbHVlKSB7XG4gIHZhciBlbGVtZW50cyA9IFtdO1xuICB2YXIgY2hpbGRyZW4gPSBlbC5jaGlsZHJlbjtcbiAgdmFyIGNoaWxkO1xuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgY2hpbGRyZW4gJiYgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICBpZiAobWF0Y2hlcyhjaGlsZCwgdmFsdWUpKSB7XG4gICAgICBlbGVtZW50cy5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFwcGx5KGVsZW1lbnRzKTtcbn07XG5cbi8vIHRoaXMgbWV0aG9kIGNhY2hlcyBkZWxlZ2F0ZXMgc28gdGhhdCAub2ZmKCkgd29ya3Mgc2VhbWxlc3NseVxuZnVuY3Rpb24gZGVsZWdhdGUgKHJvb3QsIGZpbHRlciwgZm4pIHtcbiAgaWYgKGRlbGVnYXRlc1tmbi5fZGRdKSB7XG4gICAgcmV0dXJuIGRlbGVnYXRlc1tmbi5fZGRdO1xuICB9XG4gIGZuLl9kZCA9IERhdGUubm93KCk7XG4gIGRlbGVnYXRlc1tmbi5fZGRdID0gZGVsZWdhdG9yO1xuICBmdW5jdGlvbiBkZWxlZ2F0b3IgKGUpIHtcbiAgICB2YXIgZWwgPSBlLnRhcmdldDtcbiAgICB3aGlsZSAoZWwgJiYgZWwgIT09IHJvb3QpIHtcbiAgICAgIGlmIChhcGkubWF0Y2hlcyhlbCwgZmlsdGVyKSkge1xuICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm47XG4gICAgICB9XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWxlZ2F0b3I7XG59XG5cbmZ1bmN0aW9uIGV2ZW50ZWQgKG1ldGhvZCwgZWwsIHR5cGUsIGZpbHRlciwgZm4pIHtcbiAgaWYgKGZpbHRlciA9PT0gbnVsbCkge1xuICAgIGNyb3NzdmVudFttZXRob2RdKGVsLCB0eXBlLCBmbik7XG4gIH0gZWxzZSB7XG4gICAgY3Jvc3N2ZW50W21ldGhvZF0oZWwsIHR5cGUsIGRlbGVnYXRlKGVsLCBmaWx0ZXIsIGZuKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25jZSAoZWwsIHR5cGUsIGZpbHRlciwgZm4pIHtcbiAgdmFyIHRoaW5ncyA9IFtlbCwgdHlwZSwgZmlsdGVyLCBkaXNwb3NhYmxlXTtcbiAgYXBpLm9uLmFwcGx5KGFwaSwgdGhpbmdzKTtcbiAgZnVuY3Rpb24gZGlzcG9zYWJsZSAoKSB7XG4gICAgYXBpLm9mZi5hcHBseShhcGksIHRoaW5ncyk7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cbn1cblxuYXBpLm9uY2UgPSBvbmNlO1xuYXBpLm9uID0gZXZlbnRlZC5iaW5kKG51bGwsICdhZGQnKTtcbmFwaS5vZmYgPSBldmVudGVkLmJpbmQobnVsbCwgJ3JlbW92ZScpO1xuYXBpLmVtaXQgPSBldmVudGVkLmJpbmQobnVsbCwgJ2ZhYnJpY2F0ZScpO1xuXG5hcGkuaHRtbCA9IGZ1bmN0aW9uIChlbGVtLCBodG1sKSB7XG4gIHZhciBnZXR0ZXIgPSBhcmd1bWVudHMubGVuZ3RoIDwgMjtcbiAgaWYgKGdldHRlcikge1xuICAgIHJldHVybiBlbGVtLmlubmVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICBlbGVtLmlubmVySFRNTCA9IGh0bWw7XG4gIH1cbn07XG5cbmFwaS50ZXh0ID0gZnVuY3Rpb24gKGVsZW0sIHRleHQpIHtcbiAgdmFyIGNoZWNrYWJsZSA9IHRlc3QuaXNDaGVja2FibGUoZWxlbSk7XG4gIHZhciBnZXR0ZXIgPSBhcmd1bWVudHMubGVuZ3RoIDwgMjtcbiAgaWYgKGdldHRlcikge1xuICAgIHJldHVybiBjaGVja2FibGUgPyBlbGVtLnZhbHVlIDogZWxlbS5pbm5lclRleHQgfHwgZWxlbS50ZXh0Q29udGVudDtcbiAgfSBlbHNlIGlmIChjaGVja2FibGUpIHtcbiAgICBlbGVtLnZhbHVlID0gdGV4dDtcbiAgfSBlbHNlIHtcbiAgICBlbGVtLmlubmVyVGV4dCA9IGVsZW0udGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9XG59O1xuXG5hcGkudmFsdWUgPSBmdW5jdGlvbiAoZWwsIHZhbHVlKSB7XG4gIHZhciBjaGVja2FibGUgPSB0ZXN0LmlzQ2hlY2thYmxlKGVsKTtcbiAgdmFyIGdldHRlciA9IGFyZ3VtZW50cy5sZW5ndGggPCAyO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcmV0dXJuIGNoZWNrYWJsZSA/IGVsLmNoZWNrZWQgOiBlbC52YWx1ZTtcbiAgfSBlbHNlIGlmIChjaGVja2FibGUpIHtcbiAgICBlbC5jaGVja2VkID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgZWwudmFsdWUgPSB2YWx1ZTtcbiAgfVxufTtcblxuYXBpLmF0dHIgPSBmdW5jdGlvbiAoZWwsIG5hbWUsIHZhbHVlKSB7XG4gIGlmICghdGVzdC5pc0VsZW1lbnQoZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgZWwucmVtb3ZlQXR0cmlidXRlKG5hbWUpOyByZXR1cm47XG4gIH1cbiAgdmFyIGNhbWVsID0gdGV4dC5oeXBoZW5Ub0NhbWVsKG5hbWUpO1xuICBpZiAoY2FtZWwgaW4gZWwpIHtcbiAgICBlbFtjYW1lbF0gPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9XG59O1xuXG5hcGkuZ2V0QXR0ciA9IGZ1bmN0aW9uIChlbCwgbmFtZSkge1xuICB2YXIgY2FtZWwgPSB0ZXh0Lmh5cGhlblRvQ2FtZWwobmFtZSk7XG4gIGlmIChjYW1lbCBpbiBlbCkge1xuICAgIHJldHVybiBlbFtjYW1lbF07XG4gIH0gZWxzZSBpZiAoZWwuZ2V0QXR0cmlidXRlKSB7XG4gICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmFwaS5tYW55QXR0ciA9IGZ1bmN0aW9uIChlbGVtLCBhdHRycykge1xuICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikge1xuICAgIGFwaS5hdHRyKGVsZW0sIGF0dHIsIGF0dHJzW2F0dHJdKTtcbiAgfSk7XG59O1xuXG5hcGkubWFrZSA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIHJldHVybiBuZXcgRG9taW51cyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpKTtcbn07XG5cbmFwaS5jbG9uZSA9IGZ1bmN0aW9uIChlbCkge1xuICBpZiAoZWwuY2xvbmVOb2RlKSB7XG4gICAgcmV0dXJuIGVsLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuICByZXR1cm4gZWw7XG59O1xuXG5hcGkucmVtb3ZlID0gZnVuY3Rpb24gKGVsKSB7XG4gIGlmIChlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG4gIH1cbn07XG5cbmFwaS5hcHBlbmQgPSBmdW5jdGlvbiAoZWwsIHRhcmdldCkge1xuICBpZiAobWFuaXB1bGF0aW9uR3VhcmQoZWwsIHRhcmdldCwgYXBpLmFwcGVuZCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGVsLmFwcGVuZENoaWxkKSB7XG4gICAgZWwuYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgfVxufTtcblxuYXBpLnByZXBlbmQgPSBmdW5jdGlvbiAoZWwsIHRhcmdldCkge1xuICBpZiAobWFuaXB1bGF0aW9uR3VhcmQoZWwsIHRhcmdldCwgYXBpLnByZXBlbmQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChlbC5pbnNlcnRCZWZvcmUpIHtcbiAgICBlbC5pbnNlcnRCZWZvcmUodGFyZ2V0LCBlbC5maXJzdENoaWxkKTtcbiAgfVxufTtcblxuYXBpLmJlZm9yZSA9IGZ1bmN0aW9uIChlbCwgdGFyZ2V0KSB7XG4gIGlmIChtYW5pcHVsYXRpb25HdWFyZChlbCwgdGFyZ2V0LCBhcGkuYmVmb3JlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZWwucGFyZW50RWxlbWVudCkge1xuICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhcmdldCwgZWwpO1xuICB9XG59O1xuXG5hcGkuYWZ0ZXIgPSBmdW5jdGlvbiAoZWwsIHRhcmdldCkge1xuICBpZiAobWFuaXB1bGF0aW9uR3VhcmQoZWwsIHRhcmdldCwgYXBpLmFmdGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZWwucGFyZW50RWxlbWVudCkge1xuICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhcmdldCwgZWwubmV4dFNpYmxpbmcpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBtYW5pcHVsYXRpb25HdWFyZCAoZWwsIHRhcmdldCwgZm4pIHtcbiAgdmFyIHJpZ2h0ID0gdGFyZ2V0IGluc3RhbmNlb2YgRG9taW51cztcbiAgdmFyIGxlZnQgPSBlbCBpbnN0YW5jZW9mIERvbWludXM7XG4gIGlmIChsZWZ0KSB7XG4gICAgZWwuZm9yRWFjaChtYW5pcHVsYXRlTWFueSk7XG4gIH0gZWxzZSBpZiAocmlnaHQpIHtcbiAgICBtYW5pcHVsYXRlKGVsLCB0cnVlKTtcbiAgfVxuICByZXR1cm4gIWVsIHx8ICF0YXJnZXQgfHwgbGVmdCB8fCByaWdodDtcblxuICBmdW5jdGlvbiBtYW5pcHVsYXRlIChlbCwgcHJlY29uZGl0aW9uKSB7XG4gICAgaWYgKHJpZ2h0KSB7XG4gICAgICB0YXJnZXQuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0LCBqKSB7XG4gICAgICAgIGZuKGVsLCBjbG9uZVVubGVzcyh0YXJnZXQsIHByZWNvbmRpdGlvbiAmJiBqID09PSAwKSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm4oZWwsIGNsb25lVW5sZXNzKHRhcmdldCwgcHJlY29uZGl0aW9uKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFuaXB1bGF0ZU1hbnkgKGVsLCBpKSB7XG4gICAgbWFuaXB1bGF0ZShlbCwgaSA9PT0gMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvbmVVbmxlc3MgKHRhcmdldCwgY29uZGl0aW9uKSB7XG4gIHJldHVybiBjb25kaXRpb24gPyB0YXJnZXQgOiBhcGkuY2xvbmUodGFyZ2V0KTtcbn1cblxuWydhcHBlbmRUbycsICdwcmVwZW5kVG8nLCAnYmVmb3JlT2YnLCAnYWZ0ZXJPZiddLmZvckVhY2goZmxpcCk7XG5cbmZ1bmN0aW9uIGZsaXAgKGtleSkge1xuICB2YXIgb3JpZ2luYWwgPSBrZXkuc3BsaXQoL1tBLVpdLylbMF07XG4gIGFwaVtrZXldID0gZnVuY3Rpb24gKGVsLCB0YXJnZXQpIHtcbiAgICBhcGlbb3JpZ2luYWxdKHRhcmdldCwgZWwpO1xuICB9O1xufVxuXG52YXIgbnVtZXJpY0Nzc1Byb3BlcnRpZXMgPSB7XG4gICdjb2x1bW4tY291bnQnOiB0cnVlLFxuICAnZmlsbC1vcGFjaXR5JzogdHJ1ZSxcbiAgJ2ZsZXgtZ3Jvdyc6IHRydWUsXG4gICdmbGV4LXNocmluayc6IHRydWUsXG4gICdmb250LXdlaWdodCc6IHRydWUsXG4gICdsaW5lLWhlaWdodCc6IHRydWUsXG4gICdvcGFjaXR5JzogdHJ1ZSxcbiAgJ29yZGVyJzogdHJ1ZSxcbiAgJ29ycGhhbnMnOiB0cnVlLFxuICAnd2lkb3dzJzogdHJ1ZSxcbiAgJ3otaW5kZXgnOiB0cnVlLFxuICAnem9vbSc6IHRydWVcbn07XG52YXIgbnVtZXJpYyA9IC9eXFxkKyQvO1xudmFyIGNhbkZsb2F0ID0gJ2Zsb2F0JyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlO1xuXG5hcGkuZ2V0Q3NzID0gZnVuY3Rpb24gKGVsLCBwcm9wKSB7XG4gIGlmICghdGVzdC5pc0VsZW1lbnQoZWwpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIGhwcm9wID0gdGV4dC5oeXBoZW5hdGUocHJvcCk7XG4gIHZhciBmcHJvcCA9ICFjYW5GbG9hdCAmJiBocHJvcCA9PT0gJ2Zsb2F0JyA/ICdjc3NGbG9hdCcgOiBocHJvcDtcbiAgdmFyIHJlc3VsdCA9IGdsb2JhbC5nZXRDb21wdXRlZFN0eWxlKGVsKVtocHJvcF07XG4gIGlmIChwcm9wID09PSAnb3BhY2l0eScgJiYgcmVzdWx0ID09PSAnJykge1xuICAgIHJldHVybiAxO1xuICB9XG4gIGlmIChyZXN1bHQuc3Vic3RyKC0yKSA9PT0gJ3B4JyB8fCBudW1lcmljLnRlc3QocmVzdWx0KSkge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHJlc3VsdCwgMTApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5hcGkuc2V0Q3NzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gIHZhciBtYXBwZWQgPSBPYmplY3Qua2V5cyhwcm9wcykuZmlsdGVyKGJhZCkubWFwKGV4cGFuZCk7XG4gIGZ1bmN0aW9uIGJhZCAocHJvcCkge1xuICAgIHZhciB2YWx1ZSA9IHByb3BzW3Byb3BdO1xuICAgIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSA9PT0gdmFsdWU7XG4gIH1cbiAgZnVuY3Rpb24gZXhwYW5kIChwcm9wKSB7XG4gICAgdmFyIGhwcm9wID0gdGV4dC5oeXBoZW5hdGUocHJvcCk7XG4gICAgdmFyIHZhbHVlID0gcHJvcHNbcHJvcF07XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIW51bWVyaWNDc3NQcm9wZXJ0aWVzW2hwcm9wXSkge1xuICAgICAgdmFsdWUgKz0gJ3B4JztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGhwcm9wLCB2YWx1ZTogdmFsdWVcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoIXRlc3QuaXNFbGVtZW50KGVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtYXBwZWQuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgZWwuc3R5bGVbcHJvcC5uYW1lXSA9IHByb3AudmFsdWU7XG4gICAgfSk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBqc2hpbnQgc2NyaXB0dXJsOnRydWVcblxudmFyICQgPSByZXF1aXJlKCdkb21pbnVzJyk7XG52YXIgcXVlc28gPSByZXF1aXJlKCdxdWVzbycpO1xudmFyIHNhZmVzb24gPSByZXF1aXJlKCdzYWZlc29uJyk7XG52YXIgc3RhdGUgPSByZXF1aXJlKCcuL2xpYi9zdGF0ZScpO1xudmFyIHRyYW5zZm9ybWVycyA9IFtdO1xudmFyIGZvcm1pdW0gPSB7XG4gIHN1Ym1pdDogc3VibWl0LFxuICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgY29uZmlndXJlOiBzdGF0ZS5jb25maWd1cmVcbn07XG5cbmZ1bmN0aW9uIG5vb3AgKCkge31cblxuZnVuY3Rpb24gdHJhbnNmb3JtIChmbikge1xuICB0cmFuc2Zvcm1lcnMucHVzaChmbik7XG59XG5cbi8qIEFKQVggZm9ybSBzdWJtaXNzaW9ucyB1c2UgYW4gaW50ZXJtZWRpYXJ5IDxpZnJhbWU+IHRvIGhlbHAgYnJvd3NlcnMgcmVtZW1iZXJcbiAqIGF1dG9jb21wbGV0aW9uIHN1Z2dlc3Rpb25zLiBXZSBzdWJtaXQgdGhlIGZvcm0gYWdhaW5zdCB0aGUgPGlmcmFtZT4gYW5kIHRoZW5cbiAqIGdyYWIgdGhlIHJlc3BvbnNlIGFzIHBsYWluLXRleHQgSlNPTiB0aGF0IHdlIG5lZWQgdG8gcGFyc2UgaW50byBKU09OLlxuICogQWZ0ZXJ3YXJkcyB3ZSBjYW4gaGFuZCB0aGF0IEpTT04gdG8gdGhlIHJlc3BvbnNlIGhhbmRsZXIsIGJ1c2luZXNzIGFzIHVzdWFsLlxuICogU2luY2Ugd2UndmUgc3VibWl0dGVkIHRoZSBmb3JtIFwib3JnYW5pY2FsbHlcIiwgdGhlIGJyb3dzZXIgc3RvcmVzIHN1Z2dlc3Rpb25zLlxuICovXG5mdW5jdGlvbiBmcmFtZSAoZm9ybSkge1xuICB2YXIgbmFtZSA9ICdmZi0nICsgbmV3IERhdGUoKS52YWx1ZU9mKCk7XG4gICQoZm9ybSlcbiAgICAuYXR0cignYXV0b2NvbXBsZXRlJywgJ29uJylcbiAgICAuYXR0cigndGFyZ2V0JywgbmFtZSk7XG4gIHJldHVybiAkKCc8aWZyYW1lPicpXG4gICAgLmNzcygnZGlzcGxheScsICdub25lJylcbiAgICAuYXR0cignaWQnLCBuYW1lKVxuICAgIC5hdHRyKCduYW1lJywgbmFtZSlcbiAgICAuYXR0cignc3JjJywgJ2phdmFzY3JpcHQ6dm9pZCAwJylcbiAgICAuYWZ0ZXJPZihmb3JtKTtcbn1cblxuZnVuY3Rpb24gc3VibWl0IChmb3JtLCBkb25lKSB7XG4gIHZhciB0ZXh0YXJlYUNsb25lVmFsdWUgPSAnZGF0YS1jbG9uZS12YWx1ZSc7XG4gIHZhciBpZnJhbWUgPSBmcmFtZShmb3JtKTtcbiAgdmFyIGNvbnRlbnQgPSBpZnJhbWVbMF0uY29udGVudFdpbmRvdztcbiAgdmFyIHJlc3RvcmUgPSB0cmFuc2Zvcm1lcnMubWFwKHJ1bik7XG4gIHZhciB0ZXh0YXJlYXMgPSAkKCd0ZXh0YXJlYScsIGZvcm0pO1xuICB0ZXh0YXJlYXMuZm9yRWFjaChwcmVzZXJ2ZVZhbHVlKTtcbiAgdmFyIGZvcm1DbG9uZSA9IGZvcm0uY2xvbmVOb2RlKHRydWUpO1xuICB2YXIgdGV4dGFyZWFDbG9uZXMgPSAkKCd0ZXh0YXJlYScsIGZvcm1DbG9uZSk7XG4gIGRpc2FibGUoZm9ybSk7XG4gICQoJ2J1dHRvbicsIGZvcm0pLmZvckVhY2goZGlzYWJsZSk7XG4gICQoJ1thdXRvZm9jdXNdJywgZm9ybUNsb25lKS5hdHRyKCdhdXRvZm9jdXMnLCBudWxsKTtcbiAgdGV4dGFyZWFDbG9uZXMuZm9yRWFjaCh1cGRhdGVWYWx1ZSk7XG4gIHRleHRhcmVhcy5mb3JFYWNoKHJlc3RvcmVUZXh0YXJlYSk7XG4gIHZhciBmb3JtQ2xvbmVJZCA9ICdmJyArIGlmcmFtZVswXS5pZDtcbiAgZm9ybUNsb25lLmlkID0gZm9ybUNsb25lSWQ7XG4gIGlmcmFtZS5vbmNlKCdsb2FkJywgZ3JhYlJlc3BvbnNlKTtcbiAgY29udGVudC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm1DbG9uZSk7XG4gIHZhciBmcmFtZUZvcm0gPSBjb250ZW50LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1DbG9uZUlkKTtcbiAgdmFyIGFtcDtcbiAgaWYgKHN0YXRlLnFzKSB7XG4gICAgYW1wID0gZnJhbWVGb3JtLmFjdGlvbi5pbmRleE9mKCc/JykgIT09IC0xO1xuICAgIGZyYW1lRm9ybS5hY3Rpb24gKz0gcXVlc28uc3RyaW5naWZ5KHN0YXRlLnFzKGZvcm0pLCBhbXApO1xuICB9XG4gIGZyYW1lRm9ybS5vbnN1Ym1pdCA9IG51bGw7XG4gIGZyYW1lRm9ybS5zdWJtaXQoKTtcbiAgcmVzdG9yZS5mb3JFYWNoKHJ1bik7XG4gIGZ1bmN0aW9uIHByZXNlcnZlVmFsdWUgKHRleHRhcmVhKSB7XG4gICAgdmFyIHRhID0gJCh0ZXh0YXJlYSk7XG4gICAgdGEuYXR0cih0ZXh0YXJlYUNsb25lVmFsdWUsIHRhLnZhbHVlKCkpO1xuICB9XG4gIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlICh0ZXh0YXJlYSkge1xuICAgIHZhciB0YSA9ICQodGV4dGFyZWEpO1xuICAgIHRhLnZhbHVlKHRhLmF0dHIodGV4dGFyZWFDbG9uZVZhbHVlKSkuYXR0cih0ZXh0YXJlYUNsb25lVmFsdWUsIG51bGwpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc3RvcmVUZXh0YXJlYSAodGV4dGFyZWEpIHtcbiAgICAkKHRleHRhcmVhKS5hdHRyKHRleHRhcmVhQ2xvbmVWYWx1ZSwgbnVsbCk7XG4gIH1cbiAgZnVuY3Rpb24gZ3JhYlJlc3BvbnNlICgpIHtcbiAgICB2YXIgaHRtbCA9IHJlYWRSZXNwb25zZShjb250ZW50KTtcbiAgICBpZiAoIWh0bWwpIHtcbiAgICAgIGdvdFJlc3BvbnNlKG5ldyBFcnJvcignSW50ZXJuYWwgU2VydmVyIEVycm9yJykpOyByZXR1cm47XG4gICAgfVxuICAgIHZhciBqc29uID0gZGVjb2RlUmVzcG9uc2UoaHRtbCk7XG4gICAgdmFyIGVyciA9IGpzb24gPyBudWxsIDogbmV3IEVycm9yKCdNYWxmb3JtZWQgcmVzcG9uc2UnKTtcbiAgICBnb3RSZXNwb25zZShlcnIsIGpzb24pO1xuICAgIGZ1bmN0aW9uIGdvdFJlc3BvbnNlIChlcnIsIGRhdGEpIHtcbiAgICAgICQoJ2J1dHRvbicsIGZvcm0pLmZvckVhY2goZW5hYmxlKTtcbiAgICAgIGVuYWJsZShmb3JtKTtcbiAgICAgIGlmcmFtZS5yZW1vdmUoKTtcbiAgICAgIChkb25lIHx8IG5vb3ApLmNhbGwoZm9ybSwgZXJyLCBkYXRhKTtcbiAgICAgICQoZm9ybSkuZW1pdCgnZm9ybWl1bScsIHsgZXJyb3I6IGVyciwgZGF0YTogZGF0YSB9KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcmVhZFJlc3BvbnNlIChjb250ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBjb250ZW50LmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MO1xuICAgIH0gY2F0Y2ggKGUpIHsgLy8gZmFpbHVyZSB0byByZWFkIChtb3N0IGxpa2VseSkgbWVhbnMgc2VydmVyIGNyYXNoZWQgb3IgcmVzcG9uc2UgdGltZWQgb3V0XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlY29kZVJlc3BvbnNlIChodG1sKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBzYWZlc29uLmRlY29kZShodG1sKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHJ1biAoZm4pIHtcbiAgICByZXR1cm4gKGZuIHx8IG5vb3ApKGZvcm0pO1xuICB9XG4gIGZ1bmN0aW9uIGRpc2FibGUgKGVsKSB7XG4gICAgZWwuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIGVuYWJsZSAoZWwpIHtcbiAgICBlbC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZm9ybWl1bTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0YXRlID0ge1xuICBjb25maWd1cmU6IGNvbmZpZ3VyZVxufTtcblxuZnVuY3Rpb24gY29uZmlndXJlIChvcHRpb25zKSB7XG4gIHN0YXRlLnFzID0gb3B0aW9ucy5xcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGF0ZTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gc3RyaW5naWZ5IChxdWVyeSwgYW1wKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhxdWVyeSkucmVkdWNlKHBhaXJzLCAnJyk7XG4gIGZ1bmN0aW9uIHBhaXJzIChxLCBrZXkpIHtcbiAgICB2YXIgcHJlZml4ID0gYW1wICE9PSB0cnVlICYmIHEubGVuZ3RoID09PSAwID8gJz8nIDogJyYnO1xuICAgIHZhciBsZWZ0ID0gcSArIHByZWZpeCArIGtleTtcbiAgICB2YXIgdmFsdWUgPSBxdWVyeVtrZXldO1xuICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgfVxuICAgIHZhciBlbmNvZGVkID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICByZXR1cm4gbGVmdCArICc9JyArIGVuY29kZWQ7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN0cmluZ2lmeTogc3RyaW5naWZ5XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBmb3JtdWxhcmlvIChmb3JtKSB7XG4gIHZhciBib3VuZGFyeSA9ICdHcmFkdWFsRm9ybUJvdW5kYXJ5JyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMikuc3Vic3RyKDIpO1xuICB2YXIgZm9ybURhdGEgPSBmb3JtLnRhZ05hbWUgPT09ICdGT1JNJyA/IHJlYWRGb3JtKGZvcm0pIDogZm9ybTtcbiAgdmFyIGJvZHkgPSBlbmNvZGUoZm9ybURhdGEsIGJvdW5kYXJ5KTtcbiAgdmFyIGhlYWRlcnMgPSB7XG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PScgKyBib3VuZGFyeVxuICB9O1xuICByZXR1cm4geyBoZWFkZXJzOiBoZWFkZXJzLCBib2R5OiBib2R5IH07XG59XG5cbmZ1bmN0aW9uIGNhc3QgKGNvbGxlY3Rpb24pIHtcbiAgdmFyIGNhc3RlZCA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbGxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcbiAgICBjYXN0ZWQucHVzaChjb2xsZWN0aW9uW2ldKTtcbiAgfVxuICByZXR1cm4gY2FzdGVkO1xufVxuXG5mdW5jdGlvbiByZWFkRm9ybSAoZm9ybSkge1xuICB2YXIgaW5wdXRzID0gZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTtcbiAgdmFyIHRleHRhcmVhcyA9IGZvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RleHRhcmVhJyk7XG4gIHJldHVybiBjYXN0KGlucHV0cykuY29uY2F0KGNhc3QodGV4dGFyZWFzKSkucmVkdWNlKG1lcmdlLCB7fSk7XG59XG5cbmZ1bmN0aW9uIG1lcmdlIChkYXRhLCBpbnB1dCkge1xuICB2YXIgY2hvaWNlID0gaW5wdXQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBpbnB1dC50eXBlID09PSAncmFkaW8nO1xuICB2YXIgdmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgdmFyIGtleSA9IGlucHV0Lm5hbWU7XG4gIGlmIChjaG9pY2UpIHtcbiAgICBpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgICAgZGF0YVtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICghKGtleSBpbiBkYXRhKSkge1xuICAgICAgZGF0YVtrZXldID0gJyc7XG4gICAgfVxuICB9IGVsc2UgaWYgKGtleSBpbiBkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICBkYXRhW2tleV0gPSBbZGF0YVtrZXldLCB2YWx1ZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGFba2V5XS5wdXNoKHZhbHVlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZGF0YVtrZXldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGVuY29kZSAoZm9ybURhdGEsIGJvdW5kYXJ5KSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhmb3JtRGF0YSkucmVkdWNlKGFwcGVuZCwgW10pLmNvbmNhdCgnLS0nICsgYm91bmRhcnkgKyAnLS0nKS5qb2luKCdcXHJcXG4nKTtcblxuICBmdW5jdGlvbiBhcHBlbmQgKGVuY29kZWQsIGtleSkge1xuICAgIHZhciBuYW1lID0ga2V5O1xuICAgIHZhciBpdGVtID0gZm9ybURhdGFba2V5XTtcbiAgICB2YXIgaXRlbXMgPSBBcnJheS5pc0FycmF5KGl0ZW0pID8gaXRlbSA6IFtpdGVtXTtcblxuICAgIGl0ZW1zLmZvckVhY2goYXBwZW5kT25lKTtcblxuICAgIGZ1bmN0aW9uIGFwcGVuZE9uZSAodmFsdWUpIHtcbiAgICAgIGVuY29kZWQucHVzaCgnLS0nICsgYm91bmRhcnkpO1xuICAgICAgZW5jb2RlZC5wdXNoKCdjb250ZW50LWRpc3Bvc2l0aW9uOiBmb3JtLWRhdGE7IG5hbWU9XCInICsgbmFtZSArICdcIicpO1xuICAgICAgZW5jb2RlZC5wdXNoKCcnKTtcbiAgICAgIGVuY29kZWQucHVzaCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogaGFuZGxlIGZpbGUgdXBsb2Fkc1xuXG4gICAgcmV0dXJuIGVuY29kZWQ7XG4gIH1cbn1cblxuZm9ybXVsYXJpby5lbmNvZGUgPSBlbmNvZGU7XG5tb2R1bGUuZXhwb3J0cyA9IGZvcm11bGFyaW87XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHBhZCAoaGFzaCwgbGVuKSB7XG4gIHdoaWxlIChoYXNoLmxlbmd0aCA8IGxlbikge1xuICAgIGhhc2ggPSAnMCcgKyBoYXNoO1xuICB9XG4gIHJldHVybiBoYXNoO1xufVxuXG5mdW5jdGlvbiBmb2xkIChoYXNoLCB0ZXh0KSB7XG4gIHZhciBpO1xuICB2YXIgY2hyO1xuICB2YXIgbGVuO1xuICBpZiAodGV4dC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gaGFzaDtcbiAgfVxuICBmb3IgKGkgPSAwLCBsZW4gPSB0ZXh0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY2hyID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNocjtcbiAgICBoYXNoIHw9IDA7XG4gIH1cbiAgcmV0dXJuIGhhc2ggPCAwID8gaGFzaCAqIC0yIDogaGFzaDtcbn1cblxuZnVuY3Rpb24gZm9sZE9iamVjdCAoaGFzaCwgbywgc2Vlbikge1xuICByZXR1cm4gT2JqZWN0LmtleXMobykuc29ydCgpLnJlZHVjZShmb2xkS2V5LCBoYXNoKTtcbiAgZnVuY3Rpb24gZm9sZEtleSAoaGFzaCwga2V5KSB7XG4gICAgcmV0dXJuIGZvbGRWYWx1ZShoYXNoLCBvW2tleV0sIGtleSwgc2Vlbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9sZFZhbHVlIChpbnB1dCwgdmFsdWUsIGtleSwgc2Vlbikge1xuICB2YXIgaGFzaCA9IGZvbGQoZm9sZChmb2xkKGlucHV0LCBrZXkpLCB0b1N0cmluZyh2YWx1ZSkpLCB0eXBlb2YgdmFsdWUpO1xuICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZm9sZChoYXNoLCAnbnVsbCcpO1xuICB9XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZvbGQoaGFzaCwgJ3VuZGVmaW5lZCcpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKHNlZW4uaW5kZXhPZih2YWx1ZSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZm9sZChoYXNoLCAnW0NpcmN1bGFyXScgKyBrZXkpO1xuICAgIH1cbiAgICBzZWVuLnB1c2godmFsdWUpO1xuICAgIHJldHVybiBmb2xkT2JqZWN0KGhhc2gsIHZhbHVlLCBzZWVuKTtcbiAgfVxuICByZXR1cm4gZm9sZChoYXNoLCB2YWx1ZS50b1N0cmluZygpKTtcbn1cblxuZnVuY3Rpb24gdG9TdHJpbmcgKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuZnVuY3Rpb24gc3VtIChvKSB7XG4gIHJldHVybiBwYWQoZm9sZFZhbHVlKDAsIG8sICcnLCBbXSkudG9TdHJpbmcoMTYpLCA4KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdW07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjaGFyYWN0ZXJzID0gWyc8JywgJz4nLCAnXCInLCAnYCcsICcgJywgJ1xccicsICdcXG4nLCAnXFx0JywgJ3snLCAnfScsICd8JywgJ1xcXFwnLCAnXicsICdgJywgJ1xcJyddO1xudmFyIG1hcCA9IFtdO1xudmFyIGk7XG52YXIgY2g7XG52YXIgZXNjO1xudmFyIGxlbjtcbmZvciAoaSA9IDAsIGxlbiA9IGNoYXJhY3RlcnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgY2ggPSBjaGFyYWN0ZXJzW2ldO1xuICBlc2MgPSBlbmNvZGVVUklDb21wb25lbnQoY2gpO1xuICBpZiAoZXNjID09PSBjaCkge1xuICAgIGVzYyA9IGdsb2JhbC5lc2NhcGUoY2gpO1xuICB9XG4gIG1hcFtjaC5jaGFyQ29kZUF0KDApXSA9IGVzYztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXA7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhdXRvZXNjYXBlID0gcmVxdWlyZSgnLi9hdXRvZXNjYXBlJyk7XG5cbmZ1bmN0aW9uIGdldENvbXBvbmVudEVzY2FwZWQgKHRleHQsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGkgPSBzdGFydDtcbiAgdmFyIGN1cnJlbnQgPSBzdGFydDtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuICB2YXIgY2g7XG4gIHZhciBlc2NhcGVkO1xuICBmb3IgKDsgaSA8PSBlbmQ7ICsraSkge1xuICAgIGNoID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgIGVzY2FwZWQgPSBhdXRvZXNjYXBlW2NoXTtcbiAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgaWYgKGN1cnJlbnQgPCBpKSB7XG4gICAgICAgIHJlc3VsdCArPSB0ZXh0LnNsaWNlKGN1cnJlbnQsIGkpO1xuICAgICAgfVxuICAgICAgcmVzdWx0ICs9IGVzY2FwZWQ7XG4gICAgICBjdXJyZW50ID0gaSArIDE7XG4gICAgfVxuICB9XG4gIGlmIChjdXJyZW50IDwgaSArIDEpIHtcbiAgICByZXN1bHQgKz0gdGV4dC5zbGljZShjdXJyZW50LCBpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldENvbXBvbmVudEVzY2FwZWQ7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBxdWVyeXN0cmluZyA9IHJlcXVpcmUoJy4vcXVlcnlzdHJpbmcnKTtcbnZhciBhdXRvZXNjYXBlID0gcmVxdWlyZSgnLi9hdXRvZXNjYXBlJyk7XG52YXIgZ2V0Q29tcG9uZW50RXNjYXBlZCA9IHJlcXVpcmUoJy4vZ2V0Q29tcG9uZW50RXNjYXBlZCcpO1xuXG5mdW5jdGlvbiBwYXJzZSAoaW5wdXQpIHtcbiAgdmFyIHN0YXJ0ID0gMDtcbiAgdmFyIGVuZCA9IGlucHV0Lmxlbmd0aCAtIDE7XG4gIHZhciBfcHJvdG9jb2w7XG4gIHZhciBfaG9zdG5hbWU7XG4gIHZhciBfaG9zdDtcbiAgdmFyIF9wb3J0O1xuICB2YXIgX3ByZXBlbmRTbGFzaDtcbiAgdmFyIF9wYXRobmFtZTtcbiAgdmFyIF9wYXRoO1xuICB2YXIgX3F1ZXJ5O1xuICB2YXIgX3NlYXJjaDtcbiAgdmFyIF9oYXNoO1xuICB2YXIgY2g7XG5cbiAgd2hpbGUgKGlucHV0LmNoYXJDb2RlQXQoc3RhcnQpIDw9IDB4MjAgLyonICcqLykgeyBzdGFydCsrOyB9XG4gIHdoaWxlIChpbnB1dC5jaGFyQ29kZUF0KGVuZCkgPD0gMHgyMCAvKicgJyovKSB7IGVuZC0tOyB9XG5cbiAgc3RhcnQgPSBwYXJzZVByb3RvY29sKGlucHV0LCBzdGFydCwgZW5kKTtcbiAgc3RhcnQgPSBwYXJzZUhvc3QoaW5wdXQsIHN0YXJ0LCBlbmQpO1xuXG4gIGlmIChzdGFydCA8PSBlbmQpIHtcbiAgICBjaCA9IGlucHV0LmNoYXJDb2RlQXQoc3RhcnQpO1xuICAgIGlmIChjaCA9PT0gMHgyRiAvKicvJyovKSB7XG4gICAgICBwYXJzZVBhdGgoaW5wdXQsIHN0YXJ0LCBlbmQpO1xuICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4M0YgLyonPycqLykge1xuICAgICAgcGFyc2VRdWVyeShpbnB1dCwgc3RhcnQsIGVuZCk7XG4gICAgfSBlbHNlIGlmIChjaCA9PT0gMHgyMyAvKicjJyovKSB7XG4gICAgICBwYXJzZUhhc2goaW5wdXQsIHN0YXJ0LCBlbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZVBhdGgoaW5wdXQsIHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghX3BhdGhuYW1lKSB7IF9wYXRobmFtZSA9ICcvJzsgfVxuICBpZiAoIV9xdWVyeSkgeyBfcXVlcnkgPSAnJzsgfVxuICBpZiAoIV9zZWFyY2gpIHsgX3NlYXJjaCA9ICcnOyB9XG5cbiAgX3BhdGggPSBwYXJzZUZ1bGxQYXRoKCk7XG5cbiAgcGFyc2VRdWVyeVN0cmluZygpO1xuXG4gIHJldHVybiB7XG4gICAgcHJvdG9jb2w6IF9wcm90b2NvbCxcbiAgICBob3N0bmFtZTogX2hvc3RuYW1lLFxuICAgIGhvc3Q6IF9ob3N0LFxuICAgIHBvcnQ6IF9wb3J0LFxuICAgIHBhdGhuYW1lOiBfcGF0aG5hbWUsXG4gICAgcGF0aDogX3BhdGgsXG4gICAgc2VhcmNoOiBfc2VhcmNoLFxuICAgIGhhc2g6IF9oYXNoLFxuICAgIHF1ZXJ5OiBfcXVlcnlcbiAgfTtcblxuICBmdW5jdGlvbiBwYXJzZVByb3RvY29sIChpbnB1dCwgc3RhcnQsIGVuZCkge1xuICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8PSBlbmQ7ICsraSkge1xuICAgICAgaWYgKGlucHV0LmNoYXJDb2RlQXQoaSkgPT09IDB4M0EgLyonOicqLykge1xuICAgICAgICBfcHJvdG9jb2wgPSBpbnB1dC5zbGljZShzdGFydCwgaSkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIGkgKyAxO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RhcnQ7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUhvc3QgKGlucHV0LCBzdGFydCwgZW5kKSB7XG4gICAgaWYgKGlucHV0LmNoYXJDb2RlQXQoc3RhcnQpICE9PSAweDJGIC8qJy8nKi8gfHxcbiAgICAgICAgaW5wdXQuY2hhckNvZGVBdChzdGFydCArIDEpICE9PSAweDJGIC8qJy8nKi8pIHtcbiAgICAgIHJldHVybiBzdGFydDtcbiAgICB9XG5cbiAgICBzdGFydCArPSAyOyAvLyBhc3N1bWUgc2xhc2hlc1xuXG4gICAgdmFyIGxvd2VyID0gZmFsc2U7XG4gICAgdmFyIGhvc3ROYW1lU3RhcnQgPSBzdGFydDtcbiAgICB2YXIgaG9zdE5hbWVFbmQgPSBlbmQ7XG4gICAgdmFyIHBvcnRMZW5ndGggPSAwO1xuICAgIHZhciBjaGFyc0FmdGVyRG90ID0gMDtcbiAgICB2YXIgaG9zdG5hbWU7XG5cbiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPD0gZW5kOyArK2kpIHtcbiAgICAgIGlmIChjaGFyc0FmdGVyRG90ID4gNjIpIHtcbiAgICAgICAgX2hvc3RuYW1lID0gX2hvc3QgPSBpbnB1dC5zbGljZShzdGFydCwgaSk7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgICAgdmFyIGNoID0gaW5wdXQuY2hhckNvZGVBdChpKTtcbiAgICAgIGlmIChjaCA9PT0gMHgzQSAvKic6JyovKSB7XG4gICAgICAgIHBvcnRMZW5ndGggPSBwYXJzZVBvcnQoaW5wdXQsIGkgKyAxLCBlbmQpICsgMTtcbiAgICAgICAgaG9zdE5hbWVFbmQgPSBpIC0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKGNoIDwgMHg2MSAvKidhJyovKSB7XG4gICAgICAgIGlmIChjaCA9PT0gMHgyRSAvKicuJyovKSB7XG4gICAgICAgICAgY2hhcnNBZnRlckRvdCA9IC0xO1xuICAgICAgICB9IGVsc2UgaWYgKDB4NDEgLyonQScqLyA8PSBjaCAmJiBjaCA8PSAweDVBIC8qJ1onKi8pIHtcbiAgICAgICAgICBsb3dlciA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoIShjaCA9PT0gMHgyRCAvKictJyovIHx8IGNoID09PSAweDVGIC8qJ18nKi8gfHwgKDB4MzAgLyonMCcqLyA8PSBjaCAmJiBjaCA8PSAweDM5IC8qJzknKi8pKSkge1xuICAgICAgICAgIGlmIChjaCAhPT0gMHgyRiAvKicvJyovICYmIGNoICE9PSAweDNGIC8qJz8nKi8gJiYgY2ggIT09IDB4MjMgLyonIycqLykge1xuICAgICAgICAgICAgX3ByZXBlbmRTbGFzaCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhvc3ROYW1lRW5kID0gaSAtIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNoYXJzQWZ0ZXJEb3QrKztcbiAgICB9XG4gICAgaWYgKGhvc3ROYW1lRW5kICsgMSAhPT0gc3RhcnQgJiYgaG9zdE5hbWVFbmQgLSBob3N0TmFtZVN0YXJ0IDw9IDI1Nikge1xuICAgICAgaG9zdG5hbWUgPSBpbnB1dC5zbGljZShob3N0TmFtZVN0YXJ0LCBob3N0TmFtZUVuZCArIDEpO1xuICAgICAgaWYgKGxvd2VyKSB7XG4gICAgICAgIGhvc3RuYW1lID0gaG9zdG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIH1cbiAgICAgIF9ob3N0bmFtZSA9IGhvc3RuYW1lO1xuICAgICAgX2hvc3QgPSBfcG9ydCA+IDAgPyBob3N0bmFtZSArICc6JyArIF9wb3J0IDogaG9zdG5hbWU7XG4gICAgfVxuICAgIHJldHVybiBob3N0TmFtZUVuZCArIDEgKyBwb3J0TGVuZ3RoO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VQb3J0ICh0ZXh0LCBzdGFydCwgZW5kKSB7XG4gICAgdmFyIHBvcnQgPSAwO1xuICAgIHZhciBhbnkgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8PSBlbmQ7ICsraSkge1xuICAgICAgdmFyIGNoID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgaWYgKGNoID49IDB4MzAgLyonMCcqLyAmJiBjaCA8PSAweDM5IC8qJzknKi8pIHtcbiAgICAgICAgcG9ydCA9ICgxMCAqIHBvcnQpICsgKGNoIC0gMHgzMCAvKicwJyovKTtcbiAgICAgICAgYW55ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocG9ydCA9PT0gMCAmJiAhYW55KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgX3BvcnQgPSBwb3J0O1xuICAgIHJldHVybiBpIC0gc3RhcnQ7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVBhdGggKHRleHQsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgcGF0aFN0YXJ0ID0gc3RhcnQ7XG4gICAgdmFyIHBhdGhFbmQgPSBlbmQ7XG4gICAgdmFyIGVzY2FwZSA9IGZhbHNlO1xuICAgIHZhciBwYXRoO1xuICAgIHZhciBpO1xuICAgIHZhciBjaDtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8PSBlbmQ7ICsraSkge1xuICAgICAgY2ggPSB0ZXh0LmNoYXJDb2RlQXQoaSk7XG4gICAgICBpZiAoY2ggPT09IDB4MjMgLyonIycqLykge1xuICAgICAgICBwYXJzZUhhc2godGV4dCwgaSwgZW5kKTtcbiAgICAgICAgcGF0aEVuZCA9IGkgLSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4M0YgLyonPycqLykge1xuICAgICAgICBwYXJzZVF1ZXJ5KHRleHQsIGksIGVuZCk7XG4gICAgICAgIHBhdGhFbmQgPSBpIC0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKCFlc2NhcGUgJiYgYXV0b2VzY2FwZVtjaF0pIHtcbiAgICAgICAgZXNjYXBlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBhdGhTdGFydCA+IHBhdGhFbmQpIHtcbiAgICAgIF9wYXRobmFtZSA9ICcvJzsgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXNjYXBlKSB7XG4gICAgICBwYXRoID0gZ2V0Q29tcG9uZW50RXNjYXBlZCh0ZXh0LCBwYXRoU3RhcnQsIHBhdGhFbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXRoID0gdGV4dC5zbGljZShwYXRoU3RhcnQsIHBhdGhFbmQgKyAxKTtcbiAgICB9XG4gICAgX3BhdGhuYW1lID0gX3ByZXBlbmRTbGFzaCA/ICcvJyArIHBhdGggOiBwYXRoO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VRdWVyeSAodGV4dCwgc3RhcnQsIGVuZCkge1xuICAgIHZhciBxdWVyeVN0YXJ0ID0gc3RhcnQ7XG4gICAgdmFyIHF1ZXJ5RW5kID0gZW5kO1xuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcbiAgICB2YXIgaTtcbiAgICB2YXIgY2g7XG4gICAgdmFyIHF1ZXJ5O1xuXG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPD0gZW5kOyArK2kpIHtcbiAgICAgIGNoID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgaWYgKGNoID09PSAweDIzIC8qJyMnKi8pIHtcbiAgICAgICAgcGFyc2VIYXNoKHRleHQsIGksIGVuZCk7XG4gICAgICAgIHF1ZXJ5RW5kID0gaSAtIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmICghZXNjYXBlICYmIGF1dG9lc2NhcGVbY2hdKSB7XG4gICAgICAgIGVzY2FwZSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChxdWVyeVN0YXJ0ID4gcXVlcnlFbmQpIHtcbiAgICAgIF9zZWFyY2ggPSAnJzsgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXNjYXBlKSB7XG4gICAgICBxdWVyeSA9IGdldENvbXBvbmVudEVzY2FwZWQodGV4dCwgcXVlcnlTdGFydCwgcXVlcnlFbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVyeSA9IHRleHQuc2xpY2UocXVlcnlTdGFydCwgcXVlcnlFbmQgKyAxKTtcbiAgICB9XG4gICAgX3NlYXJjaCA9IHF1ZXJ5O1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyAoKSB7XG4gICAgdmFyIHNlYXJjaCA9IF9zZWFyY2g7XG4gICAgaWYgKHNlYXJjaC5jaGFyQ29kZUF0KDApID09PSAweDNGIC8qJz8nKi8pIHtcbiAgICAgIHNlYXJjaCA9IHNlYXJjaC5zbGljZSgxKTtcbiAgICB9XG4gICAgX3F1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2Uoc2VhcmNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSGFzaCAodGV4dCwgc3RhcnQsIGVuZCkge1xuICAgIGlmIChzdGFydCA+IGVuZCkge1xuICAgICAgX2hhc2ggPSAnJzsgcmV0dXJuO1xuICAgIH1cbiAgICBfaGFzaCA9IGdldENvbXBvbmVudEVzY2FwZWQodGV4dCwgc3RhcnQsIGVuZCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUZ1bGxQYXRoICgpIHtcbiAgICBpZiAoX3BhdGhuYW1lIHx8IF9zZWFyY2gpIHtcbiAgICAgIHJldHVybiBfcGF0aG5hbWUgKyBfc2VhcmNoO1xuICAgIH1cbiAgICBpZiAoIV9wYXRobmFtZSAmJiBfc2VhcmNoKSB7XG4gICAgICByZXR1cm4gJy8nICsgX3NlYXJjaDtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwYXJzZTogcGFyc2Vcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBzZXBhcmF0b3IgPSAnJic7XG52YXIgZXF1YWxzID0gJz0nO1xudmFyIHBsdXMgPSAnJTIwJztcbnZhciBtYXhLZXlzID0gMTAwMDtcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5IChpbnB1dCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGlucHV0KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5IChpbnB1dCwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGlucHV0LCBwcm9wKTtcbn1cblxuZnVuY3Rpb24gcGFyc2UgKHFzKSB7XG4gIHZhciBtYXAgPSB7fTtcblxuICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbWFwO1xuICB9XG5cbiAgdmFyIHJwbHVzID0gL1xcKy9nO1xuICB2YXIgeDtcbiAgdmFyIGlkeDtcbiAgdmFyIGtzdHI7XG4gIHZhciB2c3RyO1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBpO1xuICB2YXIgcGFydHMgPSBxcy5zcGxpdChzZXBhcmF0b3IpO1xuICB2YXIgbGVuID0gcGFydHMubGVuZ3RoO1xuICBpZiAobGVuID4gbWF4S2V5cykge1xuICAgIGxlbiA9IG1heEtleXM7XG4gIH1cblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICB4ID0gcGFydHNbaV0ucmVwbGFjZShycGx1cywgcGx1cyk7XG4gICAgaWR4ID0geC5pbmRleE9mKGVxdWFscyk7XG5cbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrc3RyID0geDtcbiAgICAgIHZzdHIgPSAnJztcbiAgICB9XG5cbiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7XG5cbiAgICBpZiAoIWhhc093blByb3BlcnR5KG1hcCwgaykpIHtcbiAgICAgIG1hcFtrXSA9IHY7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG1hcFtrXSkpIHtcbiAgICAgIG1hcFtrXS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXBba10gPSBbbWFwW2tdLCB2XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWFwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcGFyc2U6IHBhcnNlXG59O1xuIiwidmFyIG5vdyA9IHJlcXVpcmUoJ3BlcmZvcm1hbmNlLW5vdycpXG4gICwgZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IHdpbmRvd1xuICAsIHZlbmRvcnMgPSBbJ21veicsICd3ZWJraXQnXVxuICAsIHN1ZmZpeCA9ICdBbmltYXRpb25GcmFtZSdcbiAgLCByYWYgPSBnbG9iYWxbJ3JlcXVlc3QnICsgc3VmZml4XVxuICAsIGNhZiA9IGdsb2JhbFsnY2FuY2VsJyArIHN1ZmZpeF0gfHwgZ2xvYmFsWydjYW5jZWxSZXF1ZXN0JyArIHN1ZmZpeF1cbiAgLCBuYXRpdmUgPSB0cnVlXG5cbmZvcih2YXIgaSA9IDA7IGkgPCB2ZW5kb3JzLmxlbmd0aCAmJiAhcmFmOyBpKyspIHtcbiAgcmFmID0gZ2xvYmFsW3ZlbmRvcnNbaV0gKyAnUmVxdWVzdCcgKyBzdWZmaXhdXG4gIGNhZiA9IGdsb2JhbFt2ZW5kb3JzW2ldICsgJ0NhbmNlbCcgKyBzdWZmaXhdXG4gICAgICB8fCBnbG9iYWxbdmVuZG9yc1tpXSArICdDYW5jZWxSZXF1ZXN0JyArIHN1ZmZpeF1cbn1cblxuLy8gU29tZSB2ZXJzaW9ucyBvZiBGRiBoYXZlIHJBRiBidXQgbm90IGNBRlxuaWYoIXJhZiB8fCAhY2FmKSB7XG4gIG5hdGl2ZSA9IGZhbHNlXG5cbiAgdmFyIGxhc3QgPSAwXG4gICAgLCBpZCA9IDBcbiAgICAsIHF1ZXVlID0gW11cbiAgICAsIGZyYW1lRHVyYXRpb24gPSAxMDAwIC8gNjBcblxuICByYWYgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmKHF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdmFyIF9ub3cgPSBub3coKVxuICAgICAgICAsIG5leHQgPSBNYXRoLm1heCgwLCBmcmFtZUR1cmF0aW9uIC0gKF9ub3cgLSBsYXN0KSlcbiAgICAgIGxhc3QgPSBuZXh0ICsgX25vd1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNwID0gcXVldWUuc2xpY2UoMClcbiAgICAgICAgLy8gQ2xlYXIgcXVldWUgaGVyZSB0byBwcmV2ZW50XG4gICAgICAgIC8vIGNhbGxiYWNrcyBmcm9tIGFwcGVuZGluZyBsaXN0ZW5lcnNcbiAgICAgICAgLy8gdG8gdGhlIGN1cnJlbnQgZnJhbWUncyBxdWV1ZVxuICAgICAgICBxdWV1ZS5sZW5ndGggPSAwXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmKCFjcFtpXS5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgY3BbaV0uY2FsbGJhY2sobGFzdClcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlIH0sIDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBNYXRoLnJvdW5kKG5leHQpKVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKHtcbiAgICAgIGhhbmRsZTogKytpZCxcbiAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcbiAgICAgIGNhbmNlbGxlZDogZmFsc2VcbiAgICB9KVxuICAgIHJldHVybiBpZFxuICB9XG5cbiAgY2FmID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZihxdWV1ZVtpXS5oYW5kbGUgPT09IGhhbmRsZSkge1xuICAgICAgICBxdWV1ZVtpXS5jYW5jZWxsZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4pIHtcbiAgLy8gV3JhcCBpbiBhIG5ldyBmdW5jdGlvbiB0byBwcmV2ZW50XG4gIC8vIGBjYW5jZWxgIHBvdGVudGlhbGx5IGJlaW5nIGFzc2lnbmVkXG4gIC8vIHRvIHRoZSBuYXRpdmUgckFGIGZ1bmN0aW9uXG4gIGlmKCFuYXRpdmUpIHtcbiAgICByZXR1cm4gcmFmLmNhbGwoZ2xvYmFsLCBmbilcbiAgfVxuICByZXR1cm4gcmFmLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpIHtcbiAgICB0cnl7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0aHJvdyBlIH0sIDApXG4gICAgfVxuICB9KVxufVxubW9kdWxlLmV4cG9ydHMuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gIGNhZi5hcHBseShnbG9iYWwsIGFyZ3VtZW50cylcbn1cbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjNcbihmdW5jdGlvbigpIHtcbiAgdmFyIGdldE5hbm9TZWNvbmRzLCBocnRpbWUsIGxvYWRUaW1lO1xuXG4gIGlmICgodHlwZW9mIHBlcmZvcm1hbmNlICE9PSBcInVuZGVmaW5lZFwiICYmIHBlcmZvcm1hbmNlICE9PSBudWxsKSAmJiBwZXJmb3JtYW5jZS5ub3cpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAoKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MgIT09IG51bGwpICYmIHByb2Nlc3MuaHJ0aW1lKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAoZ2V0TmFub1NlY29uZHMoKSAtIGxvYWRUaW1lKSAvIDFlNjtcbiAgICB9O1xuICAgIGhydGltZSA9IHByb2Nlc3MuaHJ0aW1lO1xuICAgIGdldE5hbm9TZWNvbmRzID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaHI7XG4gICAgICBociA9IGhydGltZSgpO1xuICAgICAgcmV0dXJuIGhyWzBdICogMWU5ICsgaHJbMV07XG4gICAgfTtcbiAgICBsb2FkVGltZSA9IGdldE5hbm9TZWNvbmRzKCk7XG4gIH0gZWxzZSBpZiAoRGF0ZS5ub3cpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIERhdGUubm93KCkgLSBsb2FkVGltZTtcbiAgICB9O1xuICAgIGxvYWRUaW1lID0gRGF0ZS5ub3coKTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9hZFRpbWU7XG4gICAgfTtcbiAgICBsb2FkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9XG5cbn0pLmNhbGwodGhpcyk7XG5cbi8qXG4vL0Agc291cmNlTWFwcGluZ1VSTD1wZXJmb3JtYW5jZS1ub3cubWFwXG4qL1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGF0aFRvUmVnRXhwID0gcmVxdWlyZSgnLi9wYXRoVG9SZWdFeHAnKTtcblxuZnVuY3Rpb24gbWF0Y2ggKHJvdXRlcywgdXJpLCBzdGFydEF0KSB7XG4gIHZhciBjYXB0dXJlcztcbiAgdmFyIGkgPSBzdGFydEF0IHx8IDA7XG5cbiAgZm9yICh2YXIgbGVuID0gcm91dGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHJvdXRlID0gcm91dGVzW2ldO1xuICAgIHZhciByZSA9IHJvdXRlLnJlO1xuICAgIHZhciBrZXlzID0gcm91dGUua2V5cztcbiAgICB2YXIgc3BsYXRzID0gW107XG4gICAgdmFyIHBhcmFtcyA9IHt9O1xuXG4gICAgaWYgKGNhcHR1cmVzID0gdXJpLm1hdGNoKHJlKSkge1xuICAgICAgZm9yICh2YXIgaiA9IDEsIGxlbiA9IGNhcHR1cmVzLmxlbmd0aDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHR5cGVvZiBjYXB0dXJlc1tqXSA9PT0gJ3N0cmluZycgPyB1bmVzY2FwZShjYXB0dXJlc1tqXSkgOiBjYXB0dXJlc1tqXTtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaiAtIDFdO1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcGxhdHMucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgIHNwbGF0czogc3BsYXRzLFxuICAgICAgICByb3V0ZTogcm91dGUuc3JjLFxuICAgICAgICBuZXh0OiBpICsgMSxcbiAgICAgICAgaW5kZXg6IHJvdXRlLmluZGV4XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByb3V0ZUluZm8gKHBhdGgsIGluZGV4KSB7XG4gIHZhciBzcmM7XG4gIHZhciByZTtcbiAgdmFyIGtleXMgPSBbXTtcblxuICBpZiAocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgIHJlID0gcGF0aDtcbiAgICBzcmMgPSBwYXRoLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgcmUgPSBwYXRoVG9SZWdFeHAocGF0aCwga2V5cyk7XG4gICAgc3JjID0gcGF0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgIHJlOiByZSxcbiAgICAgc3JjOiBwYXRoLnRvU3RyaW5nKCksXG4gICAgIGtleXM6IGtleXMsXG4gICAgIGluZGV4OiBpbmRleFxuICB9O1xufVxuXG5mdW5jdGlvbiBSb3V0ZXIgKCkge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUm91dGVyKSkge1xuICAgIHJldHVybiBuZXcgUm91dGVyKCk7XG4gIH1cblxuICB0aGlzLnJvdXRlcyA9IFtdO1xuICB0aGlzLnJvdXRlTWFwID0gW107XG59XG5cblJvdXRlci5wcm90b3R5cGUuYWRkUm91dGUgPSBmdW5jdGlvbiAocGF0aCwgYWN0aW9uKSB7XG4gIGlmICghcGF0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcignIHJvdXRlIHJlcXVpcmVzIGEgcGF0aCcpO1xuICB9XG4gIGlmICghYWN0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCcgcm91dGUgJyArIHBhdGgudG9TdHJpbmcoKSArICcgcmVxdWlyZXMgYW4gYWN0aW9uJyk7XG4gIH1cblxuICB2YXIgcm91dGUgPSByb3V0ZUluZm8ocGF0aCwgdGhpcy5yb3V0ZU1hcC5sZW5ndGgpO1xuICByb3V0ZS5hY3Rpb24gPSBhY3Rpb247XG4gIHRoaXMucm91dGVzLnB1c2gocm91dGUpO1xuICB0aGlzLnJvdXRlTWFwLnB1c2goW3BhdGgsIGFjdGlvbl0pO1xufVxuXG5Sb3V0ZXIucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKHVyaSwgc3RhcnRBdCkge1xuICB2YXIgcm91dGUgPSBtYXRjaCh0aGlzLnJvdXRlcywgdXJpLCBzdGFydEF0KTtcbiAgaWYgKHJvdXRlKSB7XG4gICAgcm91dGUuYWN0aW9uID0gdGhpcy5yb3V0ZU1hcFtyb3V0ZS5pbmRleF1bMV07XG4gICAgcm91dGUubmV4dCA9IHRoaXMubWF0Y2guYmluZCh0aGlzLCB1cmksIHJvdXRlLm5leHQpO1xuICB9XG4gIHJldHVybiByb3V0ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSb3V0ZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHBhdGhUb1JlZ0V4cCAocGF0aCwga2V5cykge1xuICBwYXRoID0gcGF0aFxuICAgIC5jb25jYXQoJy8/JylcbiAgICAucmVwbGFjZSgvXFwvXFwoL2csICcoPzovJylcbiAgICAucmVwbGFjZSgvKFxcLyk/KFxcLik/OihcXHcrKSg/OihcXCguKj9cXCkpKT8oXFw/KT98XFwqL2csIHR3ZWFrKVxuICAgIC5yZXBsYWNlKC8oW1xcLy5dKS9nLCAnXFxcXCQxJylcbiAgICAucmVwbGFjZSgvXFwqL2csICcoLiopJyk7XG5cbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcGF0aCArICckJywgJ2knKTtcblxuICBmdW5jdGlvbiB0d2VhayAobWF0Y2gsIHNsYXNoLCBmb3JtYXQsIGtleSwgY2FwdHVyZSwgb3B0aW9uYWwpIHtcbiAgICBpZiAobWF0Y2ggPT09ICcqJykge1xuICAgICAga2V5cy5wdXNoKHZvaWQgMCk7XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuXG4gICAga2V5cy5wdXNoKGtleSk7XG5cbiAgICBzbGFzaCA9IHNsYXNoIHx8ICcnO1xuXG4gICAgcmV0dXJuICcnXG4gICAgICArIChvcHRpb25hbCA/ICcnIDogc2xhc2gpXG4gICAgICArICcoPzonXG4gICAgICArIChvcHRpb25hbCA/IHNsYXNoIDogJycpXG4gICAgICArIChmb3JtYXQgfHwgJycpXG4gICAgICArIChjYXB0dXJlID8gY2FwdHVyZS5yZXBsYWNlKC9cXCovZywgJ3swLH0nKS5yZXBsYWNlKC9cXC4vZywgJ1tcXFxcc1xcXFxTXScpIDogJyhbXi9dKz8pJylcbiAgICAgICsgJyknXG4gICAgICArIChvcHRpb25hbCB8fCAnJyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXRoVG9SZWdFeHA7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1bmVzY2FwZSA9IHJlcXVpcmUoJy4vdW5lc2NhcGUnKTtcblxuZnVuY3Rpb24gc2FmZXNvbiAoZGF0YSwgc3BhY2VzKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCBzcGFjZXMpXG4gICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcbiAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlIChkYXRhKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKHVuZXNjYXBlKGRhdGEpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzYWZlc29uO1xuc2FmZXNvbi5kZWNvZGUgPSBkZWNvZGU7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciByZUVzY2FwZWRIdG1sID0gLyYoPzphbXB8bHR8Z3R8cXVvdHwjMzl8Izk2KTsvZztcbnZhciBodG1sVW5lc2NhcGVzID0ge1xuICAnJmFtcDsnOiAnJicsXG4gICcmbHQ7JzogJzwnLFxuICAnJmd0Oyc6ICc+JyxcbiAgJyZxdW90Oyc6ICdcIicsXG4gICcmIzM5Oyc6ICdcXCcnLFxuICAnJiM5NjsnOiAnYCdcbn07XG5cbmZ1bmN0aW9uIHVuZXNjYXBlSHRtbENoYXIgKGMpIHtcbiAgcmV0dXJuIGh0bWxVbmVzY2FwZXNbY107XG59XG5cbmZ1bmN0aW9uIHVuZXNjYXBlIChpbnB1dCkge1xuICB2YXIgZGF0YSA9IGlucHV0ID09IG51bGwgPyAnJyA6IFN0cmluZyhpbnB1dCk7XG4gIGlmIChkYXRhICYmIChyZUVzY2FwZWRIdG1sLmxhc3RJbmRleCA9IDAsIHJlRXNjYXBlZEh0bWwudGVzdChkYXRhKSkpIHtcbiAgICByZXR1cm4gZGF0YS5yZXBsYWNlKHJlRXNjYXBlZEh0bWwsIHVuZXNjYXBlSHRtbENoYXIpO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHVuZXNjYXBlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gdGVtcG9yaXplIChvcHRpb25zLCBkb25lKSB7XG4gIHZhciBzdG9yZSA9IGNhY2hlW29wdGlvbnMubmFtZV07XG4gIGlmIChzdG9yZSA9PT0gdm9pZCAwKSB7XG4gICAgc3RvcmUgPSBjYWNoZVtvcHRpb25zLm5hbWVdID0ge1xuICAgICAgY2FsbGJhY2tzOiBbXSxcbiAgICAgIGV4cGlyZXM6IC1JbmZpbml0eVxuICAgIH07XG4gIH1cbiAgc3RvcmUuY2FsbGJhY2tzLnB1c2goZG9uZSk7XG4gIGlmIChzdG9yZS5sb2FkaW5nKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICBpZiAobm93ID4gc3RvcmUuZXhwaXJlcykge1xuICAgIHJlbG9hZCgpO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlZCgpO1xuICB9XG4gIGZ1bmN0aW9uIHJlbG9hZCAoKSB7XG4gICAgc3RvcmUubG9hZGluZyA9IHRydWU7XG4gICAgb3B0aW9ucy5sb2FkKGxvYWRlZCk7XG4gIH1cbiAgZnVuY3Rpb24gbG9hZGVkICgpIHtcbiAgICB2YXIgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG4gICAgZXhwaXJlcy5zZXRTZWNvbmRzKGV4cGlyZXMuZ2V0U2Vjb25kcygpICsgb3B0aW9ucy5zZWNvbmRzKTtcbiAgICBzdG9yZS5leHBpcmVzID0gZXhwaXJlcztcbiAgICBzdG9yZS5jb250ZXh0ID0gdGhpcztcbiAgICBzdG9yZS5hcmdzID0gYXJndW1lbnRzO1xuICAgIGNhY2hlZCgpO1xuICB9XG4gIGZ1bmN0aW9uIGNhY2hlZCAoKSB7XG4gICAgc3RvcmUubG9hZGluZyA9IGZhbHNlO1xuICAgIHN0b3JlLmNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICBzdG9yZS5jYWxsYmFja3MgPSBbXTtcbiAgICBmdW5jdGlvbiBjYWxsYmFjayAoZm4pIHtcbiAgICAgIHNldFRpbWVvdXQoZ28sIDApO1xuICAgICAgZnVuY3Rpb24gZ28gKCkge1xuICAgICAgICBmbi5hcHBseShzdG9yZS5jb250ZXh0LCBzdG9yZS5hcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0ZW1wb3JpemU7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciB3aW5kb3cgPSByZXF1aXJlKFwiZ2xvYmFsL3dpbmRvd1wiKVxudmFyIG9uY2UgPSByZXF1aXJlKFwib25jZVwiKVxudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoXCJwYXJzZS1oZWFkZXJzXCIpXG5cblxudmFyIFhIUiA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCB8fCBub29wXG52YXIgWERSID0gXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiAobmV3IFhIUigpKSA/IFhIUiA6IHdpbmRvdy5YRG9tYWluUmVxdWVzdFxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVhIUlxuXG5mdW5jdGlvbiBjcmVhdGVYSFIob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBmdW5jdGlvbiByZWFkeXN0YXRlY2hhbmdlKCkge1xuICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGxvYWRGdW5jKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEJvZHkoKSB7XG4gICAgICAgIC8vIENocm9tZSB3aXRoIHJlcXVlc3RUeXBlPWJsb2IgdGhyb3dzIGVycm9ycyBhcnJvdW5kIHdoZW4gZXZlbiB0ZXN0aW5nIGFjY2VzcyB0byByZXNwb25zZVRleHRcbiAgICAgICAgdmFyIGJvZHkgPSB1bmRlZmluZWRcblxuICAgICAgICBpZiAoeGhyLnJlc3BvbnNlKSB7XG4gICAgICAgICAgICBib2R5ID0geGhyLnJlc3BvbnNlXG4gICAgICAgIH0gZWxzZSBpZiAoeGhyLnJlc3BvbnNlVHlwZSA9PT0gXCJ0ZXh0XCIgfHwgIXhoci5yZXNwb25zZVR5cGUpIHtcbiAgICAgICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2VUZXh0IHx8IHhoci5yZXNwb25zZVhNTFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSnNvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBib2R5ID0gSlNPTi5wYXJzZShib2R5KVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBib2R5XG4gICAgfVxuICAgIFxuICAgIHZhciBmYWlsdXJlUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgYm9keTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgdXJsOiB1cmksXG4gICAgICAgICAgICAgICAgcmF3UmVxdWVzdDogeGhyXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZXJyb3JGdW5jKGV2dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dFRpbWVyKVxuICAgICAgICBpZighKGV2dCBpbnN0YW5jZW9mIEVycm9yKSl7XG4gICAgICAgICAgICBldnQgPSBuZXcgRXJyb3IoXCJcIiArIChldnQgfHwgXCJ1bmtub3duXCIpIClcbiAgICAgICAgfVxuICAgICAgICBldnQuc3RhdHVzQ29kZSA9IDBcbiAgICAgICAgY2FsbGJhY2soZXZ0LCBmYWlsdXJlUmVzcG9uc2UpXG4gICAgfVxuXG4gICAgLy8gd2lsbCBsb2FkIHRoZSBkYXRhICYgcHJvY2VzcyB0aGUgcmVzcG9uc2UgaW4gYSBzcGVjaWFsIHJlc3BvbnNlIG9iamVjdFxuICAgIGZ1bmN0aW9uIGxvYWRGdW5jKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dFRpbWVyKVxuICAgICAgICBcbiAgICAgICAgdmFyIHN0YXR1cyA9ICh4aHIuc3RhdHVzID09PSAxMjIzID8gMjA0IDogeGhyLnN0YXR1cylcbiAgICAgICAgdmFyIHJlc3BvbnNlID0gZmFpbHVyZVJlc3BvbnNlXG4gICAgICAgIHZhciBlcnIgPSBudWxsXG4gICAgICAgIFxuICAgICAgICBpZiAoc3RhdHVzICE9PSAwKXtcbiAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgIGJvZHk6IGdldEJvZHkoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBzdGF0dXMsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge30sXG4gICAgICAgICAgICAgICAgdXJsOiB1cmksXG4gICAgICAgICAgICAgICAgcmF3UmVxdWVzdDogeGhyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKXsgLy9yZW1lbWJlciB4aHIgY2FuIGluIGZhY3QgYmUgWERSIGZvciBDT1JTIGluIElFXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVycyA9IHBhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnIgPSBuZXcgRXJyb3IoXCJJbnRlcm5hbCBYTUxIdHRwUmVxdWVzdCBFcnJvclwiKVxuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKGVyciwgcmVzcG9uc2UsIHJlc3BvbnNlLmJvZHkpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3B0aW9ucyA9IHsgdXJpOiBvcHRpb25zIH1cbiAgICB9XG5cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhbGxiYWNrIGFyZ3VtZW50IG1pc3NpbmdcIilcbiAgICB9XG4gICAgY2FsbGJhY2sgPSBvbmNlKGNhbGxiYWNrKVxuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyIHx8IG51bGxcblxuICAgIGlmICgheGhyKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmNvcnMgfHwgb3B0aW9ucy51c2VYRFIpIHtcbiAgICAgICAgICAgIHhociA9IG5ldyBYRFIoKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHhociA9IG5ldyBYSFIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGtleVxuICAgIHZhciB1cmkgPSB4aHIudXJsID0gb3B0aW9ucy51cmkgfHwgb3B0aW9ucy51cmxcbiAgICB2YXIgbWV0aG9kID0geGhyLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8IFwiR0VUXCJcbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keSB8fCBvcHRpb25zLmRhdGFcbiAgICB2YXIgaGVhZGVycyA9IHhoci5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9XG4gICAgdmFyIHN5bmMgPSAhIW9wdGlvbnMuc3luY1xuICAgIHZhciBpc0pzb24gPSBmYWxzZVxuICAgIHZhciB0aW1lb3V0VGltZXJcblxuICAgIGlmIChcImpzb25cIiBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlzSnNvbiA9IHRydWVcbiAgICAgICAgaGVhZGVyc1tcIkFjY2VwdFwiXSB8fCAoaGVhZGVyc1tcIkFjY2VwdFwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiKSAvL0Rvbid0IG92ZXJyaWRlIGV4aXN0aW5nIGFjY2VwdCBoZWFkZXIgZGVjbGFyZWQgYnkgdXNlclxuICAgICAgICBpZiAobWV0aG9kICE9PSBcIkdFVFwiICYmIG1ldGhvZCAhPT0gXCJIRUFEXCIpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuanNvbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZWFkeXN0YXRlY2hhbmdlXG4gICAgeGhyLm9ubG9hZCA9IGxvYWRGdW5jXG4gICAgeGhyLm9uZXJyb3IgPSBlcnJvckZ1bmNcbiAgICAvLyBJRTkgbXVzdCBoYXZlIG9ucHJvZ3Jlc3MgYmUgc2V0IHRvIGEgdW5pcXVlIGZ1bmN0aW9uLlxuICAgIHhoci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBJRSBtdXN0IGRpZVxuICAgIH1cbiAgICB4aHIub250aW1lb3V0ID0gZXJyb3JGdW5jXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmksICFzeW5jKVxuICAgIC8vaGFzIHRvIGJlIGFmdGVyIG9wZW5cbiAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gISFvcHRpb25zLndpdGhDcmVkZW50aWFsc1xuICAgIFxuICAgIC8vIENhbm5vdCBzZXQgdGltZW91dCB3aXRoIHN5bmMgcmVxdWVzdFxuICAgIC8vIG5vdCBzZXR0aW5nIHRpbWVvdXQgb24gdGhlIHhociBvYmplY3QsIGJlY2F1c2Ugb2Ygb2xkIHdlYmtpdHMgZXRjLiBub3QgaGFuZGxpbmcgdGhhdCBjb3JyZWN0bHlcbiAgICAvLyBib3RoIG5wbSdzIHJlcXVlc3QgYW5kIGpxdWVyeSAxLnggdXNlIHRoaXMga2luZCBvZiB0aW1lb3V0LCBzbyB0aGlzIGlzIGJlaW5nIGNvbnNpc3RlbnRcbiAgICBpZiAoIXN5bmMgJiYgb3B0aW9ucy50aW1lb3V0ID4gMCApIHtcbiAgICAgICAgdGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgeGhyLmFib3J0KFwidGltZW91dFwiKTtcbiAgICAgICAgfSwgb3B0aW9ucy50aW1lb3V0KzIgKTtcbiAgICB9XG5cbiAgICBpZiAoeGhyLnNldFJlcXVlc3RIZWFkZXIpIHtcbiAgICAgICAgZm9yKGtleSBpbiBoZWFkZXJzKXtcbiAgICAgICAgICAgIGlmKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSl7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIZWFkZXJzIGNhbm5vdCBiZSBzZXQgb24gYW4gWERvbWFpblJlcXVlc3Qgb2JqZWN0XCIpXG4gICAgfVxuXG4gICAgaWYgKFwicmVzcG9uc2VUeXBlXCIgaW4gb3B0aW9ucykge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gb3B0aW9ucy5yZXNwb25zZVR5cGVcbiAgICB9XG4gICAgXG4gICAgaWYgKFwiYmVmb3JlU2VuZFwiIGluIG9wdGlvbnMgJiYgXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmJlZm9yZVNlbmQgPT09IFwiZnVuY3Rpb25cIlxuICAgICkge1xuICAgICAgICBvcHRpb25zLmJlZm9yZVNlbmQoeGhyKVxuICAgIH1cblxuICAgIHhoci5zZW5kKGJvZHkpXG5cbiAgICByZXR1cm4geGhyXG5cblxufVxuXG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuIiwiaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBzZWxmO1xufSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHt9O1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBvbmNlXG5cbm9uY2UucHJvdG8gPSBvbmNlKGZ1bmN0aW9uICgpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgJ29uY2UnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBvbmNlKHRoaXMpXG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIG9uY2UgKGZuKSB7XG4gIHZhciBjYWxsZWQgPSBmYWxzZVxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYWxsZWQpIHJldHVyblxuICAgIGNhbGxlZCA9IHRydWVcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICB9XG59XG4iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ2lzLWZ1bmN0aW9uJylcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcblxuZnVuY3Rpb24gZm9yRWFjaChsaXN0LCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGlmICghaXNGdW5jdGlvbihpdGVyYXRvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaXRlcmF0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJylcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgY29udGV4dCA9IHRoaXNcbiAgICB9XG4gICAgXG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobGlzdCkgPT09ICdbb2JqZWN0IEFycmF5XScpXG4gICAgICAgIGZvckVhY2hBcnJheShsaXN0LCBpdGVyYXRvciwgY29udGV4dClcbiAgICBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PT0gJ3N0cmluZycpXG4gICAgICAgIGZvckVhY2hTdHJpbmcobGlzdCwgaXRlcmF0b3IsIGNvbnRleHQpXG4gICAgZWxzZVxuICAgICAgICBmb3JFYWNoT2JqZWN0KGxpc3QsIGl0ZXJhdG9yLCBjb250ZXh0KVxufVxuXG5mdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGFycmF5LCBpKSkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBhcnJheVtpXSwgaSwgYXJyYXkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvckVhY2hTdHJpbmcoc3RyaW5nLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdHJpbmcubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgLy8gbm8gc3VjaCB0aGluZyBhcyBhIHNwYXJzZSBzdHJpbmcuXG4gICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgc3RyaW5nLmNoYXJBdChpKSwgaSwgc3RyaW5nKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9yRWFjaE9iamVjdChvYmplY3QsIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIgayBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrKSkge1xuICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmplY3Rba10sIGssIG9iamVjdClcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gaXNGdW5jdGlvblxuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24gKGZuKSB7XG4gIHZhciBzdHJpbmcgPSB0b1N0cmluZy5jYWxsKGZuKVxuICByZXR1cm4gc3RyaW5nID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8XG4gICAgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBzdHJpbmcgIT09ICdbb2JqZWN0IFJlZ0V4cF0nKSB8fFxuICAgICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAvLyBJRTggYW5kIGJlbG93XG4gICAgIChmbiA9PT0gd2luZG93LnNldFRpbWVvdXQgfHxcbiAgICAgIGZuID09PSB3aW5kb3cuYWxlcnQgfHxcbiAgICAgIGZuID09PSB3aW5kb3cuY29uZmlybSB8fFxuICAgICAgZm4gPT09IHdpbmRvdy5wcm9tcHQpKVxufTtcbiIsIlxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gdHJpbTtcblxuZnVuY3Rpb24gdHJpbShzdHIpe1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqfFxccyokL2csICcnKTtcbn1cblxuZXhwb3J0cy5sZWZ0ID0gZnVuY3Rpb24oc3RyKXtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKTtcbn07XG5cbmV4cG9ydHMucmlnaHQgPSBmdW5jdGlvbihzdHIpe1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1xccyokLywgJycpO1xufTtcbiIsInZhciB0cmltID0gcmVxdWlyZSgndHJpbScpXG4gICwgZm9yRWFjaCA9IHJlcXVpcmUoJ2Zvci1lYWNoJylcbiAgLCBpc0FycmF5ID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChoZWFkZXJzKSB7XG4gIGlmICghaGVhZGVycylcbiAgICByZXR1cm4ge31cblxuICB2YXIgcmVzdWx0ID0ge31cblxuICBmb3JFYWNoKFxuICAgICAgdHJpbShoZWFkZXJzKS5zcGxpdCgnXFxuJylcbiAgICAsIGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gcm93LmluZGV4T2YoJzonKVxuICAgICAgICAgICwga2V5ID0gdHJpbShyb3cuc2xpY2UoMCwgaW5kZXgpKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLCB2YWx1ZSA9IHRyaW0ocm93LnNsaWNlKGluZGV4ICsgMSkpXG5cbiAgICAgICAgaWYgKHR5cGVvZihyZXN1bHRba2V5XSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZVxuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkocmVzdWx0W2tleV0pKSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IFsgcmVzdWx0W2tleV0sIHZhbHVlIF1cbiAgICAgICAgfVxuICAgICAgfVxuICApXG5cbiAgcmV0dXJuIHJlc3VsdFxufSIsIm1vZHVsZS5leHBvcnRzPVwiNy4xLjVcIlxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdCA9IHJlcXVpcmUoJy4vdmVyc2lvbi5qc29uJyk7XG5cbmZ1bmN0aW9uIGdldCAodikge1xuICByZXR1cm4gJ3QnICsgdCArICc7dicgKyB2O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0OiBnZXRcbn07XG4iLG51bGwsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG4vLyBUT0RPKHNodHlsbWFuKVxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIl19
